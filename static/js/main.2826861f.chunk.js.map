{"version":3,"sources":["app/services/http/headers.js","app/services/http/http.js","app/containers/navigation/Navigation.jsx","app/containers/login-form/LoginForm.jsx","app/containers/masthead/Masthead.jsx","shared/components/edit-inline/EditInline.tsx","app/containers/simple-form/SimpleForm.tsx","app/components/error-loading/ErrorLoading.tsx","app/containers/framework-versions/FrameworkVersions.tsx","app/services/competency/body.js","app/services/competency/competency.js","app/services/active-requests/active-requests.js","app/services/util/util.js","app/containers/ManageAttributes.jsx","app/containers/version-controls/VersionControls.tsx","app/containers/ManageCompetencies.jsx","app/containers/ManageAttribute.jsx","app/containers/ManageCompetency.jsx","app/containers/ManageDomains.jsx","app/containers/ManageData.jsx","app/services/courses/courses.js","app/services/util/slugifier.js","app/containers/CompetencyDetails.jsx","app/components/competency-list/CompetencyList.jsx","app/components/domain-list/DomainList.jsx","app/containers/courses/Courses.jsx","app/containers/CompetencyList.jsx","app/containers/competency-nested-components/ProfilePanel.jsx","app/containers/VFTabsCompetencyList.jsx","app/containers/ResourceEdit.jsx","app/containers/ResourceCreate.jsx","app/containers/AttributeMap.jsx","app/containers/framework-versions/VersionNotice.jsx","app/containers/ResourceDetails.jsx","app/containers/ResourcesList.jsx","app/containers/ResourcesHome.jsx","app/containers/ChangePassword.jsx","app/containers/UserView.jsx","app/components/about/About.js","app/components/framework-button/FrameworkButton.jsx","app/components/framework-buttons/FrameworkButtons.jsx","app/components/Footer.jsx","app/services/auth/auth.js","app/containers/Association.jsx","app/containers/Frameworks.jsx","app/containers/CompetencySettings.jsx","app/containers/AttributeSettings.jsx","app/containers/AttributeDemap.jsx","app/services/profile/body.js","app/services/profile/profile.js","app/containers/ProfileCreate.jsx","app/containers/GuestHelp.jsx","app/containers/ProfileCreateGuest.jsx","shared/components/ProfileComparisonModal.jsx","app/containers/ProfileView.jsx","app/containers/ProfilesCompareButterfly.jsx","app/containers/ProfilesCompare.jsx","app/containers/ProfileMapDownload.jsx","app/containers/ProfileViewGuest.jsx","app/containers/ProfileMapGuest.jsx","app/containers/ProfileEdit.jsx","app/containers/ProfileMap.jsx","app/containers/ProfilesCompareSummary.jsx","app/containers/Documentation.jsx","app/containers/Login.jsx","app/containers/navigation/ManageFrameworks.jsx","app/containers/Breadcrumbs.jsx","app/containers/DevelopYourCourses.jsx","app/containers/Root.jsx","index.jsx","app/containers/user_icon.png","app/components/assets/CC_BY.png","app/components/assets/european-union.png","app/components/assets/PerMedCoE.jpg","app/components/assets/Bioexcel.png"],"names":["HeadersService","Object","classCallCheck","this","instance","type","arguments","length","undefined","csfrToken","window","localStorage","getItem","Accept","Content-Type","X-CSRF-Token","Authorization","checkUser","apiUrl","process","axios","defaults","baseURL","needTimeStamp","Date","now","HttpService","headers","Headers","url","credentialType","get","withCredentials","body","option","post","patch","Navigation","props","_this","possibleConstructorReturn","getPrototypeOf","call","navRef","React","createRef","logout","asyncToGenerator","regenerator_default","a","mark","_callee","onLogout","wrap","_context","prev","next","stop","state","user","frameworks","_this2","token","fetch","concat","method","credentials","then","Response","json","findresponse","setState","roles","frameworkResources","react_default","createElement","Fragment","className","key","react_router_dom","to","tabIndex","style","padding","trainingResources","userDropdown","href","onClick","cursor","includes","Component","LoginForm","onChange","event","defineProperty","currentTarget","name","value","submit","console","log","onSubmit","_this$state","username","password","showModal","e","preventDefault","_this$state2","OpenModal","dist","open","onClose","CloseModal","center","classNames","overlay","modal","autoComplete","placeholder","aria-hidden","Masthead","onLogin","_this$props","avoidPath","location","pathname","bgStyle","backgroundImage","JSON","stringify","marginBottom","width","height","xmlns","d","fill","fillRule","navigation_Navigation","defaultState","oriValue","active","EditInline","selfRef","inputRef","toggleActive","current","contains","target","reset","change","render","staticElement","editable","ref","aria-label","text","document","addEventListener","removeEventListener","prevProps","prevState","setTimeout","focus","defaultProps","newValue","description","uuid","mapping","SimpleForm","onCreate","trim","setDefaultOption","options","title","showMappingField","selectOptions","map","_ref","required","ErrorLoading","message","customStyles","content","top","left","right","bottom","marginRight","transform","border","FrameworkVersion","versions","framework","_useState","useState","_useState2","slicedToArray","showNotes","setShowNotes","_useState3","_useState4","notes","setNotes","versionItems","filter","version","number","id","release_notes","lib_default","isOpen","float","Parser","httpApiURl","replace","BodyService","_links","_embedded","domainId","domainUuid","_ref$mapping","draftId","draftUuid","target_id","field_map_other_competency","self","lang","_links2","_embedded2","_ref2","attributeTypeId","attributeTypeUuid","competencyId","competencyUuid","mutate","_ref3","releaseNotes","field_parent","field_release_notes","field_item","nodeId","vid","attribuiteId","_links4","_embedded4","resourceID","dates","dates2","target_audience","learning_outcomes","keywords","organisers","trainers","parentID","versionID","newData","addtional","field_type","field_additional_information","items","CompetencyService","http","response","data","Body","createAttribute","createCompetency","mutateCompetency","mutateDomain","mutateCompetencyPosition","toggleArchivingVersionedNode","attributeId","mutateAttribute","publishFramework","createDraftFramework","versionId","updateReleaseNotes","changeDomain","editResource","attribiuteId","changeAttributeSettings","resource","attributes","framework_id","createBulkData","saveSorting","ActiveRequestsService","counter","callbacks","fn","push","index","forEach","safeFlat","array","Array","prototype","flat","reduce","acc","cur","toConsumableArray","tagsReg","RegExp","nbspReg","removeHtmlTags","htmlString","replaceBy","ManageAttributes","activeRequests","competencyService","match","params","frameworkName","frameworkVersion","frameworStatus","attributeTypes","domainName","cid","competencyName","competencyData","path","split","loadingError","draftVersion","startRequest","find","attribute","fetchFramework","t0","enqueueSnackbar","variant","finishRequest","finish","scroll","loadData","fetchVersions","getAllVersionedFrameworks","allFrameworks","currentFramework","fw","toLowerCase","attribute_types","reverse","liveVersion","status","frameworkData","getVersionedDraftFramework","getVersionedFramework","competencyMatch","filterByCompetencyId","frameworkStatus","domainTitle","item","domains","domain","competencies","competency","nid","patchAttribute","position","patchAttributePosition","isArchived","attributeType","_this$state3","archived","EditInline_EditInline","editAttribute","field_number","editAttributePosition","toggleArchive","_this3","_this$state4","getAttributeRows","_this$state5","error_loading_ErrorLoading","SimpleForm_SimpleForm","getAttributeList","FrameworkVersions","withSnackbar","VersionControls","release","updateNotes","createDraft","curr","originalNotes","setVersion","_useState5","_useState6","pressedRelease","setPressedRelease","_useState7","_useState8","pressedNotes","setPressedNotes","react_ckeditor_component_lib_default","events","editor","getData","cleanNotes","ManageCompetencies","frameworkVersionId","competencyTypes","allowedFrms","releaseNewVersion","_callee2","_context2","_callee3","_context3","_callee4","_context4","refs","scrollIntoView","patchCompetency","patchCompetencyPosition","getCompetencyRows","_this4","editCompetency","editCompetencyPosition","bind","_this$state6","version_controls_VersionControls","getCompetencyList","ManageAttribute","sorting","closeModalPosition","_x","apply","parentTitle","showAttributeModal","attributeTypeTitle","newAttributes","typetitle","handleOpenAttributeModal","assertThisInitialized","handleCloseAttributeModal","OpenModalPosition","showModalPosition","dataset","competencyid","competencytitle","attributetype","aid","version_id","dragged","dataTransfer","effectAllowed","setData","display","parentNode","removeChild","from","Number","over","splice","insertBefore","frameworkDef","editableFrm","def","data-competencyid","data-competencytitle","data-typetitle","data-attributetype","attr","archiveAttribute","_this$props4","getAttributes","rows","setAttributes","saveAttributes","onDragOver","dragOver","i","listStyleType","data-position","draggable","onDragEnd","dragEnd","onDragStart","dragStart","ManageCompetency","comp","OpenModalMapping","CloseModalMapping","showModalMapping","mapped_other_competency","_this$props2","archiveCompetency","Collapsible_default","trigger","triggerWhenOpen","containers_ManageAttribute","_this$props3","getCompetencies","editMapping","activeclassName","config","toolbarGroups","groups","ManageDomains","newDomains","showModalCompetency","newCompetencies","archiveDomain","OpenModalCompetency","closeModalCompetency","handleRemoveCompetencies","setCompetencies","domainid","domaintitle","patchDomain","editDomain","data-domainid","data-domaintitle","containers_ManageCompetency","count","saveCompetencies","activeClass","paddingTop","handleAddMoreCompetencies","ManageData","_x2","_x3","parent","handleOpenModal","handleCloseModal","saveDomains","alert","_context7","containers_ManageDomains","setDomains","CoursesService","page","filterType","$framework","$competencyID","slugify","string","CompetencyDetails","coursesService","attributeDefs","resources","Promise","all","getFramework","getResources","URLSearchParams","search","element","getElementById","block","behavior","inline","getAllFrameworks","frameworkMatch","getByCompetency","training_resource_id","objectSpread","competencyDetails","resourceBlock","aria-current","CompetencyList","disable","trainingResourcesExist","attributesGrouped","groupBy","paddingLeft","close","parentIndex","DomainList","childIndex","components_competency_list_CompetencyList","frameworkDescription","filteredDomains","profileCount","pathwayCount","allResourcesFetched","visibleTabs","selectedTabIndex","pathnames","history","pathnames_count","onFilter","term","filteredCompetencies","test","currentUrl","vfTabs","fetchProfiles","fetchPathways","checkForTrainingResources","setCurrentTab","findResponse","publishing_status","frameWorkId","versionStatus","vr","attrTypes","_this5","domain_list_DomainList","jsonData","desc","data-vf-js-tabs","data-vf-js-tabs-content","_props$match$params","ResourceEdit","csrf","updateFlag","redirectTo","evt","newContent","csrfURL","findresponse2","fetchResource","field_dates","field_end_date","field_description","field_location","field_url","field_target_audience","field_learning_outcomes","field_domain_topics","field_organisers","field_trainers","ResourceEdit_EditForm","EditForm","setRedirect","redirect","handleTitle","handleDates","handleDates2","handleType","handleDesc","handleLocation","handleURL","handleTargetAudience","handleLearningOutcomes","handleKeywords","handleOrganisers","handleTrainers","d1","d2","dateValidate","cookies","format","handleSubmit","contextTypes","router","PropTypes","object","EditResources","react_router","exact","component","ResourceCreate","changeDescription","changeTargetAudience","changeLearningOutcomes","changeOrganisers","changeTrainers","CreateResources","$","AttributeMap","frameworkdetails","frameworkUUID","selectedAttributes","resourceDetails","resourcePath","handleSelect","checkedAttributes","attributeIDs","attrmap","childItems","getElementsByName","checked","getAttribute","indexOf","is","lists","each","competency_profile","profile","fetchFrameworkDetails","findresponse1","latest_version","detail","fetchCompetencyList","nextProps","nextState","frameworkDetails","frameworkDefs","domainsOptions","attributeTypeOptions","resDetails","selectedAttributesArray","selectedCompetenciesArray","ikey","attribute_type","data-id","ListOfCompetencies","did","defaultChecked","data-test","handleAllCheck","marginLeft","data-uuid","handleAttributeClick","AttrMap","Modal","setAppElement","ResourceDetails","selectedFramework","URL","pop","temp","fetchData","getSlugFromURLBar","resourcesURL","findresponse3","margin","start","end","months","start_dt","end_date","start_day","getDate","start_month","getMonth","start_year","getFullYear","end_day","end_month","end_year","rid","archivedStatus","field_archived","check_array","isArray","Resource","archiveHandle","formatDates","mappingBlock","overflow","overlayClassName","contentLabel","text-align","toUpperCase","data-close","containers_AttributeMap","selectedCompetencies","ResDetails","ResourcesList","filterMapping","userid","activePage","totalItemsCount","handlePageChange","searchSubmit","pageNumber","scrollTo","hitcount","author_id","ListOfResources","maxWidth","checkAuthor","author","filterTypeHandle","filterMappingHandle","for","alt","src","Pagination_default","itemsCountPerPage","pageRangeDisplayed","innerclassName","itemclassName","itemClassPrev","itemClassNext","linkclassName","prevPageText","nextPageText","Resources","ResourcesHome","ResourcesHomepage","ChangePassword","handlePasswordChange","old","new1","uid","pass","existing","resp","reload","UserView","setUser","setFrameworks","frm","setFrm","useEffect","field_frameworks","join","mail","About","FrameworkButton","sub_text","card_link","fill-rule","FrameworkButtons","framework_button_FrameworkButton","Footer","class","EU","loading","PerMed","BioExcel","backgroundColor","loginUrl","login","_login","sent","setItem","current_user","csrf_token","logout_token","abrupt","removeItem","Association","textAlign","link","Frameworks","handleLogin","error","t1","framework_buttons_FrameworkButtons","masterList","login_form_LoginForm","containers_Association","components_Footer","CompetencySettings","competencyUUID","competencyTitle","frameworkList","domainID","handleChange","onTextChange","competencyID","result","setMappingText","versoinManagerURL","selectedDomainID","selectedDomainUUID","field_domain","target_uuid","selectedIndex","competency_title","domain_id","domain_title","domainOptions","domainArray","colSpan","CompetencySettingsRoot","AttributeSettings","attributeID","attributeTypeID","attributeTypeUUID","changeSettings","handleCompetencyChange","handleTypeChange","selectedCompetencyID","field_competency","selectedCompetencyUUID","selectedAttributeTypeID","field_attribute_type","selectedAttributeTypeUUID","attribute_title","competency_id","attribute_type_id","attribute_type_title","competencyOptions","competencyArray","attributeTypeArray","rowSpan","AttributeSettingsRoot","AttributeDemap","demap","AttributeDemapRoot","frameworkId","frameworkUuid","age","currentRole","gender","jobTitle","qualification","additionalInfo","fileid","field_versions","field_age","field_current_role","field_gender","field_job_title","field_qualification_background","field_image","field_publishing_status","profileId","publishStatus","mappingBody","expertise","field_profile_mapping","ProfileService","createProfile","editProfile","mapProfile","versionNumber","current_role","job_title","qualification_background","additional_information","image","existingGuestProfile","parse","profile_mapping","guestProfile","doc","jsPDF","setFont","qDim","currentDate","moment","currentTime","pdfWidth","internal","pageSize","getWidth","pdfHeight","getHeight","marginright","fifthCol","profileBody","pdfProfileImgHeight","selectedFile","selectedFileData","currentYAxis","setFontType","setFontSize","frameworkLogoData","pdfLogoHeight","logoData","addImage","imgData","splitTextToSize","getTextDimensions","fromHTML","h","jobTitleUnderscored","save","ProfileCreate","profileService","setTitle","setAge","setCurrentRole","setGender","_useState9","_useState10","setSelectedFile","_useState11","_useState12","setSelectedFileData","_useState13","_useState14","imgpreview","setImgpreview","_useState15","_useState16","fileSizeError","setFileSizeError","_useState17","_useState18","fileTypeError","setFileTypeError","_useState19","_useState20","setJobTitle","_useState21","_useState22","setQualification","_useState23","_useState24","setAdditionalInfo","_useState25","_useState26","setFramework","_useState27","_useState28","setProfile","_useState29","_useState30","frameworkMoreData","setFrameworkMoreData","promise1","promise2","data1","data2","response1","response2","storedProfile","bootstrap","_ref4","ver","mapDownloadProfile","mappingAttributes","accept","Content-Disposition","fid","getWhoCreateProfile","titleCalloutClass","jobTitleCalloutClass","nameHelp","jobTitleHelp","defaultValue","files","size","reader","FileReader","img","Image","readAsDataURL","clearimgpreview","ckeditor_default","ClassicEditor","onInit","submitButtonLabel","CreateProfile","GuestHelp","modalOpen","closeModal","ProfileCreateGuest","useHistory","setModelOpen","parseInt","_ref5","createGuestProfile","openModal","containers_GuestHelp","Path","background","WebkitOverflowScrolling","borderRadius","outline","ProfileComparisonModal","includeGuestProfile","setShowModal","currentProfile","profiles","linkVariant","onRequestClose","fontWeight","setSelectedProfileId","color","comparisonError","redirectToCompare","ProfileView","setProfiles","selectedProfileId","frameworkInfo","setFrameworkInfo","setComparisonError","userFrameworks","setUserFrameworks","competencyView","expertise_levels_legend","frameworkFullName","user_roles","userName","profilesExcludingCurrentProfile","p","getExpertise","obj","o","info","expertise_levels","level","getBarWidth","totalLevels","rating_level","infoIndex","levelIndex","data-tip","data-html","data-type","data-multiline","index_es","itemIndex","domainIndex","compIndex","typeIndex","attrIndex","getAttributeStatus","ProfileComparisonModal_ProfileComparisonModal","marginTop","print","ViewProfile","ProfilesCompareButterfly","isGuestProfile","profile1","profile2","mapping1","mapping2","expertise_array","chart_props","includeSummary","profileid","label","frmIndex","profile1Expertise","profile2Expertise","width1","margin1","width2","floatRight","generateProfileView","textAling","profileJobTitle","handleSummary","handlePrint","ProfilesCompare","profile1Id","profile2Id","setProfile1","setProfile2","setIsGuestProfile","link1","setLink1","link2","setLink2","user_icon","containers_ProfilesCompareButterfly","sendRoute","ProfileMapDownload","expertiseLevels","setExpertiseLevels","competencyForm","expertise_not_applicable","promiseFramework","promiseVersion","dataFramework","dataVersion","responseFramework","responseVersion","getExpertiseLevels","downloadProfileFromHtml","addCompetencyAttributes","removeCompetencyAttributes","fId","levels","margins","source","profileTitle","elementHandlers","#editor","renderer","dispose","setFieldContent","heading","field","__html","jIndex","attribute_id","findIndex","prop","handleCheckboxMapping","data-competency","htmlFor","expertise_id","tempMap","handleMapping","data-expertise","generateForm","charAt","slice","dangerouslySetInnerHTML","MapProfileDownload","ProfileViewGuest","data-accordion-item","ViewGuestProfile","ProfileMapGuest","setMapping","mapProfileGuest","checkboxStatus","tempMapping","handleCheckBox","disabled","attributesList","checkBoxes","arr","ProfileEdit","setFid","setPublishStatus","checkFMAccess","objectUrl","createObjectURL","EditProfile","ProfileMap","MapProfile","ProfilesCompareSummary","useLocation","summary","setSummary","resourceLink","rel","resourceName","findResources","SummaryPath","Documentation","swagger_ui_react","spec","Login","ManageFrameworks","exportURL","Breadcrumbs","convertFrameworkName","DevelopYourCourses","Root","isActive","handleActiveRequests","hasPendingRequests","detectUserChangesFromOtherTabs","handleLogout","subcription","build","maxSnack","anchorOrigin","vertical","horizontal","preventDuplicate","containers_Breadcrumbs","masthead_Masthead","role","Root_ProtectedRoute","condition","ProtectedRoute","objectWithoutProperties","assign","root","ReactDOM","basename","containers_Root","module","exports","__webpack_require__"],"mappings":"8QA+BeA,aA5Bb,SAAAA,IACE,GADaC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GACTA,EAAeI,SACjB,OAAOD,KAAKC,SAGdJ,EAAeI,SAAWD,uDAGL,IAAnBE,EAAmBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,WACHG,EAAYC,OAAOC,aAAaC,QAAQ,cAC9C,MAAa,SAATP,EACK,CACLQ,OAAQ,mBACRC,eAAgB,mBAChBC,eAAgBN,EAChBO,cAAe,SAIZ,CACLH,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgBN,EAChBO,cAAe,mCCvBfC,EAAYN,aAAaC,QAAQ,UAE1BM,EAASD,EAClBE,mCACAA,wBAYJC,IAAMC,SAASC,QAAUJ,EAEzB,IAAMK,EAAgBN,EAAY,cAAgBO,KAAKC,MAAQ,GA+ChDC,aAzCb,SAAAA,IACE,GADazB,OAAAC,EAAA,EAAAD,CAAAE,KAAAuB,GAAAvB,KAFfwB,QAAU,IAAIC,EAGRF,EAAYtB,SACd,OAAOsB,EAAYtB,SAGrBsB,EAAYtB,SAAWD,qDAGrB0B,GAA0B,IAArBC,EAAqBxB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACxB,OAAIwB,EACKV,IAAMW,IAAIF,EAAK,CACpBF,QAASxB,KAAKwB,QAAQI,IAAID,GAC1BE,iBAAiB,IAGdZ,IAAMW,IAAIF,EAAM,wBAA0BN,gCAG9CM,EAAKI,GAA2B,IAArBC,EAAqB5B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,WAKvB,OAAOc,IAAMe,KAAKhB,mCAA0CU,EAAKI,EAAM,CACrEN,QAASxB,KAAKwB,QAAQI,IAAIG,GAC1BF,iBAAiB,kCAIfH,EAAKI,GAA2B,IAArBC,EAAqB5B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,WAKxB,OAAOc,IAAMgB,MAAMjB,mCAA0CU,EAAKI,EAAM,CACtEN,QAASxB,KAAKwB,QAAQI,IAAIG,GAC1BF,iBAAiB,aC4DRK,cA9Gb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkC,IACjBE,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAoC,GAAAK,KAAAvC,KAAMmC,KAHRK,OAASC,IAAMC,YAEIN,EA0BnBO,OA1BmB7C,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KA0BV,SAAAC,IAAA,IAAAC,EAAA,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACCJ,EAAab,EAAKD,MAAlBc,SADDE,EAAAE,KAAA,EAEDJ,IAFC,wBAAAE,EAAAG,SAAAN,MAxBPZ,EAAKmB,MAAQ,CACXC,KAAMpB,EAAKD,MAAMqB,KACjBC,WAAY,IAJGrB,mFAQC,IAAAsB,EAAA1D,KAEd2D,EAAQnD,aAAaC,QAAQ,cACjCmD,MAAK,GAAAC,OAAI9C,EAAJ,uBAAA8C,OAAgC7D,KAAKuD,MAAMC,KAA3C,iBAAgE,CACnEM,OAAQ,MACRC,YAAa,UACbvC,QAAS,CACPZ,eAAgB+C,KAGjBK,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CACZX,WAAYU,uCAUX,IACCE,EAAUrE,KAAKmC,MAAfkC,MACFC,EACJC,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBC,IAAI,cAChCJ,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEF,UAAU,UACVG,GAAG,qBACHC,SAAS,KAHX,sBAQFP,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBK,MAAO,CAAEC,QAAS,QAAhD,MAMEC,EACJV,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBC,IAAI,aAChCJ,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMF,UAAU,UAAUG,GAAG,2BAA7B,8BAIFN,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBK,MAAO,CAAEC,QAAS,QAAhD,MAMEE,EACJX,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MACEE,UAAU,gBACVC,IAAI,YACJI,MAAO,CAAEC,QAAS,QAElBT,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMF,UAAU,UAAUG,GAAI,cAA9B,eAIFN,EAAAzB,EAAA0B,cAAA,MACEE,UAAU,gBACVC,IAAI,YACJI,MAAO,CAAEC,QAAS,QAElBT,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMF,UAAU,UAAUG,GAAI,yBAA9B,oBAIFN,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBK,MAAO,CAAEC,QAAS,QAC9CT,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,UACVS,KAAK,IACLC,QAASpF,KAAK2C,OACdoC,MAAO,CAAEM,OAAQ,YAJnB,YAYN,OACEd,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kDACXL,EAAMiB,SAAS,sBAAwBhB,EACvCD,EAAMiB,SAAS,oBAAsBL,EACrCC,YAzGYK,sCC+GVC,cA9Gb,SAAAA,EAAYrD,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAwF,IACjBpD,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAA0F,GAAAjD,KAAAvC,KAAMmC,KAaRsD,SAAW,SAAAC,GACTtD,EAAKgC,SAALtE,OAAA6F,EAAA,EAAA7F,CAAA,GAAiB4F,EAAME,cAAcC,KAAOH,EAAME,cAAcE,SAf/C1D,EA2BnB2D,OAAS,WACPC,QAAQC,IAAI,eADC,IAELC,EAAa9D,EAAKD,MAAlB+D,SAFKC,EAGkB/D,EAAKmB,MAA5B6C,EAHKD,EAGLC,SAAUC,EAHLF,EAGKE,SACdD,GAAYC,GACdH,EAASE,EAAUC,IA9BrBjE,EAAKmB,MAAQ,CACX+C,WAAW,EACXF,SAAU,GACVC,SAAU,IALKjE,yEAkBTmE,GACRA,EAAEC,iBACFxG,KAAKoE,SAAS,CAAEkC,WAAW,yCAI3BtG,KAAKoE,SAAS,CAAEkC,WAAW,qCAYpB,IAAA5C,EAAA1D,KAAAyG,EACwBzG,KAAKuD,MAA5B6C,EADDK,EACCL,SAAUC,EADXI,EACWJ,SAClB,OACE9B,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KAWEF,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,IAAIC,QAAS,SAAAmB,GAAC,OAAI7C,EAAKgD,UAAUH,KAAzC,2BAIFhC,EAAAzB,EAAA0B,cAAA,iDAEFD,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM+C,UACjBO,QAAS,SAAAN,GAAC,OAAI7C,EAAKoD,cACnBC,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,yBACAD,EAAAzB,EAAA0B,cAAA,yFAKFD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,SACEsB,MAAOM,EACPP,KAAK,WACLJ,SAAU,SAAAC,GAAK,OAAIhC,EAAK+B,SAASC,IACjCxF,KAAK,OACLiH,aAAa,WACbC,YAAY,WACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,SACEsB,MAAOO,EACPR,KAAK,WACLJ,SAAU,SAAAC,GAAK,OAAIhC,EAAK+B,SAASC,IACjCxF,KAAK,WACLiH,aAAa,mBACbC,YAAY,WACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAAS,kBAAM1B,EAAKqC,WAEpBxB,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,YAAY2C,cAAY,SAJvC,oBAtGY9B,aCqGT+B,6MA1FbC,QAAU,SAACnB,EAAUC,GACnBjE,EAAKD,MAAMoF,QAAQnB,EAAUC,MAG/BpD,8BAAW,SAAAD,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACHjB,EAAKD,MAAMc,WADR,wBAAAE,EAAAG,SAAAN,8EAIF,IAAAwE,EAG2BxH,KAAKmC,MAA/BkC,EAHDmD,EAGCnD,MAAOb,EAHRgE,EAGQhE,KACTiE,EAJCD,EAGcE,SACMC,SAErBC,EAAU,CACdC,gBACE,OACAC,KAAKC,UACH,+HAEF,IACFC,aAAc,GAGhB,OACEzD,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACIgD,EAAUnC,SAAS,iBACpBmC,EAAUnC,SAAS,mBACnBmC,EAAUnC,SAAS,qBACnBmC,EAAUnC,SAAS,iBACnBmC,EAAUnC,SAAS,eAqDlB,GApDAf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,2BAA2BK,MAAO6C,GACnDrD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sDACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,oBAAd,kBAKAH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,uBAAb,2GAOAH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMF,UAAU,gBAAgBG,GAAG,UAAnC,uDAEEN,EAAAzB,EAAA0B,cAAA,OACEyD,MAAM,KACNC,OAAO,KACPC,MAAM,8BAEN5D,EAAAzB,EAAA0B,cAAA,QACE4D,EAAE,sQACFC,KAAK,GACLC,SAAS,gBAMnB/D,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,WACGhB,GAAQa,EACPE,EAAAzB,EAAA0B,cAAC+D,EAAD,CACElE,MAAOA,EACPb,KAAMA,EACNP,SAAUjD,KAAKiD,WAGjB,cApFKsC,aCKjBiD,UAAe,CACnBC,SAAU,GACV3C,MAAO,GACP4C,QAAQ,IAKWC,6MAEVpF,MAAeiF,IACxBI,QAAUnG,IAAMC,cAChBmG,SAAWpG,IAAMC,cA0BjBoG,aAAe,SAACpD,GAEZtD,EAAKwG,QAAQG,SACb3G,EAAKwG,QAAQG,QAAQC,SAAStD,EAAMuD,QAEpC7G,EAAKgC,SAAS,CAAEsE,QAAQ,IAG1BtG,EAAK8G,WAOPA,MAAQ,WAAM,IAAA/C,EACiB/D,EAAKmB,MAA1BkF,EADItC,EACJsC,SADItC,EACMuC,QAEhBtG,EAAKgC,SAAS,CAAEsE,QAAQ,EAAO5C,MAAO2C,OAI1C1C,OAAS,WAAM,IACLoD,EAAW/G,EAAKD,MAAhBgH,OACArD,EAAU1D,EAAKmB,MAAfuC,MACRqD,EAAQrD,GACR1D,EAAKgC,SAAS,CAAEsE,QAAQ,EAAOD,SAAU3C,OAG3CsD,OAAS,WAAM,IAAA5B,EAC8BpF,EAAKD,MAAxC4C,EADKyC,EACLzC,MAAOsE,EADF7B,EACE6B,cAAeC,EADjB9B,EACiB8B,SADjB7C,EAEarE,EAAKmB,MAAvBuC,EAFKW,EAELX,MAAO4C,EAFFjC,EAEEiC,OAEf,OAAKY,EAIAZ,EAeHnE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBAAwB6E,IAAKnH,EAAKwG,SAC/CrE,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLwE,UAAU,6BACVoB,MAAOA,EACPL,SAAU,SAAAC,GAAK,OAAItD,EAAKqD,SAASC,EAAMuD,OAAOnD,QAC9CyD,IAAKnH,EAAKyG,WAGZtE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,4BACVxE,KAAK,SACLkF,QAAShD,EAAK2D,QAEdxB,EAAAzB,EAAA0B,cAAA,KACEE,UAAU,8BACV8E,aAAW,oBAGfjF,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,4BACVxE,KAAK,SACLkF,QAAShD,EAAK8G,OAEd3E,EAAAzB,EAAA0B,cAAA,KACEE,UAAU,6BACV8E,aAAW,oBAzCZ/G,IAAM+B,cAAc6E,EAAgB,CAAEtE,QAAOwE,IAAKnH,EAAKwG,SAAW,CACvE9C,EACAvB,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,KACEG,IAAI,QACJD,UAAU,oEACV8E,aAAW,SAEbjF,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,yBAAhB,WAZGjC,IAAM+B,cAAc6E,EAAgB,CAAEtE,SAASe,uFA1DtC,IACV2D,EAASzJ,KAAKmC,MAAdsH,KACRzJ,KAAKoE,SAAS,CAAE0B,MAAO2D,EAAOhB,SAAUgB,IACxCC,SAASC,iBAAiB,YAAa3J,KAAK8I,6DAI5CY,SAASE,oBAAoB,YAAa5J,KAAK8I,yDAG9Be,EAAkBC,GAAkB,IAAApG,EAAA1D,KAClCA,KAAKuD,MAAhBmF,SACOoB,EAAUpB,QAKvBqB,WACE,kBAAMrG,EAAKmF,SAASE,SAAWrF,EAAKmF,SAASE,QAAQiB,SACrD,oCAgBGlE,GACP9F,KAAKoE,SAAS,CAAE0B,iBA1CoBP,aAAnBoD,EACZsB,aAnBY,CACnBlF,MAAO,GACP0E,KAAM,GACNN,OAAQ,SAACe,KACTb,cAAe,MACfC,UAAU,GCPZ,IAWMd,EAAe,CACnB2B,YAAa,GACbC,KAAM,GACNC,QAAS,IAKUC,6MAEV/G,MAAQiF,IAmBjB/C,SAAW,SAACC,GACVA,EAAMc,iBADqE,IAEnEV,EAAUJ,EAAME,cAAhBE,MACFD,EAAOH,EAAME,cAAcC,KAEpB,SAATA,GACFzD,EAAKgC,SAALtE,OAAA6F,EAAA,EAAA7F,CAAA,GAAiB+F,EAAOC,IAEb,gBAATD,GACFzD,EAAKgC,SAALtE,OAAA6F,EAAA,EAAA7F,CAAA,GAAiB+F,EAAOC,IAEb,YAATD,GACFzD,EAAKgC,SAALtE,OAAA6F,EAAA,EAAA7F,CAAA,GAAiB+F,EAAOC,OAI5BI,SAAW,SAACR,GACVA,EAAMc,iBADgD,IAE9C+D,EAAanI,EAAKD,MAAlBoI,SAF8CpE,EAGf/D,EAAKmB,MAApC4G,EAH8ChE,EAG9CgE,YAAaC,EAHiCjE,EAGjCiE,KAAMC,EAH2BlE,EAG3BkE,QAEvBF,EAAYK,QAAUJ,IACxBG,EAASJ,EAAaC,EAAMC,GAC5BjI,EAAK8G,6FAvCPlJ,KAAKyK,8DAGY,IACTC,EAAY1K,KAAKmC,MAAjBuI,QACR,GAAIA,EAAQtK,OAAQ,KACVgK,EAASM,EAAQ,GAAjBN,KACRpK,KAAKoE,SAAS,CAAEgG,0CAKlBpK,KAAKoE,SAASoE,GACdxI,KAAKyK,oDA8BE,IAAAjD,EACmDxH,KAAKmC,MAAvDwI,EADDnD,EACCmD,MAAOvD,EADRI,EACQJ,YAAasD,EADrBlD,EACqBkD,QAASE,EAD9BpD,EAC8BoD,iBAD9BnE,EAEgCzG,KAAKuD,MAApC4G,EAFD1D,EAEC0D,YAAaC,EAFd3D,EAEc2D,KAAMC,EAFpB5D,EAEoB4D,QAErBQ,EAAgBH,EAAQI,IAAI,SAAAC,GAAA,IAAGZ,EAAHY,EAAGZ,YAAaC,EAAhBW,EAAgBX,KAAhB,OAChC7F,EAAAzB,EAAA0B,cAAA,UAAQG,IAAKyF,EAAMtE,MAAOsE,GACvBD,KAIL,OACE5F,EAAAzB,EAAA0B,cAAA,QAAM0B,SAAUlG,KAAKkG,SAAUxB,UAAU,WACvCH,EAAAzB,EAAA0B,cAAA,UAAKmG,GACLpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLkH,YAAaA,EACbvB,KAAK,cACLC,MAAOqE,EACPa,UAAQ,EACRvF,SAAUzF,KAAKyF,YAGnBlB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBACbH,EAAAzB,EAAA0B,cAAA,UAAQqB,KAAK,OAAOC,MAAOsE,EAAMY,UAAQ,EAACvF,SAAUzF,KAAKyF,UACtDoF,IAGLtG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBACbH,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,SAASwE,UAAU,SAASoB,MAAM,YAE/C8E,EACCrG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,UACbH,EAAAzB,EAAA0B,cAAA,iEAEED,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLkH,YAAY,+CACZvB,KAAK,UACLC,MAAOuE,EACP5E,SAAUzF,KAAKyF,aAInB,cA7F0BF,aAAnB+E,EACZL,aApBY,CACnBW,kBAAkB,GCDpB,IAOaK,EAAgC,SAAAF,GAAwB,IAArBG,EAAqBH,EAArBG,QAASnG,EAAYgG,EAAZhG,MACvD,OACER,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iCAAiCK,MAAOA,GACpDmG,IAKPD,EAAahB,aAfQ,CACnBiB,QAAS,qDACTnG,MAAO,IAeMkG,iDCLTE,EAAe,CACnBC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,UAAW,wBACXzD,MAAO,MACPC,OAAQ,MACRyD,OAAQ,mBAsEGC,EAlEkC,SAAAb,GAA6B,IAA1Bc,EAA0Bd,EAA1Bc,SAAUC,EAAgBf,EAAhBe,UAAgBC,EAC1CC,oBAAS,GADiCC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GACrEI,EADqEF,EAAA,GAC1DG,EAD0DH,EAAA,GAAAI,EAElDL,mBAAS,IAFyCM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAErEE,EAFqED,EAAA,GAE9DE,EAF8DF,EAAA,GAMtEG,EAAeZ,EAClBa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQC,SAC1B9B,IAAI,SAAA6B,GAAO,OACVpI,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKgI,EAAQE,IACftI,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,cAAAhB,OAAgBiI,EAAhB,KAAAjI,OAA6B8I,EAAQC,SAC1CD,EAAQC,QACH,IACRrI,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,kBACVU,QAAS,WACPoH,EAAS,YAAcG,EAAQC,OAASD,EAAQG,eAChDV,GAAa,KAJjB,sBAYN,OACE7H,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAACuI,EAAAjK,EAAD,CAAOkK,OAAQb,EAAWpH,MAAOoG,GAC/B5G,EAAAzB,EAAA0B,cAAA,+BAAuBsH,EAAvB,KACAvH,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAEkI,MAAO,UACnB1I,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,SACVU,QAAS,WACPoH,EAAS,IACTJ,GAAa,KAJjB,MAUDc,IAAOX,GACPE,EACDlI,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBACbH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,SACVU,QAAS,WACPoH,EAAS,IACTJ,GAAa,KAJjB,WAWJ7H,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,gCACqB,IAApBqH,EAASzL,OACR,uBAEAmE,EAAAzB,EAAA0B,cAAA,UAAKiI,cCpFTU,EAAapM,EAAOqM,QAAQ,QAAS,QAqf5BC,mHA3eV,IAAAC,EAAAC,EANDpD,EAMCY,EANDZ,YACAqD,EAKCzC,EALDyC,SACAC,EAIC1C,EAJD0C,WAICC,EAAA3C,EAHDV,eAGC,IAAAqD,EAHS,GAGTA,EAFDC,EAEC5C,EAFD4C,QACAC,EACC7C,EADD6C,UAEA,MAAO,CACLN,QAAMA,EAAA,CACJpN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,gCAFFrN,OAAA6F,EAAA,EAAA7F,CAAAwN,EAAA,GAAAzJ,OAIAsJ,EAJA,+CAI0D,CAC5DhI,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwB2J,EAAxB,uBALF1N,OAAA6F,EAAA,EAAA7F,CAAAwN,EAAA,GAAAzJ,OAOAsJ,EAPA,iDAO4D,CAC9D,CACEhI,KAAI,gDAAAtB,OAAkD8J,EAAlD,wBATJL,GAaN3C,MAAO,CACL,CACE7E,MAAOqE,IAGXjK,KAAM,CACJ,CACE2N,UAAW,eAGfC,2BAA4B,CAC1B,CACEhI,MAAOuE,IAGXkD,WAASA,EAAA,GAAAzN,OAAA6F,EAAA,EAAA7F,CAAAyN,EAAA,GAAA1J,OACHsJ,EADG,iDACyD,CAC9D,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,mBAAAtJ,OAAiC8J,EAAjC,sBAENzN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,sCAGR/C,KAAM,CACJ,CACEtE,MAAO8H,OAbR9N,OAAA6F,EAAA,EAAA7F,CAAAyN,EAAA,GAAA1J,OAkBHsJ,EAlBG,+CAkBuD,CAC5D,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwB2J,EAAxB,sBAENtN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,4BAGR/C,KAAM,CACJ,CACEtE,MAAO2H,IAGXO,KAAM,QAjCHT,+CAgDV,IAAAU,EAAAC,EAPD/D,EAOCgE,EAPDhE,YACAiE,EAMCD,EANDC,gBACAC,EAKCF,EALDE,kBACAC,EAICH,EAJDG,aACAC,EAGCJ,EAHDI,eACAZ,EAECQ,EAFDR,QACAC,EACCO,EADDP,UAEA,MAAO,CACLN,QAAMW,EAAA,CACJ/N,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,+BAFFrN,OAAA6F,EAAA,EAAA7F,CAAAmO,EAAA,GAAApK,OAIAsJ,EAJA,kDAI6D,CAC/DhI,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwByK,EAAxB,uBALFxO,OAAA6F,EAAA,EAAA7F,CAAAmO,EAAA,GAAApK,OAOAsJ,EAPA,sDAOiE,CACnEhI,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwBuK,EAAxB,uBARFtO,OAAA6F,EAAA,EAAA7F,CAAAmO,EAAA,GAAApK,OAUAsJ,EAVA,iDAU4D,CAC9D,CACEhI,KAAI,gDAAAtB,OAAkD8J,EAAlD,wBAZJM,GAgBNtD,MAAO,CACL,CACE7E,MAAOqE,IAGXjK,KAAM,CACJ,CACE2N,UAAW,cAIfN,WAASW,EAAA,GAAApO,OAAA6F,EAAA,EAAA7F,CAAAoO,EAAA,GAAArK,OACHsJ,EADG,iDACyD,CAC9D,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,mBAAAtJ,OAAiC8J,EAAjC,sBAENzN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,sCAGR/C,KAAM,CACJ,CACEtE,MAAO8H,OAbR9N,OAAA6F,EAAA,EAAA7F,CAAAoO,EAAA,GAAArK,OAkBHsJ,EAlBG,kDAkB0D,CAC/D,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwByK,EAAxB,sBAENpO,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,gCAGR/C,KAAM,CACJ,CACEtE,MAAOyI,IAGXP,KAAM,QAjCHlO,OAAA6F,EAAA,EAAA7F,CAAAoO,EAAA,GAAArK,OAoCHsJ,EApCG,sDAoC8D,CACnE,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwBuK,EAAxB,sBAENlO,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,oCAGR/C,KAAM,CACJ,CACEtE,MAAOuI,IAGXL,KAAM,QAnDHE,6CA0DWvJ,EAAKmB,GAC3B,OAAOuH,EAAYmB,OAAO7J,EAAKmB,EAAO,+DAGRnB,EAAKmB,GACnC,OAAOuH,EAAYmB,OAAO7J,EAAKmB,EAAO,sDAGjBnB,EAAKmB,GAC1B,OAAOuH,EAAYmB,OAAO7J,EAAKmB,EAAO,kDAGpBnB,EAAKmB,GACvB,OAAOuH,EAAYmB,OAAO7J,EAAKmB,EAAO,yCAG1BnB,EAAKmB,EAAOmD,GAAQ,IAAAwF,EAChC,OAAAA,EAAA,CACEnB,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,oBAAAtJ,OAAkCoF,MAH5CnJ,OAAA6F,EAAA,EAAA7F,CAAA2O,EAOG9J,EAAM,CACL,CACEmB,MAAOA,KATbhG,OAAA6F,EAAA,EAAA7F,CAAA2O,EAAA,OAYQ,CACJ,CACEZ,UAAW5E,KAdjBwF,2CAoBsB3C,EAAWa,EAAS+B,GAC1C,MAAO,CACLxO,KAAM,CACJ,CACE2N,UAAW,YAGflD,MAAO,CACL,CACE7E,MAAOgG,IAGX6C,aAAc,CACZ,CACE7I,MAAOgG,IAGX8C,oBAAqB,CACnB,CACE9I,MAAO4I,IAGXG,WAAY,CACV,CACE/I,MAAO6G,kDAMab,GAC1B,MAAO,CACL5L,KAAM,CACJ,CACE2N,UAAW,YAGflD,MAAO,CACL,CACE7E,MAAO,UAGX6I,aAAc,CACZ,CACE7I,MAAOgG,0DAMqBA,EAAWgD,GAC7C,MAAO,CACL5O,KAAM,CACJ,CACE2N,UAAW,YAGfc,aAAc,CACZ,CACE7I,MAAOgG,IAGX+C,WAAY,CACV,CACE/I,MAAOgJ,gDAMWvC,GACxB,MAAO,CACLe,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,OAECsJ,EAFD,sCAKR4B,IAAK,CACH,CACElB,UAAW,YAGfe,oBAAqB,CACnB,CACE9I,MAAOyG,0CAQK+B,EAAcd,EAAUC,EAAYpD,GACtD,MAAO,CACLiD,OAAOxN,OAAA6F,EAAA,EAAA7F,CAAA,CACLiO,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwByK,EAAxB,sBAENpO,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,gCALF,GAAAtJ,OAOAsJ,EAPA,+CAO0D,CAC5DhI,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwB2J,EAAxB,uBAGRM,2BAA4B,CAC1B,CACEhI,MAAOuE,IAGXnK,KAAM,CACJ2N,UAAW,cAEbN,UAAUzN,OAAA6F,EAAA,EAAA7F,CAAA,MAAA+D,OACJsJ,EADG,+CACuD,CAC5D,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwB2J,EAAxB,sBAENtN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,4BAGR/C,KAAM,CACJ,CACEtE,MAAO2H,wDAYnBuB,EACAV,EACAC,EACAH,EACAC,GACA,IAAAY,EAAAC,EACA,MAAO,CACL5B,QAAM2B,EAAA,CACJlB,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwBmL,EAAxB,sBAEN9O,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,+BALFrN,OAAA6F,EAAA,EAAA7F,CAAAmP,EAAA,GAAApL,OAOAsJ,EAPA,kDAO6D,CAC/DhI,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwByK,EAAxB,uBARFxO,OAAA6F,EAAA,EAAA7F,CAAAmP,EAAA,GAAApL,OAUAsJ,EAVA,sDAUiE,CACnEhI,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwBuK,EAAxB,uBAXFa,GAcN/O,KAAM,CACJ2N,UAAW,aAEbN,WAAS2B,EAAA,GAAApP,OAAA6F,EAAA,EAAA7F,CAAAoP,EAAA,GAAArL,OACHsJ,EADG,kDAC0D,CAC/D,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwByK,EAAxB,sBAENpO,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,gCAGR/C,KAAM,CACJ,CACEtE,MAAOyI,OAbRzO,OAAA6F,EAAA,EAAA7F,CAAAoP,EAAA,GAAArL,OAkBHsJ,EAlBG,sDAkB8D,CACnE,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,EAAL,UAAAtJ,OAAwBuK,EAAxB,sBAENlO,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,oCAGR/C,KAAM,CACJ,CACEtE,MAAOuI,OA9BRa,yCAwCXC,EACAxE,EACAyE,EACAC,EACAnP,EACAiK,EACAzC,EACAhG,EACA4N,EACAC,EACAC,EACAC,EACAC,GAEA,MAAO,CACLpC,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,EAAL,uCAGRxC,MAAO,CACL,CACE7E,MAAO6E,IAIXzK,KAAM,CACJ,CACE2N,UAAW,8DAMG8B,EAAUC,EAAWC,EAAS3P,EAAM4P,GACxD,MAAO,CACL5P,KAAM,CACJ,CACE2N,UAAW,YAGf/L,KAAM,CACJ,CACEgE,MAAO+J,IAGXlB,aAAc,CACZ,CACE7I,MAAO6J,IAGXd,WAAY,CACV,CACE/I,MAAO8J,IAGXG,WAAY,CACV,CACEjK,MAAO5F,IAGX8P,6BAA8B,CAC5B,CACElK,MAAOgK,yCAMIG,GACjB,MAAO,CACL/P,KAAM,CACJ,CACE2N,UAAW,YAGf/L,KAAM,CACJ,CACEgE,MAAOmK,cC7OFC,aA7Pb,SAAAA,IACE,GADapQ,OAAAC,EAAA,EAAAD,CAAAE,KAAAkQ,GAAAlQ,KAFfmQ,KAAO,IAAI5O,EAGL2O,EAAkBjQ,SACpB,OAAOD,KAAKC,SAGdiQ,EAAkBjQ,SAAWD,sGAGZ8L,yFACM9L,KAAKmQ,KAAKvO,IAAV,qBAAAiC,OACAiI,EADA,gCAAjBsE,2BAGCA,EAASC,oMAIevE,EAAWa,yFACnB3M,KAAKmQ,KAAKvO,IAAV,QAAAiC,OACbiI,EADa,iCAAAjI,OAC4BxC,KAAKC,OACtD,sBAFI8O,2BAICA,EAASC,iMAIUvE,EAAWa,yFACd3M,KAAKmQ,KAAKvO,IAAV,QAAAiC,OACbiI,EADa,KAAAjI,OACA8I,EADA,gCAAjByD,2BAGCA,EAASC,oRAIOrQ,KAAKmQ,KAAKvO,IAAV,gDAAjBwO,2BACCA,EAASC,0RAQOrQ,KAAKmQ,KAAKvO,IAAV,mDAAjBwO,2BACCA,EAASC,wLAGI3F,yFACG1K,KAAKmQ,KAAKnO,KAAV,yBAErBsO,EAAKC,gBAAgB7F,kBAFjB0F,2BAKCA,EAASC,0LAGK3F,yFACE1K,KAAKmQ,KAAKnO,KAAV,yBAErBsO,EAAKE,iBAAiB9F,kBAFlB0F,2BAKCA,EAASC,yLAGI/B,EAAc3J,EAAKmB,yFAChB9F,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZyK,EADY,qBAErBgC,EAAKG,iBAAiB9L,EAAKmB,kBAFvBsK,2BAKCA,EAASC,yLAGA7C,EAAU7I,EAAKmB,yFACR9F,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZ2J,EADY,qBAErB8C,EAAKI,aAAa/L,EAAKmB,kBAFnBsK,2BAKCA,EAASC,qMAGY/B,EAAc3J,EAAKmB,yFACxB9F,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZyK,EADY,qBAErBgC,EAAKK,yBAAyBhM,EAAKmB,kBAF/BsK,2BAKCA,EAASC,0MAIiBvE,EAAWgD,yFACrB9O,KAAKmQ,KAAKlO,MAAV,QAAA4B,OACbiI,EADa,sBAErBwE,EAAKM,6BAA6B9E,EAAWgD,GAC7C,sBAHIsB,2BAMCA,EAASC,0LAGGQ,EAAalM,EAAKmB,yFACd9F,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZgN,EADY,qBAErBP,EAAKQ,gBAAgBnM,EAAKmB,kBAFtBsK,2BAKCA,EAASC,oMAGWQ,EAAalM,EAAKmB,yFACtB9F,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZgN,EADY,qBAErBP,EAAKQ,gBAAgBnM,EAAKmB,kBAFtBsK,2BAKCA,EAASC,8LAGKvE,EAAWa,EAAS+B,yFAClB1O,KAAKmQ,KAAKlO,MAC/B,oCACAqO,EAAKS,iBAAiBjF,EAAWa,EAAS+B,GAC1C,sBAHI0B,2BAKCA,EAASC,kMAGSvE,yFACF9L,KAAKmQ,KAAKnO,KAC/B,oCACAsO,EAAKU,qBAAqBlF,GAC1B,sBAHIsE,2BAKCA,EAASC,4LAGO9D,EAAO0E,yFACPjR,KAAKmQ,KAAKlO,MAAV,kBAAA4B,OACHoN,EADG,qBAErBX,EAAKY,mBAAmB3E,kBAFpB6D,2BAICA,EAASC,wLAGC/B,EAAcd,EAAUC,EAAYpD,yFAC9BrK,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZyK,EADY,qBAErBgC,EAAKa,aAAa7C,EAAcd,EAAUC,EAAYpD,kBAFlD+F,2BAICA,EAASC,4LAIhBlB,EACAxE,EACAyE,EACAC,EACAnP,EACAiK,EACAzC,EACAhG,EACA4N,EACAC,EACAC,EACAC,EACAC,yFAEuB1P,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZsL,EADY,qBAErBmB,EAAKc,aACHjC,EACAxE,EACAyE,EACAC,EACAnP,EACAiK,EACAzC,EACAhG,EACA4N,EACAC,EACAC,EACAC,EACAC,kBAfEU,2BAkBCA,EAASC,yNAIhBgB,EACA/C,EACAC,EACAH,EACAC,yFAEuBrO,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZwN,EADY,qBAErBf,EAAKgB,wBACHD,EACA/C,EACAC,EACAH,EACAC,kBAPE+B,2BAUCA,EAASC,uLAGNkB,EAAUtB,yFACGjQ,KAAKmQ,KAAKvO,IAC/B,0CACE2P,EADF,UAGEtB,EAHF,cAAApM,OAIgBxC,KAAKC,sBALjB8O,2BAOCA,EAASC,mLAGJkB,EAAUC,EAAYC,yFACXzR,KAAKmQ,KAAKvO,IAC/B,0CACE2P,EADF,eAGEC,EAHF,iBAKEC,EALF,cAAA5N,OAMgBxC,KAAKC,sBAPjB8O,2BASCA,EAASC,4LAGGV,EAAUC,EAAWC,EAAS3P,EAAM4P,yFAChC9P,KAAKmQ,KAAKnO,KAC/B,iCACAsO,EAAKoB,eAAe/B,EAAUC,EAAWC,EAAS3P,EAAM4P,GACxD,sBAHIM,2BAKCA,EAASC,6LAGAJ,yFACOjQ,KAAKmQ,KAAKlO,MAC/B,iCACAqO,EAAKqB,YAAY1B,GACjB,sBAHIG,2BAKCA,EAASC,kHCrNLuB,aAlCb,SAAAA,IACE,GADa9R,OAAAC,EAAA,EAAAD,CAAAE,KAAA4R,GAAA5R,KAPf6R,QAAU,EAOI7R,KANd8R,UAAY,GAONF,EAAsB3R,SACxB,OAAO2R,EAAsB3R,SAG/B2R,EAAsB3R,SAAWD,0DARjC,QAASA,KAAK6R,kEAWCE,GACf,OAAO/R,KAAK8R,UAAUE,KAAKD,+CAGTE,GAClB,cAAcjS,KAAK8R,UAAUG,EAAQ,0CAIhB,IAAjBjS,KAAK6R,SACP7R,KAAK8R,UAAUI,QAAQ,SAAAH,GAAE,OAAIA,GAAMA,GAAG,OAEtC/R,KAAK6R,gDAIc,IAAjB7R,KAAK6R,SACP7R,KAAK8R,UAAUI,QAAQ,SAAAH,GAAE,OAAIA,GAAMA,GAAG,KAGpC/R,KAAK6R,QAAU,KACf7R,KAAK6R,yBCrCAM,EAAW,SAAAC,GAAK,OAC3BC,MAAMC,UAAUC,KACZH,EAAMG,OACNH,EAAMI,OAAO,SAACC,EAAKC,GAAN,SAAA7O,OAAA/D,OAAA6S,EAAA,EAAA7S,CAAkB2S,GAAlB3S,OAAA6S,EAAA,EAAA7S,CAA0B4S,KAAM,KAE7CE,EAAU,IAAIC,OAAO,YAAa,KAClCC,EAAU,UAEHC,EAAiB,SAACC,GAAD,IAAaC,EAAb9S,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAyB,GAAzB,OAC5B6S,EAAW5F,QAAQwF,EAASK,GAAW7F,QAAQ0F,EAAS,MCGpDI,6MACJC,eAAiB,IAAIvB,IACrBwB,kBAAoB,IAAIlD,IAExB3M,MAAQ,CAENuI,UAAW1J,EAAKD,MAAMkR,MAAMC,OAAOxH,UACnCyH,cAAe,GACfC,iBAAkB,GAClBC,eAAgB,GAChBC,eAAgB,GAChB7H,SAAU,GAGV2B,SAAU,GACVmG,WAAY,GAGZrF,aAAclM,EAAKD,MAAMkR,MAAMC,OAAOM,IACtCrF,eAAgB,GAChBsF,eAAgB,GAChBC,eAAgB,GAEhBC,KAAM3R,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAEzCC,cAAc,EACd3K,UAAU,KAgGZiH,sDAAkB,SAAAvN,EAAOmH,EAAakE,EAAmBhE,GAAvC,IAAAlE,EAAAmI,EAAAC,EAAAmF,EAAA7H,EAAAqI,EAAA9F,EAAAT,EAAAC,EAAA,OAAA/K,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAA8C,EAMZ/D,EAAKmB,MAJP+K,EAFcnI,EAEdmI,aACAC,EAHcpI,EAGdoI,eACAmF,EAJcvN,EAIduN,eACA7H,EALc1F,EAKd0F,SAEIqI,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQC,SAPxCzJ,EAAAC,KAAA,EAUdhB,EAAK+Q,eAAegB,eACd/F,EAAkBsF,EAAeU,KACrC,SAAAC,GAAS,OAAIA,EAAUjK,OAASiE,IAChCxB,GACIc,EAAUuG,EAAa,GAAGrH,GAC1Be,EAAYsG,EAAa,GAAG9J,KAfpBjH,EAAAE,KAAA,EAgBRjB,EAAKgR,kBAAkB7C,gBAAgB,CAC3CpG,cACAmE,eACAC,iBACAH,kBACAC,oBACAV,UACAC,cAvBY,cAAAzK,EAAAE,KAAA,GA0BRjB,EAAKkS,iBA1BG,QAAAnR,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SA4Bdf,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UA7BG,eAAAtR,EAAAC,KAAA,GAgCdhB,EAAK+Q,eAAeuB,gBAhCNvR,EAAAwR,OAAA,6BAAAxR,EAAAG,SAAAN,EAAA,qKA5FhBzC,OAAOqU,OAAO,EAAG,GACjB5U,KAAK6U,oFAGQ/I,mFAEX9L,KAAKmT,eAAegB,wBACdnU,KAAK8U,cAAchJ,0BACnB9L,KAAKsU,eAAexI,0DAE1B9L,KAAKoE,SAAS,CAAE6P,cAAc,6BAE9BjU,KAAKmT,eAAeuB,kTAKd5I,EAAc9L,KAAKuD,MAAnBuI,mBACoB9L,KAAKoT,kBAAkB2B,mCAA7CC,UACAC,EAAmBD,EAActI,OACrC,SAAAwI,GAAE,OAAIA,EAAGvK,MAAMwK,gBAAkBrJ,KAEd1L,OAAS,IACtBsT,EAAiBuB,EAAiB,GAAGG,gBAAgBtK,IACzD,SAAAuJ,GAAS,MAAK,CAAElK,YAAakK,EAAU1J,MAAOP,KAAMiK,EAAUjK,QAEhEpK,KAAKoE,SAAS,CACZyH,SAAUoJ,EAAiB,GAAGpJ,SAASwJ,UACvC3B,kSAM0C1T,KAAKuD,MAA3CuI,cAAWD,aAAUyC,iBACvBgH,EAAczJ,EAASa,OAAO,SAAAC,GAAO,MAAuB,SAAnBA,EAAQ4I,SACjDrB,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQ4I,SACpDC,EAAgB,GAChBlM,GAAW,GAEX4K,EAAa9T,wCACOJ,KAAKoT,kBAAkBqC,2BAC3C3J,UADF0J,SAGAlM,GAAW,8BAEPgM,EAAYlV,yCACQJ,KAAKoT,kBAAkBsC,sBAC3C5J,EACAwJ,EAAY,GAAG1I,gBAFjB4I,kBAOEG,EAAkB3V,KAAK4V,qBAC3BJ,EACAlH,IAGkBlO,QAClBJ,KAAKoE,SAAS,CACZmP,cAAeiC,EAAc,GAAG7K,MAChC6I,iBAAkBgC,EAAc,GAAG7I,QACnCkJ,gBAAiBL,EAAc,GAAGD,OAClC5B,WAAYgC,EAAgB,GAAGG,YAC/BtI,SAAUmI,EAAgB,GAAGnI,SAC7Be,eAAgBoH,EAAgB,GAAGvL,KACnCyJ,eAAgB8B,EAAgB,GAAGhL,MACnCmJ,eAAgB6B,EAAgB,GAChCrM,6JAKe+G,EAAMxD,GACzB,OAAOsF,EACL9B,EAAKvF,IAAI,SAAAiL,GAAI,OACX5D,EACE4D,EAAKC,QAAQlL,IAAI,SAAAmL,GAAM,OACrBA,EAAOC,aACJxJ,OAAO,SAAAyJ,GAAU,OAAIA,EAAWtJ,KAAOA,IACvC/B,IAAI,SAAAqL,GAGH,OAFAA,EAAWL,YAAcG,EAAOtL,MAChCwL,EAAW3I,SAAWyI,EAAOG,IACtBD,wFA4CDtF,EAAalG,mFAE7B3K,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBiD,eAAexF,EAAa,QAASlG,0BAC5D3K,KAAKsU,wEAEXtU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,uOAII7D,EAAayF,mFAErCtW,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBmD,uBAC3B1F,EACA,eACAyF,0BAEItW,KAAKsU,wEAEXtU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,+NAIJ7D,EAAa2F,mFAE7BxW,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBiD,eAC3BxF,EACA,iBACe,MAAf2F,0BAEIxW,KAAKsU,wEAEXtU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,0LAIP+B,GAAe,IAAA/S,EAAA1D,KAAA0W,EACO1W,KAAKuD,MAAlCuQ,EADsB4C,EACtB5C,eAAgBxK,EADMoN,EACNpN,SAExB,OAAOwK,EAAetC,WACnB9E,OAAO,SAAA2H,GAAS,OAAIA,EAAUnU,OAASuW,EAActM,cACrDW,IAAI,SAAAuJ,GACH,OAAI/K,EAEA/E,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK0P,EAAUjK,MACjB7F,EAAAzB,EAAA0B,cAAA,MAAIE,UAAkC,MAAvB2P,EAAUsC,SAAmB,YAAc,IACxDpS,EAAAzB,EAAA0B,cAACoS,EAAD,CACEnN,KAAM4K,EAAU1J,MAChBxB,OAAQ,SAAAe,GAAQ,OACdxG,EAAKmT,cAAcxC,EAAUxH,GAAI3C,IAEnCZ,SAAiC,MAAvB+K,EAAUsC,YAIxBpS,EAAAzB,EAAA0B,cAAA,MAAIE,UAAkC,MAAvB2P,EAAUsC,SAAmB,YAAc,IACxDpS,EAAAzB,EAAA0B,cAACoS,EAAD,CACEnN,KAAM4K,EAAUyC,aAChB3N,OAAQ,SAAAe,GAAQ,OACdxG,EAAKqT,sBAAsB1C,EAAUxH,GAAI3C,IAE3CZ,SAAiC,MAAvB+K,EAAUsC,YAIxBpS,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,SACVU,QAAS,kBACP1B,EAAKsT,cAAc3C,EAAUxH,GAAIwH,EAAUsC,YAGrB,MAAvBtC,EAAUsC,SACTpS,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,oBACdH,EAAAzB,EAAA0B,cAAA,yBAGFD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,wBAItBH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgBH,EAAKH,MAAMuI,UAA3B,gBAAAjI,OACAH,EAAKH,MAAM+K,aADX,eAAAzK,OAEYwQ,EAAUxH,GAFtB,cAIFtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,kBAOI,MAAvB2P,EAAUsC,SACL,KAGPpS,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK0P,EAAUjK,MACjB7F,EAAAzB,EAAA0B,cAAA,MAAIE,UAAkC,MAAvB2P,EAAUsC,SAAmB,YAAc,IACxDpS,EAAAzB,EAAA0B,cAACoS,EAAD,CACEnN,KAAM4K,EAAU1J,MAChBxB,OAAQ,SAAAe,GAAQ,OAAIxG,EAAKmT,cAAcxC,EAAUxH,GAAI3C,IACrDZ,SAAUA,mDAQL,IAAA2N,EAAAjX,KAAAkX,EACoBlX,KAAKuD,MAAlCmQ,EADSwD,EACTxD,eAAgBpK,EADP4N,EACO5N,SACxB,OAAOoK,EAAe5I,IAAI,SAAA2L,GAAa,OACrClS,EAAAzB,EAAA0B,cAACD,EAAAzB,EAAM2B,SAAP,CAAgBE,IAAK8R,EAAcrM,MACjC7F,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,8CACZH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,cACED,EAAAzB,EAAA0B,cAAA,UAAKiS,EAActM,eAGtBb,GAAY/E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WAAd,YACZ4E,GAAY/E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WAAd,WACZ4E,GAAY/E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WAAd,aAEduS,EAAKE,iBAAiBV,uCAKpB,IAAAW,EAcHpX,KAAKuD,MAZPuI,EAFKsL,EAELtL,UACAyH,EAHK6D,EAGL7D,cACAC,EAJK4D,EAIL5D,iBACAqC,EALKuB,EAKLvB,gBACAnC,EANK0D,EAML1D,eACA7H,EAPKuL,EAOLvL,SACA2B,EARK4J,EAQL5J,SACAmG,EATKyD,EASLzD,WACAE,EAVKuD,EAULvD,eACAC,EAXKsD,EAWLtD,eACAG,EAZKmD,EAYLnD,aACA3K,EAbK8N,EAaL9N,SAGF,OAAI2K,EACK1P,EAAAzB,EAAA0B,cAAC6S,EAAD,MAGqB,IAA1BvD,EAAe1T,OACV,KAIPmE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,+BACAD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,cAAAhB,OAAgBiI,EAAhB,yBACLyH,GAEF,MACDhP,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,cAAAhB,OAAgBiI,EAAhB,yBAAAjI,OAAiD2J,IACtDmG,GAEF,MACAE,GAGHtP,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,OAAO8O,GACvBjP,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,4BACO,KAApBmR,EAAyB,QAAUA,IAIvCvM,GACC/E,EAAAzB,EAAA0B,cAAC8S,EAAD,CACE3M,MAAM,uBACNvD,YAAY,wBACZsD,QAASgJ,EACTnJ,SAAUvK,KAAKuQ,kBAInBhM,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAAA,aAAQxE,KAAKuX,qBAGfhT,EAAAzB,EAAA0B,cAACgT,EAAD,CAAmB1L,UAAWA,EAAWD,SAAUA,YAzW5BpJ,IAAM8C,WA+WtBkS,0BAAavE,uBCnObwE,GA1IiC,SAAA3M,GAM1C,IALJ4M,EAKI5M,EALJ4M,QACAC,EAII7M,EAJJ6M,YACAC,EAGI9M,EAHJ8M,YACAhM,EAEId,EAFJc,SACAvC,EACIyB,EADJzB,SAEMgM,EAAczJ,EAAS2G,OAAO,SAACpP,EAAM0U,GACzC,MAAoB,SAAhBA,EAAKvC,OACAuC,EAAKlL,OAEPxJ,GACN,IAEG2U,EAAgBlM,EAAS2G,OAAO,SAACpP,EAAM0U,GAC3C,MAAoB,UAAhBA,EAAKlL,OACAkL,EAAKhL,cAEP1J,GACN,IAbC2I,EAe0BC,mBAAS,IAfnCC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAeGY,EAfHV,EAAA,GAeY+L,EAfZ/L,EAAA,GAAAI,EAgBsBL,mBAAS+L,GAhB/BzL,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAgBGE,EAhBHD,EAAA,GAgBUE,EAhBVF,EAAA,GAAA2L,EAiBwCjM,oBAAS,GAjBjDkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAiBGE,EAjBHD,EAAA,GAiBmBE,EAjBnBF,EAAA,GAAAG,EAkBoCrM,oBAAS,GAlB7CsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAkBGE,EAlBHD,EAAA,GAkBiBE,EAlBjBF,EAAA,GAoBEpP,EAAQ,WACZ8O,EAAW,IACXI,GAAkB,IAYpB,OAAI9O,EAEA/E,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACuI,EAAAjK,EAAD,CAAOkK,OAAQuL,GACbhU,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASmB,EACTmM,OAAQ,CACNvP,OAAQ,SAACzD,GAAD,OAAgB8G,EAAS9G,EAAMiT,OAAOC,eAGlDrU,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,uBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,SACVU,QAAS,WACPoH,EAASuL,GACTS,GAAgB,KAJpB,UAUFjU,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,SACVU,QAAS,WACPwS,EAAYrL,GACZiM,GAAgB,KAJpB,UAWJjU,EAAAzB,EAAA0B,cAACuI,EAAAjK,EAAD,CAAOkK,OAAQmL,GACb5T,EAAAzB,EAAA0B,cAAA,QAAM0B,SA3CE,SAACR,GACfA,EAAMc,iBACN,IAAMqS,EAAatM,EAAM/B,OACrB2N,GAAkBxL,GAAWkM,IAC/BlB,EAAQhL,EAASkM,GACjB3P,OAuCM3E,EAAAzB,EAAA0B,cAAA,uBACU,IACP8Q,EAAW,iBAAAzR,OACSyR,EADT,KAER,oBACJ/Q,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLkH,YAAY,QACZtB,MAAO6G,EACP3B,UAAQ,EACRvF,SAAU,SAAAC,GAAK,OAAIsS,EAAWtS,EAAME,cAAcE,MAAM0E,YAG5DjG,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASmB,EACTmM,OAAQ,CACNvP,OAAQ,SAACzD,GAAD,OAAgB8G,EAAS9G,EAAMiT,OAAOC,eAGlDrU,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,uBACdH,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,SAASU,QAAS8D,GAApC,WAIF3E,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,SAASxE,KAAK,UAAhC,cAMNqE,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,uBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,8CACVU,QAAS,kBAAMgT,GAAkB,KAFnC,uBAIsB7T,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,iCAGrCH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,8CACVU,QAAS,kBAAMoT,GAAgB,KAFjC,wBAIuBjU,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,iCAOxCH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,uBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,8CACVU,QAAS,kBAAMyS,MAFjB,mBCjIFiB,8MACJ3F,eAAiB,IAAIvB,IACrBwB,kBAAoB,IAAIlD,IAExB3M,MAAQ,CACNuI,UAAW,GACXyH,cAAe,GACfiC,cAAe,GACfhC,iBAAkB,GAClBuF,mBAAoB,GACpBlD,gBAAiB,GACjBmD,gBAAiB,GACjBnN,SAAU,GACVoI,cAAc,EACd3K,UAAU,EACV2P,YAAa,MAmGfzI,uDAAmB,SAAAxN,EAAOmH,EAAasD,EAAYpD,GAAhC,IAAAlE,EAAA2F,EAAA0J,EAAA3J,EAAAqI,EAAA1G,EAAAG,EAAAC,EAAA,OAAA/K,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAA8C,EAC8B/D,EAAKmB,MAA5CuI,EADS3F,EACT2F,UAAW0J,EADFrP,EACEqP,cAAe3J,EADjB1F,EACiB0F,SAC5BqI,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQC,SAFvCzJ,EAAAC,KAAA,EAIfhB,EAAK+Q,eAAegB,eACd3G,EAAWgI,EAAc,GAAGQ,QAAQ5B,KACxC,SAAA6B,GAAM,OAAIA,EAAO7L,OAASqD,IAC1B2I,IACIzI,EAAUuG,EAAa,GAAGrH,GAC1Be,EAAYsG,EAAa,GAAG9J,KATnBjH,EAAAE,KAAA,EAUTjB,EAAKgR,kBAAkB5C,iBAAiB,CAC5CrG,cACAqD,WACAC,aACApD,UACAsD,UACAC,cAhBa,cAAAzK,EAAAE,KAAA,GAkBTjB,EAAKkS,eAAexI,GAlBX,QAAA3I,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAoBff,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UArBI,eAAAtR,EAAAC,KAAA,GAwBfhB,EAAK+Q,eAAeuB,gBAxBLvR,EAAAwR,OAAA,6BAAAxR,EAAAG,SAAAN,EAAA,oFA6EnBkW,wDAAoB,SAAAC,EAAOxM,EAASJ,GAAhB,IAAAT,EAAA,OAAAjJ,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,cACVyI,EAAc1J,EAAKmB,MAAnBuI,UADUsN,EAAAhW,KAAA,EAGhBhB,EAAK+Q,eAAegB,eAHJiF,EAAA/V,KAAA,EAIVjB,EAAKgR,kBAAkBrC,iBAAiBjF,EAAWa,EAASJ,GAJlD,OAKhBnK,EAAKyS,SAAS/I,GALEsN,EAAA/V,KAAA,gBAAA+V,EAAAhW,KAAA,EAAAgW,EAAA7E,GAAA6E,EAAA,SAOhBhX,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UARK,eAAA2E,EAAAhW,KAAA,GAWhBhB,EAAK+Q,eAAeuB,gBAXJ0E,EAAAzE,OAAA,6BAAAyE,EAAA9V,SAAA6V,EAAA,iFAepBvB,kDAAc,SAAAyB,EAAM9M,GAAN,IAAA9F,EAAAqF,EAAAiN,EAAA,OAAAlW,EAAAC,EAAAI,KAAA,SAAAoW,GAAA,cAAAA,EAAAlW,KAAAkW,EAAAjW,MAAA,cAAAoD,EAC8BrE,EAAKmB,MAAvCuI,EADIrF,EACJqF,UAAWiN,EADPtS,EACOsS,mBADPO,EAAAlW,KAAA,EAGVhB,EAAK+Q,eAAegB,eAHVmF,EAAAjW,KAAA,EAIJjB,EAAKgR,kBAAkBlC,mBAC3B3E,EACAwM,GANQ,OAQV3W,EAAKyS,SAAS/I,GARJwN,EAAAjW,KAAA,gBAAAiW,EAAAlW,KAAA,EAAAkW,EAAA/E,GAAA+E,EAAA,SAUVlX,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAXD,eAAA6E,EAAAlW,KAAA,GAcVhB,EAAK+Q,eAAeuB,gBAdV4E,EAAA3E,OAAA,6BAAA2E,EAAAhW,SAAA+V,EAAA,+EAkBdxB,iCAAc,SAAA0B,IAAA,IAAAzN,EAAA,OAAAjJ,EAAAC,EAAAI,KAAA,SAAAsW,GAAA,cAAAA,EAAApW,KAAAoW,EAAAnW,MAAA,cACJyI,EAAc1J,EAAKmB,MAAnBuI,UADI0N,EAAApW,KAAA,EAGVhB,EAAK+Q,eAAegB,eAHVqF,EAAAnW,KAAA,EAIJjB,EAAKgR,kBAAkBpC,qBAAqBlF,GAJxC,OAKV1J,EAAKyS,SAAS/I,GALJ0N,EAAAnW,KAAA,gBAAAmW,EAAApW,KAAA,EAAAoW,EAAAjF,GAAAiF,EAAA,SAOVpX,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UARD,eAAA+E,EAAApW,KAAA,GAWVhB,EAAK+Q,eAAeuB,gBAXV8E,EAAA7E,OAAA,6BAAA6E,EAAAlW,SAAAiW,EAAA,4OA/LoBvZ,KAAKmC,MAAMkR,MAAMC,OAAzCxH,cAAW0B,sBACbxN,KAAK6U,SAAS/I,UAEhB0B,GACFzD,WAAW,WACT,IAAMR,EAAM7F,EAAK+V,KAAKjM,GAClBjE,GACFA,EAAImQ,kBAEL,0LAIkB7P,EAAWC,iFACiB9J,KAAKuD,MAAhDuI,cAAW0J,kBAAevB,iBAC9BnI,IAAchC,EAAUgC,YACG,IAAzB0J,EAAcpV,QAAiB6T,GACjCjU,KAAK6U,SAAS/I,kLAKLA,mFAEX9L,KAAKmT,eAAegB,wBACdnU,KAAK8U,cAAchJ,0BACnB9L,KAAKsU,eAAexI,0DAE1B9L,KAAKoE,SAAS,CAAE6P,cAAc,6BAE9BjU,KAAKmT,eAAeuB,6NAIJ5I,2FACU9L,KAAKoT,kBAAkB2B,mCAA7CC,UACAC,EAAmBD,EAActI,OACrC,SAAAwI,GAAE,OAAIA,EAAGvK,MAAMwK,gBAAkBrJ,KAEd1L,OAAS,GAC5BJ,KAAKoE,SAAS,CAAEyH,SAAUoJ,EAAiB,GAAGpJ,SAASwJ,8LAItCvJ,sFACXD,EAAa7L,KAAKuD,MAAlBsI,SACFyJ,EAAczJ,EAASa,OAAO,SAAAC,GAAO,MAAuB,SAAnBA,EAAQ4I,SACjDrB,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQ4I,SACpDC,EAAgB,GAChBlM,GAAW,GACX4K,EAAa9T,wCACOJ,KAAKoT,kBAAkBqC,2BAC3C3J,UADF0J,SAGAxV,KAAKoE,SAAS,CAAE2U,mBAAoB7E,EAAa,GAAGrH,KACpDvD,GAAW,8BAEPgM,EAAYlV,yCACQJ,KAAKoT,kBAAkBsC,sBAC3C5J,EACAwJ,EAAY,GAAG1I,gBAFjB4I,iBAOAA,EAAcpV,SACV4Y,EAAkBxD,EAAc,GAAGQ,QAAQlL,IAAI,SAAAmL,GAAM,MAAK,CAC9D9L,YAAa8L,EAAOtL,MACpBP,KAAM6L,EAAO7L,QAEfpK,KAAKoE,SAAS,CACZmP,cAAeiC,EAAc,GAAG7K,MAChC6K,gBACAhC,iBAAkBgC,EAAc,GAAG7I,QACnCkJ,gBAAiBL,EAAc,GAAGD,OAClCyD,kBACA1P,iMAiCesK,EAAKjJ,gFAChBmB,EAAc9L,KAAKuD,MAAnBuI,mBAEN9L,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBuG,gBAAgB/F,EAAK,QAASjJ,0BACrD3K,KAAKsU,eAAexI,0DAE1B9L,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,wOAIKd,EAAK0C,gFACxBxK,EAAc9L,KAAKuD,MAAnBuI,mBAEN9L,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBwG,wBAC3BhG,EACA,eACA0C,0BAEItW,KAAKsU,eAAexI,0DAE1B9L,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,+NAIJd,EAAK4C,gFACf1K,EAAc9L,KAAKuD,MAAnBuI,mBAEN9L,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBxC,6BAA6B9E,EAAW8H,0BAC/D5T,KAAKsU,eAAexI,0DAE1B9L,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,6LAoDJ,IAAAuC,EAAAjX,KAAAkX,EACkBlX,KAAKuD,MAAjCiS,EADU0B,EACV1B,cAAelM,EADL4N,EACK5N,SACvB,OAAOkM,EAAc,GAAGQ,QAAQlL,IAAI,SAAAmL,GAAM,OACxC1R,EAAAzB,EAAA0B,cAACD,EAAAzB,EAAM2B,SAAP,CAAgBE,IAAKsR,EAAOG,KAC1B7R,EAAAzB,EAAA0B,cAAA,MACEE,UAAU,6CACV6E,IAAK0M,EAAOG,KAEZ7R,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UAAKyR,EAAOtL,QAEbrB,GAAY/E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WAAd,YACZ4E,GAAY/E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WAAd,WACbH,EAAAzB,EAAA0B,cAAA,wBACC8E,GAAY/E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WAAd,aAEduS,EAAK4C,kBAAkB5D,EAAOC,2DAKnBA,GAAc,IAAA4D,EAAA9Z,KAAAoX,EACEpX,KAAKuD,MAA7BuI,EADsBsL,EACtBtL,UAAWxC,EADW8N,EACX9N,SACnB,OAAO4M,EAAapL,IAAI,SAAAqL,GACtB,OAAI7M,EAEA/E,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKwR,EAAWtJ,IAClBtI,EAAAzB,EAAA0B,cAAA,MAAIE,UAAmC,MAAxByR,EAAWQ,SAAmB,YAAc,IACzDpS,EAAAzB,EAAA0B,cAACoS,EAAD,CACEnN,KAAM0M,EAAWxL,MACjBxB,OAAQ,SAAAe,GAAQ,OACd4P,EAAKC,eAAe5D,EAAWtJ,GAAI3C,IAErCZ,SAAkC,MAAxB6M,EAAWQ,YAGzBpS,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACoS,EAAD,CACEnN,KAAM0M,EAAWG,SACjBnN,OAAQ,SAAAe,GAAQ,OACd4P,EAAKE,uBAAuB7D,EAAWtJ,GAAI3C,IAE7CZ,SAAkC,MAAxB6M,EAAWQ,YAIzBpS,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,SACVU,QAAS0U,EAAK9C,cAAciD,KAC1BH,EACA3D,EAAWtJ,GACXsJ,EAAWQ,WAGY,MAAxBR,EAAWQ,SACVpS,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,oBACdH,EAAAzB,EAAA0B,cAAA,yBAGFD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,wBAItBH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgBiI,EAAhB,yBAAAjI,OACAsS,EAAWtJ,GADX,uBAIFtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,qBAIjBH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgBiI,EAAhB,gBAAAjI,OACAsS,EAAWtJ,GADX,cAIFtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,kBAOK,MAAxByR,EAAWQ,SACN,KAIPpS,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKwR,EAAWtJ,IAClBtI,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACoS,EAAD,CACEnN,KAAM0M,EAAWxL,MACjBxB,OAAQ,SAAAe,GAAQ,OAAI4P,EAAKC,eAAe5D,EAAWtJ,GAAI3C,IACvDZ,SAAUA,KAGd/E,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgBiI,EAAhB,yBAAAjI,OACAsS,EAAWtJ,GADX,uBAIFtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,yDAQhB,IAAAwV,EAiBHla,KAAKuD,MATPuI,EARKoO,EAQLpO,UACAyH,EATK2G,EASL3G,cACAiC,EAVK0E,EAUL1E,cACAhC,EAXK0G,EAWL1G,iBACAqC,EAZKqE,EAYLrE,gBACAmD,EAbKkB,EAaLlB,gBACAnN,EAdKqO,EAcLrO,SACAoI,EAfKiG,EAeLjG,aACA3K,EAhBK4Q,EAgBL5Q,SAGF,OAAI2K,EACK1P,EAAAzB,EAAA0B,cAAC6S,EAAD,MAGoB,IAAzB7B,EAAcpV,OACT,KAIPmE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,8BACAD,EAAAzB,EAAA0B,cAAA,UAAK+O,GAELhP,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,OAAO8O,GACvBjP,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,4BACO,KAApBmR,EAAyB,QAAUA,IAIxCtR,EAAAzB,EAAA0B,cAAC2V,GAAD,CACE7Q,SAAUA,EACVuO,YAAa7X,KAAK6X,YAClBhM,SAAUA,EACV8L,QAAS3X,KAAKkZ,kBACdtB,YAAa5X,KAAK4X,cAGnBtO,GACC/E,EAAAzB,EAAA0B,cAAC8S,EAAD,CACE3M,MAAM,wBACNvD,YAAY,yBACZsD,QAASsO,EACTzO,SAAUvK,KAAKwQ,iBACf5F,kBAAkB,IAItBrG,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAAA,aAAQxE,KAAKoa,sBAGf7V,EAAAzB,EAAA0B,cAACgT,EAAD,CAAmB1L,UAAWA,EAAWD,SAAUA,wDA5YzB1J,EAAOoB,GAAO,IACpCuI,EAAc3J,EAAMkR,MAAMC,OAA1BxH,UACR,OAAIA,IAAcvI,EAAMuI,UACf,CACLA,YACA0J,cAAe,GACfvB,cAAc,GAKX,YA7BsBxR,IAAM8C,WAoaxBkS,0BAAaqB,YCtaxB1R,GAAcsC,SAASlF,cAAc,MACzC4C,GAAY1C,UAAY,kBAElB2V,eAGJ,SAAAA,EAAYlY,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqa,IACjBjY,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAua,GAAA9X,KAAAvC,KAAMmC,KAHRgR,eAAiB,IAAIvB,EAEFxP,EADnBgR,kBAAoB,IAAIlD,EACL9N,EAyJnBuP,YAzJmB,eAAA5G,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAyJL,SAAAC,EAAMqN,GAAN,IAAAvE,EAAAwO,EAAArK,EAAA,OAAApN,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACJyI,EAAc1J,EAAKD,MAAnB2J,UACAwO,EAAYlY,EAAKmB,MAAjB+W,QACJrK,EAAQqK,EAAQxP,IAAI,SAAA1C,GAAC,OAAIA,EAAEyE,KAHnB1J,EAAAC,KAAA,EAKVhB,EAAK+Q,eAAegB,eALVhR,EAAAE,KAAA,EAMJjB,EAAKgR,kBAAkBzB,YAAY1B,GAN/B,cAAA9M,EAAAE,KAAA,EAOJjB,EAAKD,MAAM0S,SAAS/I,GAPhB,OAQV1J,EAAKD,MAAMqS,gBAAgB,gBAAiB,CAC1CC,QAAS,YATDtR,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAYVf,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAbD,eAAAtR,EAAAC,KAAA,GAgBVhB,EAAKgC,SAAS,CAAEkW,aAASja,IACzB+B,EAAKmY,qBAELnY,EAAK+Q,eAAeuB,gBAnBVvR,EAAAwR,OAAA,6BAAAxR,EAAAG,SAAAN,EAAA,wBAzJK,gBAAAwX,GAAA,OAAAzP,EAAA0P,MAAAza,KAAAG,YAAA,GAEjBiC,EAAKmB,MAAQ,CACX0Q,cAAc,EACd3K,UAAU,EACVhD,WAAW,EACXqJ,SAAU,GACV+K,YAAa,GACbC,mBAAoB,GACpBlE,cAAe,GACfmE,mBAAoB,GACpBC,cAAe,GACf1E,WAAY,GACZ2E,UAAW,IAEb1Y,EAAK2Y,yBAA2B3Y,EAAK2Y,yBAAyBd,KAA9Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAChCA,EAAK6Y,0BAA4B7Y,EAAK6Y,0BAA0BhB,KAA/Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACjCA,EAAK8Y,kBAAoB9Y,EAAK8Y,kBAAkBjB,KAAvBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACzBA,EAAKmY,mBAAqBnY,EAAKmY,mBAAmBN,KAAxBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAlBTA,iFAsBDmE,EAAG4P,GACnBnW,KAAKoE,SAAS,CAAE+W,mBAAmB,IACnCnb,KAAKoE,SAAS,CAAE+R,WAAYA,IAC5BnW,KAAKoE,SAAS,CAAE0W,UAAWvU,EAAE0C,OAAOmS,QAAQN,YAC5C9U,QAAQC,IAAIM,EAAE0C,OAAOmS,QAAQN,wDAI7B9a,KAAKoE,SAAS,CAAE+W,mBAAmB,qDAGZ5U,GACvBvG,KAAKoE,SAAS,CAAEuW,oBAAoB,IACpC3a,KAAKoE,SAAS,CAAEuL,SAAUpJ,EAAE0C,OAAOmS,QAAQC,eAC3Crb,KAAKoE,SAAS,CAAEsW,YAAanU,EAAE0C,OAAOmS,QAAQE,kBAC9Ctb,KAAKoE,SAAS,CAAEqS,cAAelQ,EAAE0C,OAAOmS,QAAQG,gBAChDvb,KAAKoE,SAAS,CAAEwW,mBAAoBrU,EAAE0C,OAAOmS,QAAQN,YAErDvU,EAAEC,qEAIFxG,KAAKoE,SAAS,CAAEuW,oBAAoB,kFAGlBa,EAAK7Q,sFACS3K,KAAKmC,MAA7B2J,cAAW+I,sBAEjB7U,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBuG,gBAAgB6B,EAAK,QAAS7Q,0BACrDkK,EAAS/I,UACf9L,KAAKmC,MAAMqS,gBAAgB,oBAAqB,CAC9CC,QAAS,8DAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,wLAIVnO,GACZvG,KAAKoE,SAAS,CAAEyW,cAAetU,EAAE0C,OAAOnD,QACxCE,QAAQC,IAAIM,EAAE0C,OAAOnD,sFAGFS,iGAC4BvG,KAAKmC,MAA5CqT,kBAAe1J,cAAW+I,eACiB7U,KAAKuD,MAAhDsX,kBAAepE,kBAAe9G,aAElCC,EAAY4F,EAAc,GAAGiG,WAC7B5L,EAAUgL,EACH,YACP/K,EAAY2G,EACZrG,EAAW,GACf,IAEEA,EAAWpQ,KAAKoT,kBAAkB1B,eAChC/B,EACAC,EACAC,EARO,YAUPC,GAEF9J,QAAQC,IAAImK,GACZyE,EAAS/I,GACT9L,KAAKmC,MAAMqS,gBAAgB,qBAAsB,CAC/CC,QAAS,YAEX,MAAOlO,GACPvG,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAKblO,EAAEC,iBACFxG,KAAKib,iNAGgB5G,EAAWmC,sFACAxW,KAAKmC,MAA7B2J,cAAW+I,+BAIX7U,KAAKoT,kBAAkBxC,6BAC3B9E,EACAuI,UAEFQ,EAAS/I,GACT9L,KAAKmC,MAAMqS,gBAAgB,2BAA4B,CACrDC,QAAS,4DAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,sMAOLlO,GACRvG,KAAK0b,QAAUnV,EAAEX,cACjBW,EAAEoV,aAAaC,cAAgB,OAC/BrV,EAAEoV,aAAaE,QAAQ,YAAa7b,KAAK0b,yCAEnCnV,GACNvG,KAAK0b,QAAQ3W,MAAM+W,QAAU,QAC7B9b,KAAK0b,QAAQK,WAAWC,YAAY5U,IACpCpB,QAAQC,IAAIjG,KAAK0b,QAAQK,YAGzB,IAAI1L,EAAOrQ,KAAKuD,MAAM4S,WAAW3E,WAC7ByK,EAAOC,OAAOlc,KAAK0b,QAAQN,QAAQ9E,UACnCzR,EAAKqX,OAAOlc,KAAKmc,KAAKf,QAAQ9E,UAC9B2F,EAAOpX,GAAIA,IACfwL,EAAK+L,OAAOvX,EAAI,EAAGwL,EAAK+L,OAAOH,EAAM,GAAG,IACxCjc,KAAKoE,SAAS,CAAEkW,QAASjK,IACzBrK,QAAQC,IAAIoK,EAAKvF,IAAI,SAAA1C,GAAC,OAAIA,EAAEyE,uCAErBtG,GACPA,EAAEC,iBACFxG,KAAK0b,QAAQ3W,MAAM+W,QAAU,OACF,gBAAvBvV,EAAE0C,OAAOvE,YACb1E,KAAKmc,KAAO5V,EAAE0C,OACd1C,EAAE0C,OAAO8S,WAAWM,aAAajV,GAAab,EAAE0C,+CA0BpCqT,EAAc9G,EAAeW,EAAYF,EAAQsG,GAAa,IAAA7Y,EAAA1D,KAC1E,OAAOsc,EAAaxR,IAAI,SAAA0R,GAAG,OACzBjY,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACZH,EAAAzB,EAAA0B,cAAA,UAAKgY,EAAI7R,OACTpG,EAAAzB,EAAA0B,cAAA,QAAMO,MAAO,CAAE+W,QAAS,UACL,IAAhBS,EACChY,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,mEACV+X,oBAAmBtG,EAAWtJ,GAC9B6P,uBAAsBvG,EAAWxL,MACjCgS,iBAAgBH,EAAI7R,MACpBiS,qBAAoBJ,EAAI3P,GACxBlC,MAAM,iBACNvF,QAAS,SAAAmB,GAAC,OAAI7C,EAAKqX,yBAAyBxU,KAP9C,OASOiW,EAAI7R,MAAO,KAGlB,IAIJpG,EAAAzB,EAAA0B,cAAA,UACG2R,EAAW3E,WAAW1G,IAAI,SAAA+R,GACzB,OAAIA,EAAK3c,OAASsc,EAAI7R,MAElBpG,EAAAzB,EAAA0B,cAAA,MACEG,IAAKkY,EAAKhQ,GACVnI,UAA6B,MAAlBmY,EAAKlG,SAAmB,YAAc,IAEjDpS,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAACoS,EAAD,CACE7R,MAAO,CAAE+W,QAAS,UAClBrS,KAAMoT,EAAKlS,MACXxB,OAAQ,SAAAe,GAAQ,OACdxG,EAAKmT,cAAcgG,EAAKhQ,GAAI3C,IAE9BZ,SACoB,MAAlBuT,EAAKlG,WAAoC,IAAhB4F,KAKZ,IAAhBA,EACChY,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,kBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,UACVU,QAAS,kBACP1B,EAAKoZ,iBAAiBD,EAAKhQ,GAAIgQ,EAAKlG,YAGnB,MAAlBkG,EAAKlG,SACJpS,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,qCACdH,EAAAzB,EAAA0B,cAAA,yBAGFD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,sCACb,IACDH,EAAAzB,EAAA0B,cAAA,2BAKRD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,kBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,+CACViG,MAAM,eACNgS,iBAAgBH,EAAI7R,MACpBvF,QAAS,SAAAmB,GAAC,OACR7C,EAAKwX,kBAAkB3U,EAAG4P,KAL9B,eAQe,OAKnB,KAKH,QAIX5R,EAAAzB,EAAA0B,cAAA,iDA4BD,IAAAyS,EAAAjX,KAAA+c,EAOH/c,KAAKmC,MALPma,EAFKS,EAELT,aACA9G,EAHKuH,EAGLvH,cACAW,EAJK4G,EAIL5G,WACAF,EALK8G,EAKL9G,OACAsG,EANKQ,EAMLR,YANK9V,EAaHzG,KAAKuD,MAHPmX,EAVKjU,EAULiU,YAEAE,EAZKnU,EAYLmU,mBAEF,OACErW,EAAAzB,EAAA0B,cAAA,WACGxE,KAAKgd,cACJV,EACA9G,EACAW,EACAF,EACAsG,GAGFhY,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAMoX,mBACjB9T,QAAS7G,KAAKib,0BACdlU,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,iBAASoW,EAAT,eACArW,EAAAzB,EAAA0B,cAAA,UAAKkW,EAAL,KACAnW,EAAAzB,EAAA0B,cAAA,8BAAsBoW,EAAtB,uBACArW,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,WACdH,EAAAzB,EAAA0B,cAAA,YACEqI,GAAG,gBACHoQ,KAAK,IACLxX,SAAU,SAAAc,GAAC,OAAI0Q,EAAKiG,cAAc3W,IAClCyE,UAAQ,EACRtG,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAAS,SAAAmB,GAAC,OAAI0Q,EAAKkG,eAAe5W,KAFpC,UAWJhC,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM4X,kBACjBtU,QAAS7G,KAAKua,mBACdxT,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,uDACCxE,KAAKuD,MAAM4S,WAAWtJ,GACrBtI,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,UAAKxE,KAAKuD,MAAM4S,WAAWxL,OAC3BpG,EAAAzB,EAAA0B,cAAA,MAAI4Y,WAAYpd,KAAKqd,SAASpD,KAAKja,OAChCA,KAAKuD,MAAM4S,WAAW3E,WAAW1G,IAAI,SAACuJ,EAAWiJ,GAChD,OAAIjJ,EAAUnU,OAAS+W,EAAK1T,MAAMuX,UAE9BvW,EAAAzB,EAAA0B,cAAA,MACEO,MAAO,CAAEwY,cAAe,QACxBC,gBAAeF,EACf3Y,IAAK0P,EAAUiC,SACfmH,UAAU,OACVC,UAAWzG,EAAK0G,QAAQ1D,KAAKhD,GAC7B2G,YAAa3G,EAAK4G,UAAU5D,KAAKhD,IAEjC1S,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,+BAAgC,IAC5C2P,EAAU1J,OAIV,SAKb,GAGFpG,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAASpF,KAAK2R,aAFhB,iBAtYoBlP,IAAM8C,WAkZrBkS,0BAAa4C,wBCjZxBjT,GAAcsC,SAASlF,cAAc,MACzC4C,GAAY1C,UAAY,kBAElBoZ,eAGJ,SAAAA,EAAY3b,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8d,IACjB1b,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAge,GAAAvb,KAAAvC,KAAMmC,KAHRgR,eAAiB,IAAIvB,EAEFxP,EADnBgR,kBAAoB,IAAIlD,EACL9N,EA4HnBuP,YA5HmB,eAAA5G,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KA4HL,SAAAC,EAAMqN,GAAN,IAAAvE,EAAAwO,EAAArK,EAAA,OAAApN,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACJyI,EAAc1J,EAAKD,MAAnB2J,UACAwO,EAAYlY,EAAKmB,MAAjB+W,QACJrK,EAAQqK,EAAQxP,IAAI,SAAA1C,GAAC,OAAIA,EAAEyE,KAHnB1J,EAAAC,KAAA,EAKVhB,EAAK+Q,eAAegB,eALVhR,EAAAE,KAAA,EAMJjB,EAAKgR,kBAAkBzB,YAAY1B,GAN/B,cAAA9M,EAAAE,KAAA,EAOJjB,EAAKD,MAAM0S,SAAS/I,GAPhB,OAQV1J,EAAKD,MAAMqS,gBAAgB,gBAAiB,CAC1CC,QAAS,YATDtR,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAYVf,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAbD,eAAAtR,EAAAC,KAAA,GAgBVhB,EAAKgC,SAAS,CAAEkW,aAASja,IACzB+B,EAAKmY,qBAELnY,EAAK+Q,eAAeuB,gBAnBVvR,EAAAwR,OAAA,6BAAAxR,EAAAG,SAAAN,EAAA,wBA5HK,gBAAAwX,GAAA,OAAAzP,EAAA0P,MAAAza,KAAAG,YAAA,GAEjBiC,EAAKmB,MAAQ,CACX0Q,cAAc,EACd3K,UAAU,EACV2M,OAAQ,GACR8H,KAAM,GACN1T,QAAS,IAEXjI,EAAK8Y,kBAAoB9Y,EAAK8Y,kBAAkBjB,KAAvBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACzBA,EAAKmY,mBAAqBnY,EAAKmY,mBAAmBN,KAAxBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAC1BA,EAAK4b,iBAAmB5b,EAAK4b,iBAAiB/D,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACxBA,EAAK6b,kBAAoB7b,EAAK6b,kBAAkBhE,KAAvBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAZRA,iFAeDmE,EAAG0P,GACnBjW,KAAKoE,SAAS,CAAE+W,mBAAmB,IACnCnb,KAAKoE,SAAS,CAAE6R,OAAQA,iDAIxBjW,KAAKoE,SAAS,CAAE+W,mBAAmB,6CAGpB5U,EAAG4P,GAClBnW,KAAKoE,SAAS,CAAE8Z,kBAAkB,IAClCle,KAAKoE,SAAS,CAAE2Z,KAAM5H,IACtBnW,KAAKoE,SAAS,CAAEiG,QAAS8L,EAAWgI,sEAIpCne,KAAKoE,SAAS,CAAE8Z,kBAAkB,mFAGf/H,EAAYxL,gFACvBmB,EAAc9L,KAAKmC,MAAnB2J,mBAEN9L,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBuG,gBAAgBxD,EAAY,QAASxL,0BAC5D3K,KAAKmC,MAAM0S,SAAS/I,UAC1B9L,KAAKmC,MAAMqS,gBAAgB,qBAAsB,CAC/CC,QAAS,8DAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,8NAINnO,EAAG4P,EAAY9L,gFAC/B9D,EAAEC,iBACMsF,EAAc9L,KAAKmC,MAAnB2J,mBAEN9L,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBuG,gBAC3BxD,EACA,6BACA9L,0BAEIrK,KAAKmC,MAAM0S,SAAS/I,UAC1B9L,KAAKie,oBACLje,KAAKmC,MAAMqS,gBAAgB,iBAAkB,CAC3CC,QAAS,8DAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,sOAIAyB,EAAYK,sFACFxW,KAAKmC,MAA7B2J,cAAW+I,sBAEjB7U,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBxC,6BAC3B9E,EACAqK,UAEFtB,EAAS/I,GACT9L,KAAKmC,MAAMqS,gBAAgB,4BAA6B,CACtDC,QAAS,4DAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAEXzO,QAAQC,IAARuT,EAAAjF,6BAEAvU,KAAKmT,eAAeuB,mLAIdnO,GACRvG,KAAK0b,QAAUnV,EAAEX,cACjBW,EAAEoV,aAAaC,cAAgB,OAC/BrV,EAAEoV,aAAaE,QAAQ,YAAa7b,KAAK0b,yCAEnCnV,GACNvG,KAAK0b,QAAQ3W,MAAM+W,QAAU,QAC7B9b,KAAK0b,QAAQK,WAAWC,YAAY5U,IAIpC,IAAIiJ,EAAOrQ,KAAKuD,MAAM0S,OAAOC,aACzB+F,EAAOC,OAAOlc,KAAK0b,QAAQN,QAAQ9E,UACnCzR,EAAKqX,OAAOlc,KAAKmc,KAAKf,QAAQ9E,UAC9B2F,EAAOpX,GAAIA,IACfwL,EAAK+L,OAAOvX,EAAI,EAAGwL,EAAK+L,OAAOH,EAAM,GAAG,IACxCjc,KAAKoE,SAAS,CAAEkW,QAASjK,qCAElB9J,GACPA,EAAEC,iBACFxG,KAAK0b,QAAQ3W,MAAM+W,QAAU,OACF,gBAAvBvV,EAAE0C,OAAOvE,YACb1E,KAAKmc,KAAO5V,EAAE0C,OACd1C,EAAE0C,OAAO8S,WAAWM,aAAajV,GAAab,EAAE0C,iDA0BlCiN,GAAc,IAAAxS,EAAA1D,KAAAoe,EAQxBpe,KAAKmC,MANPqT,EAF0B4I,EAE1B5I,cACAS,EAH0BmI,EAG1BnI,OACAqG,EAJ0B8B,EAI1B9B,aACAxQ,EAL0BsS,EAK1BtS,UACA+I,EAN0BuJ,EAM1BvJ,SACA0H,EAP0B6B,EAO1B7B,YAEF,OAAOrG,EAAapL,IAAI,SAAAqL,GAAU,OAChC5R,EAAAzB,EAAA0B,cAAA,MACEqI,GAAIsJ,EAAWtJ,GACflI,IAAKwR,EAAWtJ,GAChB9H,MAAO,CAAEwY,cAAe,SAExBhZ,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAmC,MAAxByR,EAAWQ,SAAmB,YAAc,IACzDpS,EAAAzB,EAAA0B,cAACoS,EAAD,CACE7R,MAAO,CAAE+W,QAAS,UAClBrS,KAAM0M,EAAWxL,MACjBxB,OAAQ,SAAAe,GAAQ,OAAIxG,EAAKqW,eAAe5D,EAAWtJ,GAAI3C,IACvDZ,SAC0B,MAAxB6M,EAAWQ,WAAoC,IAAhB4F,KAKlB,IAAhBA,EACChY,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,kBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,UACVU,QAAS,kBACP1B,EAAK2a,kBAAkBlI,EAAWtJ,GAAIsJ,EAAWQ,YAG1B,MAAxBR,EAAWQ,SACVpS,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,qCACdH,EAAAzB,EAAA0B,cAAA,yBAGFD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,sCACb,IACDH,EAAAzB,EAAA0B,cAAA,2BAMRD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,kBACdH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,UACVU,QAAS,SAAAmB,GAAC,OAAI7C,EAAKwX,kBAAkB3U,EAAG0P,KAExC1R,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,gCACdH,EAAAzB,EAAA0B,cAAA,gCAMR,KAKND,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uCACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,mDAGpB8Z,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uCACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,mDAIpBH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,uCAEG0I,IAAOiJ,EAAWgI,yBAA2B,IAC9C5Z,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,UACVU,QAAS,SAAAmB,GAAC,OAAI7C,EAAKsa,iBAAiBzX,EAAG4P,KAEvC5R,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,oCAItBH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACia,GAAD,CACE3S,UAAWA,EACX0J,cAAeA,EACfS,OAAQA,EACRE,WAAYA,EACZmG,aAAcA,EACdzH,SAAUA,EACV0H,YAAaA,0CAQhB,IAAAtF,EAAAjX,KAAA0e,EAC2B1e,KAAKmC,MAA/BqT,EADDkJ,EACClJ,cAAeS,EADhByI,EACgBzI,OACjBC,EAAeV,EAAc1K,IAAI,SAAAiL,GAAI,OACzCA,EAAKC,QAAQlL,IAAI,SAAAiL,GACf,OAAIA,EAAKK,MAAQH,EAAOG,IACf7R,EAAAzB,EAAA0B,cAAA,UAAKyS,EAAK0H,gBAAgB5I,EAAKG,eAEjC,SAGX,OACE3R,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,cACPuR,GAEG,yDAEN3R,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM2a,iBACjBrX,QAAS7G,KAAKie,kBACdlX,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,QACE0B,SAAU,SAAAK,GAAC,OACT0Q,EAAK2H,YAAYrY,EAAG0Q,EAAK1T,MAAMwa,KAAKlR,GAAIoK,EAAK1T,MAAM8G,WAGrD9F,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,UAAKxE,KAAKuD,MAAMwa,KAAKpT,OACrBpG,EAAAzB,EAAA0B,cAAA,sCACCwB,QAAQC,IAAIjG,KAAKuD,MAAMwa,KAAKlR,IAC7BtI,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACE6B,IAAK,UACLyG,QAASpL,KAAKuD,MAAM8G,QACpBqO,OAAQ,CACNvP,OAAQ,SAAA5C,GAAC,OAAI0Q,EAAK7S,SAAS,CAAEiG,QAAS9D,EAAEoS,OAAOC,cAEjDiG,gBAAgB,MAChBC,OAAQ,CACNC,cAAe,CACb,CACElZ,KAAM,WACNmZ,OAAQ,CAAC,OAAQ,WAAY,aAE/B,CACEnZ,KAAM,YACNmZ,OAAQ,CACN,OACA,SACA,SACA,QACA,OACA,cAGJ,CAAEnZ,KAAM,QAASmZ,OAAQ,CAAC,cAIhCza,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,SAASwE,UAAU,SAASoB,MAAM,YAOpDvB,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM4X,kBACjBtU,QAAS7G,KAAKua,mBACdxT,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,uDACCxE,KAAKuD,MAAM0S,OAAOG,IAAM7R,EAAAzB,EAAA0B,cAAA,UAAKxE,KAAKuD,MAAM0S,OAAOtL,OAAc,GAE9DpG,EAAAzB,EAAA0B,cAAA,MAAI4Y,WAAYpd,KAAKqd,SAASpD,KAAKja,OAChCwV,EAAc1K,IAAI,SAAAiL,GAAI,OACrBA,EAAKC,QAAQlL,IAAI,SAAAmL,GACf,OAAIA,EAAOG,MAAQa,EAAK1T,MAAM0S,OAAOG,IAC5BH,EAAOC,aAAapL,IAAI,SAACqL,EAAYmH,GAC1C,OACE/Y,EAAAzB,EAAA0B,cAAA,MACEO,MAAO,CAAEwY,cAAe,QACxBC,gBAAeF,EACf3Y,IAAKwR,EAAWG,SAChBmH,UAAU,OACVC,UAAWzG,EAAK0G,QAAQ1D,KAAKhD,GAC7B2G,YAAa3G,EAAK4G,UAAU5D,KAAKhD,IAEjC1S,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,+BAAgC,IAC5CyR,EAAWxL,SAKb,UAIbpG,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAASpF,KAAK2R,aAFhB,iBA3WqBlP,IAAM8C,WAuXtBkS,0BAAaqG,IC9XxB1W,GAAcsC,SAASlF,cAAc,MACzC4C,GAAY1C,UAAY,kBAElBua,eAGJ,SAAAA,EAAY9c,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAif,IACjB7c,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAmf,GAAA1c,KAAAvC,KAAMmC,KAHRgR,eAAiB,IAAIvB,EAEFxP,EADnBgR,kBAAoB,IAAIlD,EACL9N,EAoMnBuP,YApMmB,eAAA5G,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAoML,SAAAC,EAAMqN,GAAN,IAAAvE,EAAAwO,EAAArK,EAAA,OAAApN,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACJyI,EAAc1J,EAAKD,MAAnB2J,UACAwO,EAAYlY,EAAKmB,MAAjB+W,QACJrK,EAAQqK,EAAQxP,IAAI,SAAA1C,GAAC,OAAIA,EAAEgO,MAHnBjT,EAAAC,KAAA,EAKVhB,EAAK+Q,eAAegB,eALVhR,EAAAE,KAAA,EAMJjB,EAAKgR,kBAAkBzB,YAAY1B,GAN/B,cAAA9M,EAAAE,KAAA,EAOJjB,EAAKD,MAAM0S,SAAS/I,GAPhB,OAQV1J,EAAKD,MAAMqS,gBAAgB,gBAAiB,CAC1CC,QAAS,YATDtR,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAYVf,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAbD,eAAAtR,EAAAC,KAAA,GAgBVhB,EAAKgC,SAAS,CAAEkW,aAASja,IACzB+B,EAAKmY,qBAELnY,EAAK+Q,eAAeuB,gBAnBVvR,EAAAwR,OAAA,6BAAAxR,EAAAG,SAAAN,EAAA,wBApMK,gBAAAwX,GAAA,OAAAzP,EAAA0P,MAAAza,KAAAG,YAAA,GAEjBiC,EAAKmB,MAAQ,CACX0Q,cAAc,EACd3K,UAAU,EACVhD,WAAW,EACX4Y,WAAY,GACZC,qBAAqB,EACrBjB,kBAAkB,EAClBkB,gBAAiB,CAAC,CAAEjJ,WAAY,GAAI9L,QAAS,KAC7CsF,SAAU,GACV+K,YAAa,GACbJ,QAAS,IAGXlY,EAAKid,cAAgBjd,EAAKid,cAAcpF,KAAnBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACrBA,EAAKkd,oBAAsBld,EAAKkd,oBAAoBrF,KAAzBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAC3BA,EAAKmd,qBAAuBnd,EAAKmd,qBAAqBtF,KAA1Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAE5BA,EAAK4b,iBAAmB5b,EAAK4b,iBAAiB/D,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACxBA,EAAK6b,kBAAoB7b,EAAK6b,kBAAkBhE,KAAvBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAEzBA,EAAKod,yBAA2Bpd,EAAKod,yBAAyBvF,KAA9Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAChCA,EAAKqd,gBAAkBrd,EAAKqd,gBAAgBxF,KAArBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAEvBA,EAAK8Y,kBAAoB9Y,EAAK8Y,kBAAkBjB,KAAvBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACzBA,EAAKmY,mBAAqBnY,EAAKmY,mBAAmBN,KAAxBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IA1BTA,gFA6BFmE,EAAG0P,GAClBjW,KAAKoE,SAAS,CAAE8Z,kBAAkB,gDAKlCle,KAAKoE,SAAS,CAAE8Z,kBAAkB,8CAIlCle,KAAKoE,SAAS,CAAEkC,WAAW,+CAI3BtG,KAAKoE,SAAS,CAAEkC,WAAW,8CAGXC,GAChBvG,KAAKoE,SAAS,CAAE+W,mBAAmB,IACnCnV,QAAQC,IAAI,iEAIZjG,KAAKoE,SAAS,CAAE+W,mBAAmB,gDAGjB5U,GAClBvG,KAAKoE,SAAS,CAAEuL,SAAUpJ,EAAE0C,OAAOmS,QAAQsE,WAC3C1f,KAAKoE,SAAS,CAAEsW,YAAanU,EAAE0C,OAAOmS,QAAQuE,cAC9C3f,KAAKoE,SAAS,CAAE+a,qBAAqB,mDAIrCnf,KAAKoE,SAAS,CAAE+a,qBAAqB,sDAGb5Y,GACxBvG,KAAKoE,SAAS,CACZgb,gBAAe,GAAAvb,OAAA/D,OAAA6S,EAAA,EAAA7S,CACVE,KAAKuD,MAAM6b,iBADD,CAEb,CAAEjJ,WAAY,GAAI9L,QAAS,QAG/B9D,EAAEC,kEAGqBD,EAAG0L,GAC1BjS,KAAKuD,MAAM6b,gBAAgBhD,OAAOnK,EAAO,GACzCjS,KAAKoE,SAAS,CAAEgb,gBAAiBpf,KAAKuD,MAAM6b,kBAC5C7Y,EAAEC,yDAGYD,EAAG0L,EAAO/R,GACxB,IAAI2P,EAAU7P,KAAKuD,MAAM6b,gBACZ,eAATlf,EACF2P,EAAQoC,GAAOkE,WAAa5P,EAAE0C,OAAOnD,MAErC+J,EAAQoC,GAAO5H,QAAU9D,EAAEoS,OAAOC,UAEpC5Y,KAAKoE,SAAS,CAAEgb,gBAAiBvP,qFAGZtJ,gGACgBvG,KAAKmC,MAAlC2J,cAAW0J,oBACmBxV,KAAKuD,MAAnC6b,oBAAiBzP,aAErBC,EAAY4F,EAAc,GAAGiG,WAC7B5L,EAAUuP,EACH,aACK,GAChB7Y,EAAEC,iBAEFR,QAAQC,IAAIjG,KAAKuD,MAAM6b,0BAGrBpf,KAAKmT,eAAegB,yBACdnU,KAAKoT,kBAAkB1B,eAC3B/B,EACAC,EACAC,EAXO,aACK,6BAcR7P,KAAKmC,MAAM0S,SAAS/I,6DAE1B9L,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,gBACpB1U,KAAKmC,MAAMqS,gBAAgB,kCAAmC,CAC5DC,QAAS,iCAGbzU,KAAKoE,SAAS,CAAEgb,gBAAiB,CAAC,CAAEjJ,WAAY,GAAI9L,QAAS,OAC7DrK,KAAKuf,qNAGUtJ,EAAQtL,gFACfmB,EAAc9L,KAAKmC,MAAnB2J,mBAEN9L,KAAKmT,eAAegB,wBACdnU,KAAKoT,kBAAkBwM,YAAY3J,EAAQ,QAAStL,0BACpD3K,KAAKmC,MAAM0S,SAAS/I,0BACpB9L,KAAKmC,MAAMqS,gBAAgB,iBAAkB,CACjDC,QAAS,qEAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,gOAOJuB,EAAQO,gFAClB1K,EAAc9L,KAAKmC,MAAnB2J,4BAGA9L,KAAKoT,kBAAkBxC,6BAC3B9E,EACAmK,UAEFjW,KAAKmC,MAAM0S,SAAS/I,GACpB9F,QAAQC,IAAI,+DAEZjG,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAIXzU,KAAKmC,MAAMqS,gBAAgB,iBAAkB,CAC3CC,QAAS,+KAKLlO,GACRvG,KAAK0b,QAAUnV,EAAEX,cACjBW,EAAEoV,aAAaC,cAAgB,OAC/BrV,EAAEoV,aAAaE,QAAQ,YAAa7b,KAAK0b,yCAEnCnV,GACNvG,KAAK0b,QAAQ3W,MAAM+W,QAAU,QAC7B9b,KAAK0b,QAAQK,WAAWC,YAAY5U,IACpCpB,QAAQC,IAAIjG,KAAK0b,QAAQK,YAEzB,IAAI1L,EAAOrQ,KAAKmC,MAAMqT,cAAc,GAAGQ,QACnCiG,EAAOC,OAAOlc,KAAK0b,QAAQN,QAAQ9E,UACnCzR,EAAKqX,OAAOlc,KAAKmc,KAAKf,QAAQ9E,UAC9B2F,EAAOpX,GAAIA,IACfwL,EAAK+L,OAAOvX,EAAI,EAAGwL,EAAK+L,OAAOH,EAAM,GAAG,IACxCjc,KAAKoE,SAAS,CAAEkW,QAASjK,IACzBrK,QAAQC,IAAIoK,EAAKvF,IAAI,SAAA1C,GAAC,OAAIA,EAAEgO,wCAErB7P,GACPA,EAAEC,iBACFxG,KAAK0b,QAAQ3W,MAAM+W,QAAU,OACF,gBAAvBvV,EAAE0C,OAAOvE,YACb1E,KAAKmc,KAAO5V,EAAE0C,OACd1C,EAAE0C,OAAO8S,WAAWM,aAAajV,GAAab,EAAE0C,0CA0BzC,IAAAvF,EAAA1D,KAAAoe,EAOHpe,KAAKmC,MALP2J,EAFKsS,EAELtS,UACA0J,EAHK4I,EAGL5I,cACA8G,EAJK8B,EAIL9B,aACAzH,EALKuJ,EAKLvJ,SACA0H,EANK6B,EAML7B,YAEIvG,EAAUR,EAAc1K,IAAI,SAAAiL,GAAI,OACpCA,EAAKC,QAAQlL,IAAI,SAACmL,EAAQhE,GAAT,OACf1N,EAAAzB,EAAA0B,cAAA,MACEG,IAAK,MAAQsN,EACbpF,GAAIoJ,EAAOG,IACX1R,UAA+B,MAApBuR,EAAOU,SAAmB,YAAc,GACnD5R,MAAO,CAAEwY,cAAe,SAExBhZ,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,QAAUsR,EAAOG,IAAK1R,UAAU,oBACxCH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,QAAUsR,EAAOG,IAAK1R,UAAU,oBACxCH,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK,MAAQsR,EAAOG,KACtB7R,EAAAzB,EAAA0B,cAACoS,EAAD,CACE7R,MAAO,CAAE+W,QAAS,UAClBrS,KAAMwM,EAAOtL,MACbxB,OAAQ,SAAAe,GAAQ,OAAIxG,EAAKmc,WAAW5J,EAAOG,IAAKlM,IAChDZ,SACsB,MAApB2M,EAAOU,WAAoC,IAAhB4F,EAI7B5X,IAAK,eAAiBsR,EAAOG,OAEd,IAAhBmG,EACChY,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,QAAMG,IAAK,QAAUsR,EAAOG,IAAK1R,UAAU,kBACzCH,EAAAzB,EAAA0B,cAAA,UACEG,IAAKsR,EAAOG,IACZ1R,UAAU,WACVU,QAAS,kBACP1B,EAAK2b,cAAcpJ,EAAOG,IAAKH,EAAOU,YAGnB,MAApBV,EAAOU,SACNpS,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,6CACdH,EAAAzB,EAAA0B,cAAA,yBAGFD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,sCACb,IACDH,EAAAzB,EAAA0B,cAAA,2BAKRD,EAAAzB,EAAA0B,cAAA,QAAMG,IAAK,QAAUsR,EAAOG,IAAK1R,UAAU,kBACzCH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,oBACVU,QAAS1B,EAAKwX,mBAEb,IACD3W,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gDAAiD,IALhE,eAMe,MAGI,MAApBuR,EAAOU,SACNpS,EAAAzB,EAAA0B,cAAA,QACEG,IAAK,QAAUsR,EAAOG,IACtB1R,UAAU,kBAEVH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,uEACVS,KAAK,IACL2a,gBAAe7J,EAAOG,IACtB2J,mBAAkB9J,EAAOtL,MACzBvF,QAAS,SAAAmB,GAAC,OAAI7C,EAAK4b,oBAAoB/Y,KALzC,qBAWF,IAIJ,MAKRhC,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,KAAOsR,EAAOG,KACtB7R,EAAAzB,EAAA0B,cAACwb,GAAD,CACElU,UAAWA,EACX0J,cAAeA,EACf8G,aAAcA,EACdzH,SAAUA,EACVoB,OAAQA,EACRsG,YAAaA,UAOvB,OACEhY,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,gBACPqR,EAAQ,GAAG5V,OAAS,EACnBmE,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK,MAAQqR,EAAQiK,OAAQjK,GAAc,IAC9ChQ,QAAQC,IAAI+P,GAAU,KAGzBzR,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,WAAb,mDAEK,IACJsB,QAAQC,IAAI+P,IAgDjBzR,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM4b,oBACjBtY,QAAS7G,KAAKuf,qBACdxY,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,UAAKxE,KAAKuD,MAAMmX,aAChBnW,EAAAzB,EAAA0B,cAAA,kCAEAD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,UAAUwB,SAAU,SAAAK,GAAC,OAAI7C,EAAKwc,iBAAiB3Z,KAC5DvG,KAAKuD,MAAM6b,gBAAgBtU,IAAI,SAACiL,EAAM9D,GAAP,OAC9B1N,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,cAAgBsN,EAAOvN,UAAU,eACzCH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBAAf,aAEEH,EAAAzB,EAAA0B,cAAA,SACEG,IAAKsN,EACL/R,KAAK,OACLuF,SAAU,SAAAc,GAAC,OAAI7C,EAAK+b,gBAAgBlZ,EAAG0L,EAAO,eAC9CnM,MAAOiQ,EAAKI,WACZnL,UAAQ,EACRtG,UAAU,mBARd,2BAWEH,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACE6B,IAAK,UAAYsN,EACjBvN,UAAU,iBACV0G,QAAS2K,EAAK1L,QACdqO,OAAQ,CACNvP,OAAQ,SAAA5C,GAAC,OAAI7C,EAAK+b,gBAAgBlZ,EAAG0L,EAAO,aAE9CkO,YAAY,MACZrB,OAAQ,CACNC,cAAe,CACb,CACElZ,KAAM,WACNmZ,OAAQ,CAAC,OAAQ,WAAY,aAE/B,CACEnZ,KAAM,YACNmZ,OAAQ,CACN,OACA,SACA,SACA,QACA,OACA,cAGJ,CAAEnZ,KAAM,QAASmZ,OAAQ,CAAC,eAKlCza,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBAAkBK,MAAO,CAAEqb,WAAY,OACnDnO,EAAQ,EACP1N,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,0BACVU,QAAS,SAAAmB,GAAC,OAAI7C,EAAK8b,yBAAyBjZ,EAAG0L,KAE/C1N,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gCAAiC,KAGhD,OAMRH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,+CACVU,QAAS,SAAAmB,GAAC,OAAI7C,EAAK2c,0BAA0B9Z,KAE7ChC,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sCAJf,eAQJH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,6CACVoB,MAAM,WAOZvB,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM4X,kBACjBtU,QAAS7G,KAAKua,mBACdxT,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,uDAEAD,EAAAzB,EAAA0B,cAAA,MAAI4Y,WAAYpd,KAAKqd,SAASpD,KAAKja,OAChCwV,EAAc1K,IAAI,SAAAiL,GAAI,OACrBA,EAAKC,QAAQlL,IAAI,SAACmL,EAAQqH,GACxB,OACE/Y,EAAAzB,EAAA0B,cAAA,MACEO,MAAO,CAAEwY,cAAe,QACxBC,gBAAeF,EACf3Y,IAAKoR,EAAKO,SACVmH,UAAU,OACVC,UAAWha,EAAKia,QAAQ1D,KAAKvW,GAC7Bka,YAAala,EAAKma,UAAU5D,KAAKvW,IAEjCa,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,+BARf,IAQgDuR,EAAOtL,YAM/DpG,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAASpF,KAAK2R,aAFhB,iBAzfkBlP,IAAM8C,WAqgBnBkS,0BAAawH,ICtgBtBqB,eAGJ,SAAAA,EAAYne,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsgB,IACjBle,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAwgB,GAAA/d,KAAAvC,KAAMmC,KAHRgR,eAAiB,IAAIvB,EAEFxP,EADnBgR,kBAAoB,IAAIlD,EACL9N,EAmLnB8W,kBAnLmB,eAAAnO,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAmLC,SAAAC,EAAO2J,EAASJ,GAAhB,IAAAT,EAAA,OAAAjJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACVyI,EAAc1J,EAAKmB,MAAnBuI,UADU3I,EAAAC,KAAA,EAGhBhB,EAAK+Q,eAAegB,eAHJhR,EAAAE,KAAA,EAIVjB,EAAKgR,kBAAkBrC,iBAAiBjF,EAAWa,EAASJ,GAJlD,OAKhBnK,EAAKyS,SAAS/I,GALE3I,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAoR,GAAApR,EAAA,SAOhBf,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UARK,eAAAtR,EAAAC,KAAA,GAWhBhB,EAAK+Q,eAAeuB,gBAXJvR,EAAAwR,OAAA,6BAAAxR,EAAAG,SAAAN,EAAA,uBAnLD,gBAAAwX,EAAA+F,GAAA,OAAAxV,EAAA0P,MAAAza,KAAAG,YAAA,GAAAiC,EAkMnBwV,YAlMmB,eAAAzJ,EAAArO,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAkML,SAAAoW,EAAM5M,GAAN,IAAApG,EAAA2F,EAAAiN,EAAA,OAAAlW,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,cAAA8C,EAC8B/D,EAAKmB,MAAvCuI,EADI3F,EACJ2F,UAAWiN,EADP5S,EACO4S,mBADPK,EAAAhW,KAAA,EAGVhB,EAAK+Q,eAAegB,eAHViF,EAAA/V,KAAA,EAIJjB,EAAKgR,kBAAkBlC,mBAC3B3E,EACAwM,GANQ,OAQV3W,EAAKyS,SAAS/I,GARJsN,EAAA/V,KAAA,gBAAA+V,EAAAhW,KAAA,EAAAgW,EAAA7E,GAAA6E,EAAA,SAUVhX,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UAXD,eAAA2E,EAAAhW,KAAA,GAcVhB,EAAK+Q,eAAeuB,gBAdV0E,EAAAzE,OAAA,6BAAAyE,EAAA9V,SAAA6V,EAAA,uBAlMK,gBAAAqH,GAAA,OAAArS,EAAAsM,MAAAza,KAAAG,YAAA,GAAAiC,EAoNnByV,YApNmB/X,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAoNL,SAAAsW,IAAA,IAAAvN,EAAA,OAAAjJ,EAAAC,EAAAI,KAAA,SAAAoW,GAAA,cAAAA,EAAAlW,KAAAkW,EAAAjW,MAAA,cACJyI,EAAc1J,EAAKmB,MAAnBuI,UADIwN,EAAAlW,KAAA,EAGVhB,EAAK+Q,eAAegB,eAHVmF,EAAAjW,KAAA,EAIJjB,EAAKgR,kBAAkBpC,qBAAqBlF,GAJxC,OAKV1J,EAAKyS,SAAS/I,GALJwN,EAAAjW,KAAA,gBAAAiW,EAAAlW,KAAA,EAAAkW,EAAA/E,GAAA+E,EAAA,SAOVlX,EAAKD,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,UARD,eAAA6E,EAAAlW,KAAA,GAWVhB,EAAK+Q,eAAeuB,gBAXV4E,EAAA3E,OAAA,6BAAA2E,EAAAhW,SAAA+V,EAAA,uBAlNZjX,EAAKmB,MAAQ,CACXuI,UAAW,GACXyH,cAAe,GACfiC,cAAe,GACfhC,iBAAkB,GAClBuF,mBAAoB,GACpBlD,gBAAiB,GACjByG,aAAc,GACdzQ,SAAU,GACVoI,cAAc,EACd3K,UAAU,EACVhD,WAAW,EACX6U,mBAAmB,EACnB+D,WAAY,GACZuB,OAAQ,IAGVre,EAAKse,gBAAkBte,EAAKse,gBAAgBzG,KAArBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACvBA,EAAKue,iBAAmBve,EAAKue,iBAAiB1G,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACxBA,EAAKwe,YAAcxe,EAAKwe,YAAY3G,KAAjBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACnBA,EAAKyS,SAAWzS,EAAKyS,SAASoF,KAAdna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAtBCA,iFA0BjBpC,KAAKoE,SAAS,CAAEkC,WAAW,+CAI3BtG,KAAKoE,SAAS,CAAEkC,WAAW,8CAGXC,GAChBvG,KAAKoE,SAAS,CAAE+W,mBAAmB,iDAInCnb,KAAKoE,SAAS,CAAE+W,mBAAmB,uCAG1B5U,GACTvG,KAAKoE,SAAS,CAAE8a,WAAY3Y,EAAE0C,OAAOnD,oFAGrBS,8FACiCvG,KAAKuD,MAA9CuI,cAAW0J,kBAAe0J,eAE9BvP,EAAW6F,EAAc,GAAGY,IAC5BxG,EAAY4F,EAAc,GAAGiG,WAC7B5L,EAAUqP,EACH,SACK,GAChB3Y,EAAEC,0BAGAxG,KAAKmT,eAAegB,yBACdnU,KAAKoT,kBAAkB1B,eAC3B/B,EACAC,EACAC,EATO,SACK,6BAYR7P,KAAK6U,SAAS/I,WACpB9L,KAAKmC,MAAMqS,gBAAgB,kBAAmB,CAC5CC,QAAS,8DAGXzU,KAAKmC,MAAMqS,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXzU,KAAKmT,eAAeuB,qCAGtB1U,KAAK2gB,oTAkB2B3gB,KAAKmC,MAAMkR,MAAMC,OAAzCxH,cAAW0B,sBACbxN,KAAK6U,SAAS/I,UAEhB0B,GACFzD,WAAW,WACT,IAAMR,EAAM7F,EAAK+V,KAAKjM,GAClBjE,GACFA,EAAImQ,kBAEL,0LAIkB7P,EAAWC,iFACiB9J,KAAKuD,MAAhDuI,cAAW0J,kBAAevB,iBAC9BnI,IAAchC,EAAUgC,YACG,IAAzB0J,EAAcpV,QAAiB6T,GACjCjU,KAAK6U,SAAS/I,kLAKLA,mFAEX9L,KAAKmT,eAAegB,wBACdnU,KAAK8U,cAAchJ,0BACnB9L,KAAKsU,eAAexI,0DAE1B9L,KAAKoE,SAAS,CAAE6P,cAAc,IAC9B4M,MAAK,UAAAhd,OAAAid,EAAAvM,8BAELvU,KAAKmT,eAAeuB,6NAIJ5I,2FACU9L,KAAKoT,kBAAkB2B,mCAA7CC,UACAC,EAAmBD,EAActI,OACrC,SAAAwI,GAAE,OAAIA,EAAGvK,MAAMwK,cAAc/H,QAAQ,OAAQ,MAAQtB,KAElC1L,OAAS,IAC5BJ,KAAKoE,SAAS,CAAEyH,SAAUoJ,EAAiB,GAAGpJ,SAASwJ,YACvDrV,KAAKoE,SAAS,CAAEkY,aAAcrH,EAAiB,GAAGG,qMAIjCtJ,sFACXD,EAAa7L,KAAKuD,MAAlBsI,SACFyJ,EAAczJ,EAASa,OAAO,SAAAC,GAAO,MAAuB,SAAnBA,EAAQ4I,SACjDrB,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQ4I,SACpDC,EAAgB,GAChBlM,GAAW,GAEX4K,EAAa9T,wCACOJ,KAAKoT,kBAAkBqC,2BAC3C3J,UADF0J,SAGAxV,KAAKoE,SAAS,CAAE2U,mBAAoB7E,EAAa,GAAGrH,KACpDvD,GAAW,EACXtD,QAAQC,IAAIuP,+BAERF,EAAYlV,yCACQJ,KAAKoT,kBAAkBsC,sBAC3C5J,EACAwJ,EAAY,GAAG1I,gBAFjB4I,iBAOAA,EAAcpV,SACV4Y,EAAkBxD,EAAc,GAAGQ,QAAQlL,IAAI,SAAAmL,GAAM,MAAK,CAC9D9L,YAAa8L,EAAOtL,MACpBP,KAAM6L,EAAO7L,QAEfpK,KAAKoE,SAAS,CACZmP,cAAeiC,EAAc,GAAG7K,MAChC6K,cAAeA,EACfhC,iBAAkBgC,EAAc,GAAG7I,QACnCkJ,gBAAiBL,EAAc,GAAGD,OAClCyD,kBACA1P,mJAqDG,IAAA2N,EAAAjX,KAAAkX,EAYHlX,KAAKuD,MAVPuI,EAFKoL,EAELpL,UACAyH,EAHK2D,EAGL3D,cACAiC,EAJK0B,EAIL1B,cACAhC,EALK0D,EAKL1D,iBACAqC,EANKqB,EAMLrB,gBACAyG,EAPKpF,EAOLoF,aAEAzQ,EATKqL,EASLrL,SACAoI,EAVKiD,EAULjD,aACA3K,EAXK4N,EAWL5N,SAGF,OAAI2K,EACK1P,EAAAzB,EAAA0B,cAAC6S,EAAD,MAGoB,IAAzB7B,EAAcpV,OACT,KAIPmE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAAA,UAAK+O,GACLhP,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,OAAO8O,GACvBjP,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,4BACO,KAApBmR,EAAyB,QAAUA,IAGxCtR,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAC2V,GAAD,CACE7Q,SAAUA,EACVuO,YAAa7X,KAAK6X,YAClBhM,SAAUA,EACV8L,QAAS3X,KAAKkZ,kBACdtB,YAAa5X,KAAK4X,eAGtBrT,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kCACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iCAEfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iCACC,IAAb4E,EACC/E,EAAAzB,EAAA0B,cAAA,UACEW,KAAK,IACLT,UAAU,+CACVU,QAASpF,KAAK0gB,iBAEb,IACDnc,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sCANf,eAOU,KAGV,MAMRH,EAAAzB,EAAA0B,cAACuc,GAAD,CACExE,YAAajT,EACbwC,UAAWA,EACX0J,cAAeA,EACf8G,aAAcA,EACdzH,SAAU7U,KAAK6U,WAGjBtQ,EAAAzB,EAAA0B,cAACgT,EAAD,CAAmB1L,UAAWA,EAAWD,SAAUA,IAInDtH,EAAAzB,EAAA0B,cAACmC,EAAA,MAAD,CACEC,KAAM5G,KAAKuD,MAAM+C,UACjBO,QAAS7G,KAAK2gB,iBACd5Z,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGT3C,EAAAzB,EAAA0B,cAAA,4BACAD,EAAAzB,EAAA0B,cAAA,8CACAD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,WACdH,EAAAzB,EAAA0B,cAAA,YACEqI,GAAG,kBACHoQ,KAAK,IACLxX,SAAU,SAAAc,GAAC,OAAI0Q,EAAK+J,WAAWza,IAC/ByE,UAAQ,EACRtG,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAAS,SAAAmB,GAAC,OAAI0Q,EAAK2J,YAAYra,KAFjC,8DAlPsBpE,EAAOoB,GAAO,IACpCuI,EAAc3J,EAAMkR,MAAMC,OAA1BxH,UACR,OAAIA,IAAcvI,EAAMuI,UACf,CACLA,YACA0J,cAAe,GACfvB,cAAc,GAKX,YA7FcxR,IAAM8C,WAiVhBkS,0BAAa6I,aC7SbW,cAzCb,SAAAA,EAAY9e,GAEV,GAFkBrC,OAAAC,EAAA,EAAAD,CAAAE,KAAAihB,GAAAjhB,KAFpBmQ,KAAO,IAAI5O,EAIL0f,EAAehhB,SACjB,OAAOD,KAAKC,SAGdghB,EAAehhB,SAAWD,mHAIIkhB,EAAMxU,EAAQyU,EAAYC,yFACjCphB,KAAKmQ,KAAKvO,IAAV,GAAAiC,OAjBL7C,wBAiBK,+EAAA6C,OACkEqd,EADlE,WAAArd,OACgF6I,EADhF,UAAA7I,OAC+Fsd,EAD/F,eAAAtd,OACuHud,EADvH,+BAC+J,EAD/J,eAAAvd,OACiLxC,KAAKC,sBADvM8O,2BAGCA,EAASC,0LAGD6Q,EAAMxU,EAAQyU,yFACNnhB,KAAKmQ,KAAKvO,IAAV,GAAAiC,OAxBL7C,wBAwBK,0DAAA6C,OAG6Cqd,EAH7C,WAAArd,OAG2D6I,EAH3D,UAAA7I,OAG0Esd,kBAH3F/Q,2BAKCA,EAASC,4LAGG6Q,EAAMxU,EAAQyU,EAAYC,yFACtBphB,KAAKmQ,KAAKvO,IAAV,GAAAiC,OAjCL7C,wBAiCK,+EAAA6C,OACkEqd,EADlE,WAAArd,OACgF6I,EADhF,UAAA7I,OAC+Fsd,EAD/F,eAAAtd,OACuHud,kBADxIhR,2BAGCA,EAASC,+LAGIgR,yFACGrhB,KAAKmQ,KAAKvO,IAAV,GAAAiC,OAxCL7C,wBAwCK,yDAAA6C,OAC4Cwd,EAD5C,wCAAjBjR,2BAGCA,EAASC,kHC7Cb,SAASiR,GAAQC,GACtB,OAAOA,EACJpM,cACA/H,QAAQ,WAAY,IACpBA,QAAQ,MAAO,SCKdoU,8MACJrO,eAAiB,IAAIvB,IACrBwB,kBAAoB,IAAIlD,IACxBuR,eAAiB,IAAIR,KAErB1d,MAAQ,CACNuI,UAAW1J,EAAKD,MAAMkR,MAAMC,OAAOxH,UACnCa,QAASvK,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAC5CwB,cAAe,GACflH,aAAclM,EAAKD,MAAMkR,MAAMC,OAAOM,IACtC8N,cAAe,GACfC,UAAW,+MAYT3hB,KAAKmT,eAAegB,wBACdyN,QAAQC,IAAI,CAChB7hB,KAAK8hB,eACL9hB,KAAKgd,gBACLhd,KAAK+hB,iBACJ/d,KAAK,WAGN,GAAe,SAFA,IAAIge,gBAAgBzhB,OAAOmH,SAASua,QAC/BrgB,IAAI,UACD,CACrB,IAAIsgB,EAAUxY,SAASyY,eAAe,4BAClCD,IACFA,EAAQxI,iBACRwI,EAAQxI,gBAAe,GACvBwI,EAAQxI,eAAe,CAAE0I,MAAO,UAChCF,EAAQxI,eAAe,CACrB2I,SAAU,SACVD,MAAO,QACPE,OAAQ,uCAMhBtiB,KAAKmT,eAAeuB,ySAKd5I,EAAc9L,KAAKuD,MAAnBuI,UACAa,EAAY3M,KAAKuD,MAAjBoJ,iBACoB3M,KAAKoT,kBAAkBsC,sBACjD5J,EACAa,EAAQ,WAFJ6I,SAKNxV,KAAKoE,SAAS,CACZoR,gSAK0BxV,KAAKoT,kBAAkBmP,0BAA7CvN,SACElJ,EAAc9L,KAAKuD,MAAnBuI,WACF0W,EAAiBxN,EAActI,OACnC,SAAAqJ,GAAI,OAAIA,EAAKlQ,KAAKsP,gBAAkBrJ,KAEnB1L,SACXshB,EAAgBc,EAAe,GAAGpN,gBAAgBtK,IACtD,SAAAuJ,GAAS,OAAIA,EAAU1J,QAEzB3K,KAAKoE,SAAS,CAAEsd,mSAMQ1hB,KAAKyhB,eAAegB,gBAC1CziB,KAAKuD,MAAM+K,qBADPqT,SAWN3hB,KAAKoE,SAAS,CAAEud,cAEhB3hB,KAAKoE,SAAS,CAAEud,8DAEhB3hB,KAAKmC,MAAMqS,gBAAgB,wCAAyC,CAClEC,QAAS,6JAOb,OADsBzU,KAAKuD,MAAnBoe,UACS7W,IAAI,SAAAyG,GAAQ,OAC3BhN,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK4M,EAAS6E,KAChB7R,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAI,CACF8C,SAAQ,uBAAA9D,OAAyByd,GAAQ/P,EAAS5G,QAClDpH,MAAO,CACLmf,qBAAsBnR,EAAS6E,OAIlC7E,EAAS5G,2CAOT,IAAAjH,EAAA1D,KAAAmG,EAMHnG,KAAKuD,MAJP+K,EAFKnI,EAELmI,aACAkH,EAHKrP,EAGLqP,cACAkM,EAJKvb,EAILub,cACAC,EALKxb,EAKLwb,UAGIzL,EAAe,GACrBlQ,QAAQC,IAAIuP,GACZA,EAActD,QAAQ,SAAA6D,GAAI,OACxBA,EAAKC,QAAQ9D,QAAQ,SAAA+D,GAAM,OACzBA,EAAOC,aAAahE,QAAQ,SAAAiE,GACtBA,EAAWtJ,KAAOyB,GACpB4H,EAAalE,KAAblS,OAAA6iB,GAAA,EAAA7iB,CAAA,GACKqW,EADL,CAEErK,UAAWiK,EAAKpL,MAChBsL,OAAQA,EAAOtL,eAOzB,IAAMiY,EAAoB1M,EAAapL,IAAI,SAAAqL,GAAU,OACnD5R,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKwR,EAAWtJ,IACnBtI,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UAAK2R,EAAWxL,OAChBpG,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAAA,UACGkd,EAAc5W,IAAI,SAAA0R,GACjB,OACEjY,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK6X,GACRjY,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBACZ,IACDH,EAAAzB,EAAA0B,cAAA,UAAKgY,IAENrG,EAAW3E,WAAW1G,IAAI,SAAAuJ,GACzB,OAAIA,EAAUnU,OAASsc,EACdjY,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK0P,EAAUxH,IAAKwH,EAAU1J,MAAlC,KAEF,WAOjBpG,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,sCACAD,EAAAzB,EAAA0B,cAAA,SACG,IACA2R,EAAWgI,wBACRjR,IAAOiJ,EAAWgI,yBAClB,oBAAqB,KAGL,IAArBwD,EAAUvhB,OAAe,KACxBmE,EAAAzB,EAAA0B,cAAA,OAAKqI,GAAG,4BACNtI,EAAAzB,EAAA0B,cAAA,0DACAD,EAAAzB,EAAA0B,cAAA,UAAKd,EAAKmf,wBASxB,OACEte,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACZ8Q,EAAcpV,OAAS,EACtBmE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBAAiB8E,aAAW,cACzCjF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kDACZH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAG,IAAIH,UAAU,wBAAvB,SAIFH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgB2R,EAAc,GAAG7K,MAAMwK,cAAvC,KAAAtR,OACA2R,EAAc,GAAG7I,UAGlB6I,EAAc,GAAG7K,MALpB,IAK4B6K,EAAc,GAAG7I,SACrC,KAEVpI,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,wBAMJ,GAGDF,WA5NqBngB,IAAM8C,WAmOvBkS,0BAAa+J,yCCpO5B,SAASuB,GAAThY,GAQGA,EAPDkH,MAOC,IANDnG,EAMCf,EANDe,UACAqK,EAKCpL,EALDoL,WAEAxJ,GAGC5B,EAJDiY,QAICjY,EAHD4B,SACA+G,EAEC3I,EAFD2I,eACAuP,EACClY,EADDkY,uBAEMC,EAAoBC,aAAQhN,EAAW3E,WAAY,QAEnDA,EADYkC,EACW5I,IAAI,SAAA5K,GAC/B,IAAMsR,EAAa0R,EAAkBhjB,GACjCgjB,EAAkBhjB,GAAM4K,IAAI,SAAAuJ,GAAS,OACnC9P,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBC,IAAK0P,EAAUxH,IAC1CwH,EAAU1J,SAGf,GACJ,OAAO6G,EACLjN,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKzE,EAAMwE,UAAU,kBACxBH,EAAAzB,EAAA0B,cAAA,UAAKtE,GACLqE,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAqBK,MAAO,CAAEqe,YAAa,SACtD5R,IAIL,KAIJ,MAA4B,MAAxB2E,EAAWQ,SACN,KAIPpS,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UA+BED,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,aAAa2e,OAAK,GACnC9e,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,uBAAuByR,EAAWxL,OACpD6G,EACDjN,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgBiI,EAAhB,KAAAjI,OAA6B8I,EAA7B,wBAAA9I,OACAsS,EAAWtJ,GADX,iBAIFtI,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,2CACZue,EACG,oDACA,oDAUpBF,GAAe9Y,aAAe,CAC5BqZ,YAAa,EACbrR,MAAO,EACP+Q,SAAS,EACTC,wBAAwB,GAaXF,UC/Gf,SAASQ,GAATxY,GAQGA,EAPDkH,MAOC,IANDnG,EAMCf,EANDe,UACAmK,EAKClL,EALDkL,OACA+M,EAICjY,EAJDiY,QACArW,EAGC5B,EAHD4B,QACA+G,EAEC3I,EAFD2I,eACAuP,EACClY,EADDkY,uBAEM/M,EAAeD,EAAOC,aAAapL,IAAI,SAACqL,EAAYqN,GAAb,OAC3Cjf,EAAAzB,EAAA0B,cAACif,GAAD,CACE9e,IAAKwR,EAAWtJ,GAChBoF,MAAOuR,EACP1X,UAAWA,EACXqK,WAAYA,EACZ6M,QAASA,EACTrW,QAASA,EACT+G,eAAgBA,EAChBuP,uBAAwBA,MAI5B,OACE1e,EAAAzB,EAAA0B,cAAA,SAAOO,MAAO,CAAE4G,OAAQ,SACtBpH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAEiD,aAAc,IAA3B,IAAkCiO,EAAOtL,SAG5CuL,GAKPqN,GAAWtZ,aAAe,CACxBgM,OAAQ,CAAEtL,MAAO,GAAIuL,aAAc,IACnC8M,SAAS,EACTC,wBAAwB,GAYXM,mCC1COhe,qECoiBPwd,sNAhhBb3P,kBAAoB,IAAIlD,IACxBiD,eAAiB,IAAIvB,IACrB6P,eAAiB,IAAIR,KAErB1d,MAAQ,CACNuI,UAAW,GACX0H,iBAAkB,GAClBD,cAAe,GACfsC,gBAAiB,GACjB6N,qBAAsB,GACtB7X,SAAU,GACVmK,QAAS,GACTtJ,OAAQ,GACRiX,gBAAiB,GACjB1P,cAAc,EACdgP,wBAAwB,EACxBW,aAAc,EACdC,aAAc,EACdnQ,eAAgB,GAChBoQ,qBAAqB,EACrBC,YAAa,GACbC,iBAAkB,EAClBC,UAAW7hB,EAAKD,MAAM+hB,QAAQxc,SAASC,SACvCwc,gBAAiB,KAmLnBC,SAAW,SAAA1X,GAAU,IAEf2X,EADIrO,EAAY5T,EAAKmB,MAAjByS,QAER,IACEqO,EAAO,IAAIxR,OAAOnG,EAAQ,KAC1B,MAAOnG,GACP8d,EAAO,IAET,IAAMV,EAAkB3N,EAAQlL,IAAI,SAAAmL,GAClC,IAAMqO,EAAuBrO,EAAOC,aAAaxJ,OAAO,SAAAyJ,GAAU,OAChEkO,EAAKE,KAAKpO,EAAWxL,SAEvB,OAAoC,IAAhC2Z,EAAqBlkB,OAChB,KAEFN,OAAA6iB,GAAA,EAAA7iB,CAAA,GAAKmW,EAAZ,CAAoBC,aAAcoO,MAEpCliB,EAAKgC,SAAS,CAAEsI,SAAQiX,+NA9KpBI,EAAc,IACdvjB,aAAaC,QAAQ,UAAYT,KAAKuD,MAAMqgB,aAAe,IAC7DG,EAAY/R,KAAK,oBAEfxR,aAAaC,QAAQ,UAAYT,KAAKuD,MAAMsgB,aAAe,IAC7DE,EAAY/R,KAAK,qBAEnB+R,EAAY/R,KAAK,gBACbhS,KAAKuD,MAAM0f,wBACbc,EAAY/R,KAAK,sBAEnB+R,EAAY/R,KAAK,mBACXhS,KAAKoE,SAAS,CAAE2f,YAAaA,WAGnC,IAFIS,EAAajkB,OAAOmH,SAASvC,KAC7B6e,EAAmB,EACd1G,EAAI,EAAGA,EAAItd,KAAKuD,MAAMwgB,YAAY3jB,OAAQkd,IAC7CkH,EAAWlf,SAAStF,KAAKuD,MAAMwgB,YAAYzG,MAC7C0G,EAAmB1G,GAGvBtd,KAAKoE,SAAS,CACZ4f,iBAAkBA,qRAK6BhkB,KAAKmC,MAAMkR,MAAMC,OAA1DxH,cAAoB0H,IAAT7G,QACnB3M,KAAKoE,SAAS,CAAE+f,gBAAiBnkB,KAAKuD,MAAM0gB,UAAUjQ,MAAM,KAAK5T,SACjEG,OAAOkkB,kBAELzkB,KAAKmT,eAAegB,oBACdyN,iBACE5hB,KAAKsU,eAAexI,EAAW0H,uCAC/BxT,KAAK8U,cAAchJ,wCACnB9L,KAAK0kB,qDACL1kB,KAAK2kB,qDACL3kB,KAAKyhB,eACRmD,0BAA0B,EAAG,GAAI,MAAO9Y,GACxC9H,KAAK,SAAAic,GACAA,EAAQ,GACVvc,EAAKU,SAAS,CACZ6e,wBAAwB,sEAI1B,WACNvf,EAAKU,SAAS,CACZ0f,qBAAqB,IAEvBpgB,EAAKmhB,gCAlBOhD,oBAcX7d,qEAOHhE,KAAKoE,SAAS,CAAE6P,cAAc,6BAE9BjU,KAAKmT,eAAeuB,kOAKC7K,EAAWC,sFAC6B9J,KAAKuD,MAA5DuI,cAAW0H,qBAAkBwC,YAAS/B,iBAE5CnI,IAAchC,EAAUgC,WACxB0H,IAAqB1J,EAAU0J,qCAER,IAAnBwC,EAAQ5V,QAAiB6T,mCAEzBjU,KAAKmT,eAAegB,wBACdnU,KAAKsU,eAAexI,EAAW0H,0DAErCxT,KAAKoE,SAAS,CAAE6P,cAAc,6BAE9BjU,KAAKmT,eAAeuB,qCAGxB1U,KAAK0kB,gBACL1kB,KAAK2kB,4KAKO,IAAA1N,EAAAjX,KAAAyG,EAC0BzG,KAAKuD,MAArCuI,EADMrF,EACNqF,UAAW0H,EADL/M,EACK+M,iBACnB5P,MAAK,GAAAC,OACA9C,EADA,SAAA8C,OACciI,EADd,KAAAjI,OAC2B2P,EAD3B,gDAGFxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8gB,GACJ7N,EAAK7S,SAAS,CACZwf,aAAckB,EAAapY,OACzB,SAAAqJ,GAAI,MAA+B,SAA3BA,EAAKgP,oBACb3kB,mDAMM,IAAA0Z,EAAA9Z,KACN8L,EAAc9L,KAAKuD,MAAnBuI,UACRlI,MAAK,GAAAC,OACA9C,EADA,SAAA8C,OACciI,EADd,gDAGF9H,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8gB,GACJhL,EAAK1V,SAAS,CACZyf,aAAciB,EAAapY,OACzB,SAAAqJ,GAAI,OAA+B,IAA3BA,EAAKgP,oBACb3kB,0FAMW0L,EAAW0H,4FAC9BjT,OAAOqU,OAAO,EAAG,YACW5U,KAAKoT,kBAAkBsC,sBACjD5J,EACA0H,iBAFIgC,SAIAQ,EAAU7D,EAASqD,EAAc1K,IAAI,SAAAiL,GAAI,OAAIA,EAAKC,WAClD0N,EAAuB3Q,EAAeyC,EAAc,GAAGrL,aAE7DnK,KAAKoE,SAAS,CACZmP,cAAeiC,EAAc,GAAG7K,MAEhC+Y,uBACA1N,UACA2N,gBAAiB3N,EACjBgP,YAAaxP,EAAc,GAAGY,eAGJpW,KAAKoT,kBAAkB2B,mCAA7CC,UACAC,EAAmBD,EAActI,OACrC,SAAAwI,GAAE,OAAIA,EAAGvK,MAAMwK,cAAc/H,QAAQ,KAAM,MAAQtB,KAEhC1L,OAAS,IACtB6kB,EAAgBhQ,EAAiB,GAAGpJ,SAASa,OACjD,SAAAwY,GAAE,OAAIA,EAAGtY,SAAW4G,IAEtBxT,KAAKoE,SAAS,CAAEyR,gBAAiBoP,EAAc,GAAG1P,SAC9C4P,EAAYlQ,EAAiB,GAAGG,gBAAgBtK,IAClD,SAAA5K,GAAI,OAAIA,EAAKyK,QAEf3K,KAAKoE,SAAS,CAAEsP,eAAgByR,yLAIhBrZ,2FACU9L,KAAKoT,kBAAkB2B,mCAA7CC,UACAC,EAAmBD,EAActI,OACrC,SAAAwI,GAAE,OAAIA,EAAGvK,MAAMwK,cAAc/H,QAAQ,KAAM,MAAQtB,KAEhC1L,OAAS,GAC5BJ,KAAKoE,SAAS,CAAEyH,SAAUoJ,EAAiB,GAAGpJ,SAASwJ,gJAwBlD,IAAA+P,EAAAplB,KAAA0W,EAaH1W,KAAKuD,MAXPuI,EAFK4K,EAEL5K,UACA0H,EAHKkD,EAGLlD,iBACAD,EAJKmD,EAILnD,cAEAsC,GANKa,EAKLsO,YALKtO,EAMLb,iBACA6N,EAPKhN,EAOLgN,qBACAC,EARKjN,EAQLiN,gBAGA1P,GAXKyC,EASL7K,SATK6K,EAULhK,OAVKgK,EAWLzC,cACAP,EAZKgD,EAYLhD,eAGF,GAAIO,EACF,OAAO1P,EAAAzB,EAAA0B,cAAC6S,EAAD,MAGUsM,EAAgB7Y,IAAI,SAAAmL,GAAM,OAChC,OAAXA,EAAkB,KAChB1R,EAAAzB,EAAA0B,cAAC6gB,GAAD,CACE1gB,IAAKsR,EAAOG,IACZtK,UAAWA,EACXmK,OAAQA,EACR+M,SAAS,EACTrW,QAAS6G,EACTE,eAAgBA,EAChBuP,uBAAwBmC,EAAK7hB,MAAM0f,2BAgBzC,OACE1e,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACfH,EAAAzB,EAAA0B,cAAA,UACG,IAEC8gB,GAAS5Y,OAAO,SAAAqJ,GAAI,OAAIA,EAAKpL,QAAUya,EAAK7hB,MAAMuI,YAAW,GAAGyZ,KAChE,KAEJhhB,EAAAzB,EAAA0B,cAAA,UAAK+O,GACLhP,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,YAAY8O,GAC5BjP,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,8BAAhB,IAA+CmR,IAEjDtR,EAAAzB,EAAA0B,cAAA,SAAIkf,GA6NJnf,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgB8gB,mBAAA,GAC5BjhB,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,iBACZH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAAgBS,KAAK,wBAAlC,YAEFZ,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,iBACZH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAAgBS,KAAK,wBAAlC,sBAKNZ,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBAAkB+gB,2BAAA,GAC/BlhB,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,mBAAmBmI,GAAG,uBACvCtI,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,4KAAmKD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,UAAUS,KAAK,KAA5B,cAAnK,sJAEFZ,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,mBAAmBmI,GAAG,uBACvCtI,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,uZACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,UAAUS,KAAK,4CAA5B,oFA9esBhD,EAAOoB,GAAO,IAAAmiB,EACKvjB,EAAMkR,MAAMC,OAArDxH,EADoC4Z,EACpC5Z,UAAoB0H,EADgBkS,EACzB/Y,QACnB,OACEb,IAAcvI,EAAMuI,WACpB0H,IAAqBjQ,EAAMiQ,iBAEpB,CACL1H,YACA0H,mBACAwC,QAAS,GACT/B,cAAc,GAKX,YAhDkB1O,yBCtBFA,YCqBQA,8BChB7BogB,eACJ,SAAAA,EAAYxjB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2lB,IACjBvjB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAA6lB,GAAApjB,KAAAvC,KAAMmC,KAEDoB,MAAQ,CACX8M,KAAM,GACNuV,KAAM,GACNC,YAAY,EACZ9R,KAAM3R,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KACzCoC,IAAK,GACLzL,MAAO,GACPyE,MAAO,GACPC,OAAQ,GACRnP,KAAM,GACNiK,YAAa,GACbzC,SAAU,GACVhG,IAAK,GACL4N,gBAAiB,GACjBC,kBAAmB,GACnBC,SAAU,GACVC,WAAY,GACZC,SAAU,IAEZtN,EAAK0jB,WAAa1jB,EAAK0jB,WAAW7L,KAAhBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAtBDA,iFAyBD2jB,GAChB,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAE+F,YAAa6b,iDAGVD,GACnB,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEkL,gBAAiB0W,mDAGZD,GACrB,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEmL,kBAAmByW,6CAGpBD,GACf,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEqL,WAAYuW,2CAGfD,GACb,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEsL,SAAUsW,gDAGR,IAAAtiB,EAAA1D,KAClBA,KAAKoE,SAAS,CAAEgS,IAAKpW,KAAKuD,MAAMwQ,KAAK,KAErC,IAAIkS,EAAO,GAAApiB,OAAM9C,EAAN,uBACX6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJxiB,EAAKU,SAAS,CAAEwhB,KAAMM,MAG1B,IAAIC,EAAa,GAAAtiB,OAAM9C,EAAN,UAAA8C,OAAqB7D,KAAKuD,MAAMwQ,KAAK,GAArC,iBAGjBnQ,MAAMuiB,GACHniB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CACZiM,KAAMlM,0CAKP3D,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS6E,SAAS,qBACjDub,MACE,yEAEF7gB,KAAKmC,MAAM+hB,QAAQlS,KAAK,MALxBhS,KAAKmC,MAAM+hB,QAAQlS,KAAK,0CAY1BhS,KAAKmC,MAAM+hB,QAAQlS,KAAK,uBAAyBhS,KAAKuD,MAAM6S,sCAI5DpW,KAAKc,YACL,IAAIsV,EAAM,GACNzL,EAAQ,GACRyE,EAAQ,GACRC,EAAS,GACTnP,EAAO,GACPiK,EAAc,GACdzC,EAAW,GACXhG,EAAM,GACN4N,EAAkB,GAClBC,EAAoB,GACpBC,EAAW,GACXC,EAAa,GACbC,EAAW,GAIf,GAAI1P,KAAKuD,MAAM8M,KAAK+F,IAAK,CACvB,IAAIL,EAAO/V,KAAKuD,MAAM8M,KACtB+F,EAAML,EAAKK,IAAI,GAAGtQ,MAClB6E,EAAQoL,EAAKpL,MAAM,GAAG7E,MACtBsJ,EAAQ2G,EAAKqQ,YAAY,GAAKrQ,EAAKqQ,YAAY,GAAGtgB,MAAQ,KAC1DuJ,EAAS0G,EAAKsQ,eAAe,GAAKtQ,EAAKsQ,eAAe,GAAGvgB,MAAQ,KACjE5F,EAAO6V,EAAKhG,WAAW,GAAGjK,MAC1BqE,EAAc4L,EAAKuQ,kBAAkB,GACjCvQ,EAAKuQ,kBAAkB,GAAGxgB,MAC1B,KACJ4B,EAAWqO,EAAKwQ,eAAe,GAAKxQ,EAAKwQ,eAAe,GAAGzgB,MAAQ,KACnEpE,EAAMqU,EAAKyQ,UAAU,GAAKzQ,EAAKyQ,UAAU,GAAG1gB,MAAQ,KACpDwJ,EAAkByG,EAAK0Q,sBAAsB,GACzC1Q,EAAK0Q,sBAAsB,GAAG3gB,MAC9B,KACJyJ,EAAoBwG,EAAK2Q,wBAAwB,GAC7C3Q,EAAK2Q,wBAAwB,GAAG5gB,MAChC,KACJ0J,EAAWuG,EAAK4Q,oBAAoB,GAChC5Q,EAAK4Q,oBAAoB,GAAG7gB,MAC5B,KACJ2J,EAAasG,EAAK6Q,iBAAiB,GAC/B7Q,EAAK6Q,iBAAiB,GAAG9gB,MACzB,KACJ4J,EAAWqG,EAAK8Q,eAAe,GAAK9Q,EAAK8Q,eAAe,GAAG/gB,MAAQ,KAMrE,OAAI9F,KAAKuD,MAAM8M,KAAK+F,KAClBpQ,QAAQC,IAAImJ,GAEV7K,EAAAzB,EAAA0B,cAACsiB,GAAD,CACE1Q,IAAKA,EACLzL,MAAOA,EACPyE,MAAOA,EACPC,OAAQA,EACRnP,KAAMA,EACNiK,YAAaA,EACbzC,SAAUA,EACVhG,IAAKA,EACL4N,gBAAiBA,EACjBC,kBAAmBA,EACnBC,SAAUA,EACVC,WAAYA,EACZC,SAAUA,EACVoW,WAAY9lB,KAAK8lB,cAId,YA9JcrjB,IAAM8C,WAmK3BwhB,eAGJ,SAAAA,EAAY5kB,GAAO,IAAA8U,EAAA,OAAAnX,OAAAC,EAAA,EAAAD,CAAAE,KAAA+mB,IACjB9P,EAAAnX,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAinB,GAAAxkB,KAAAvC,KAAMmC,KAHRgR,eAAiB,IAAIvB,EAEFqF,EADnB7D,kBAAoB,IAAIlD,EACL+G,EAoGnB+P,YAAc,WACZ/P,EAAK9U,MAAM+hB,QAAQlS,KAAK,2BAnGxBiF,EAAK1T,MAAQ,CACX6S,IAAKa,EAAK9U,MAAMiU,IAChBzL,MAAOsM,EAAK9U,MAAMwI,MAClByE,MAAO6H,EAAK9U,MAAMiN,MAClBC,OAAQ4H,EAAK9U,MAAMkN,OACnBnP,KAAM+W,EAAK9U,MAAMjC,KACjBiK,YAAa8M,EAAK9U,MAAMgI,YACxBzC,SAAUuP,EAAK9U,MAAMuF,SACrBhG,IAAKuV,EAAK9U,MAAMT,IAChB4N,gBAAiB2H,EAAK9U,MAAMmN,gBAC5BC,kBAAmB0H,EAAK9U,MAAMoN,kBAC9BC,SAAUyH,EAAK9U,MAAMqN,SACrBC,WAAYwH,EAAK9U,MAAMsN,WACvBC,SAAUuH,EAAK9U,MAAMuN,SACrBuX,UAAU,EACVpB,YAAY,EACZD,KAAM,IAER3O,EAAKiQ,YAAcjQ,EAAKiQ,YAAYjN,KAAjBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACnBA,EAAKkQ,YAAclQ,EAAKkQ,YAAYlN,KAAjBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACnBA,EAAKmQ,aAAenQ,EAAKmQ,aAAanN,KAAlBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACpBA,EAAKoQ,WAAapQ,EAAKoQ,WAAWpN,KAAhBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IAClBA,EAAKqQ,WAAarQ,EAAKqQ,WAAWrN,KAAhBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IAClBA,EAAKsQ,eAAiBtQ,EAAKsQ,eAAetN,KAApBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACtBA,EAAKuQ,UAAYvQ,EAAKuQ,UAAUvN,KAAfna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACjBA,EAAKwQ,qBAAuBxQ,EAAKwQ,qBAAqBxN,KAA1Bna,OAAAkb,GAAA,EAAAlb,CAAAmX,IAC5BA,EAAKyQ,uBAAyBzQ,EAAKyQ,uBAAuBzN,KAA5Bna,OAAAkb,GAAA,EAAAlb,CAAAmX,IAC9BA,EAAK0Q,eAAiB1Q,EAAK0Q,eAAe1N,KAApBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACtBA,EAAK2Q,iBAAmB3Q,EAAK2Q,iBAAiB3N,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IACxBA,EAAK4Q,eAAiB5Q,EAAK4Q,eAAe5N,KAApBna,OAAAkb,GAAA,EAAAlb,CAAAmX,IA/BLA,mFAmCC,IAAA6C,EAAA9Z,KACdimB,EAAO,GAAApiB,OAAM9C,EAAN,uBACX6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJpM,EAAK1V,SAAS,CAAEwhB,KAAMM,0CAQhBxgB,GACV1F,KAAKoE,SAAS,CAAEuG,MAAOjF,EAAMI,4CAGnBJ,GACV1F,KAAKoE,SAAS,CAAEgL,MAAO1J,EAAMI,6CAGlBJ,GACX1F,KAAKoE,SAAS,CAAEiL,OAAQ3J,EAAMI,2CAGrBJ,GACT1F,KAAKoE,SAAS,CAAElE,KAAMwF,EAAMI,2CAGnBJ,GACT1F,KAAKoE,SAAS,CAAE+F,YAAazE,EAAMiT,OAAOC,mDAI7BlT,GACb1F,KAAKoE,SAAS,CAAEsD,SAAUhC,EAAMI,0CAExBJ,GACR1F,KAAKoE,SAAS,CAAE1C,IAAKgE,EAAMI,qDAGRJ,GACnB1F,KAAKoE,SAAS,CAAEkL,gBAAiB5J,EAAMiT,OAAOC,2DAIzBlT,GACrB1F,KAAKoE,SAAS,CAAEmL,kBAAmB7J,EAAMiT,OAAOC,mDAInClT,GACb1F,KAAKoE,SAAS,CAAEoL,SAAU9J,EAAMI,iDAGjBJ,GACf1F,KAAKoE,SAAS,CAAEqL,WAAY/J,EAAMiT,OAAOC,mDAI5BlT,GACb1F,KAAKoE,SAAS,CAAEsL,SAAUhK,EAAMiT,OAAOC,uDAQtB/O,EAAWC,GACxB9J,KAAKuD,MAAMsiB,gDASJiC,EAAIC,GAIf,QAHY,IAAI1mB,KAAKymB,GACT,IAAIzmB,KAAK0mB,iFASJriB,sGACjBA,EAAMc,iBACF2I,EAAanP,KAAKuD,MAAM6S,IACxBzL,EAAQ3K,KAAKyZ,KAAK9O,MAAM7E,MACxBsJ,EAAQpP,KAAKyZ,KAAKrK,MAAMtJ,MACxBuJ,EAASrP,KAAKyZ,KAAKpK,OAAOvJ,MAE1B5F,EAAOF,KAAKyZ,KAAKvZ,KAAK4F,MACtBqE,EAAcnK,KAAKuD,MAAM4G,YACzBzC,EAAW1H,KAAKyZ,KAAK/R,SAAS5B,MAC9BpE,EAAM1B,KAAKyZ,KAAK/X,IAAIoE,MACpBwJ,EAAkBtP,KAAKuD,MAAM+L,gBAC7BC,EAAoBvP,KAAKuD,MAAMgM,kBAC/BE,EAAazP,KAAKuD,MAAMkM,WACxBC,EAAW1P,KAAKuD,MAAMmM,SACtBF,EAAWxP,KAAKyZ,KAAKjK,SAAS1J,MAC9B8f,EAAOplB,aAAaC,QAAQ,eAE5BT,KAAKgoB,aAAa5Y,EAAOC,qCACrBzL,MAAM,GAAAC,OAAG9C,EAAH,UAAoBoO,EAAa,oBAAqB,CAChErL,OAAQ,QACRC,YAAa,UACbkkB,QAAS,iBACTzmB,QAAS,CACPd,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgBglB,GAGlB9jB,KAAMgG,KAAKC,UAAU,CACnBuF,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,OAAK9C,EAAL,uCAGR4J,MAAO,CACL,CACE7E,MAAO6E,IAGXyb,YAAa,CACX,CACEtgB,MAAOsJ,GAAgB,OAG3BiX,eAAgB,CACd,CACEvgB,MAAOuJ,GAAkB,OAG7BU,WAAY,CACV,CACEjK,MAAO5F,IAGXomB,kBAAmB,CACjB,CACExgB,MAAOqE,EACP+d,OAAQ,eAGZ3B,eAAgB,CACd,CACEzgB,MAAO4B,IAGX8e,UAAW,CACT,CACE1gB,MAAOpE,IAGX+kB,sBAAuB,CACrB,CACE3gB,MAAOwJ,EACP4Y,OAAQ,eAGZxB,wBAAyB,CACvB,CACE5gB,MAAOyJ,EACP2Y,OAAQ,eAGZvB,oBAAqB,CACnB,CACE7gB,MAAO0J,IAGXoX,iBAAkB,CAChB,CACE9gB,MAAO2J,EACPyY,OAAQ,eAGZrB,eAAgB,CACd,CACE/gB,MAAO4J,EACPwY,OAAQ,eAGZhoB,KAAM,CACJ,CACE2N,UAAW,kCAQnB7N,KAAKmC,MAAM2jB,qCAEXjF,MAAM,2BAERnb,EAAMc,sJAIN,OACEjC,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,qCACAD,EAAAzB,EAAA0B,cAAA,qCACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACbH,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,UACVmI,GAAI,qBACJ3G,SAAUlG,KAAKmoB,aAAalO,KAAKja,OAEjCuE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,yBAEAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLqJ,IAAI,QACJsD,GAAI,QACJ/G,MAAO9F,KAAKuD,MAAMoH,MAClBlF,SAAUzF,KAAKknB,YAAYjN,KAAKja,MAChCgL,UAAQ,EACR5D,YAAY,QACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLqJ,IAAI,QACJzD,MAAO9F,KAAKuD,MAAM6L,MAClB3J,SAAUzF,KAAKmnB,YAAYlN,KAAKja,MAChCoH,YAAY,OACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLqJ,IAAI,SACJzD,MAAO9F,KAAKuD,MAAM8L,OAClB5J,SAAUzF,KAAKonB,aAAanN,KAAKja,MACjCoH,YAAY,OACZ1C,UAAU,qBAIhBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BAEfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,8BACAD,EAAAzB,EAAA0B,cAAA,UACE+E,IAAK,OACLzD,MAAO9F,KAAKuD,MAAMrD,KAClBuF,SAAUzF,KAAKqnB,WAAWpN,KAAKja,MAC/B0E,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,UAAf,UACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,gBAAf,gBACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,WAAf,WACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,aAAf,eAGJvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,6BACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAM4G,YACpBuO,OAAQ,CACNvP,OAAQnJ,KAAKsnB,YAEf7hB,SAAUzF,KAAKsnB,WACfnH,YAAY,MACZnV,UAAQ,KAGZzG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLqJ,IAAI,WACJzD,MAAO9F,KAAKuD,MAAMmE,SAClBjC,SAAUzF,KAAKunB,eAAetN,KAAKja,MACnCoH,YAAY,WACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLqJ,IAAI,MACJzD,MAAO9F,KAAKuD,MAAM7B,IAClB+D,SAAUzF,KAAKwnB,UAAUvN,KAAKja,MAC9BgL,UAAQ,EACR5D,YAAY,MACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,iCACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAM+L,gBACpBoJ,OAAQ,CACNvP,OAAQnJ,KAAKynB,sBAEftH,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAMgM,kBACpBmJ,OAAQ,CACNvP,OAAQnJ,KAAK0nB,wBAEfvH,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,4BACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAMkM,WACpBiJ,OAAQ,CACNvP,OAAQnJ,KAAK4nB,kBAEfzH,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAMmM,SACpBgJ,OAAQ,CACNvP,OAAQnJ,KAAK6nB,gBAEf1H,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLqJ,IAAI,WACJzD,MAAO9F,KAAKuD,MAAMiM,SAClB/J,SAAUzF,KAAK2nB,eAAe1N,KAAKja,MACnCoH,YAAY,WACZ1C,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,6CACVoB,MAAM,uBA3ZDrD,IAAM8C,WAAvBwhB,GA+CGqB,aAAe,CACpBC,OAAQC,KAAUC,QAsXtB,IAMeC,GANO,kBACpBjkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,+BAA+B4U,UAAWhD,OC7kB1DiD,eACJ,SAAAA,EAAYzmB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA4oB,IACjBxmB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAA8oB,GAAArmB,KAAAvC,KAAMmC,KAED0mB,kBAAoBzmB,EAAKymB,kBAAkB5O,KAAvBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACzBA,EAAK0mB,qBAAuB1mB,EAAK0mB,qBAAqB7O,KAA1Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAC5BA,EAAK2mB,uBAAyB3mB,EAAK2mB,uBAAuB9O,KAA5Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAC9BA,EAAK4mB,iBAAmB5mB,EAAK4mB,iBAAiB/O,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACxBA,EAAK6mB,eAAiB7mB,EAAK6mB,eAAehP,KAApBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAEtBA,EAAKmB,MAAQ,CACX8M,KAAM,GACNuV,KAAM,GACNC,YAAY,EACZza,QAAS,UACTjB,YAAa,GACbmF,gBAAiB,GACjBC,kBAAmB,GACnBE,WAAY,GACZC,SAAU,IAlBKtN,iFAsBD2jB,GAChB,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAE+F,YAAa6b,iDAGVD,GACnB,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEkL,gBAAiB0W,mDAGZD,GACrB,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEmL,kBAAmByW,6CAGpBD,GACf,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEqL,WAAYuW,2CAGfD,GACb,IAAIC,EAAaD,EAAIpN,OAAOC,UAC5B5Y,KAAKoE,SAAS,CAAEsL,SAAUsW,+CAGTnc,EAAWC,GAAW,IAAApG,EAAA1D,KACnCA,KAAKuD,MAAMsiB,aACb9b,WAAW,WACTrG,EAAKvB,MAAM+hB,QAAQlS,KAAK,4BAEvB,KAEHhM,QAAQC,IAAI,2DAKTzF,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS6E,SAAS,qBACjDub,MACE,yEAEF7gB,KAAKmC,MAAM+hB,QAAQlS,KAAK,MALxBhS,KAAKmC,MAAM+hB,QAAQlS,KAAK,KAO1BhM,QAAQC,IAAIzF,aAAaC,QAAQ,sDAGf,IAAAwW,EAAAjX,KACdimB,EAAO,GAAApiB,OAAM9C,EAAN,uBACX6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJjP,EAAK7S,SAAS,CAAEwhB,KAAMM,2CAIf4B,EAAIC,GAIf,QAHY,IAAI1mB,KAAKymB,GACT,IAAIzmB,KAAK0mB,yCASVriB,GAAO,IAAAoU,EAAA9Z,KAClB0F,EAAMc,iBACN,IAAImE,EAAQ3K,KAAKyZ,KAAK9O,MAAM7E,MACxBsJ,EAAQpP,KAAKyZ,KAAKrK,MAAMtJ,MACxBuJ,EAASrP,KAAKyZ,KAAKpK,OAAOvJ,MAC1B5F,EAAO,SACPF,KAAKyZ,KAAKvZ,KAAK4F,QACjB5F,EAAOF,KAAKyZ,KAAKvZ,KAAK4F,OAGxB,IAAIqE,EAAcnK,KAAKuD,MAAM4G,YACzBzC,EAAW1H,KAAKyZ,KAAK/R,SAAS5B,MAC9BpE,EAAM1B,KAAKyZ,KAAK/X,IAAIoE,MACpBwJ,EAAkBtP,KAAKuD,MAAM+L,gBAC7BC,EAAoBvP,KAAKuD,MAAMgM,kBAC/BC,EAAWxP,KAAKyZ,KAAKjK,SAAS1J,MAC9B2J,EAAazP,KAAKuD,MAAMkM,WACxBC,EAAW1P,KAAKuD,MAAMmM,SAEtB/L,EAAQnD,aAAaC,QAAQ,cAG7BT,KAAKgoB,aAAa5Y,EAAOC,GAC3BzL,MAAK,GAAAC,OAAI9C,EAAJ,0BAAoC,CACvCgD,YAAa,UACbD,OAAQ,OACRmkB,QAAS,iBACTzmB,QAAS,CACPd,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgB+C,EAChB9C,cAAe,SAEjBiB,KAAMgG,KAAKC,UAAU,CACnBuF,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,O7BpHY7C,kC6BoHZ,uCAGR2J,MAAO,CACL,CACE7E,MAAO6E,IAGXyb,YAAa,CACX,CACEtgB,MAAOsJ,GAAgB,OAG3BiX,eAAgB,CACd,CACEvgB,MAAOuJ,GAAkB,OAG7BU,WAAY,CACV,CACEjK,MAAO5F,IAGXomB,kBAAmB,CACjB,CACExgB,MAAOqE,EACP+d,OAAQ,eAGZ3B,eAAgB,CACd,CACEzgB,MAAO4B,IAGX8e,UAAW,CACT,CACE1gB,MAAOpE,IAGX+kB,sBAAuB,CACrB,CACE3gB,MAAOwJ,EACP4Y,OAAQ,eAGZxB,wBAAyB,CACvB,CACE5gB,MAAOyJ,EACP2Y,OAAQ,eAGZvB,oBAAqB,CACnB,CACE7gB,MAAO0J,IAGXoX,iBAAkB,CAChB,CACE9gB,MAAO2J,EACPyY,OAAQ,eAGZrB,eAAgB,CACd,CACE/gB,MAAO4J,EACPwY,OAAQ,eAIZhoB,KAAM,CACJ,CACE2N,UAAW,0BAKhB7J,KAAK,SAAAoM,GAAQ,OAAIA,EAASlM,SAC1BF,KAAK,SAAAqM,GAAI,OACRyJ,EAAK3X,MAAM+hB,QAAQlS,KAAK,CACtBrK,SAAQ,uBAAA9D,OAAyByd,GAAQ3W,IACzCpH,MAAO,CACLmf,qBAAsBrS,EAAK+F,IAAI,GAAGtQ,WAK1C+a,MAAM,oDASR,OADA7gB,KAAKc,YAEHyD,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,KAAR,QADF,KAC+B,IAC7BN,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,2BAAR,0BAFF,qBAGkB,MAGpBN,EAAAzB,EAAA0B,cAAA,sCACAD,EAAAzB,EAAA0B,cAAA,qCAEAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACbH,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,UACVmI,GAAI,uBACJ3G,SAAUlG,KAAKmoB,aAAalO,KAAKja,OAEjCuE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,yBACAD,EAAAzB,EAAA0B,cAAA,SACEE,UAAU,iBACVxE,KAAK,OACLqJ,IAAI,QACJyB,UAAQ,EACR5D,YAAY,WAGhB7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,4BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLwE,UAAU,iBACV6E,IAAI,QACJnC,YAAY,UAGhB7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLwE,UAAU,iBACV6E,IAAI,SACJnC,YAAY,WAIlB7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,8BACAD,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,kBAAkB6E,IAAK,QACvChF,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,UAAf,UACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,gBAAf,gBACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,WAAf,WACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,aAAf,eAGJvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,6BACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAM4G,YACpBuO,OAAQ,CACNvP,OAAQnJ,KAAK6oB,mBAEf1I,YAAY,MACZnV,UAAQ,KAGZzG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLwE,UAAU,iBACV6E,IAAI,WACJnC,YAAY,cAGhB7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,MACLwE,UAAU,iBACV6E,IAAI,MACJyB,UAAQ,EACR5D,YAAY,SAGhB7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,iCACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAM+L,gBACpBoJ,OAAQ,CACNvP,OAAQnJ,KAAK8oB,sBAEf3I,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAMgM,kBACpBmJ,OAAQ,CACNvP,OAAQnJ,KAAK+oB,wBAEf5I,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,4BACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAMkM,WACpBiJ,OAAQ,CACNvP,OAAQnJ,KAAKgpB,kBAEf7I,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAACiU,GAAA3V,EAAD,CACEsI,QAASpL,KAAKuD,MAAMmM,SACpBgJ,OAAQ,CACNvP,OAAQnJ,KAAKipB,gBAEf9I,YAAY,SAGhB5b,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,0BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLwE,UAAU,iBACV6E,IAAI,WACJnC,YAAY,cAGhB7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,+BACVoB,MAAM,uBAtXKrD,IAAM8C,WAuYpB2jB,GANS,kBACtB3kB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,4BAA4B4U,UAAWC,OCnYvDO,GAAI5oB,OAAO4oB,EAEXC,eAGJ,SAAAA,EAAYjnB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAopB,IACjBhnB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAspB,GAAA7mB,KAAAvC,KAAMmC,KAHRgR,eAAiB,IAAIvB,EAEFxP,EADnBgR,kBAAoB,IAAIlD,EAGtB9N,EAAKmB,MAAQ,CACX8M,KAAM,GAGNvE,UAAW1J,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GAAG5G,QAAQ,KAAM,IACpEqE,aAAc,GACdtC,WAAY/M,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACpDqV,iBAAkB,GAClBzD,KAAM,GACN0D,cAAe,GACfpT,aAAc,GAGdqT,mBAAoB,GAEpBC,gBAAiB,GACjBC,aAAcrnB,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,MAEnD5R,EAAKsnB,aAAetnB,EAAKsnB,aAAazP,KAAlBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IApBHA,kMA6BjB,IAJIunB,EAAoB3pB,KAAKuD,MAAMgmB,mBAC/B9X,EAAezR,KAAKuD,MAAMkO,aAC1BmY,EAAe,GAEVtM,EAAI,EAAGA,EAAIqM,EAAkBvpB,OAAQkd,IAC5CsM,EAAa5X,KAAK2X,EAAkBrM,GAAGtJ,MAAM,KAAM,oBAInDhU,KAAKmT,eAAegB,wBACdyN,QAAQC,IAAI,CAChB7hB,KAAKoT,kBAAkByW,QACrB7pB,KAAKuD,MAAM4L,WACXya,EACAnY,8DAIJzR,KAAKoE,SAAS,CAAE6P,cAAc,6BAE9BjU,KAAKmT,eAAeuB,gBACpB1U,KAAKmC,MAAM+hB,QAAQlS,KAAK,uBAAyBhS,KAAKuD,MAAM4L,kLAIjDtC,EAAIzC,EAAM7D,GACvB,IAAMgjB,EAAqBvpB,KAAKuD,MAAMgmB,mBAClCO,EAAapgB,SAASqgB,kBAAkBld,GAC5C,GAAItG,EAAE0C,OAAO+gB,QACX,IAAK,IAAI1M,EAAI,EAAGA,EAAIwM,EAAW1pB,OAAQkd,IACrCwM,EAAWxM,GAAG0M,SAAU,EACxBT,EAAmBvX,KAGjB8X,EAAWxM,GAAG2M,aAAa,YAE7BjqB,KAAKoE,SAAS,CAAEmlB,4BAIlB,IAAK,IAAIjM,EAAI,EAAGA,EAAIwM,EAAW1pB,OAAQkd,KACP,IAA1BwM,EAAWxM,GAAG0M,UAChBF,EAAWxM,GAAG0M,SAAU,EAGxBT,EAAmBnN,OACjBmN,EAAmBW,QAAQJ,EAAWxM,IACtC,GAEFtd,KAAKoE,SAAS,CAAEmlB,qEAOH1c,EAAIzC,EAAM7D,GAC7B,IAAIgjB,EAAqBvpB,KAAKuD,MAAMgmB,mBAEpBhjB,EAAE0C,OAAO+gB,SAGvBT,EAAmBvX,KAAKnF,GACxB7M,KAAKoE,SAAS,CAAEmlB,uBAChB7f,SAASyY,eAAe5b,EAAE0C,OAAOpD,MAAMmkB,SAAU,EACjDhkB,QAAQC,IAAIsjB,KAGZA,EAAmBnN,OAAOmN,EAAmBW,QAAQrd,GAAK,GAC1D7M,KAAKoE,SAAS,CAAEmlB,uBACXJ,GAAE,kBAAoB5iB,EAAE0C,OAAOpD,KAAO,KAAKskB,GAAG,cACjDzgB,SAASyY,eAAe5b,EAAE0C,OAAOpD,MAAMmkB,SAAU,iDAMlCzjB,GACnB,IAAI6jB,EAAQ,GACZjB,GAAE,aAAakB,KAAK,WACdlB,GAAEnpB,MAAMmqB,GAAG,aACbC,EAAMpY,KAAKmX,GAAEnpB,MAAM6c,KAAK,SAG5BgE,MAAMuJ,4LAIAxmB,MACJ,GAAAC,OAAG9C,GACD,uCACAf,KAAKuD,MAAM4L,WACX,cACA9N,KAAKC,OAEN0C,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CACZolB,gBAAiBrlB,oBAIvB6B,QAAQC,IAAIjG,KAAKuD,MAAMimB,iBAEnBD,EAAqB,GACzBvpB,KAAKuD,MAAMimB,gBAAgBc,mBAAmBxf,IAAI,SAAAyf,GAahD,OAXAA,EAAQvU,QAAQlL,IAAI,SAAAmL,GAQlB,OAPAA,EAAOC,aAAapL,IAAI,SAAAqL,GAKtB,OAJAA,EAAW3E,WAAW1G,IAAI,SAAAuJ,GAExB,OADAkV,EAAmBvX,KAAKqC,EAAUxH,IAC3B,OAEF,OAEF,OAGF,OAGT7M,KAAKoE,SAAS,CAAEmlB,mBAAoBA,IAGhCtD,YAAallB,yBACjB6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJxiB,EAAKU,SAAS,CAAEwhB,KAAMM,MAGtBsE,YAA2BzpB,yDAAqDM,KAAKC,iBACnFsC,MAAM4mB,GACTxmB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAymB,GACJ/mB,EAAKU,SAAS,CACZilB,iBAAkBoB,qBAIpBC,EAAiB,GAErB1qB,KAAKuD,MAAM8lB,iBAAiBve,IAAI,SAAA6f,GAa9B,OAXEA,EAAOhgB,MAAMwK,cAAc/H,QAAQ,KAAM,MAAQ1J,EAAKH,MAAMuI,WAE5D6e,EAAO9e,SAASf,IAAI,SAAA6B,GAMlB,MALuB,SAAnBA,EAAQ4I,SACVmV,EAAiB/d,EAAQC,OACzBlJ,EAAKH,MAAMkO,aAAekZ,EAAOvU,IACjCpQ,QAAQC,IAAI0kB,EAAOvU,MAEd,OAGJ,OAGTpQ,QAAQC,IAAIykB,GAERE,EACF,GAAA/mB,OAAG9C,GACH,QACAf,KAAKuD,MAAMuI,UACX,IACA4e,EACA,0BAEI9mB,MAAMgnB,GACT5mB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CACZiM,KAAMlM,uJAKQ0mB,EAAWC,GAC/B,OAAO9qB,KAAKuD,MAAMiO,aAAesZ,EAAUtZ,4CAGpC,IAAAyF,EAAAjX,KAEH+qB,EAAmB/qB,KAAKuD,MAAM8lB,iBAC9BhZ,EAAOrQ,KAAKuD,MAAM8M,KAClB2a,EAAgB,GAChBC,EAAiB,GACjBC,EAAuB,GACvBC,EAAanrB,KAAKuD,MAAMimB,gBAExB4B,EAA0B,GAC1BC,EAA4B,GAC5BF,GACFA,EAAWb,mBAAmBxf,IAAI,SAAAyf,GAYhC,OAXAA,EAAQvU,QAAQlL,IAAI,SAAAmL,GASlB,OARAA,EAAOC,aAAapL,IAAI,SAAAqL,GAMtB,OALAkV,EAA0BrZ,KAAKmE,EAAWtJ,IAC1CsJ,EAAW3E,WAAW1G,IAAI,SAAAuJ,GAExB,OADA+W,EAAwBpZ,KAAKqC,EAAUxH,IAChC,OAEF,OAEF,OAEF,OAOXke,EAAiB7Y,QAAQ,SAAC6D,EAAMuV,GAC1BvV,EAAKpL,MAAMwK,cAAc/H,QAAQ,KAAM,MAAQ6J,EAAK1T,MAAMuI,YAE5DiK,EAAKX,gBAAgBlD,QAAQ,SAAAqZ,GAC3BP,EAAchZ,KAAKuZ,EAAe5gB,OAClCugB,EAAqBlZ,KACnBzN,EAAAzB,EAAA0B,cAAA,UAAQgnB,UAASD,EAAe1e,GAAI/G,MAAOylB,EAAenhB,MACvDmhB,EAAe5gB,UAItBoL,EAAKC,QAAQ9D,QAAQ,SAAA+D,GACnBgV,EAAejZ,KACbzN,EAAAzB,EAAA0B,cAAA,UAAQgnB,UAASvV,EAAOpJ,GAAI/G,MAAOmQ,EAAO7L,MACvC6L,EAAOtL,aASlB,IAAM8gB,EAAqBpb,EAAKvF,IAAI,SAAAiL,GAAI,OACtCA,EAAKC,QAAQlL,IAAI,SAACmL,EAAQyV,GAAT,OACfnnB,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKsR,EAAOG,KACd7R,EAAAzB,EAAA0B,cAAA,UAAKknB,EAAM,GAAQ,IACnBnnB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,kBAAUyR,EAAOtL,OAAgB,KAC7B,KAEPsL,EAAOC,aAAapL,IAAI,SAACqL,EAAYvC,GAAb,OACvBrP,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKwR,EAAWtJ,IAClBtI,EAAAzB,EAAA0B,cAAA,UACGknB,EAAM,EADT,IACa9X,EAAM,GAEnBrP,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,SACEtE,KAAM,WACNyrB,gBACG,IAAMN,EAA0BnB,QAAQ/T,EAAWtJ,IAEtD+e,YAAWzV,EAAW/L,KACtByC,GAAIsJ,EAAWtJ,GACfpH,SAAUwR,EAAK4U,eAAe5R,KAC5BhD,EACAd,EAAWtJ,GACXsJ,EAAW/L,QAEZ,IACF+L,EAAWxL,MACZpG,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE+mB,WAAY,MAAU9jB,aAAc,QAC9CgjB,EAAclgB,IAAI,SAAA0R,GACjB,OACEjY,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAE+mB,WAAY,QACxBvnB,EAAAzB,EAAA0B,cAAA,WACG,IACDD,EAAAzB,EAAA0B,cAAA,cACED,EAAAzB,EAAA0B,cAAA,UAAKgY,KAGRrG,EAAW3E,WACT9E,OAAO,SAAA2H,GAAS,OAAIA,EAAUnU,OAASsc,IACvC1R,IAAI,SAAAuJ,GACH,OACE9P,EAAAzB,EAAA0B,cAAA,MACEG,IAAK0P,EAAUxH,GACf9H,MAAO,CAAE+mB,WAAY,QAErBvnB,EAAAzB,EAAA0B,cAAA,SACEtE,KAAM,WACNyrB,gBACG,IACDP,EAAwBlB,QAEtB7V,EAAUxH,IAGdhH,KAAMsQ,EAAWtJ,GACjB2e,UAASnX,EAAUxH,GACnBkf,YAAW1X,EAAUjK,KACrByC,GAAIwH,EAAUxH,GACdpH,SAAUwR,EAAK+U,qBAAqB/R,KAClChD,EACA5C,EAAUxH,GACVwH,EAAUjK,QAEX,IACH7F,EAAAzB,EAAA0B,cAAA,QAAME,UAAW2P,EAAUsC,UACxB,IACAtC,EAAU1J,kBAYnCpG,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,kBAOV,OADAwB,QAAQC,IAAIjG,KAAKuD,MAAM8M,MAErB9L,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UAAK2mB,EAAWxgB,OAChBpG,EAAAzB,EAAA0B,cAAA,mBAAW2mB,EAAWjrB,MACtBqE,EAAAzB,EAAA0B,cAAA,kBAAU2mB,EAAWzpB,KACrB6C,EAAAzB,EAAA0B,cAAA,SAAOE,UAAW,SAAU+mB,GAC5BlnB,EAAAzB,EAAA0B,cAAA,OAAKqI,GAAI,iBACPtI,EAAAzB,EAAA0B,cAAA,UACEE,UAAW,6CACXU,QAASpF,KAAK0pB,aAAazP,KAAKja,OAE/B,IAJH,iBAvWiByC,IAAM8C,WA8XlB0mB,GAVC,kBACd1nB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,yCACL4U,UAAWS,OC5XXje,GAAe,CACnBC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,UAAW,0BAKfwgB,IAAMC,cAAc,SAEO1pB,IAAM8C,cCV3B6mB,eACJ,SAAAA,EAAYjqB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAosB,IACjBhqB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAssB,GAAA7pB,KAAAvC,KAAMmC,KACDoB,MAAQ,CACXgO,SAAU,GACV9N,WAAY,GACZgmB,aAAcrnB,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KACjD1N,WAAW,EACX+lB,kBAAmB,GACnBxG,WAAY,IAEdzjB,EAAKse,gBAAkBte,EAAKse,gBAAgBzG,KAArBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACvBA,EAAKue,iBAAmBve,EAAKue,iBAAiB1G,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAXPA,mFAgBjB,OADY,IAAIkqB,IAAI/rB,OAAOmH,SAASvC,MACzBwC,SAASqM,MAAM,uBAAuBuY,8CAGnC7mB,EAAO8mB,GACrBxsB,KAAKoE,SAAS,CAAEkC,WAAW,IAC3BtG,KAAKoE,SAAS,CAAEioB,kBAAmB3mB,IACnC8mB,EAAKhmB,4DAKLxG,KAAKoE,SAAS,CAAEkC,WAAW,IAC3BtG,KAAKoE,SAAS,CAAEyhB,YAAY,iDAGT,IAAAniB,EAAA1D,KACfA,KAAKuD,MAAMsiB,aACb7lB,KAAKysB,YACL1iB,WAAW,WACTrG,EAAKU,SAAS,CAAEyhB,YAAY,KAC3B,0JAKL7lB,KAAKysB,kJAGK,IAAAxV,EAAAjX,KACNimB,EAAO,GAAApiB,OAAM9C,EAAN,4CACX6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJjP,EAAK7S,SAAS,CAAEwhB,KAAMM,MAE1BlmB,KAAK0sB,oBACL,IAAIC,EAAY,GAAA9oB,OAAM9C,EAAN,sCAAA8C,OAAiD7D,KAAK0sB,oBAAtD,eAAA7oB,OAAuFxC,KAAKC,MAA5F,yBAChBsC,MAAM+oB,GACH3oB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA4oB,GACJ3V,EAAK7S,SAAS,CAAEmN,SAAUqb,MAE9BhpB,MAAK,GAAAC,OAAI9C,EAAJ,2DACFiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ8S,EAAK7S,SAAS,CACZX,WAAYU,6CAKL,IAAA2V,EAAA9Z,KACb,GAAIQ,aAAaC,QAAQ,UACnBD,aAAaC,QAAQ,SAAS6E,SAAS,mBACzC,OACEf,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,6CACAD,EAAAzB,EAAA0B,cAAA,UACGxE,KAAKuD,MAAME,WAAWqH,IAAI,SAACiL,EAAMlJ,GAChC,OACEtI,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE+W,QAAS,SAAU+Q,OAAQ,QACtCtoB,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GACE,wBACCiV,EAAK3X,MAAMuF,SAASnE,MACjBuW,EAAK3X,MAAMuF,SAASnE,MAAMmf,qBAC1B5I,EAAKvW,MAAMkmB,aAAa,IAC5B,QACA1T,EAAKpL,MAAMwK,cAAc/H,QAAQ,KAAM,KAGxC,IACD7I,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAXf,IAWiCqR,EAAKpL,MAAO,8CAYnDmiB,EAAOC,GACjB,IAAIC,EAAS,CACX,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAGEC,EAAW,IAAI5rB,KAAKyrB,GACpBI,EAAW,IAAI7rB,KAAK0rB,GAEpBI,EAAYF,EAASG,UACrBC,EAAcJ,EAASK,WACvBC,EAAaN,EAASO,cAE1B,GAAIT,EAAK,CACP,IAAIU,EAAUP,EAASE,UACnBM,EAAYR,EAASI,WACrBK,EAAWT,EAASM,cAExB,OAAID,IAAeI,EACbN,IAAgBK,EACdP,IAAcM,EACTN,EAAY,IAAMH,EAAOK,GAAe,IAAME,EAGnDJ,EACA,MACAM,EACA,IACAT,EAAOK,GACP,IACAE,EAKFJ,EACA,IACAH,EAAOK,GACP,MACAI,EACA,IACAT,EAAOU,GACP,IACAH,EAKFJ,EACA,IACAH,EAAOK,GACP,IACAE,EACA,MACAE,EACA,IACAT,EAAOU,GACP,IACAC,EAIJ,OAAOR,EAAY,IAAMH,EAAOK,GAAe,IAAME,sCAKvD,QAAK/sB,aAAaC,QAAQ,YAEdD,aAAaC,QAAQ,SAAS6E,SAAS,yDAOvCsoB,EAAKrY,EAAQ7P,GACzB,IAAImoB,EAAiB,GAEnBA,EADa,IAAXtY,EAKJ,IAAI5R,EAAQnD,aAAaC,QAAQ,cACjCmD,MAAM,GAAAC,OAAG9C,EAAH,UAAoB6sB,EAAM,yCAA0C,CACxE7pB,YAAa,UACbD,OAAQ,QACRmkB,QAAS,iBACTzmB,QAAS,CACPd,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgB+C,EAChB9C,cAAe,SAEjBiB,KAAMgG,KAAKC,UAAU,CACnBuF,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,OAAK9C,EAAL,uCAGR+sB,eAAgB,CACd,CACEhoB,MAAO+nB,IAGX3tB,KAAM,CACJ,CACE2N,UAAW,0BAMnB7N,KAAKoE,SAAS,CAAEyhB,YAAY,IAE5BngB,EAAMc,kDAGC,IAAA4e,EAAAplB,KAGHoV,EAAkB,GAClBW,EAAO/V,KAAKuD,MAAMgO,SAIlBwc,EAAc1b,MAAM2b,QAAQjY,EAAKuU,oBAC/B2D,EACJ1pB,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,UAAKuR,EAAKpL,OACVpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,sBACCuR,EAAK5L,YAAc+C,IAAO6I,EAAK5L,aAAe,GAE9C4L,EAAKrU,IACJ6C,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAM4Q,EAAKrU,IAAKuH,OAAQ,UACzB1E,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,8CAAlB,oBAMJ,GAGDqR,EAAKzG,gBACFpC,IAAO,2BAA6B6I,EAAKzG,iBACzC,GACHyG,EAAKxG,kBACFrC,IAAO,6BAA+B6I,EAAKxG,mBAC3C,GACHwG,EAAKtG,WACFvC,IAAO,sBAAwB6I,EAAKtG,YACpC,GAIJlL,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,qCACAD,EAAAzB,EAAA0B,cAAA,qGAIAD,EAAAzB,EAAA0B,cAAA,WACGupB,EACChY,EAAKuU,mBAAmBxf,IAAI,SAACyf,EAAStY,GACpC,OACE1N,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,UAAUC,IAAKsN,GAC3BmT,EAAK7hB,MAAME,WAAWqH,IAAI,SAAAgB,GAazB,OAZIA,EAAUsK,MAAQmU,EAAQ1d,KAC5Bf,EAAUsJ,gBAAgBtK,IAAI,SAAA5K,GAI5B,OAH6C,IAAzCkV,EAAgB8U,QAAQhqB,EAAKyK,QAC/ByK,EAAgBpD,KAAK9R,EAAKyK,OAErB,OAEcmB,EAAUD,SAASuI,KACxC,SAAAzH,GAAO,MAAuB,SAAnBA,EAAQ4I,UAIhB,OAEThR,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UAAK+lB,EAAQ5f,QAEfpG,EAAAzB,EAAA0B,cAAA,WACG+lB,EAAQvU,QAAQlL,IAAI,SAACmL,EAAQhE,GAAT,OACnB1N,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKsN,GACR1N,EAAAzB,EAAA0B,cAAA,UAAKyR,EAAOtL,OACZpG,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,8BACXuR,EAAOC,aAAapL,IACnB,SAACqL,EAAYlE,GAAb,OACE1N,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBC,IAAKsN,GACjC1N,EAAAzB,EAAA0B,cAAA,QACEE,UAC0B,aAAxByR,EAAWQ,SACP,WACA,IAGNpS,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,KACEE,UAAU,UACVS,KAAI,cAAAtB,OAAgB0mB,EAAQ5f,MACzBwK,cACA/H,QAAQ,OAAQ,IAFf,KAAAvJ,OAGF0mB,EAAQ5d,QAHN,wBAAA9I,OAKFsS,EAAWtJ,KAGZ,IACAsJ,EAAWxL,MAAO,kBAiG7CpG,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,eAMVD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ1E,KAAKc,YACJyD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAI,2BAA6B7E,KAAKuD,MAAMkmB,aAAa,IAEzDllB,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAHf,sBAGmD,MAGlC,aAAlBqR,EAAKY,SACJpS,EAAAzB,EAAA0B,cAAA,KACEO,MAAO,CAAEM,OAAQ,WACjBD,QAASpF,KAAKkuB,cAAcjU,KAAKja,KAAM+V,EAAKlJ,GAAI,IAE/C,IACDtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,qBAAsB,IACnCH,EAAAzB,EAAA0B,cAAA,oCAAkC,KAGpCD,EAAAzB,EAAA0B,cAAA,KACEO,MAAO,CAAEM,OAAQ,WACjBD,QAASpF,KAAKkuB,cAAcjU,KAAKja,KAAM+V,EAAKlJ,GAAI,IAE/C,IACDtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sBAAuB,IACpCH,EAAAzB,EAAA0B,cAAA,uCAKN,GAGFD,EAAAzB,EAAA0B,cAAA,UAEAD,EAAAzB,EAAA0B,cAAA,SACGuR,EAAKrG,SAAWxC,IAAO,oBAAsB6I,EAAKrG,UAAY,IAGhEqG,EAAK3G,MACJ7K,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wBAAwB,IACvBxE,KAAKmuB,YAAYpY,EAAK3G,MAAO2G,EAAKmX,WAGrC,GAGDnX,EAAKrO,SACJnD,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,2BADF,IAC8BuR,EAAKrO,UAGnC,GAEDqO,EAAK7V,KACJqE,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,uBADF,IAC0BuR,EAAK7V,MAG/B,GAED6V,EAAKvG,SACJjL,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,2BADF,IAC8BuR,EAAKvG,UAGnC,MAOV,OACEjL,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW,OACdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW,mBACbupB,EACAjuB,KAAKouB,gBAGR7pB,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAEspB,SAAU,WACtB9pB,EAAAzB,EAAA0B,cAACuI,EAAAjK,EAAD,CACEkK,OAAQhN,KAAKuD,MAAM+C,UACnB5B,UAAU,QACV4pB,iBAAiB,UACjBC,aAAa,yBAEbhqB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAEypB,aAAc,WAA3B,gCACgC,IAC7BxuB,KAAKuD,MAAM8oB,kBAAkBoC,cAAe,IAC7ClqB,EAAAzB,EAAA0B,cAAA,KACEE,UAAU,kCACVgqB,cAAA,EACAtpB,QAASpF,KAAK2gB,mBACb,MAGPpc,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAACmqB,GAAD,CACEC,qBA7Se,GA8SfrF,mBA/SK,GAgTL8C,kBAAmBrsB,KAAKuD,MAAM8oB,kBAC9Bld,WAAYnP,KAAKuD,MAAMkmB,aAAa,GACpC9I,iBAAkB3gB,KAAK2gB,8BAxhBTle,IAAM8C,WAwiBrBspB,GANI,kBACjBtqB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,0BAA0B4U,UAAWyD,OCtiBrD0C,eACJ,SAAAA,EAAY3sB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8uB,IACjB1sB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAgvB,GAAAvsB,KAAAvC,KAAMmC,KACDoB,MAAQ,CACXoe,UAAW,GACXR,WAAY,GACZ4N,cAAe,GACfC,OAAQ,GACRC,WAAY,EACZC,gBAAiB,EACjBxiB,OAAQ,IAEVtK,EAAK8rB,cAAgB9rB,EAAK8rB,cAAcjU,KAAnBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACrBA,EAAK+sB,iBAAmB/sB,EAAK+sB,iBAAiBlV,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACxBA,EAAKgtB,aAAehtB,EAAKgtB,aAAanV,KAAlBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAbHA,wHAgBIitB,mFACfrvB,KAAKoE,SAAS,CAAEud,UAAW,8BAC3B3hB,KAAKoE,SAAS,CAAE6qB,WAAYI,2BAC5BrvB,KAAKysB,mBACX1iB,WAAW,WACTxJ,OAAO+uB,SAAS,EAAG,IAClB,qLAGc/oB,0EACjBA,EAAEC,0BACIxG,KAAKoE,SAAS,CAAEud,UAAW,8BAC3B3hB,KAAKoE,SAAS,CAAE6qB,WAAY,2BAC5BjvB,KAAKoE,SAAS,CAAE8qB,gBAAiB,2BACjClvB,KAAKysB,mJAINjsB,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS6E,SAAS,qBACjDub,MACE,yEAEF7gB,KAAKmC,MAAM+hB,QAAQlS,KAAK,MALxBhS,KAAKmC,MAAM+hB,QAAQlS,KAAK,gDASTnI,EAAWC,GAAW,IAAApG,EAAA1D,KACnCA,KAAKuD,MAAMsiB,aACb7lB,KAAKysB,YACL1iB,WAAW,WACTrG,EAAKU,SAAS,CAAEyhB,YAAY,KAC3B,kDAKL7lB,KAAKysB,gLAIDxG,YAAallB,yBACjB6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJjP,EAAK7S,SAAS,CAAEwhB,KAAMM,MAKtByG,YAAkB5rB,8CACpBf,KAAKuD,MAAM0rB,6BACHjvB,KAAKuD,MAAMmJ,wBAAe1M,KAAKuD,MAAM4d,qBACzCvd,MAAM+oB,GACT3oB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ8S,EAAK7S,SAAS,CACZud,UAAWxd,aAGbnE,KAAKuD,MAAMoe,UAAU,KACnB4N,EAAWvvB,KAAKuD,MAAMoe,UAAU,GAAG4N,SACvCvvB,KAAKoE,SAAS,CAAE8qB,gBAAiBK,2IAIzBC,GAEV,OADahvB,aAAaC,QAAQ,YACnB+uB,yEAOJjpB,mFACLvG,KAAKoE,SAAS,CAAEsI,OAAQnG,EAAE0C,OAAOnD,oJAGxBS,GACfvG,KAAKoE,SAAS,CAAE+c,WAAY5a,EAAE0C,OAAOnD,oDAGnBS,GACdvG,KAAKuD,MAAMwrB,cACb/uB,KAAKoE,SAAS,CAAE2qB,cAAe,IAE/B/uB,KAAKoE,SAAS,CAAE2qB,cAAe,0CAIrBnB,EAAKrY,EAAQ7P,GACzBM,QAAQC,IAAIsP,GACZ,IAAIsY,EAAiB,GAEnBA,EADa,IAAXtY,EAKJ,IAAI5R,EAAQnD,aAAaC,QAAQ,cACjCmD,MAAM,GAAAC,OAAG9C,EAAH,UAAoB6sB,EAAM,oBAAqB,CACnD7pB,YAAa,UACbD,OAAQ,QACRmkB,QAAS,iBACTzmB,QAAS,CACPd,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgB+C,EAChB9C,cAAe,SAEjBiB,KAAMgG,KAAKC,UAAU,CACnBuF,OAAQ,CACNpN,KAAM,CACJiF,KAAI,GAAAtB,OAAK9C,EAAL,uCAGR+sB,eAAgB,CACd,CACEhoB,MAAO+nB,IAGX3tB,KAAM,CACJ,CACE2N,UAAW,0BAMnB7N,KAAKoE,SAAS,CAAEyhB,YAAY,IAE5BngB,EAAMc,qDAGIsmB,EAAOC,GACjB,IAAIC,EAAS,CACX,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAGEC,EAAW,IAAI5rB,KAAKyrB,GACpBI,EAAW,IAAI7rB,KAAK0rB,GAEpBI,EAAYF,EAASG,UACrBC,EAAcJ,EAASK,WACvBC,EAAaN,EAASO,cAE1B,GAAIT,EAAK,CACP,IAAIU,EAAUP,EAASE,UACnBM,EAAYR,EAASI,WACrBK,EAAWT,EAASM,cAExB,OAAID,IAAeI,EACbN,IAAgBK,EACdP,IAAcM,EACTN,EAAY,IAAMH,EAAOK,GAAe,IAAME,EAGnDJ,EACA,MACAM,EACA,IACAT,EAAOK,GACP,IACAE,EAKFJ,EACA,IACAH,EAAOK,GACP,MACAI,EACA,IACAT,EAAOU,GACP,IACAH,EAKFJ,EACA,IACAH,EAAOK,GACP,IACAE,EACA,MACAE,EACA,IACAT,EAAOU,GACP,IACAC,EAIJ,OAAOR,EAAY,IAAMH,EAAOK,GAAe,IAAME,mCAIhD,IAAAzT,EAAA9Z,KACPA,KAAKc,YACL,IAAI6gB,EAAY3hB,KAAKuD,MAAMoe,UACvB8N,EAAkB,GA4DtB,OA3DI9N,IACF8N,EAAkB9N,EAAU7W,IAAI,SAACiL,EAAM9D,GAAP,OAC9B1N,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBC,IAAKsN,GACjC1N,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBAAkBuN,EAAQ,EAAxC,KACA1N,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACZH,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAE2qB,SAAU,UACtBnrB,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAI,CACF8C,SAAQ,uBAAA9D,OAAyByd,GAAQvL,EAAKpL,QAC9CpH,MAAO,CACLmf,qBAAsB3M,EAAKlJ,MAI9BkJ,EAAKpL,SAIZpG,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACXqR,EAAK3G,MAAQ0K,EAAKqU,YAAYpY,EAAK3G,MAAO2G,EAAKmX,UAAY,IAE9D3oB,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBAAkBqR,EAAK7V,MACrCqE,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACZH,EAAAzB,EAAA0B,cAAA,KAAGW,KAAM4Q,EAAKrU,IAAKuH,OAAQ,UAA3B,iBAIF1E,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACO,aAAlBqR,EAAKY,SACJpS,EAAAzB,EAAA0B,cAAA,KACEO,MAAO,CAAEM,OAAQ,WACjBD,QAAS0U,EAAKoU,cAAcjU,KAAKH,EAAM/D,EAAKlJ,GAAI,IAE/C,IACDtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,qBALf,IAKqCH,EAAAzB,EAAA0B,cAAA,wBAAsB,KAG3DD,EAAAzB,EAAA0B,cAAA,KACEO,MAAO,CAAEM,OAAQ,WACjBD,QAAS0U,EAAKoU,cAAcjU,KAAKH,EAAM/D,EAAKlJ,GAAI,IAE/C,IACDtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,wBAInBH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACXoV,EAAK6V,YAAY5Z,EAAK6Z,QACrBrrB,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,2BAAAhB,OAA6BkS,EAAKlJ,KACxCtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAAiB,KAGhC,QAQRH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,gCACAD,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,sBACVwB,SAAU,SAAAK,GAAC,OAAIuT,EAAKsV,aAAa7oB,KAEjChC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wDACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLuF,SAAUzF,KAAK0M,OAAOuN,KAAKja,MAC3BoH,YAAY,iBACZ1C,UAAU,sCAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sCACbH,EAAAzB,EAAA0B,cAAA,UACE+E,IAAK,OACL9D,SAAUzF,KAAK6vB,iBAAiB5V,KAAKja,MACrC0E,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,OAAf,OACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,UAAf,UACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,gBAAf,gBACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,WAAf,WACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,aAAf,eAGJvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sCACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,iEACVoB,MAAM,YAGVvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEF,UAAW,6CACXG,GAAI,6BAEJN,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sBAAb,KAJF,yBAIgE,QAKtEH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sCACbH,EAAAzB,EAAA0B,cAAA,oBAAYxE,KAAKuD,MAAM2rB,kBAEzB3qB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,qCACVK,MAAO,CAAEqb,WAAY,SAErB7b,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,WACL2M,GAAG,kBACHmd,QAAShqB,KAAKuD,MAAMwrB,cACpBtpB,SAAUzF,KAAK8vB,oBAAoB7V,KAAKja,MACxC0E,UAAU,sBAEZH,EAAAzB,EAAA0B,cAAA,SAAOurB,IAAI,kBAAkBrrB,UAAU,kBACpC,IADH,yCAEyC,OAK7CH,EAAAzB,EAAA0B,cAAA,SAAOE,UAAU,8BACfH,EAAAzB,EAAA0B,cAAA,SAAOE,UAAU,oBACfH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,iBACZH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,UACAH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,SACAH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,WACAH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,QACAH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,OACAH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,WACAH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,qBAAd,UAGHid,EACCA,EAAUvhB,OAAS,EACjBmE,EAAAzB,EAAA0B,cAAA,SAAOE,UAAU,kBAAkB+qB,GAEnClrB,EAAAzB,EAAA0B,cAAA,8BAGFD,EAAAzB,EAAA0B,cAAA,cACED,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,WACJC,IAAI,2CAEN1rB,EAAAzB,EAAA0B,cAAA,iCAIND,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,gBAAgB8E,aAAW,cACxCjF,EAAAzB,EAAA0B,cAAC0rB,GAAAptB,EAAD,CACEmsB,WAAYjvB,KAAKuD,MAAM0rB,WACvBkB,kBAAmB,GACnBjB,gBAAiBlvB,KAAKuD,MAAM2rB,gBAC5BkB,mBAAoB,EACpB3qB,SAAU,SAAAc,GAAC,OAAIuT,EAAKqV,iBAAiB5oB,IACrC8pB,eAAe,sBACfC,cAAc,sBACdC,cAAc,qCACdC,cAAc,iCACdC,cAAc,2CACd5R,gBAAgB,iCAChB6R,aAAa,WACbC,aAAa,kBAjZGluB,IAAM8C,WA+ZnBqrB,GANG,kBAChBrsB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,0BAA0B4U,UAAWmG,OC3ZrD+B,eACJ,SAAAA,EAAY1uB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6wB,IACjBzuB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAA+wB,GAAAtuB,KAAAvC,KAAMmC,KACDoB,MAAQ,CACXoe,UAAW,GACXR,WAAY,IAJG/e,2EAUZ5B,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS6E,SAAS,qBACjDub,MACE,yEAEF7gB,KAAKmC,MAAM+hB,QAAQlS,KAAK,MALxBhS,KAAKmC,MAAM+hB,QAAQlS,KAAK,KAO1BhM,QAAQC,IAAIzF,aAAaC,QAAQ,2CAsJjC,OA9DAT,KAAKc,YA+DHyD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW,OACdH,EAAAzB,EAAA0B,cAAA,gCACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEF,UAAW,qBACXG,GAAI,2BAEJN,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,eAAb,KAJF,qCAIqE,MAGvEH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMF,UAAW,qBAAsBG,GAAI,KACzCN,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,eAAb,KADF,uCAEY,MAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW,0BACdH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMF,UAAW,qBAAsBG,GAAI,KACzCN,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAAb,KADF,6BAC8D,eA7L9CjC,IAAM8C,WA4MnBurB,GANW,kBACxBvsB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,2BAA2B4U,UAAWkI,OCzH7CE,eAjFb,SAAAA,EAAY5uB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA+wB,IACjB3uB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAixB,GAAAxuB,KAAAvC,KAAMmC,KACDoB,MAAQ,CACX8M,KAAM,GACNhM,MAAO,GACPb,KAAM,IAERpB,EAAK4uB,qBAAuB5uB,EAAK4uB,qBAAqB/W,KAA1Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAPXA,oFAUEmE,GACnB,IAAI0qB,EAAMjxB,KAAKyZ,KAAKwX,IAAInrB,MACpBorB,EAAOlxB,KAAKyZ,KAAKyX,KAAKprB,MACtBqrB,EAAM3wB,aAAaC,QAAQ,UAC/BmD,MAAM,GAAAC,OAAG9C,EAAH,UAAoBowB,EAAM,gBAAiB,CAC/CptB,YAAa,UACbD,OAAQ,QACRtC,QAAS,CACPb,eAAgB,mBAChBC,eAAgBJ,aAAaC,QAAQ,eAEvCqB,KAAMgG,KAAKC,UAAU,CACnBqpB,KAAM,CACJ,CACEC,SAAUJ,EACVnrB,MAAOorB,QAKZltB,KAAK,SAAAstB,GAAI,OAAIA,IACbttB,KAAK,SAAAqM,GAAI,OACRtG,WAAW,WACT8W,MAAM,iCACNtgB,OAAOmH,SAAS6pB,UACf,OAEPhrB,EAAEC,qDAIGhG,aAAaC,QAAQ,UACxBT,KAAKmC,MAAM+hB,QAAQlS,KAAK,sCAM1B,OADAhS,KAAKc,YAEHyD,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,8BACAD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,UAAUmI,GAAI,cAC5BtI,EAAAzB,EAAA0B,cAAA,SACEE,UAAU,iBACVxE,KAAM,WACNqJ,IAAK,MACLnC,YAAa,iBAEf7C,EAAAzB,EAAA0B,cAAA,SACEE,UAAU,iBACVxE,KAAM,WACNqJ,IAAK,OACLnC,YAAa,iBAEf7C,EAAAzB,EAAA0B,cAAA,SACEE,UAAU,iBACVxE,KAAM,WACNkH,YAAa,yBAEf7C,EAAAzB,EAAA0B,cAAA,SACEtE,KAAM,SACNwE,UAAW,6CACXU,QAASpF,KAAKgxB,qBAAqB/W,KAAKja,MACxC8F,MAAO,oBA1EUrD,IAAM8C,WCA7BisB,GAAW,WAAM,IAAAzlB,EACGC,qBADHC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GACdvI,EADcyI,EAAA,GACRwlB,EADQxlB,EAAA,GAAAI,EAGeL,qBAHfM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAGd5I,EAHc6I,EAAA,GAGFolB,EAHEplB,EAAA,GAAA2L,EAICjM,qBAJDkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAId0Z,EAJczZ,EAAA,GAIT0Z,EAJS1Z,EAAA,GAMjBiZ,EAAM3wB,aAAaC,QAAQ,UAqB/B,GApBAoxB,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVO,MAAK,GAAAC,OAAI9C,EAAJ,UAAA8C,OAAmBstB,EAAnB,iBAAuC,CAChDptB,YAAa,UACbD,OAAQ,MACRtC,QAAS,CACPb,eAAgB,mBAChBC,eAAgBJ,aAAaC,QAAQ,iBAGtCuD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8gB,GAAY,OAAI2M,EAAQ3M,KAVhB,cAAA3hB,EAAAE,KAAA,EAYVO,MAAK,GAAAC,OAAI9C,EAAJ,uCACRiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8gB,GAAY,OAAI4M,EAAc5M,KAdtB,wBAAA3hB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,aAAA,EAgBfssB,IACC,CAAC0E,KAECQ,GAAOnuB,GAAQC,EAAY,CAC9B,IAAI8gB,EAAO,GACX9gB,EAAWqH,IAAI,SAAAiL,GAOb,OANAvS,EAAKsuB,iBAAiBhnB,IAAI,SAAAgB,GAIxB,OAHIA,EAAU+B,YAAckI,EAAKK,KAC/BmO,EAAKvS,KAAK+D,EAAKpL,OAEV,OAEF,OAEL4Z,EAAKnkB,OAAS,GAChBwxB,EAAOrN,EAAKwN,QAIhB,OACExtB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,wBACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBAAf,QACAH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACZlB,EACCe,EAAAzB,EAAA0B,cAAA,SAAOE,UAAU,sCACfH,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,4BAEFD,EAAAzB,EAAA0B,cAAA,UAAKhB,EAAKqC,KAAK,GAAGC,QAEpBvB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,yBAEFD,EAAAzB,EAAA0B,cAAA,UAAKhB,EAAKwuB,KAAK,GAAGlsB,QAEpBvB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,8BAEFD,EAAAzB,EAAA0B,cAAA,UAAKmtB,GAAY,SAKvB,mBAGJptB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBAYRqP,GANK,kBAClBxP,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,aAAa4U,UAAW6I,OC8D/BS,GAnJD,WAMZ,OALAJ,oBAAU,WACRtxB,OAAO+uB,SAAS,EAAG,GACnBtpB,QAAQC,IAAI,aACX,IAGD1B,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,kCACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,mNAKAH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,gHAIAD,EAAAzB,EAAA0B,cAAA,kGAIAD,EAAAzB,EAAA0B,cAAA,2GAMFD,EAAAzB,EAAA0B,cAAA,6BACAD,EAAAzB,EAAA0B,cAAA,oHAIAD,EAAAzB,EAAA0B,cAAA,gCACAD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,gFAGAD,EAAAzB,EAAA0B,cAAA,2CACAD,EAAAzB,EAAA0B,cAAA,qCAGFD,EAAAzB,EAAA0B,cAAA,mPAOAD,EAAAzB,EAAA0B,cAAA,sEAEAD,EAAAzB,EAAA0B,cAAA,mFAIAD,EAAAzB,EAAA0B,cAAA,qCACAD,EAAAzB,EAAA0B,cAAA,oIAIAD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,6FAIAD,EAAAzB,EAAA0B,cAAA,6FAMFD,EAAAzB,EAAA0B,cAAA,sFAKAD,EAAAzB,EAAA0B,cAAA,6BACAD,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAG,yBAAT,wBADF,uFAKAN,EAAAzB,EAAA0B,cAAA,wBACAD,EAAAzB,EAAA0B,cAAA,4RAOAD,EAAAzB,EAAA0B,cAAA,kCACAD,EAAAzB,EAAA0B,cAAA,8PAOAD,EAAAzB,EAAA0B,cAAA,2PAOAD,EAAAzB,EAAA0B,cAAA,sCACAD,EAAAzB,EAAA0B,cAAA,qIAEwD,KAExDD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,kDAAR,iHAKFZ,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,kFAAR,yHAKFZ,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,kDAAR,uKAMFZ,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,iDAAR,yGAKFZ,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,kDAAR,mDCpEK+sB,OAnEf,SAAAnnB,GAAwD,IAA7Bwa,EAA6Bxa,EAA7Bwa,KAAM4M,EAAuBpnB,EAAvBonB,SAAUC,EAAarnB,EAAbqnB,UAgBzC,OACE7tB,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,4CACjBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6CACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,oBACZH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gBAAgBS,KAAMitB,GAChC,IACA7M,EAAM,IACPhhB,EAAAzB,EAAA0B,cAAA,OACE6C,cAAY,OACZ3C,UAAU,6DACVuD,MAAM,MACNC,OAAO,MACPC,MAAM,8BAEN5D,EAAAzB,EAAA0B,cAAA,QACE4D,EAAE,sQACFC,KAAK,eACLgqB,YAAU,eAKjBF,EAAWjlB,IAAOilB,GAAY,MCaxBG,OA9Bf,SAAAvnB,GAAgD,IAApBggB,EAAoBhgB,EAApBggB,iBAK1B,OACExmB,EAAAzB,EAAA0B,cAAA,WACEE,UAAU,6CACVK,MAAO,CAAE8nB,OAAQ,MAEjBtoB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,4BACZqmB,EAAiBjgB,IAAI,SAAAgB,GAAS,OAC7BvH,EAAAzB,EAAA0B,cAAC+tB,GAAD,CACEhN,KAAMzZ,EAAUyZ,KAChB4M,SAAUrmB,EAAUqmB,SACpBC,UAAWtmB,EAAUsmB,gFCqDlBI,GA1FA,WACb,OACEjuB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACfH,EAAAzB,EAAA0B,cAAA,MAAIiuB,MAAM,eACVluB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACfH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,uEAEED,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,UAAUS,KAAK,iCACzB,IADH,0BAGK,IALP,wBAMwB,IACtBZ,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,UAAUS,KAAK,wBAA5B,YAEK,IATP,MAUM,IACJZ,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,wBAAwBT,UAAU,WAA1C,mCAXF,6CAc6C,IAC3CH,EAAAzB,EAAA0B,cAAA,KACEE,UAAU,UACVS,KAAK,kDAEJ,IAJH,yCAMK,IArBP,2EAuBU,IACRZ,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,UAAUS,KAAK,0BACzB,IADH,6BAxBF,KA+BAZ,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,YAAYK,MAAO,CAAE8nB,OAAQ,SAC7CtoB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,mBACVurB,IAAKyC,KACLC,QAAQ,OACR1qB,MAAM,QACN+nB,IAAI,MAGRzrB,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,YAAYK,MAAO,CAAE8nB,OAAQ,SAC7CtoB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,mBACVurB,IAAK2C,KACLD,QAAQ,OACR1qB,MAAM,QACN+nB,IAAI,MAGRzrB,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,YAAYK,MAAO,CAAE8nB,OAAQ,SAC7CtoB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,mBACVurB,IAAK4C,KACLF,QAAQ,OACR1qB,MAAM,QACNlD,MAAO,CAAE+tB,gBAAiB,OAAQ9tB,QAAS,OAC3CgrB,IAAI,OAIVzrB,EAAAzB,EAAA0B,cAAA,SACED,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,KACEE,UAAU,UACVS,KAAK,uEAFP,4CAUNZ,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACfH,EAAAzB,EAAA0B,cAAA,wGAIAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BCxFfyL,GAAO,IAAI5O,EACXwxB,GAAW,2BAGV,SAAeC,GAAtBxY,EAAA+F,GAAA,OAAA0S,GAAAxY,MAAAza,KAAAG,wDAAO,SAAA6C,EAAqBoD,EAAUC,GAA/B,IAAAtC,EAAAqM,EAAAC,EAAA,OAAAxN,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACCU,EAAc,CAAE8B,KAAMO,EAAUgrB,KAAM/qB,GADvClD,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGoB8M,GAAKnO,KAAK+wB,GAAUhvB,GAHxC,cAGGqM,EAHHjN,EAAA+vB,KAIK7iB,EAASD,EAATC,KACRrK,QAAQC,IAAImK,GAEZ5P,aAAa2yB,QAAQ,QAAS9iB,EAAK+iB,aAAa/uB,OAChD7D,aAAa2yB,QAAQ,aAAc9iB,EAAKgjB,YACxC7yB,aAAa2yB,QAAQ,eAAgB9iB,EAAKijB,cAC1C9yB,aAAa2yB,QAAQ,OAAQ9iB,EAAK+iB,aAAavtB,MAC/CrF,aAAa2yB,QAAQ,SAAU9iB,EAAK+iB,aAAajC,KACjDnrB,QAAQC,IAAIzF,aAAaC,QAAQ,UAZ9B0C,EAAAowB,OAAA,SAaIljB,GAbJ,QAAAlN,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAeHR,KAEAke,MAAK,qBAAAhd,OAAsBV,EAAAoR,GAAMnE,SAASC,OAjBvC,yBAAAlN,EAAAG,SAAAN,EAAA,yCAqBA,SAASL,KACd,IAAI2wB,EAAe9yB,aAAaC,QAAQ,gBAMxC,OALAD,aAAagzB,WAAW,SACxBhzB,aAAagzB,WAAW,cACxBhzB,aAAagzB,WAAW,gBACxBhzB,aAAagzB,WAAW,UACxBhzB,aAAagzB,WAAW,QACjBrjB,GAAKvO,IAAL,GAAAiC,OAEH7C,mCAFG,oCAAA6C,OAG8ByvB,IACnC,GCpCJ,IAkBeG,GAlBK,SAAA3nB,GAClB,IAAIuE,EAAOvE,EAAUA,UACrB,OACEvH,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAE2uB,UAAW,mBACvBnvB,EAAAzB,EAAA0B,cAAA,KAAGW,KAAMkL,EAAKsjB,KAAOtjB,EAAKsjB,KAAO,KAC/BpvB,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,aAChBH,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,mBACVurB,IAAK5f,EAAK4f,IACVD,IAAK3f,EAAK2f,IACV2C,QAAQ,aCOdiB,8MAKJrwB,MAAQ,CACNE,WAAY,GACZD,KAAMhD,aAAaC,QAAQ,QAC3B4D,MAAO7D,aAAaC,QAAQ,YAU9B8G,QAAU,SAACnB,EAAUC,GAEnBjE,EAAKyxB,YAAYztB,EAAUC,MAI7BpD,SAAW,WACTb,EAAKD,MAAMc,cAGb4wB,kDAAc,SAAA7wB,EAAOoD,EAAUC,GAAjB,OAAAxD,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEJ2vB,GAAM5sB,EAAUC,GAFZ,OAGVjE,EAAKgC,SAAS,CACZZ,KAAMhD,aAAaC,QAAQ,QAC3B4D,MAAO7D,aAAaC,QAAQ,WAE9BiJ,SAAShC,SAAS6pB,SAPRpuB,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAAoR,GAAApR,EAAA,SASV5C,OAAOyF,QAAQ8tB,MAAf3wB,EAAAoR,KACIpR,EAAAoR,GAAMnE,SAVA,CAAAjN,EAAAE,KAAA,SAAAF,EAAA4wB,GAWA5wB,EAAAoR,GAAMnE,SAASmF,OAXfpS,EAAAE,KAYD,MAZCF,EAAA4wB,GAAA,2BAaJxzB,OAAOsgB,MAAM1d,EAAAoR,GAAMnE,SAASC,KAAKnF,SAb7B/H,EAAAowB,OAAA,kBAgBJhzB,OAAOsgB,MACL,gEAjBE,QAoBRtgB,OAAOsgB,MACL,gEArBM,yBAAA1d,EAAAG,SAAAN,EAAA,iJA0CL,IAAAwE,EACiBxH,KAAKmC,MADtBqF,EACCnD,MADDmD,EACQhE,KAEf,OACEe,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,+EACjBH,EAAAzB,EAAA0B,cAAA,4CACAD,EAAAzB,EAAA0B,cAACwvB,GAAD,CAAkBjJ,iBAAkBkJ,KAEpC1vB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,4BAEjBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACfH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,6CACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAG,yBAAT,yBAEFN,EAAAzB,EAAA0B,cAAA,oFAKFD,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAG,kBAAT,6BAEFN,EAAAzB,EAAA0B,cAAA,iFAKFD,EAAAzB,EAAA0B,cAAA,WACGxE,KAAKuD,MAAMC,MAAQxD,KAAKuD,MAAMc,MAC7BE,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,+BACAD,EAAAzB,EAAA0B,cAAA,yDAGFD,EAAAzB,EAAA0B,cAAC0vB,EAAD,CAAWhuB,SAAUlG,KAAKuH,aAMlChD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,2BACfH,EAAAzB,EAAA0B,cAAA,iCACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACZuvB,GAAWnpB,IAAI,SAAAgB,GACd,OAAOvH,EAAAzB,EAAA0B,cAAC2vB,GAAD,CAAaroB,UAAWA,OAGnCvH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACfH,EAAAzB,EAAA0B,cAAC4vB,GAAD,cA5HiB7uB,aAkIVkS,0BAAamc,IC3ItBS,eAIJ,SAAAA,EAAYlyB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAq0B,IACjBjyB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAu0B,GAAA9xB,KAAAvC,KAAMmC,KAJRgR,eAAiB,IAAIvB,EAGFxP,EAFnBgR,kBAAoB,IAAIlD,EAItB9N,EAAKmB,MAAQ,CACX8M,KAAM,GACN0D,KAAM3R,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KACzCmC,WAAY,GACZme,eAAgB,GAChBC,gBAAiB,GACjBC,cAAe,GACfC,SAAU,GACVhnB,WAAY,GACZmY,KAAM,GACNvb,QAAS,IAGXjI,EAAKyd,WAAazd,EAAKyd,WAAW5F,KAAhBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAClBA,EAAKsyB,aAAetyB,EAAKsyB,aAAaza,KAAlBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACpBA,EAAKuyB,aAAevyB,EAAKuyB,aAAa1a,KAAlBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAjBHA,oMAqBbwyB,EAAe50B,KAAKuD,MAAMwQ,KAAK,GAC/BrS,EAAM,GAAAmC,OAAG9C,EAAH,UAAoB6zB,EAApB,iBACVhxB,MAAMlC,GACHsC,KAAK,SAAA6wB,GAAM,OAAIA,EAAO3wB,SACtBF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CAAE+R,WAAYhS,GAAgBT,EAAKoxB,kBAKjDC,YAAuBh0B,0DAAsDM,KAAKC,OACtFsC,MAAMmxB,GACH/wB,KAAK,SAAA6wB,GAAM,OAAIA,EAAO3wB,SACtBF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CAAEowB,cAAerwB,gQAO/BgS,EAAanW,KAAKuD,MAAM4S,YACbrI,2BAA2B1N,OAAS,GACjDJ,KAAKoE,SAAS,CACZiG,QAAS8L,EAAWrI,2BAA2B,GAAGhI,sJAMtD9F,KAAKysB,+CAIIlmB,GACT,IAAIquB,EAAe50B,KAAKuD,MAAMwQ,KAAK,GAC/BihB,EAAmBh1B,KAAKuD,MAAMkxB,SAC9BQ,EAAqBj1B,KAAKuD,MAAMkK,WAChCpD,EAAUrK,KAAKuD,MAAM8G,QACpB2qB,IACHA,EAAmBh1B,KAAKuD,MAAM4S,WAAW+e,aAAa,GAAGrnB,UACzDonB,EAAqBj1B,KAAKuD,MAAM4S,WAAW+e,aAAa,GAAGC,aAE7Dn1B,KAAKoT,kBAAkBjC,aACrByjB,EACAI,EACAC,EACA5qB,GAGFrK,KAAKmC,MAAM+hB,QAAQlS,KACjB,cAAgBhS,KAAKuD,MAAMwQ,KAAK,GAAK,wBAEvCxN,EAAEC,sDAGSd,GACX1F,KAAKoE,SAAS,CAAEiG,QAAS3E,EAAMuD,OAAOnD,6CAI3BJ,GACX,IAAI0V,EAAU1V,EAAMuD,OAAOyB,QAAQhF,EAAMuD,OAAOmsB,eAAeha,QAC/Dpb,KAAKoE,SAAS,CAAEqwB,SAAUrZ,EAAQvO,GAAIY,WAAY2N,EAAQhR,wCAInD,IAAA6M,EAAAjX,KACHq1B,EAAmB,GACnBC,EAAY,GAEZC,EAAe,GACfpf,EAAanW,KAAKuD,MAAM4S,WACxBqe,EAAgBx0B,KAAKuD,MAAMixB,cAC3BgB,EAAgB,GAChBC,EAAc,IAGdjB,EAAcp0B,OAAS,IACzB4F,QAAQC,IAAIjG,KAAKuD,MAAMixB,eACvBA,EAAc1pB,IAAI,SAAAgB,GAiBhB,OAhBIA,EAAUnB,MAAMwK,gBAAkB8B,EAAK1T,MAAMwQ,KAAK,IACpDjI,EAAUkK,QAAQlL,IAAI,SAAAmL,GAYpB,OAXAuf,EAAcxjB,KACZzN,EAAAzB,EAAA0B,cAAA,UACEG,IAAKsR,EAAOpJ,GACZ2e,UAASvV,EAAOpJ,GAChBkf,YAAW9V,EAAO7L,KAClBtE,MAAOmQ,EAAOpJ,IAEboJ,EAAOtL,QAGZ8qB,EAAYzjB,KAAK,CAAErN,IAAKsR,EAAOpJ,GAAI/G,MAAOmQ,EAAOtL,QAC1C,OAGJ,QAIPwL,KACFkf,EAAmBlf,EAAWxL,MAAM,GAAG7E,MACvCwvB,EAAYnf,EAAW+e,aAAa,GAAGrnB,UAEnC4nB,EAAYr1B,OAAS,IAEvBm1B,EADUE,EAAYrhB,KAAK,SAAAhM,GAAC,OAAIA,EAAEzD,MAAQ2wB,IACvBxvB,QAIvB,OACEvB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,2BACAD,EAAAzB,EAAA0B,cAAA,SAAOE,UAAU,qBACfH,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,sBAEFD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UAAK+wB,KAGThxB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,0BAEFD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,UAAK6wB,KAGT9wB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,MAAIkxB,QAAS,GACXnxB,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,wDAGAH,EAAAzB,EAAA0B,cAAA,QACEqI,GAAI,mBACJ3G,SAAUlG,KAAK6f,WAAW5F,KAAKja,OAE/BuE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,UACEsB,MACE9F,KAAKuD,MAAMkxB,SAAWz0B,KAAKuD,MAAMkxB,SAAWa,EAE9C7vB,SAAUzF,KAAK00B,cAEdc,GAEHjxB,EAAAzB,EAAA0B,cAAA,iEAEED,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACLkH,YAAY,+CACZvB,KAAK,UACLC,MAAO9F,KAAKuD,MAAM8G,QAClB5E,SAAUzF,KAAK20B,aAAa1a,KAAKja,SAGrCuE,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,SAASwE,UAAU,SAASoB,MAAM,UAEhDvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iCA5LFjC,IAAM8C,WAkNxBowB,GAVgB,kBAC7BpxB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,gDACL4U,UAAW0L,OC7MXuB,eAIJ,SAAAA,EAAYzzB,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAA41B,IACjBxzB,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAA81B,GAAArzB,KAAAvC,KAAMmC,KAJRgR,eAAiB,IAAIvB,EAGFxP,EAFnBgR,kBAAoB,IAAIlD,EAItB9N,EAAKmB,MAAQ,CACX8M,KAAM,GACN0D,KAAM3R,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KACzC6hB,YAAazzB,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACrDT,cAAenR,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACvDwgB,cAAe,GACf/d,cAAe,GACfpC,UAAW,GACXugB,aAAcxyB,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACtDsgB,eAAgB,GAChBC,gBAAiB,GACjBuB,gBAAiB,GACjBC,kBAAmB,GACnBvgB,cAAe,IAGjBpT,EAAK4zB,eAAiB5zB,EAAK4zB,eAAe/b,KAApBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IACtBA,EAAK6zB,uBAAyB7zB,EAAK6zB,uBAAuBhc,KAA5Bna,OAAAkb,GAAA,EAAAlb,CAAAsC,IAC9BA,EAAK8zB,iBAAmB9zB,EAAK8zB,iBAAiBjc,KAAtBna,OAAAkb,GAAA,EAAAlb,CAAAsC,IApBPA,2MA0BbyzB,EAAc71B,KAAKuD,MAAMsyB,YACzBn0B,EACF,GAAAmC,OAAG9C,EAAH,UACA80B,EADA,4BAAAhyB,OAE4BxC,KAAKC,OACnCsC,MAAMlC,GACHsC,KAAK,SAAA6wB,GAAM,OAAIA,EAAO3wB,SACtBF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CAAEiQ,UAAWlQ,MAI/BP,MAAK,GAAAC,OAAI9C,EAAJ,sCACFiD,KAAK,SAAA6wB,GAAM,OAAIA,EAAO3wB,SACtBF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CAAEowB,cAAerwB,eAGhBnE,KAAKoT,kBAAkBqC,2BACxCzV,KAAKuD,MAAMgQ,sBADTshB,SAGJ70B,KAAKoE,SAAS,CAAEoR,cAAeqf,kJAI/B70B,KAAKysB,mDAGQlmB,GACb,IAAIsvB,EAAc71B,KAAKuD,MAAMsyB,YACzBM,EAAuBn2B,KAAKuD,MAAMqxB,aAClC50B,KAAKuD,MAAMqxB,aACX50B,KAAKuD,MAAM8Q,UAAU+hB,iBAAiB,GAAGvoB,UACzCwoB,EAAyBr2B,KAAKuD,MAAM+wB,eACpCt0B,KAAKuD,MAAM+wB,eACXt0B,KAAKuD,MAAM8Q,UAAU+hB,iBAAiB,GAAGjB,YACzCmB,EAA0Bt2B,KAAKuD,MAAMuyB,gBACrC91B,KAAKuD,MAAMuyB,gBACX91B,KAAKuD,MAAM8Q,UAAUkiB,qBAAqB,GAAG1oB,UAC7C2oB,EAA4Bx2B,KAAKuD,MAAMwyB,kBACvC/1B,KAAKuD,MAAMwyB,kBACX/1B,KAAKuD,MAAM8Q,UAAUkiB,qBAAqB,GAAGpB,YAajDn1B,KAAKoT,kBAAkB9B,wBACrBukB,EACAM,EACAE,EACAC,EACAE,GAGFx2B,KAAKmC,MAAM+hB,QAAQlS,KACjB,cACEhS,KAAKuD,MAAMwQ,KAAK,GAChB,wBACA/T,KAAKmC,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACxC,sBAEJzN,EAAEC,gEAGmBd,GACrB,IAAI0V,EAAU1V,EAAMuD,OAAOyB,QAAQhF,EAAMuD,OAAOmsB,eAAeha,QAC/Dpb,KAAKoE,SAAS,CAAEwwB,aAAcxZ,EAAQvO,GAAIynB,eAAgBlZ,EAAQhR,gDAInD1E,GACf,IAAI0V,EAAU1V,EAAMuD,OAAOyB,QAAQhF,EAAMuD,OAAOmsB,eAAeha,QAC/Dpb,KAAKoE,SAAS,CACZ0xB,gBAAiB1a,EAAQvO,GACzBkpB,kBAAmB3a,EAAQhR,wCAKtB,IAAA6M,EAAAjX,KACHy2B,EAAkB,GAClBC,EAAgB,GAEhBrB,EAAmB,GACnBsB,EAAoB,GAEpBC,EAAuB,GACvBviB,EAAYrU,KAAKuD,MAAM8Q,UACvBmB,EAAgBxV,KAAKuD,MAAMiS,cAC3Bgf,EAAgBx0B,KAAKuD,MAAMixB,cAC3BqC,EAAoB,GACpBC,EAAkB,GAClB5L,EAAuB,GACvB6L,EAAqB,GA0DzB,GAtDIvC,GACFA,EAAc1pB,IAAI,SAAAgB,GAoBhB,OAnBIA,EAAUnB,MAAMwK,gBAAkB8B,EAAK1T,MAAMgQ,eAC/CzH,EAAUsJ,gBAAgBtK,IAAI,SAAAygB,GAe5B,OAdAL,EAAqBlZ,KACnBzN,EAAAzB,EAAA0B,cAAA,UACEG,IAAK4mB,EAAe1e,GACpB2e,UAASD,EAAe1e,GACxBkf,YAAWR,EAAenhB,KAC1BtE,MAAOylB,EAAe1e,IAErB0e,EAAe5gB,QAGpBosB,EAAmB/kB,KAAK,CACtBrN,IAAK4mB,EAAe1e,GACpB/G,MAAOylB,EAAe5gB,QAEjB,OAGJ,OAKP6K,GACFA,EAAc1K,IAAI,SAAAgB,GAuBhB,OAtBAA,EAAUkK,QAAQlL,IAAI,SAAAmL,GAoBpB,OAnBAA,EAAOC,aAAapL,IAAI,SAAAqL,GAiBtB,OAhB4B,IAAxBA,EAAWQ,WACbkgB,EAAkB7kB,KAChBzN,EAAAzB,EAAA0B,cAAA,UACEG,IAAKwR,EAAWtJ,GAChB2e,UAASrV,EAAWtJ,GACpBkf,YAAW5V,EAAW/L,KACtBtE,MAAOqQ,EAAWtJ,IAEjBsJ,EAAWxL,QAGhBmsB,EAAgB9kB,KAAK,CACnBrN,IAAKwR,EAAWtJ,GAChB/G,MAAOqQ,EAAWxL,SAGf,OAEF,OAEF,OAIP0J,EAAW,CAKb,GAJAoiB,EAAkBpiB,EAAU1J,MAAM,GAAG7E,MACrC4wB,EAAgBriB,EAAU+hB,iBAAiB,GAAGvoB,UAE9C8oB,EAAoBtiB,EAAUkiB,qBAAqB,GAAG1oB,UAClDipB,EAAgB12B,OAAS,EAE3Bi1B,EADUyB,EAAgB1iB,KAAK,SAAAhM,GAAC,OAAIA,EAAEzD,MAAQ+xB,IACvB5wB,MAIzB,GAAIixB,EAAmB32B,OAAS,EAE9Bw2B,EADUG,EAAmB3iB,KAAK,SAAAhM,GAAC,OAAIA,EAAEzD,MAAQgyB,IACtB7wB,MAM/B,OACEvB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,uCACAD,EAAAzB,EAAA0B,cAAA,wBAAgBiyB,GAChBlyB,EAAAzB,EAAA0B,cAAA,SAAOE,UAAU,qBACfH,EAAAzB,EAAA0B,cAAA,aACED,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,yBACAD,EAAAzB,EAAA0B,cAAA,UAAK6wB,GACL9wB,EAAAzB,EAAA0B,cAAA,MAAIwyB,QAAS,GACXzyB,EAAAzB,EAAA0B,cAAA,QACEqI,GAAI,mBACJ3G,SAAUlG,KAAKg2B,eAAe/b,KAAKja,OAEnCuE,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAAA,UACEsB,MACE9F,KAAKuD,MAAMqxB,aACP50B,KAAKuD,MAAMqxB,aACX8B,EAENjxB,SAAUzF,KAAKi2B,wBAEdY,GAEHtyB,EAAAzB,EAAA0B,cAAA,uCACAD,EAAAzB,EAAA0B,cAAA,UACEsB,MACE9F,KAAKuD,MAAMuyB,gBACP91B,KAAKuD,MAAMuyB,gBACXa,EAENlxB,SAAUzF,KAAKk2B,kBAEdhL,GAEH3mB,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,SAASwE,UAAU,SAASoB,MAAM,YAKpDvB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,6BACAD,EAAAzB,EAAA0B,cAAA,UAAKoyB,cA3Pan0B,IAAM8C,WA8QvB0xB,GAVe,kBAC5B1yB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,gEACL4U,UAAWiN,OC3QXsB,eAIJ,SAAAA,EAAY/0B,GAAO,IAAAC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAk3B,IACjB90B,EAAAtC,OAAAuC,EAAA,EAAAvC,CAAAE,KAAAF,OAAAwC,EAAA,EAAAxC,CAAAo3B,GAAA30B,KAAAvC,KAAMmC,KAJRgR,eAAiB,IAAIvB,EAGFxP,EAFnBgR,kBAAoB,IAAIlD,EAItB9N,EAAKmB,MAAQ,CACX4L,WAAY/M,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACpD6hB,YAAazzB,EAAKD,MAAMuF,SAASC,SAASqM,MAAM,KAAK,GACrDwV,gBAAiB,GACjB5D,KAAM,IAERxjB,EAAK+0B,MAAQ/0B,EAAK+0B,MAAMld,KAAXna,OAAAkb,GAAA,EAAAlb,CAAAsC,IARIA,6GAWPmE,kFAEK,KACX0J,EAAQ,CAAC,GAAI,aAEEjQ,KAAKoT,kBAAkB+jB,MAH3B,KAG2ClnB,UAAtD4kB,SACJ7uB,QAAQC,IAAI4uB,kJAOM,IAAAnxB,EAAA1D,KAElB4D,MAAK,GAAAC,OAAI9C,EAAJ,WAAA8C,OAAoB7D,KAAKuD,MAAM4L,WAA/B,sBACFnL,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJT,EAAKU,SAAS,CACZolB,gBAAiBrlB,MAIvB,IAAI8hB,EAAO,GAAApiB,OAAM9C,EAAN,uBACX6C,MAAMqiB,GACHjiB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAkiB,GACJxiB,EAAKU,SAAS,CAAEwhB,KAAMM,uCAS1B,OACE3hB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,yFAIAD,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,SAASU,QAASpF,KAAKm3B,MAAMld,KAAKja,OAApD,eAzDqByC,IAAM8C,WA2EpB6xB,GAVY,kBACzB7yB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,iDACL4U,UAAWuO,+CC3EX/pB,GAAapM,EAAOqM,QAAQ,QAAS,QAkN5BC,iHApMV,IAXD1C,EAWCI,EAXDJ,MACA0sB,EAUCtsB,EAVDssB,YACAC,EASCvsB,EATDusB,cACA1nB,EAQC7E,EARD6E,UACA2nB,EAOCxsB,EAPDwsB,IACAC,EAMCzsB,EANDysB,YACAC,EAKC1sB,EALD0sB,OACAC,EAIC3sB,EAJD2sB,SACAC,EAGC5sB,EAHD4sB,cACAC,EAEC7sB,EAFD6sB,eACAC,EACC9sB,EADD8sB,OAEA,MAAO,CACLvqB,OAAOxN,OAAA6F,EAAA,EAAA7F,CAAA,CACLI,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,GAAL,6BAFF,GAAAtJ,OAIAsJ,GAJA,0DAIqE,CACvEhI,KAAI,GAAAtB,OAAKsJ,GAAL,UAAAtJ,OAAwBwzB,EAAxB,uBAGR1sB,MAAO,CACL,CACE7E,MAAO6E,IAGXmtB,eAAgB,CACd,CACEjqB,UAAW+B,IAGfmoB,UAAW,CACT,CACEjyB,MAAOyxB,IAGXS,mBAAoB,CAClB,CACElyB,MAAO0xB,EACPtP,OAAQ,eAGZ+P,aAAc,CACZ,CACEnyB,MAAO2xB,IAGXS,gBAAiB,CACf,CACEpyB,MAAO4xB,IAGXS,+BAAgC,CAC9B,CACEryB,MAAO6xB,IAGX3nB,6BAA8B,CAC5B,CACElK,MAAO8xB,IAGXQ,YAAa,CACX,CACEvqB,UAAWgqB,EACX1tB,YAAa,oBAGjBkuB,wBAAyB,CACvB,CACEvyB,MAAO,UAGX5F,KAAM,CACJ,CACE2N,UAAW,YAGfN,UAAUzN,OAAA6F,EAAA,EAAA7F,CAAA,MAAA+D,OACJsJ,GADG,0DACkE,CACvE,CACEG,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,GAAL,UAAAtJ,OAAwBwzB,EAAxB,sBAENn3B,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,GAAL,0CAGR/C,KAAM,CACJ,CACEtE,MAAOwxB,IAGXtpB,KAAM,6CAQdsqB,EACA3tB,EACA4sB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAW,EACAV,GAEA,MAAO,CACLvqB,OAAQ,CACNS,KAAM,CACJ5I,KAAI,GAAAtB,OAAKsJ,GAAL,UAAAtJ,OAAwBy0B,EAAxB,kBAENp4B,KAAM,CACJiF,KAAI,GAAAtB,OAAKsJ,GAAL,6BAGRxC,MAAO,CACL,CACE7E,MAAO6E,IAGXotB,UAAW,CACT,CACEjyB,MAAOyxB,IAGXS,mBAAoB,CAClB,CACElyB,MAAO0xB,EACPtP,OAAQ,eAGZ+P,aAAc,CACZ,CACEnyB,MAAO2xB,IAGXS,gBAAiB,CACf,CACEpyB,MAAO4xB,IAGXS,+BAAgC,CAC9B,CACEryB,MAAO6xB,EACPzP,OAAQ,eAGZlY,6BAA8B,CAC5B,CACElK,MAAO8xB,EACP1P,OAAQ,eAGZkQ,YAAa,CACX,CACEvqB,UAAWgqB,GAAkB,OAIjCQ,wBAAyB,CACvB,CACEvyB,MAAOyyB,IAGXr4B,KAAM,CACJ,CACE2N,UAAW,gDAMDyqB,EAAWjuB,GAC3B,IAAImuB,EAAc,GAWlB,OAVAnuB,EAAQ6H,QAAQ,SAAS6D,GACvByiB,EAAYxmB,KAAK,CACfmE,WAAYJ,EAAKI,WACjBsiB,UAAW1iB,EAAK0iB,UAChBjnB,WAAYuE,EAAKvE,WAAWugB,WAMzB,CACL7xB,KAAM,CACJ,CACE2N,UAAW,YAGfgB,WAAY,CACV,CACE/I,MAAOwyB,IAGXI,sBAAuBF,sDCiFdG,cAvRb,SAAAA,IACE,GADa74B,OAAAC,EAAA,EAAAD,CAAAE,KAAA24B,GAAA34B,KAFfmQ,KAAO,IAAI5O,EAGLo3B,EAAe14B,SACjB,OAAOD,KAAKC,SAEd04B,EAAe14B,SAAWD,uGAGR0K,yFACK1K,KAAKmQ,KAAKnO,KAAV,yBAErBsO,GAAKsoB,cAAcluB,kBAFf0F,2BAICA,EAASC,qLAIhBioB,EACA3tB,EACA4sB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAW,EACAV,yFAEuB73B,KAAKmQ,KAAKlO,MAAV,SAAA4B,OACZy0B,EADY,qBAErBhoB,GAAKuoB,YACHP,EACA3tB,EACA4sB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAW,EACAV,kBAZEznB,2BAgBCA,EAASC,sMAGDioB,EAAWjuB,yFACHrK,KAAKmQ,KAAKlO,MAAV,2CAErBqO,GAAKwoB,WAAWR,EAAWjuB,GAC3B,sBAHI+F,2BAKCA,EAASC,8LAIhBkD,EACA8jB,EACA0B,EACApuB,EACA4sB,EACAyB,EACAvB,EACAwB,EACAC,EACAC,EACAC,6EAEI/uB,EAAU,IAEVgvB,EAAuBvxB,KAAKwxB,MAAM94B,aAAaC,QAAQ,mBAErD44B,EAAqBE,kBACvBlvB,EAAUgvB,EAAqBE,kBAI/BC,EAAe,CACjBjmB,gBACA8jB,cACA0B,gBACApuB,QACA4sB,MACAyB,eACAvB,SACAwB,YACAC,2BACAC,yBACAC,UAGU,gBAAsB/uB,EAElC7J,aAAa2yB,QAAQ,eAAgBrrB,KAAKC,UAAUyxB,IACpDxzB,QAAQC,IAAI,2OAGQoE,0EAChBmvB,EAAe1xB,KAAKwxB,MAAM94B,aAAaC,QAAQ,kBACvC,gBAAsB4J,EAClC7J,aAAa2yB,QAAQ,eAAgBrrB,KAAKC,UAAUyxB,6IAGnC9uB,GACjBlK,aAAa2yB,QAAQ,sBAAuBrrB,KAAKC,UAAU2C,4CAG7CA,GAId,IAAI+uB,EAAM,IAAIC,KAAM,IAAK,KAAM,MAC/BD,EAAIE,QAAQ,aAGZ,IA2GIC,EA3GAC,EAAcC,OAAS5R,OAAO,aAC9B6R,EAAcD,OAAS5R,OAAO,YAE9B8R,EAAWP,EAAIQ,SAASC,SAASC,WACjCC,EAAYX,EAAIQ,SAASC,SAASG,YAOlCC,EAAcb,EAAIQ,SAASC,SAASC,WAAa,GAIjDI,EAAiB,GAHA,OAAXP,GAGwB,GAFV,aAAXA,GAIPQ,EAAcR,EAAWO,EAAW,GAStCE,EAlBuB,MAWH/vB,EAAQgwB,aAC5BhwB,EAAQiwB,iBAAiB,GAAG1yB,MAC5B,MACqByC,EAAQgwB,aAC7BhwB,EAAQiwB,iBAAiB,GAAGzyB,OAC5B,MAIA0yB,EAtBgB,GA8BpB,GALAnB,EAAIoB,YAAY,UAChBpB,EAAIqB,YAAY,IAChBrB,EAAIhwB,KA1Be,GADC,GA2Bc,+BAG9BiB,EAAQqwB,kBAAmB,CAC7B,IAOIC,EAnCgB,MA4BKtwB,EAAQqwB,kBAAkB,GAC/CrwB,EAAQqwB,kBAAkB,GAAG9yB,MAC7B,MACsByC,EAAQqwB,kBAAkB,GAChDrwB,EAAQqwB,kBAAkB,GAAG7yB,OAC7B,KAIA+yB,EAAWvwB,EAAQqwB,kBAAkB,GAAG9K,IAE5CwJ,EAAIyB,SACFD,EAFa,MAIbX,EAAc,IACd,EA3CkB,IA6ClBU,EACA,GACA,QAeJ,GAXAJ,GAA8B,GAG9BnB,EAAIqB,YAAY,IAChBrB,EAAIhwB,KAzDe,GA2DjBmxB,EACAlwB,EAAQC,MAAQ,MAAQD,EAAQgtB,UAI9BhtB,EAAQgwB,aAAc,CACxB,IAAIx6B,EAAqC,eAA9BwK,EAAQgwB,aAAax6B,KAAwB,OAAS,MAC7Di7B,EAAUzwB,EAAQiwB,iBAAiB,GAAG1K,IAC1CwJ,EAAIyB,SACFC,EACAj7B,EArEe,GAuEf06B,EAAe,GAtEQ,IAwEvBH,EACA,GACA,QAMJ,GAAI/vB,EAAQ+sB,QAAU/sB,EAAQ6sB,IAAK,CACjC,IAAIE,EAAS/sB,EAAQ+sB,OACjB/sB,EAAQ6sB,IACN7sB,EAAQ+sB,OAAS,KACjB/sB,EAAQ+sB,OACV,GACAF,EAAM7sB,EAAQ6sB,IAAM7sB,EAAQ6sB,IAAM,SAAW,GAEjDkC,EAAIqB,YAAY,IAChBrB,EAAIhwB,KA1Fa,GA4FfgxB,EAAsBG,EAAe,GACrCnD,EAASF,GAQb,GAJAqD,GAA8B,GAI1BlwB,EAAQitB,cAAe,CACzB8B,EAAIqB,YAAY,IAChBrB,EAAIhwB,KAAK8wB,EAAUK,EAAc,+BACjCA,GAA8B,GAE9BnB,EAAIqB,YAAY,IAChB,IAAInD,EAAgB8B,EAAI2B,gBACtB1wB,EAAQitB,cACR6C,GAGFZ,EAAOH,EAAI4B,kBAAkB1D,GAQ7B8B,EAAI6B,SAAS5wB,EAAQitB,cAAe4C,EAAUK,EAAc,CAE1D3yB,MAAOuyB,IAITI,GAA8B,GAIhC,GAAIlwB,EAAQ8sB,YAAa,CACvBiC,EAAIqB,YAAY,IAChBrB,EAAIhwB,KAAK8wB,EAAUX,EAAK2B,EAAIX,EAAc,+BAC1CA,GAA8B,GAE9BnB,EAAIqB,YAAY,IAChB,IAAItD,EAAciC,EAAI2B,gBAAgB1wB,EAAQ8sB,YAAagD,GAG3DI,EAAehB,EAAK2B,EAAIX,EAExBnB,EAAIhwB,KAAK8wB,EAAUK,EAAcpD,GAGnCiC,EAAIqB,YAAY,GAChBrB,EAAIhwB,KAjJe,GAmJjB2wB,EAAY,GACZ,sBAAwBP,EAAc,OAASE,GAIjD,IAAIyB,EAAsB9wB,EAAQgtB,SAAS1jB,MAAM,KAAK+d,KAAK,KAC3D0H,EAAIgC,KAAKD,EAAoBrmB,cAAgB,iBClRpCumB,GAAgB,SAAAv5B,GAE3B,IAAMw5B,EAAiB,IAAIhD,GAFS5sB,EAGVC,mBAAS,IAHCC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAG7BpB,EAH6BsB,EAAA,GAGtB2vB,EAHsB3vB,EAAA,GAAAI,EAIdL,mBAAS,IAJKM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAI7BkrB,EAJ6BjrB,EAAA,GAIxBuvB,EAJwBvvB,EAAA,GAAA2L,EAKEjM,mBAAS,IALXkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAK7Buf,EAL6Btf,EAAA,GAKhB4jB,EALgB5jB,EAAA,GAAAG,EAMRrM,mBAAS,IANDsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAM7Bof,EAN6Bnf,EAAA,GAMrByjB,EANqBzjB,EAAA,GAAA0jB,EAQIhwB,qBARJiwB,EAAAn8B,OAAAoM,EAAA,EAAApM,CAAAk8B,EAAA,GAQ7BtB,EAR6BuB,EAAA,GAQfC,EAReD,EAAA,GAAAE,EASYnwB,mBAAS,IATrBowB,EAAAt8B,OAAAoM,EAAA,EAAApM,CAAAq8B,EAAA,GAS7BxB,EAT6ByB,EAAA,GASXC,EATWD,EAAA,GAAAE,EAWAtwB,qBAXAuwB,EAAAz8B,OAAAoM,EAAA,EAAApM,CAAAw8B,EAAA,GAW7BE,EAX6BD,EAAA,GAWjBE,EAXiBF,EAAA,GAAAG,EAYM1wB,qBAZN2wB,EAAA78B,OAAAoM,EAAA,EAAApM,CAAA48B,EAAA,GAY7BE,EAZ6BD,EAAA,GAYdE,EAZcF,EAAA,GAAAG,EAaM9wB,qBAbN+wB,EAAAj9B,OAAAoM,EAAA,EAAApM,CAAAg9B,EAAA,GAa7BE,EAb6BD,EAAA,GAadE,EAbcF,EAAA,GAAAG,EAeJlxB,mBAAS,IAfLmxB,EAAAr9B,OAAAoM,EAAA,EAAApM,CAAAo9B,EAAA,GAe7BxF,EAf6ByF,EAAA,GAenBC,EAfmBD,EAAA,GAAAE,EAgBMrxB,mBAAS,IAhBfsxB,EAAAx9B,OAAAoM,EAAA,EAAApM,CAAAu9B,EAAA,GAgB7B1F,EAhB6B2F,EAAA,GAgBdC,EAhBcD,EAAA,GAAAE,EAiBQxxB,mBAAS,IAjBjByxB,GAAA39B,OAAAoM,EAAA,EAAApM,CAAA09B,EAAA,GAiB7B5F,GAjB6B6F,GAAA,GAiBbC,GAjBaD,GAAA,GAAAE,GAmBF3xB,qBAnBE4xB,GAAA99B,OAAAoM,EAAA,EAAApM,CAAA69B,GAAA,GAmB7B7xB,GAnB6B8xB,GAAA,GAmBlBC,GAnBkBD,GAAA,GAqB9BrqB,GAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,GAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAtBxB8pB,GAwBN9xB,qBAxBM+xB,GAAAj+B,OAAAoM,EAAA,EAAApM,CAAAg+B,GAAA,GAwB7BvT,GAxB6BwT,GAAA,GAwBpBC,GAxBoBD,GAAA,GAAAE,GA6BcjyB,qBA7BdkyB,GAAAp+B,OAAAoM,EAAA,EAAApM,CAAAm+B,GAAA,GA6B7BE,GA7B6BD,GAAA,GA6BVE,GA7BUF,GAAA,GAiC9B/tB,GAAO,IAAI5O,EAEjBswB,oBAAU,WAER,IAsBMpF,EAAS,eAAA1hB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAAq7B,EAAAC,EAAAnwB,EAAAM,EAAA8vB,EAAAC,EAAA,OAAA37B,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAERi7B,EAAWluB,GACdvO,IADc,GAAAiC,OAEV9C,EAFU,SAAA8C,OAEI0P,GAFJ,KAAA1P,OAEqB2P,GAFrB,4BAAA3P,OAEgExC,KAAKC,QAEnF0C,KAAK,SAAAy6B,GAAS,OAAIA,EAAUpuB,OAEzBiuB,EAAWnuB,GACdvO,IADc,GAAAiC,OAEV9C,EAFU,gDAAA8C,OAE2CxC,KAAKC,QAE9D0C,KAAK,SAAA06B,GAAS,OAAIA,EAAUruB,OAZjBlN,EAAAE,KAAA,EAceue,QAAQC,IAAI,CAACwc,EAAUC,IAdtC,OAAAnwB,EAAAhL,EAAA+vB,KAAAzkB,EAAA3O,OAAAoM,EAAA,EAAApM,CAAAqO,EAAA,GAcPowB,EAdO9vB,EAAA,GAcA+vB,EAdA/vB,EAAA,GAgBdovB,GAAaU,GACbH,GACEI,EAAM9xB,OAAO,SAAAqJ,GACX,OAAOA,EAAKpL,MAAMwK,gBAAkB5B,MAnB1BpQ,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAuBd6C,QAAQC,IAAR9C,EAAAoR,IAvBc,yBAAApR,EAAAG,SAAAN,EAAA,kBAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,YAAA,IAtBG,WAChB,IAAIw+B,EAAgB72B,KAAKwxB,MACvB94B,aAAaC,QAAQ,wBAEvBu9B,GAAWW,GAEPA,IACF/C,EAAS+C,EAAch0B,OACvByyB,EAAYuB,EAAcjH,UAC1BmE,EAAO8C,EAAcpH,KACrBwE,EAAU4C,EAAclH,QACxB8F,EAAiBoB,EAAchH,eAC/BmE,EAAe6C,EAAcnH,aAC7BkG,GAAkBiB,EAAc/G,gBAC5B+G,EAAchE,iBAAiB,KACjC0B,EAAoBsC,EAAchE,kBAClC8B,EAAckC,EAAchE,iBAAiB,GAAG1K,OAiCtD2O,GACAnS,KACC,CAACiO,EAAcnnB,GAAeC,GAAkBrD,KAEnD,IAAMgY,GAAY,eAAA0W,EAAA/+B,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAoW,EAAM4M,GAAN,IAAAsR,EAAA9jB,EAAA+jB,EAAAhiB,EAAA1F,EAAAioB,EAAA8G,EAAAh7B,EAAAyM,EAAA,OAAAvN,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,UACnB0iB,EAAIvf,iBACA6wB,EAAcvrB,GAAU,GAAGsK,IAC3B7C,EAAgBzH,GAAU,GAAGnB,MAC7B2sB,EAAgBxrB,GAAU,GAAG1B,KACjCpE,QAAQC,IAAIk4B,IACR7oB,EAAc6oB,GAAkB,GAAGtyB,SAASuI,KAC9C,SAAA0qB,GAAG,MAAmB,SAAfA,EAAIvpB,SAGT3F,EAAY0F,EAAYzI,GAExBgrB,EAAS,QAIVltB,IACA+sB,GACD/sB,EAAMvK,OAAS,GACfs3B,EAASt3B,OAAS,GAClB48B,GACAJ,GArBiB,CAAAxjB,EAAA/V,KAAA,SAAA+V,EAAA/V,KAAA,oBAyBT7C,aAAaC,QAAQ,SAzBZ,CAAA2Y,EAAA/V,KAAA,SA8Bbs7B,EAAgB72B,KAAKwxB,MACvB94B,aAAaC,QAAQ,wBAGvBk7B,EAAeoD,mBAAmB,CAChCp0B,QACA0sB,cAEA9jB,gBACA+jB,gBACAC,MACAC,cACAC,SACAC,WACAC,gBACAC,kBACA8C,eAEAC,mBACAtwB,QAASs0B,EAAgBA,EAAct0B,QAAU,GACjD20B,kBAAmBL,EAAgBA,EAAcK,kBAAoB,KAlDtD5lB,EAAA/V,KAAA,qBAqDR7C,aAAaC,QAAQ,SAAS6E,SAAS,qBArD/B,CAAA8T,EAAA/V,KAAA,aAsDbq3B,EAtDa,CAAAthB,EAAA/V,KAAA,gBAuDXM,EAAQnD,aAAaC,QAAQ,cAvDlB2Y,EAAA/V,KAAA,GAwDTO,MACJ7C,EAAS,yDACT,CACEgD,YAAa,UACbD,OAAQ,OACRmkB,QAAS,iBACTzmB,QAAS,CACPy9B,OAAQ,2BACRt+B,eAAgB,2BAChBC,eAAgB+C,EAChBu7B,sBAAuB,wCAEzBp9B,KAAM44B,IAGP12B,KAAK,SAAAstB,GAAI,OAAIA,EAAKptB,SAClBF,KAAK,SAASqM,GACbwnB,EAASxnB,EAAK8uB,IAAI,GAAGr5B,QAzEV,eAAAsT,EAAA/V,KAAA,GA6EIs4B,EAAe/C,cAAc,CAChDjuB,QACA0sB,cACAC,gBACA1nB,YACA2nB,MACAC,cACAC,SACAC,WACAC,gBACAC,kBACAC,WAxFe,QA6EbznB,EA7EagJ,EAAA8Z,KAgGjB/wB,EAAM+hB,QAAQlS,KAAd,cAAAnO,OACgB0P,EAAc4B,cAD9B,KAAAtR,OAC+C2P,GAD/C,iBAAA3P,OAEIuM,EAASgG,IAAI,GAAGtQ,QAlGH,yBAAAsT,EAAA9V,SAAA6V,MAAH,gBAAAqB,GAAA,OAAAqkB,EAAApkB,MAAAza,KAAAG,YAAA,GAiMlB,IA4CMiH,GA5CsB,WAC1B,IAAIA,EAAc,cAIlB,OAHK5G,aAAaC,QAAQ,WACxB2G,EAAc,QAETA,EAuCWg4B,GAGhBC,GAAoB,sBACpBC,GAAuB,sBACvBC,GAAW,0DACXC,GACF,+DAeF,OAdI70B,GACEA,EAAMvK,OAAS,IACjBm/B,GAAW,GACXF,GAAoB,IAIpB3H,GACEA,EAASt3B,OAAS,IACpBo/B,GAAe,GACfF,GAAuB,IAKzB/6B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,oBAAY4C,GAAZ,YACA7C,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,UACVmI,GAAG,sBACH3G,SAAUiiB,IAEV5jB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,sBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACL2M,GAAG,QACHzF,YAAY,OACZ3B,SAAU,SAAAc,GAAC,OAAIq1B,EAASr1B,EAAE0C,OAAOnD,QACjC25B,aAAclV,GAAUA,GAAQ5f,MAAQA,EACxCjG,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW26B,IACd96B,EAAAzB,EAAA0B,cAAA,SAAI+6B,MAGRh7B,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,OAAO2M,GAAG,aAAapH,SA5K1B,SAAAc,GACnB,GAAKA,EAAE0C,OAAOy2B,OAAmC,IAA1Bn5B,EAAE0C,OAAOy2B,MAAMt/B,OAAtC,CAMMmG,EAAE0C,OAAOy2B,MAAM,GAAGC,KAAO,QAC3B9C,EAAiB,GAEjBA,OAAiBx8B,GAIU,eAA3BkG,EAAE0C,OAAOy2B,MAAM,GAAGx/B,MACS,cAA3BqG,EAAE0C,OAAOy2B,MAAM,GAAGx/B,KAElB+8B,EAAiB,GAEjBA,OAAiB58B,GAInB,IAAMu/B,EAAS,IAAIC,WACnBD,EAAOj2B,iBACL,OACA,WAEE8yB,EAAcmD,EAAO/K,QAGrB,IAAIiL,EAAM,IAAIC,MACdD,EAAI7P,IAAM2P,EAAO/K,OACjBiL,EAAIn2B,iBAAiB,OAAQ,WAC3Bm2B,EAAI73B,MAAQjI,KAAKiI,MACjB63B,EAAI53B,OAASlI,KAAKkI,OAElBm0B,EAAoB,CAClB,CACEpM,IAAKjwB,KAAKiwB,IACVhoB,MAAOjI,KAAKiI,MACZC,OAAQlI,KAAKkI,cAKrB,GAEE3B,EAAE0C,OAAOy2B,OACXE,EAAOI,cAAcz5B,EAAE0C,OAAOy2B,MAAM,IAGtCxD,EAAgB31B,EAAE0C,OAAOy2B,MAAM,SAlD/BxD,OAAgB77B,OA4KVkE,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,GACJnjB,GAAG,mBACH5E,MAAM,QACNgoB,IAAKuM,EACLt0B,OAAO,QACPnD,MAAO,CACL4G,OAAQ,iBACR3G,QAAS,MACTiD,MAAO,SAGVu0B,EACCj4B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,+CACVS,KAAK,IACLC,QAAS,SAAAmB,GAAC,OAxIJ,SAAAA,GACtBA,EAAEC,iBACF01B,OAAgB77B,GAChBo8B,OAAcp8B,GACd48B,OAAiB58B,GACjBw8B,OAAiBx8B,GACjBqJ,SAASyY,eAAe,cAAcrc,MAAQ,GAkIhBm6B,CAAgB15B,KAHhC,kBASF,GAGDq2B,EACCr4B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,uDAAmD,KAGrD,GAGDw4B,EACCz4B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,kDAA8C,KAGhD,IAGJD,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,gCACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACL2M,GAAG,MACHzF,YAAY,MACZa,MAAO,EACPxC,SAAU,SAAAc,GAAC,OAAIs1B,EAAOt1B,EAAE0C,OAAOnD,QAC/B25B,aAAclV,GAAUA,GAAQgN,IAAMA,EACtC7yB,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wBACAD,EAAAzB,EAAA0B,cAAA,UACEiB,SAAU,SAAAc,GAAC,OAAIw1B,EAAUx1B,EAAE0C,OAAOnD,QAClC25B,aAAclV,GAAUA,GAAQkN,OAASA,EACzC/yB,UAAU,kBAEVH,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,QACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,QACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,UAAf,UACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,aAAf,aACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,kBAAf,wBAINvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,2BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACL2M,GAAG,WACHzF,YAAY,YACZ3B,SAAU,SAAAc,GAAC,OAAI62B,EAAY72B,EAAE0C,OAAOnD,QACpC25B,aAAclV,GAAUA,GAAQmN,SAAWA,EAC3ChzB,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW46B,IACd/6B,EAAAzB,EAAA0B,cAAA,SAAIg7B,MAGRj7B,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,8CACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMsnB,EACNyI,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpB2kB,EAAiBltB,IAEnB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,4CACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMmnB,EACN4I,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpBkjB,EAAezrB,IAEjB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wCACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMunB,GACNwI,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpB8kB,GAAkBrtB,IAEpB3L,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,aAIJD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cArPV,WACE,IAAI67B,EAAoB,mBAKxB,OAJK7/B,aAAaC,QAAQ,WACxB4/B,EAAoB,oBAIpB97B,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,6CACVoB,MAAOu6B,KA2OH,OAEF97B,EAAAzB,EAAA0B,cAAA,gBAiBK87B,GAVc,kBAC3B/7B,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,gDACL4U,UAAW+S,OCheF6E,GAvDG,SAAAp+B,GAChB,IAAMq+B,EAAYr+B,EAAMq+B,UAoBxB,OACEj8B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACuI,EAAAjK,EAAD,CAAYkK,OAAQwzB,EAAWz7B,MAfd,CACnBqG,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,UAAW,wBACXzD,MAAO,MACP6qB,gBAAiB,aAOfvuB,EAAAzB,EAAA0B,cAAA,UAAQO,MAAO,CAAEkI,MAAO,SAAW7H,QAAS,SAAAmB,GAnBhDpE,EAAMs+B,eAoBAl8B,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,wCAEfH,EAAAzB,EAAA0B,cAAA,kBACAD,EAAAzB,EAAA0B,cAAA,sCACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,qLAMAH,EAAAzB,EAAA0B,cAAA,8CACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,oJAMAH,EAAAzB,EAAA0B,cAAA,kCACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,wFAKAH,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,sDCxCKg8B,GAAqB,SAAAv+B,GAChC,IAAM+hB,EAAUyc,cACVhF,EAAiB,IAAIhD,GAFc5sB,EAGfC,mBAAS,IAHMC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAGlCpB,EAHkCsB,EAAA,GAG3B2vB,EAH2B3vB,EAAA,GAAAI,EAInBL,mBAAS,IAJUM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAIlCkrB,EAJkCjrB,EAAA,GAI7BuvB,EAJ6BvvB,EAAA,GAAA2L,EAKHjM,mBAAS,IALNkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAKlCuf,EALkCtf,EAAA,GAKrB4jB,EALqB5jB,EAAA,GAAAG,EAMbrM,mBAAS,IANIsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAMlCof,EANkCnf,EAAA,GAM1ByjB,EAN0BzjB,EAAA,GAAA0jB,EAQDhwB,qBARCiwB,EAAAn8B,OAAAoM,EAAA,EAAApM,CAAAk8B,EAAA,GAQlCtB,EARkCuB,EAAA,GAQpBC,EARoBD,EAAA,GAAAE,EASOnwB,mBAAS,IAThBowB,EAAAt8B,OAAAoM,EAAA,EAAApM,CAAAq8B,EAAA,GASlCxB,EATkCyB,EAAA,GAShBC,EATgBD,EAAA,GAAAE,EAULtwB,qBAVKuwB,EAAAz8B,OAAAoM,EAAA,EAAApM,CAAAw8B,EAAA,GAUlCE,EAVkCD,EAAA,GAUtBE,EAVsBF,EAAA,GAAAG,EAWC1wB,qBAXD2wB,EAAA78B,OAAAoM,EAAA,EAAApM,CAAA48B,EAAA,GAWlCE,EAXkCD,EAAA,GAWnBE,EAXmBF,EAAA,GAAAG,EAYC9wB,qBAZD+wB,EAAAj9B,OAAAoM,EAAA,EAAApM,CAAAg9B,EAAA,GAYlCE,EAZkCD,EAAA,GAYnBE,EAZmBF,EAAA,GAAAG,EAcTlxB,mBAAS,IAdAmxB,EAAAr9B,OAAAoM,EAAA,EAAApM,CAAAo9B,EAAA,GAclCxF,EAdkCyF,EAAA,GAcxBC,EAdwBD,EAAA,GAAAE,EAeCrxB,mBAAS,IAfVsxB,EAAAx9B,OAAAoM,EAAA,EAAApM,CAAAu9B,EAAA,GAelC1F,EAfkC2F,EAAA,GAenBC,GAfmBD,EAAA,GAAAE,GAgBGxxB,mBAAS,IAhBZyxB,GAAA39B,OAAAoM,EAAA,EAAApM,CAAA09B,GAAA,GAgBlC5F,GAhBkC6F,GAAA,GAgBlBC,GAhBkBD,GAAA,GAAAE,GAkBP3xB,qBAlBO4xB,GAAA99B,OAAAoM,EAAA,EAAApM,CAAA69B,GAAA,GAkBlC7xB,GAlBkC8xB,GAAA,GAkBvBC,GAlBuBD,GAAA,GAmBnCrqB,GAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,GAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GApBnB8pB,GAsBX9xB,qBAtBW+xB,GAAAj+B,OAAAoM,EAAA,EAAApM,CAAAg+B,GAAA,GAsBlCvT,GAtBkCwT,GAAA,GAsBzBC,GAtByBD,GAAA,GAAAE,GAuBPjyB,oBAAS,GAvBFkyB,GAAAp+B,OAAAoM,EAAA,EAAApM,CAAAm+B,GAAA,GAuBlCuC,GAvBkCtC,GAAA,GAuBvB0C,GAvBuB1C,GAAA,GAyBnC/tB,GAAO,IAAI5O,EACXo9B,GAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,iBAEtDoxB,oBAAU,WAER,IAAI+M,EAAS,eAAA7zB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACd26B,GAAWW,IACX/C,EAAS+C,GAAch0B,OACvByyB,EAAYuB,GAAc1F,WAC1B4C,EAAOgF,SAASlC,GAAcpH,MAC9BwE,EAAU4C,GAAclH,QACxB8F,GAAiBoB,GAAczF,0BAC/B4C,EAAe6C,GAAc3F,cAC7B0E,GAAkBiB,GAAcxF,wBAC5BwF,GAAcvF,MAAM,KACtBiD,EAAoBsC,GAAcvF,OAClCqD,EAAckC,GAAcvF,MAAM,GAAG13B,MAXzB,wBAAAyB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,YAAA,GAgBPssB,EAAS,eAAAte,EAAArO,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAoW,IAAA,IAAAklB,EAAAC,EAAA7vB,EAAAowB,EAAAN,EAAA,OAAA17B,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,cAAA+V,EAAAhW,KAAA,EAERi7B,EAAWluB,GACdvO,IADc,GAAAiC,OAEV9C,EAFU,SAAA8C,OAEI0P,GAFJ,KAAA1P,OAEqB2P,GAFrB,4BAAA3P,OAEgExC,KAAKC,QAEnF0C,KAAK,SAAAy6B,GAAS,OAAIA,EAAUpuB,OAEzBiuB,EAAWnuB,GACdvO,IADc,GAAAiC,OAEV9C,EAFU,gDAAA8C,OAE2CxC,KAAKC,QAE9D0C,KAAK,SAAA06B,GAAS,OAAIA,EAAUruB,OAZjB+I,EAAA/V,KAAA,EAcQue,QAAQC,IAAI,CAACwc,EAAUC,IAd/B,OAAA7vB,EAAA2K,EAAA8Z,KAAA2L,EAAA/+B,OAAAoM,EAAA,EAAApM,CAAA2O,EAAA,GAcP8vB,EAdOM,EAAA,GAedhB,GAAaU,GAfCnlB,EAAA/V,KAAA,iBAAA+V,EAAAhW,KAAA,GAAAgW,EAAA7E,GAAA6E,EAAA,SAiBdpT,QAAQC,IAARmT,EAAA7E,IAjBc,yBAAA6E,EAAA9V,SAAA6V,EAAA,kBAAH,yBAAAhL,EAAAsM,MAAAza,KAAAG,YAAA,GAqBXw+B,KAAkBpU,IACpBqU,IAGG9yB,IACH2gB,KAED,CACDiO,EACAnnB,GACAC,GACArD,GACAwuB,GACA7yB,GACAye,KAGF,IAAMpC,GAAY,eAAA2Y,EAAAhhC,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAsW,EAAM0M,GAAN,IAAAsR,EAAA0B,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAv2B,EAAAC,EAAAI,KAAA,SAAAoW,GAAA,cAAAA,EAAAlW,KAAAkW,EAAAjW,MAAA,UACnB0iB,EAAIvf,iBACA6wB,EAAcvrB,GAAU,GAAGsK,IAC3B2iB,EAAgBvlB,MAIjB7I,IACA+sB,GACD/sB,EAAMvK,OAAS,GACfs3B,EAASt3B,OAAS,GAClB48B,GACAJ,GAZiB,CAAAtjB,EAAAjW,KAAA,eAAAiW,EAAAia,OAAA,SAcV,GAdU,OAiBT/yB,aAAaC,QAAQ,WACzBu4B,EAAexB,GAA4B,GAC3CyB,EAAYvB,GAAsB,GAClCwB,EAA2BvB,GAAgC,GAC3DwB,EAAyBvB,IAAkC,GAC3DwB,EAAQuB,GAAsC,GAElDgB,EAAeoF,mBACbxtB,GACA8jB,EACA0B,EACApuB,EACA4sB,EACAyB,EACAvB,EACAwB,EACAC,EACAC,EACAC,GAKFlV,EAAQlS,KAAR,cAAAnO,OACgB0P,GADhB,KAAA1P,OACiC2P,GADjC,yBAxCiB,wBAAA8F,EAAAhW,SAAA+V,MAAH,gBAAAmB,GAAA,OAAAsmB,EAAArmB,MAAAza,KAAAG,YAAA,GA6HlB,IAQMiH,GARsB,WAC1B,IAAIA,EAAc,cAIlB,OAHK5G,aAAaC,QAAQ,WACxB2G,EAAc,QAETA,EAGWg4B,GAGhBC,GAAoB,sBACpBC,GAAuB,sBACvBC,GAAW,0DACXC,GACF,+DACE70B,GACEA,EAAMvK,OAAS,IACjBm/B,GAAW,GACXF,GAAoB,IAIpB3H,GACEA,EAASt3B,OAAS,IACpBo/B,GAAe,GACfF,GAAuB,IAc3B,OACE/6B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,2BAAmB4C,GAAnB,YACA7C,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,+CADf,+CAGEH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,+CACVU,QAAS,SAAAmB,GAAC,OAlBA,SAAAA,GAChBA,EAAEC,iBACFo6B,IAAa,GAgBOI,CAAUz6B,KAF1B,YAMAhC,EAAAzB,EAAA0B,cAACy8B,GAAD,CAAWT,UAAWA,GAAWC,WAjBpB,WAEjBG,IAAa,OAiBXr8B,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,UACVmI,GAAG,sBACH3G,SAAUiiB,IAEV5jB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,sBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACL2M,GAAG,QACHzF,YAAY,OACZ3B,SAAU,SAAAc,GAAC,OAAIq1B,EAASr1B,EAAE0C,OAAOnD,QACjC25B,aAAclV,GAAUA,GAAQ5f,MAAQ,GACxCjG,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW26B,IACd96B,EAAAzB,EAAA0B,cAAA,SAAI+6B,MAGRh7B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,OAAO2M,GAAG,aAAapH,SA7J1B,SAAAc,GACnB,GAAKA,EAAE0C,OAAOy2B,OAAmC,IAA1Bn5B,EAAE0C,OAAOy2B,MAAMt/B,OAAtC,CAMMmG,EAAE0C,OAAOy2B,MAAM,GAAGC,KAAO,QAC3B9C,EAAiB,GAEjBA,OAAiBx8B,GAIU,eAA3BkG,EAAE0C,OAAOy2B,MAAM,GAAGx/B,MACS,cAA3BqG,EAAE0C,OAAOy2B,MAAM,GAAGx/B,KAElB+8B,EAAiB,GAEjBA,OAAiB58B,GAInB,IAAMu/B,EAAS,IAAIC,WACnBD,EAAOj2B,iBACL,OACA,WAEE8yB,EAAcmD,EAAO/K,QAGrB,IAAIiL,EAAM,IAAIC,MACdD,EAAI7P,IAAM2P,EAAO/K,OACjBiL,EAAIn2B,iBAAiB,OAAQ,WAC3Bm2B,EAAI73B,MAAQjI,KAAKiI,MACjB63B,EAAI53B,OAASlI,KAAKkI,OAElBm0B,EAAoB,CAClB,CACE36B,IAAK1B,KAAKiwB,WAKlB,GAEE1pB,EAAE0C,OAAOy2B,OACXE,EAAOI,cAAcz5B,EAAE0C,OAAOy2B,MAAM,IAGtCxD,EAAgB31B,EAAE0C,OAAOy2B,MAAM,SAhD/BxD,OAAgB77B,OA6JVkE,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,GACJnjB,GAAG,mBACH5E,MAAM,QACNgoB,IAAKuM,EACLt0B,OAAO,QACPnD,MAAO,CACL4G,OAAQ,iBACR3G,QAAS,MACTiD,MAAO,SAGVu0B,EACCj4B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,+CACVS,KAAK,IACLC,QAAS,SAAAmB,GAAC,OA5HJ,SAAAA,GACtBA,EAAEC,iBACF01B,OAAgB77B,GAChBo8B,OAAcp8B,GACd48B,OAAiB58B,GACjBw8B,OAAiBx8B,GACjBg8B,OAAoBh8B,GACpBqJ,SAASyY,eAAe,cAAcrc,MAAQ,GAqHhBm6B,CAAgB15B,KAHhC,kBASF,GAEFhC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACdk4B,EACCr4B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,uDAAmD,KAGrD,GAGDw4B,EACCz4B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,kDAA8C,KAGhD,IAGJD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,gCACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACL2M,GAAG,MACHzF,YAAY,MACZa,MAAO,EACPxC,SAAU,SAAAc,GAAC,OAAIs1B,EAAOt1B,EAAE0C,OAAOnD,QAC/B25B,aAAclV,GAAUA,GAAQgN,IAAM,GACtC7yB,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wBACAD,EAAAzB,EAAA0B,cAAA,UACEiB,SAAU,SAAAc,GAAC,OAAIw1B,EAAUx1B,EAAE0C,OAAOnD,QAElCA,MAAO2xB,GAAkB,SACzB/yB,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,QACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,QACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,UAAf,UACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,aAAf,aACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,kBAAf,wBAINvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,2BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACL2M,GAAG,WACHzF,YAAY,YACZ3B,SAAU,SAAAc,GAAC,OAAI62B,EAAY72B,EAAE0C,OAAOnD,QACpC25B,aAAclV,GAAUA,GAAQ0O,UAAY,GAC5Cv0B,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW46B,IACd/6B,EAAAzB,EAAA0B,cAAA,SAAIg7B,MAGRj7B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,8CACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KACEsuB,GAAgBA,GAAczF,yBAA2B,GAE3DkH,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpB2kB,GAAiBltB,IAEnB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,4CACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMsuB,GAAgBA,GAAc3F,aAAe,GACnDoH,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpBkjB,EAAezrB,IAEjB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wCACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMsuB,GAAgBA,GAAcxF,uBAAyB,GAC7DiH,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpB8kB,GAAkBrtB,IAEpB3L,UAAU,sBAKlBH,EAAAzB,EAAA0B,cAxON,WACE,IAAI67B,EAAoB,oBAKxB,OAJK7/B,aAAaC,QAAQ,WACxB4/B,EAAoB,oBAIpB97B,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,6CACVoB,MAAOu6B,KA8NP,SAgBOa,GAVK,kBAClB38B,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,sDACL4U,UAAW+X,gBC9bXv1B,GAAe,CACnBC,QAAS,CACPkL,SAAU,WACVjL,IAAK,OACLC,KAAM,OACNC,MAAO,OACPC,OAAQ,OACRG,OAAQ,iBACRw1B,WAAY,OACZ9S,SAAU,OACV+S,wBAAyB,QACzBC,aAAc,MACdC,QAAS,OACTt8B,QAAS,OACTiD,MAAO,QACPC,OAAQ,QACR2kB,OAAQ,QAEV5lB,QAAS,CACPqP,SAAU,QACVjL,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRsnB,gBAAiB,8BAIRyO,GAAyB,SAAAp/B,GACpC,IAAMq/B,EAAsBr/B,EAAMq/B,oBADWz1B,EAEXC,oBAAS,GAFEC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAEtCzF,EAFsC2F,EAAA,GAE3Bw1B,EAF2Bx1B,EAAA,GAGvCy1B,EAAiBv/B,EAAMooB,QACvBoX,EAAWx/B,EAAMw/B,SAEvB,OACEp9B,EAAAzB,EAAA0B,cAAA,WACGrC,EAAMy/B,YACLr9B,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,4BACVU,QAAS,WACPq8B,GAAa,KAHjB,2BASAl9B,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAAS,WACPq8B,GAAa,KAHjB,mBASDC,EACCn9B,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACuI,EAAAjK,EAAD,CACEkK,OAAQ1G,EACRioB,aAAa,gBACb7pB,UAAU,QACV4pB,iBAAiB,UACjBvpB,MAAOoG,GACP02B,eAAgB,WACdJ,GAAa,KAGfl9B,EAAAzB,EAAA0B,cAAA,4BACkB,IAChBD,EAAAzB,EAAA0B,cAAA,QACEO,MAAO,CACLkI,MAAO,QACP5H,OAAQ,UACRy8B,WAAY,UAEd18B,QAAS,WACPq8B,GAAa,KAPjB,MAcFl9B,EAAAzB,EAAA0B,cAAA,uCAC8B,IAC5BD,EAAAzB,EAAA0B,cAAA,cAASk9B,EAAezI,UAAxB,WAGF10B,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,kBACVmI,GAAG,kBACHpH,SAAU,SAAAc,GACRpE,EAAM4/B,qBAAqBx7B,EAAE0C,OAAOnD,SAGtCvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAM,KAAd,eACCtF,aAAaC,QAAQ,iBACtB+gC,EACEj9B,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,SAEXgC,KAAKwxB,MAAM94B,aAAaC,QAAQ,iBAC7Bw4B,WAIP,GAED0I,EACGA,EAAS72B,IAAI,SAACyf,EAAStY,GACrB,OACE1N,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAOykB,EAAQ1d,IACpB0d,EAAQ0O,cAKjB,IAEN10B,EAAAzB,EAAA0B,cAAA,QAAMO,MAAO,CAAEi9B,MAAO,QAAU7/B,EAAM8/B,kBAExC19B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACfH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVU,QAAS,SAAAmB,GACPk7B,GAAa,GACbt/B,EAAM+/B,kBAAkB37B,KAJ5B,cAaN,KCnIK47B,GAAc,SAAAhgC,GACzB,IAAI+hB,EAAUyc,cACRptB,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACtDskB,EAAYn2B,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAJnBjI,EAMJC,qBANIC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAM3Bwe,EAN2Bte,EAAA,GAMlB+xB,EANkB/xB,EAAA,GAAAI,EAOFL,qBAPEM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAO3Bs1B,EAP2Br1B,EAAA,GAOjB81B,EAPiB91B,EAAA,GAAA2L,EAQgBjM,qBARhBkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAQ3BoqB,EAR2BnqB,EAAA,GAQR6pB,EARQ7pB,EAAA,GAAAG,EASArM,qBATAsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAS3BvM,EAT2BwM,EAAA,GAShBulB,EATgBvlB,EAAA,GAAA0jB,EAUQhwB,qBAVRiwB,EAAAn8B,OAAAoM,EAAA,EAAApM,CAAAk8B,EAAA,GAU3BsG,EAV2BrG,EAAA,GAUZsG,EAVYtG,EAAA,GAAAE,EAWAnwB,oBAAS,GAXTowB,EAAAt8B,OAAAoM,EAAA,EAAApM,CAAAq8B,EAAA,GAW3B71B,EAX2B81B,EAAA,GAAAE,GAAAF,EAAA,GAYYpwB,mBAAS,OAZrBuwB,EAAAz8B,OAAAoM,EAAA,EAAApM,CAAAw8B,EAAA,GAY3B2F,EAZ2B1F,EAAA,GAYViG,EAZUjG,EAAA,GAAAG,EAaU1wB,mBAAS,IAbnB2wB,EAAA78B,OAAAoM,EAAA,EAAApM,CAAA48B,EAAA,GAa3B+F,EAb2B9F,EAAA,GAaX+F,EAbW/F,EAAA,GA4B5Bv7B,EADYZ,aAAaC,QAAQ,UACL,cAAgBY,KAAKC,MAAQ,GAE3DqhC,EAAiB,GACjBC,EAA0B,GAC1BxtB,EAAkB,GAClBytB,EAAoB,GACpBx4B,EAAU,GACVy4B,EAAatiC,aAAaC,QAAQ,SAClCD,aAAaC,QAAQ,SACrB,GACAsiC,EAAWviC,aAAaC,QAAQ,QAChCD,aAAaC,QAAQ,QACrB,GAIJoxB,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,2DAAA3P,OACmGzC,IAE3G4C,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ,IAAM6+B,EAAkC7+B,EAAauI,OACnD,SAAAu2B,GAAC,OACCA,EAAEp2B,KAAO1K,EAAMkR,MAAMC,OAAOzG,IAA8B,SAAxBo2B,EAAEle,oBAExCqd,EAAYY,KAVA,cAAA7/B,EAAAE,KAAA,EAYVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,8BAAA3P,OACsEy0B,EADtE,oCAAAz0B,OACkHzC,IAE1H4C,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ65B,EAAW75B,KAjBC,cAAAhB,EAAAE,KAAA,EAoBVO,MAAK,GAAAC,OACN9C,EADM,2DAAA8C,OAC0DzC,IAElE4C,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJo+B,EAAiBp+B,KAzBL,cAAAhB,EAAAE,KAAA,EA4BVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,iDAAA3P,OACyFzC,IAEjG4C,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ05B,EAAa15B,KAjCD,WAoCZ4+B,EApCY,CAAA5/B,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAqCRO,MAAK,GAAAC,OAAI9C,EAAJ,uBAAA8C,OAAgCk/B,EAAhC,iBAAyD,CAClEj/B,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJu+B,EAAkBv+B,KA3CR,yBAAAhB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,aAAA,EA+CfssB,IACC,CAAC6L,EAAW9kB,EAAkBD,EAAewvB,EAAUz8B,IAE1D,IAAM48B,EAAe,SAAA/sB,GACnB,GAAI9L,EAAS,CACX,IAAI84B,EAAM94B,EAAQ+J,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,IAC7C,IAAIgtB,EAQF,MAAO,GAPP,GAAIb,EAIF,OAHgBA,EACbluB,KAAK,SAAAivB,GAAI,OAAIA,EAAK14B,MAAMwK,gBAAkB5B,IAC1C+vB,iBAAiBlvB,KAAK,SAAAmvB,GAAK,OAAIA,EAAM12B,KAAOs2B,EAAI1K,cAkBrD+K,GAAc,SAAAnzB,GAClB,IAAIozB,EAAcnB,EAAcluB,KAC9B,SAAAivB,GAAI,OAAIA,EAAK14B,MAAMwK,gBAAkB5B,IACrC+vB,iBAAiBljC,OAEnB,OADSiQ,EAAO,MAAQozB,EAAc,GAAKpzB,EAAKqzB,cAAgB,GAwNlE,OACEn/B,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,WApNN29B,IACFA,EAAcx3B,IAAI,SAACu4B,EAAMM,GA8BvB,OA7BIN,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MACzB04B,EAAKC,iBAAiBx4B,IAAI,SAACy4B,EAAOK,GAAR,OACxBhB,EAAwB5wB,KACtBzN,EAAAzB,EAAA0B,cAAA,MACEG,IAAKi/B,EACLl/B,UAAU,gBACVK,MAAO,CAAE2uB,UAAW,WAEpBnvB,EAAAzB,EAAA0B,cAAA,OACEq/B,WAAUN,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD25B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBz/B,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,+BACb,IACA6+B,EAAMG,aAAc,KACf,IACRn/B,EAAAzB,EAAA0B,cAAA,gBAAQ++B,EAAM54B,QAEhBpG,EAAAzB,EAAA0B,cAACy/B,GAAA,EAAD,CACEv/B,UAAU,iBACVK,MAAO,CAAEi9B,MAAO,cAMnB,OAETM,EAAcx3B,IAAI,SAAAu4B,GAMhB,OALIA,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,QAIP4f,IACFlgB,EAAUkgB,EAAQgP,sBAGhBztB,IACF62B,EAAiB72B,EAAUhB,IAAI,SAACiL,EAAMmuB,GAAP,OAC7BnuB,EAAKC,QAAQlL,IAAI,SAACmL,EAAQkuB,GAAT,OACf5/B,EAAAzB,EAAA0B,cAACD,EAAAzB,EAAM2B,SAAP,CAAgBE,IAAKu/B,EAAYC,GAC/B5/B,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKw/B,GACR5/B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKiuB,MAAM,2BACXluB,EAAAzB,EAAA0B,cAAA,UAAKyR,EAAOtL,OAAY,MAG5BpG,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,WACGyR,EAAOC,aAAapL,IAAI,SAACqL,EAAYiuB,GAAb,OACvB7/B,EAAAzB,EAAA0B,cAACD,EAAAzB,EAAM2B,SAAP,CAAgBE,IAAKy/B,GACnB7/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,aAAa2e,OAAK,GACnC9e,EAAAzB,EAAA0B,cAAA,WAASE,UAAU,uBAOhByR,EAAWxL,OAEbyK,EAAgBtK,IAAI,SAACygB,EAAgB8Y,GACpC,OACE9/B,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK0/B,GACR9/B,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,WACZH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,kBAAU+mB,EAAV,MAEDpV,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OACPA,EAAUnU,OAASqrB,IAEtBzgB,IAAI,SAACuJ,EAAWiwB,GACf,OACE//B,EAAAzB,EAAA0B,cAAA,MACEG,IAAK2/B,EACL5/B,UAAU,iBAEVH,EAAAzB,EAAA0B,cAAA,QAAMO,MAAO,CAAE0G,YAAa,SA9GzC,SAAA+P,GACzB,GAAInR,EAIF,OAH6BA,EAAQ+J,KAAK,SAAAgvB,GAAC,OACzCA,EAAE5xB,WAAW4C,KAAK,SAAAtR,GAAC,OAAIA,IAAM0Y,MA4GQ+oB,CACClwB,EAAUxH,IAGVtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gCAEb,KAGJH,EAAAzB,EAAA0B,cAAA,YAAO6P,EAAU1J,gBAUrCpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,YACbH,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,cACVK,MAAO,CACLkD,MACEu7B,GAAYN,EAAa/sB,EAAWtJ,KAAO,IAC7CiP,QAAS,cAGXvX,EAAAzB,EAAA0B,cAAA,QACEO,MAAO,CACLkI,MAC+C,IAA7Cu2B,GAAYN,EAAa/sB,EAAWtJ,KAChC,OACA,SAERnI,UAAU,uBAETw+B,EAAa/sB,EAAWtJ,IACrBq2B,EAAa/sB,EAAWtJ,IAAI62B,aAC5B,oBAiF3BnZ,EACChmB,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK2zB,EAAWzrB,GAAG,WACtBtI,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAEkI,MAAO,WAC0B,IAA5C61B,EAAW7gB,OAAO,sBACnBwgB,EAAeriC,OAAS,GACxBqiC,EAAen9B,SAASu9B,GACtBt+B,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,sBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEF,UAAU,6CACVG,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,kBAAA3P,OAAkEy0B,IAFtE,gBAKE/zB,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,uCAGjBH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,sBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEF,UAAU,6CACVG,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,iBAAA3P,OAAiEy0B,IAFrE,mBAImB,IACjB/zB,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,8BAA+B,OAKlDH,EAAAzB,EAAA0B,cAACggC,GAAD,CACE7C,SAAUA,EACVpX,QAASA,EACTiX,qBAAqB,EACrBS,gBAAiBA,EACjBF,qBAAsB,SAAAl1B,GACpBk1B,EAAqBl1B,IAEvBq1B,kBAAmB,WA3W7BG,EACFne,EAAQlS,KAAR,cAAAnO,OACgB0P,EADhB,KAAA1P,OACiC2P,EADjC,sBAAA3P,OAEI0mB,EAAQ1d,GAFZ,KAAAhJ,OAGMw+B,IAGNG,EAAmB,gCA0Wbj+B,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE0/B,UAAW,MAAOz8B,aAAc,QAC1CuiB,EAAQ5f,MADX,MACqB4f,EAAQ0O,WAG7B10B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW6lB,EAAQxF,kBAAoB,cAC1CxgB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,cACED,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,GACJjrB,MAAO,CAAE+W,QAAS,QAAS4T,SAAU,SACrCO,IAAK1F,EAAQ6O,MAAM,GAAK7O,EAAQ6O,MAAM,GAAG13B,IAAM,MAGnD6C,EAAAzB,EAAA0B,cAAA,UACAD,EAAAzB,EAAA0B,cAAA,KAAGO,MAAO,CAAE2uB,UAAW,WACD,SAAnBnJ,EAAQkN,OACPlzB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,SACG+lB,EAAQkN,QACU,mBAAnBlN,EAAQkN,OACNlzB,EAAAzB,EAAA0B,cAAA,wCAEA,IAGJD,EAAAzB,EAAA0B,cAAA,SACG+lB,EAAQkN,QACU,mBAAnBlN,EAAQkN,OACNlzB,EAAAzB,EAAA0B,cAAA,qBAAa+lB,EAAQkN,OAArB,KAEA,KAKN,GAEDlN,EAAQgN,IAAMhN,EAAQgN,IAAM,SAAW,KAG5ChzB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,0CACAD,EAAAzB,EAAA0B,cAAA,WACG+lB,EAAQ2O,yBACLhsB,IAAOqd,EAAQ2O,0BACf,IAGN30B,EAAAzB,EAAA0B,cAAA,wCACAD,EAAAzB,EAAA0B,cAAA,WACG+lB,EAAQyO,aAAe9rB,IAAOqd,EAAQyO,cAAgB,IAGzDz0B,EAAAzB,EAAA0B,cAAA,WACG+lB,EAAQ4O,uBACLjsB,IAAOqd,EAAQ4O,wBACf,MAKV50B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACZ,IACDH,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE0/B,UAAW,SACrB5B,EADH,IACuBrvB,EADvB,oBAIFjP,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sBAEjBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,MACEE,UAAU,wBACVK,MAAO,CAAEkI,MAAO,UAEf21B,KAIPr+B,EAAAzB,EAAA0B,cAAA,WACCm+B,IAIL,kBAGFp+B,EAAAzB,EAAA0B,cAAA,QAAM0B,SAAU,SAAAK,GAxIlBhG,OAAOmkC,UAyIHngC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,gBACbH,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,iCAAiCxE,KAAK,UAAxD,SACQqE,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,iCAErBH,EAAAzB,EAAA0B,cAAA,KAAGO,MAAO,CAAEqb,WAAY,SAAxB,oGAoBKukB,GAVY,kBACzBpgC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,yDACL4U,UAAWwZ,OCnGFyC,WAxYyB,SAAAziC,GACtC,IAAI+hB,EAAUyc,cACRptB,EAAgBpR,EAAMoR,cACtBC,EAAmBrR,EAAMqR,iBAGzBqxB,EAAiB1iC,EAAM0iC,eAEvBC,EAAW3iC,EAAM2iC,SACjBC,EAAW5iC,EAAM4iC,SACjBj5B,EAAY3J,EAAM2J,UAClBw2B,EAAgBngC,EAAMmgC,cAExBK,EAAiB,GACjBW,EAAmB,GACnBV,EAA0B,GAC1BxtB,EAAkB,GAClBytB,EAAoB,GAGpBmC,EAAW,GACXC,EAAW,GAKXC,EAAkB,GAGlBC,EAAc,GAGd1B,EAAc,GAEd2B,EAAiB,GAEflC,EAAe,SAAC/sB,EAAYkvB,GAChC,IAOIlC,GANc,aAAdkC,EACQL,EAEAC,GAGM7wB,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,IAC7C,IAAIgtB,EAiBF,OAAO,KAhBP,GAAIb,EAAe,CAKjB,IAAI3Q,EAAM2Q,EAAcluB,KACtB,SAAAivB,GAAI,OAAIA,EAAK14B,MAAMwK,gBAAkB5B,IAGnCklB,EAAY9G,EAAI2R,iBAAiBlvB,KACnC,SAAAmvB,GAAK,OAAIA,EAAM12B,KAAOs2B,EAAI1K,YAG5B,OADAgL,EAAc9R,EAAI2R,iBAAiBljC,OAC5Bq4B,IAOP8L,EAAqB,SAAClwB,EAAWkW,GACrC,IAAIlgB,EAAU,GAOd,GALEA,EADc,aAAZkgB,EACQua,EAASvL,gBAETwL,EAASxL,gBAQnB,QAJ6BlvB,EAAQ+J,KAAK,SAAAgvB,GAAC,OACzCA,EAAE5xB,WAAW4C,KAAK,SAAAtR,GAAC,OAAIA,IAAMuR,OA6N/BywB,IACFK,EAAY,GAAK,CACfxgC,IAAKmgC,EAASj4B,GACdy4B,MAAOR,EAASn6B,QAIhBo6B,IACFI,EAAY,GAAK,CACfxgC,IAAKogC,EAASl4B,GACdy4B,MAAOP,EAASp6B,QAoBpB,OACEpG,EAAAzB,EAAA0B,cAAA,OAAKqI,GAAG,IAjPkB,WACtBy1B,IACFA,EAAcx3B,IAAI,SAAAu4B,GAShB,OARIA,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IACpB,SAACy4B,EAAO5+B,GAAR,OAAiBugC,EAAgBvgC,GAAO4+B,EAAM12B,MAG3C,OAETy1B,EAAcx3B,IAAI,SAAAu4B,GAMhB,OALIA,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,QAIX,IAAIsH,EAAQ,EACZqxB,EAAiBx4B,IAAI,SAACy4B,EAAO5+B,GAS3B,OARAi+B,EAAwB5wB,KACtB,oDACEC,EACA,SACAsxB,EACA,SAEJtxB,IACO,OAGL6yB,IACFE,EAAWF,EAASvL,iBAGlBwL,IACFE,EAAWF,EAASxL,iBAGlB+I,GACFA,EAAcx3B,IAAI,SAAAgB,GAQhB,OAPIA,EAAUnB,QAAU4I,IACtBzH,EAAUw3B,iBAAiBx4B,IAAI,SAACy4B,EAAO5+B,GAErC,OADAugC,EAAgBvgC,GAAO4+B,EAAM12B,GACtB,OAET42B,EAAc33B,EAAUw3B,iBAAiBljC,QAEpC,OAIP0L,IACF62B,EAAiB72B,EAAUhB,IAAI,SAACiL,EAAMwvB,GAAP,OAC7BxvB,EAAKC,QAAQlL,IAAI,SAACmL,EAAQkuB,GAAT,OACfluB,EAAOC,aAAapL,IAAI,SAACqL,EAAYiuB,GACnC,IAAIoB,EAAoBtC,EAAa/sB,EAAWtJ,GAAI,YAChD44B,EAAoBvC,EAAa/sB,EAAWtJ,GAAI,YAEhD24B,GAAqBC,EACvBL,EAAepzB,KACbwzB,EAAkB9B,aAAe+B,EAAkB/B,aAC/CvtB,EAAWtJ,GACX,MAEI24B,GAAsBC,GAEtBD,GAAqBC,GAC/BL,EAAepzB,KAAKmE,EAAWtJ,IAF/Bu4B,EAAepzB,KAAK,MAKtBhM,QAAQC,IAAIw9B,GACZ,IAAIiC,EAASF,EACT,MAAQ/B,EAAc,GAAK+B,EAAkB9B,cAC7C,EACAiC,EAAU,IAAMD,EACpBC,EAAsB,MAAZA,EAAkB,GAAKA,EAEjC,IAAIC,EAASH,EACT,MAAQhC,EAAc,GAAKgC,EAAkB/B,cAC7C,EACAmC,EAAwB,IAAXD,EAAe,OAAS,QAEzC,OACErhC,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKy/B,GACR7/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,oBACb,IACAyR,EAAWxL,MAAMvK,OAAS,IACvB+V,EAAWxL,MACRqJ,MAAM,KACNoI,OAAO,EAAG,IACV2V,KAAK,KAAO,MACf5b,EAAWxL,QAGnBpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,YACbH,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,aACVK,MAAO,CACLkD,MAAOy9B,EAAS,IAChB5Z,WAAY6Z,EAAU,MAGxBphC,EAAAzB,EAAA0B,cAAA,QACEO,MAAO,CAAEuR,SAAU,YACnB5R,UAAU,uBAET8gC,EACGA,EAAkB9B,aAClB,MAKZn/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,YACbH,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,cACVK,MAAO,CAAEkD,MAAO29B,EAAS,IAAK9pB,QAAS,cAEvCvX,EAAAzB,EAAA0B,cAAA,QACEO,MAAO,CAAEkI,MAAO44B,GAChBnhC,UAAU,uBAET+gC,EACGA,EAAkB/B,aAClB,OAMdn/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,mDAGpB8Z,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,mDAInB0Q,EAAgBtK,IAAI,SAACygB,EAAgB8Y,GACpC,OACE9/B,EAAAzB,EAAA0B,cAACD,EAAAzB,EAAM2B,SAAP,CAAgBE,IAAK0/B,GACnB9/B,EAAAzB,EAAA0B,cAAA,KAAGO,MAAO,CAAEqe,YAAa,OAAQqhB,UAAW,SAC1ClgC,EAAAzB,EAAA0B,cAAA,kBAAU+mB,EAAV,MAEFhnB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACZyR,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OAAIA,EAAUnU,OAASqrB,IAEjCzgB,IAAI,SAACuJ,EAAWiwB,GACf,OACE//B,EAAAzB,EAAA0B,cAACD,EAAAzB,EAAM2B,SAAP,CAAgBE,IAAK2/B,GACnB//B,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,uBACVK,MAAO,CAAEqe,YAAa,SAErB/O,EAAU1J,OAGbpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ6/B,EACClwB,EAAUxH,GACV,YAEAtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gCAEb,KAGJH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ6/B,EACClwB,EAAUxH,GACV,YAEAtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gCAEb,sBAmDjCohC,GAEDvhC,EAAAzB,EAAA0B,cAAA,kBACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,UACGq+B,EADH,IACuBrvB,EADvB,oBAIFjP,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,UAAKsgC,EAAS7L,YAEhB10B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,UAAKugC,EAAS9L,aAIlB10B,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,yBACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,oBADF,IACoBD,EAAAzB,EAAA0B,cAAA,QAAMO,MAAO,CAAEkI,MAAO,UAAtB,SAEpB1I,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,mBADF,IACmBD,EAAAzB,EAAA0B,cAAA,QAAMO,MAAO,CAAEkI,MAAO,UAAtB,WAIrB1I,EAAAzB,EAAA0B,cAAA,WAAMm+B,GACNp+B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAEghC,UAAW,WACtBlB,EACCtgC,EAAAzB,EAAA0B,cAAA,UACEK,GAAI,IACJH,UAAU,YACVU,QAAS,SAAAmB,GAAC,OAjDA,SAAAA,GACpBA,EAAEC,iBACF0d,EAAQlS,KAAK,CACXrK,SAAQ,cAAA9D,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,mCACRjQ,MAAO,CACLyiC,gBAAiBlB,EAAS7L,UAC1BmM,eAAgBA,KA2CIa,CAAc1/B,KAH9B,WAKUhC,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,2BAGvB,IAGJH,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAEghC,UAAW,UAAYrhC,UAAU,gBAC7CH,EAAAzB,EAAA0B,cAAA,UACEW,KAAK,IACLT,UAAU,iCACVU,QAAS,SAAAmB,GAAC,OAlEA,SAAAA,GAClBA,EAAEC,iBACFjG,OAAOmkC,QAgEewB,CAAY3/B,KAH5B,SAKQhC,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,iCAErBH,EAAAzB,EAAA0B,cAAA,KAAGO,MAAO,CAAEqb,WAAY,SAAxB,iGAKF7b,EAAAzB,EAAA0B,cAAA,gBCjYK2hC,GAAkB,SAAAhkC,GAC7B,IAAI+hB,EAAUyc,cACRptB,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACtDoyB,EAAajkC,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAChDqyB,EAAalkC,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAElD4uB,EAA0B,GAPQ72B,EASNC,qBATMC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAS/B+4B,EAT+B74B,EAAA,GASrBq6B,EATqBr6B,EAAA,GAAAI,EAUNL,qBAVMM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAU/B04B,EAV+Bz4B,EAAA,GAUrBi6B,EAVqBj6B,EAAA,GAAA2L,EAWNjM,qBAXMkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAW/B0pB,EAX+BzpB,EAAA,GAWrBkqB,EAXqBlqB,EAAA,GAAAG,EAYYrM,qBAZZsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAY/BgqB,EAZ+B/pB,EAAA,GAYZypB,EAZYzpB,EAAA,GAAA0jB,EAaQhwB,mBAAS,MAbjBiwB,EAAAn8B,OAAAoM,EAAA,EAAApM,CAAAk8B,EAAA,GAa/BiG,EAb+BhG,EAAA,GAaduG,EAbcvG,EAAA,GAAAE,EAcJnwB,qBAdIowB,EAAAt8B,OAAAoM,EAAA,EAAApM,CAAAq8B,EAAA,GAc/BrwB,EAd+BswB,EAAA,GAcpByB,EAdoBzB,EAAA,GAAAE,EAeMtwB,qBAfNuwB,EAAAz8B,OAAAoM,EAAA,EAAApM,CAAAw8B,EAAA,GAe/BuI,EAf+BtI,EAAA,GAefiK,EAfejK,EAAA,GAAAG,EAgBI1wB,qBAhBJ2wB,EAAA78B,OAAAoM,EAAA,EAAApM,CAAA48B,EAAA,GAgB/B4F,EAhB+B3F,EAAA,GAgBhB4F,EAhBgB5F,EAAA,GAAAG,EAiBZ9wB,qBAjBY+wB,EAAAj9B,OAAAoM,EAAA,EAAApM,CAAAg9B,EAAA,GAiB/B2J,EAjB+B1J,EAAA,GAiBxB2J,EAjBwB3J,EAAA,GAAAG,EAkBZlxB,qBAlBYmxB,EAAAr9B,OAAAoM,EAAA,EAAApM,CAAAo9B,EAAA,GAkB/ByJ,EAlB+BxJ,EAAA,GAkBxByJ,GAlBwBzJ,EAAA,GA0ItC,OA1GAtL,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAC,KAAA,EAEK,UAAfgjC,EAFU,CAAAjjC,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAGNijC,EAAYx+B,KAAKwxB,MAAM94B,aAAaC,QAAQ,kBAHtC,OAIZ+lC,EAAkB,GAClBE,EAAQ,cAAA7iC,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,wBALIrQ,EAAAE,KAAA,uBASZqjC,EAAQ,cAAA7iC,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,kBAAA3P,OAC0DuiC,EAD1D,WATIjjC,EAAAE,KAAA,GAYNO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,8BAAA3P,OACsEuiC,EADtE,0BAGRpiC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJmiC,EAAYniC,KAjBJ,WAqBK,UAAfkiC,EArBU,CAAAljC,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAsBNkjC,EAAYz+B,KAAKwxB,MAAM94B,aAAaC,QAAQ,kBAtBtC,QAuBZ+lC,EAAkB,GAClBI,GAAQ,cAAA/iC,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,wBAxBIrQ,EAAAE,KAAA,wBA4BZujC,GAAQ,cAAA/iC,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,kBAAA3P,OAC0DwiC,EAD1D,WA5BIljC,EAAAE,KAAA,GA+BNO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,8BAAA3P,OACsEwiC,EADtE,0BAGRriC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJoiC,EAAYpiC,KApCJ,eAAAhB,EAAAE,KAAA,GAwCRO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,iDAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ,IAAM6+B,EAAkC7+B,EAAauI,OACnD,SAAAu2B,GAAC,OACCA,EAAEp2B,KAAO1K,EAAMkR,MAAMC,OAAOwxB,UACJ,SAAxB7B,EAAEle,oBAENqd,EAAYY,KAlDF,eAAA7/B,EAAAE,KAAA,GAqDRO,MAAK,GAAAC,OACN9C,EADM,2DAGRiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJo+B,EAAiBp+B,KA1DP,eAAAhB,EAAAE,KAAA,GA6DRO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,uCAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ05B,EAAa15B,KAlEH,QAAAhB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAqEd6C,QAAQC,IAAR9C,EAAAoR,IArEc,yBAAApR,EAAAG,SAAAN,EAAA,kBAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,aAAA,EAwEfssB,IACC,CAAClZ,EAAeC,EAAkB4yB,EAAYC,IAE7C/D,GACFA,EAAcpwB,QAAQ,SAACmxB,EAAMpxB,GACvBoxB,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKC,iBAAiBx4B,IAAI,SAACy4B,EAAOK,GAAR,OACxBhB,EAAwB5wB,KACtBzN,EAAAzB,EAAA0B,cAAA,MACEG,IAAKi/B,EACLl/B,UAAU,gBACVK,MAAO,CAAE2uB,UAAW,WAEpBnvB,EAAAzB,EAAA0B,cAAA,OACEq/B,WAAUN,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD25B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBz/B,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,+BACb,IACA6+B,EAAMG,aAAc,KACf,IACRn/B,EAAAzB,EAAA0B,cAAA,gBAAQ++B,EAAM54B,QAEhBpG,EAAAzB,EAAA0B,cAACy/B,GAAA,EAAD,CAAcv/B,UAAU,yBASlCH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,qCACAD,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,QAAhB,0GAKAH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,WACbH,EAAAzB,EAAA0B,cAAA,YACAD,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,8BACdogC,EACCvgC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,cACbH,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,WACJC,IAAK6U,EAAS1L,MAAM,GAAK0L,EAAS1L,MAAM,GAAG13B,IAAMmlC,KACjD5+B,MAAM,QACNvD,UAAU,sBAEZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAI4hC,GAAgB,KACxBliC,EAAAzB,EAAA0B,cAAA,UAAKsgC,EAAS7L,aAIlB,oBAIJ10B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,8BACdqgC,EACCxgC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,cACbH,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,WACJC,IAAK8U,EAAS3L,MAAM,GAAK2L,EAAS3L,MAAM,GAAG13B,IAAMmlC,KACjD5+B,MAAM,QACNvD,UAAU,sBAEZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAI8hC,GACRpiC,EAAAzB,EAAA0B,cAAA,UAAKugC,EAAS9L,YAShB10B,EAAAzB,EAAA0B,cAACggC,GAAD,CACE7C,SAAUA,EACVpX,QAASua,EACT7C,gBAAiBA,EACjBL,aAAa,EACbG,qBAAsB,SAAAl1B,GACpBk1B,EAAqBl1B,IAEvBq1B,kBAAmB,WA9K3BG,EACFne,EAAQlS,KAAR,cAAAnO,OACgB0P,EADhB,KAAA1P,OACiC2P,EADjC,sBAAA3P,OAEIihC,EAASj4B,GAFb,KAAAhJ,OAGMw+B,IAGNG,EAAmB,gCA6Kb,oBAGJj+B,EAAAzB,EAAA0B,cAAA,aAGFD,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,6BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,yBACbH,EAAAzB,EAAA0B,cAAA,gCAAgC,IAChCD,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,yBAAyBk+B,KAG3Cr+B,EAAAzB,EAAA0B,cAAA,UAECsgC,GAAYC,EACXxgC,EAAAzB,EAAA0B,cAACsiC,GAAD,CACEvzB,cAAeA,EACfC,iBAAkBA,EAClB4yB,WAAYA,EACZC,WAAYA,EACZvB,SAAUA,EACVC,SAAUA,EACVj5B,UAAWA,EACXw2B,cAAeA,EACfuC,eAAgBA,IAGlB,KAgBOkC,GAVU,kBACvBxiC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,sEACL4U,UAAWwd,OC9OXhd,GAAI5oB,OAAO4oB,EAEJ6d,GAAqB,SAAA7kC,GAAS,IAAA4J,EAIXC,qBAJWC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAIlCwe,EAJkCte,EAAA,GAIzB+xB,EAJyB/xB,EAAA,GAAAI,EAKPL,qBALOM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAKlCP,EALkCQ,EAAA,GAKvBuxB,EALuBvxB,EAAA,GAAA2L,EAMKjM,qBANLkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAMlCgvB,EANkC/uB,EAAA,GAMjBgvB,EANiBhvB,EAAA,GAAAG,EAOCrM,qBAPDsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAOlCiqB,EAPkChqB,EAAA,GAOnBiqB,EAPmBjqB,EAAA,GAYnC/E,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAExDmzB,EAAiB,GACjB7D,EAAmB,GACnB8D,EAA2B,GAC3BhyB,EAAkB,GAClBytB,EAAoB,GAIpBx4B,EAAU,GACV20B,EAAoB,GACpB4D,EAA0B,GAExBzyB,EAAO,IAAI5O,EAEjBswB,oBAAU,WACR,IAAI8M,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,wBAEhDk+B,IAEFX,EAAWW,GAEI,eAAA5zB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAAqkC,EAAAC,EAAAn5B,EAAAM,EAAA84B,EAAAC,EAAA,OAAA3kC,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAGRikC,EAAmBl3B,EACtBvO,IADsB,GAAAiC,OACf9C,EADe,sCAEtBiD,KAAK,SAAAyjC,GAAiB,OAAIA,EAAkBp3B,OAGzCi3B,EAAiBn3B,EACpBvO,IADoB,GAAAiC,OAEhB9C,EAFgB,SAAA8C,OAEF0P,EAFE,KAAA1P,OAEe2P,EAFf,kBAIpBxP,KAAK,SAAA0jC,GAAe,OAAIA,EAAgBr3B,OAZ7BlN,EAAAE,KAAA,EAc6Bue,QAAQC,IAAI,CACrDwlB,EACAC,IAhBY,OAAAn5B,EAAAhL,EAAA+vB,KAAAzkB,EAAA3O,OAAAoM,EAAA,EAAApM,CAAAqO,EAAA,GAcPo5B,EAdO94B,EAAA,GAcQ+4B,EAdR/4B,EAAA,GAmBdk5B,EAAmBJ,EAAeC,EAAY,GAAGpxB,KACjDmsB,EAAiBgF,GACjB1J,EAAa2J,GArBCrkC,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAoR,GAAApR,EAAA,SAwBd6C,QAAQC,IAAR9C,EAAAoR,IAxBc,yBAAApR,EAAAG,SAAAN,EAAA,kBAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,YAAA,EA4BfssB,KAED,CAACjZ,EAAkBD,EAAepD,IAErC,IAAMgY,EAAY,eAAA0W,EAAA/+B,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAoW,EAAM5S,GAAN,IAAAo4B,EAAA,OAAA97B,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,OACnBkD,EAAEC,iBAGEm4B,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,wBACpDmnC,EAAwBjJ,GALL,wBAAAvlB,EAAA9V,SAAA6V,MAAH,gBAAAqB,GAAA,OAAAqkB,EAAApkB,MAAAza,KAAAG,YAAA,GAkFZ0nC,EAA0B,SAAA1xB,GAC9B,IAAIwoB,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,wBAGhDu+B,EAAoBL,EAAa,kBAgBrCA,EAAa,kBAAwBK,EACrCx+B,aAAa2yB,QAAQ,sBAAuBrrB,KAAKC,UAAU42B,KAKvDmJ,EAA6B,SAAA3xB,GACjC,IAAIwoB,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,wBAChDu+B,EAAoBL,EAAa,kBAYrCA,EAAa,kBAAwBK,EACrCx+B,aAAa2yB,QAAQ,sBAAuBrrB,KAAKC,UAAU42B,KAoDzD2D,IACFA,EAAcx3B,IAAI,SAAAu4B,GAShB,OARIA,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OAAKD,EAAiBC,EAAMG,cAAgBH,EAAM54B,SAGpD,OAIT24B,EAAiBx4B,IAAI,SAACy4B,EAAO5+B,GAO3B,OANAi+B,EAAwB5wB,KACtBzN,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE2uB,UAAW,WACtBnvB,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,mBAAhB,IAAoCC,EAApC,KADF,IACmDJ,EAAAzB,EAAA0B,cAAA,gBAAQ++B,KAItD,QAIX,IAAMoE,EAAqB,SAACrF,EAAeyF,GACzC,IAIIC,EAJK1F,EAAc51B,OAAO,SAAAqJ,GAC5B,OAAOA,EAAKK,MAAQ2xB,IAGN,GAAGzE,iBAGnB4D,EAAmBc,IAGfJ,EAA0B,SAAAl9B,GAC9B,IAAI+uB,EAAM,IAAIC,KAAM,IAAK,KAAM,MAC/BD,EAAIE,QAAQ,aAcMF,EAAIQ,SAASC,SAASC,WALxC,IA8BI8N,EAKK,IAGLC,EAASx+B,SAASyY,eAAe,WAOjCgmB,EAAez9B,EAAQgtB,SAAS1jB,MAAM,KAAK+d,KAAK,KACpD0H,EAAI6B,SACF4M,EA9CiB,GADC,GAkDlB,CAEEjgC,MAAOggC,EACPG,gBA7ByB,CAC3BC,UAAW,SAASnmB,EAASomB,GAC3B,OAAO,KA6BT,SAASC,GAGP9O,EAAIgC,KAAK0M,EAAahzB,cAAgB,WAStCqzB,EAAkB,SAACC,EAASC,GAEhC,MAAO,CAAEC,OADUD,EAAQ,OAASD,EAAU,QAAUC,EAAQ,KAyLlE,OACEnkC,EAAAzB,EAAA0B,cAAA,WAtLmB,WA8BnB,GA3BI89B,IACFA,EAAcx3B,IAAI,SAAAu4B,GAchB,OAbIA,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OACFD,EAAiBC,EAAM12B,IAAM02B,EAAM54B,MACpB,mBAAhB44B,EAAM54B,MACDy8B,EAA2B7D,EAAM12B,GAClC,MAIH,OAETy1B,EAAcx3B,IAAI,SAAAu4B,GAMhB,OALIA,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,QAIP4f,EAAS,CACXlgB,EAAUkgB,EAAQlgB,QAElB,IAAIs0B,EAAgB72B,KAAKwxB,MACvB94B,aAAaC,QAAQ,wBAEvBu+B,EAAoBL,EAAa,kBAG/B7yB,IACFq7B,EAAiBr7B,EAAUhB,IAAI,SAACiL,EAAM9D,GAAP,OAC7B8D,EAAKC,QAAQlL,IAAI,SAACmL,EAAQyV,GAAT,OACfnnB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKsN,EAAOvN,UAAU,eACxBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAd,IAA+BuR,EAAOtL,QAExCpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,mCAGJD,EAAAzB,EAAA0B,cAAA,UACGyR,EAAOC,aAAapL,IAAI,SAACqL,EAAYvC,GAAb,OACvBrP,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKiP,EAAKlP,UAAU,mBACtBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,gDACdH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,eAAb,cAEDyR,EAAWxL,QAIlB6T,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,8CACdH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,eAAb,cAEDyR,EAAWxL,SAKlBpG,EAAAzB,EAAA0B,cAAA,UACG4Q,EAAgBtK,IAAI,SAACygB,EAAgBtZ,GACpC,OACE1N,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKsN,EAAOvN,UAAU,kBACvB6mB,EACDhnB,EAAAzB,EAAA0B,cAAA,UACG2R,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OACPA,EAAUnU,OAASqrB,IAEtBzgB,IAAI,SAACuJ,EAAWu0B,GAAZ,OACHrkC,EAAAzB,EAAA0B,cAAA,MACEG,IAAKikC,EACLlkC,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,SACEiB,SAAU,SAAAc,GAAC,OAxQ3B,SAAAb,GAC5B,IAAIi5B,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,wBAChDi2B,EAAgBhxB,EAAMuD,OAAOghB,aAAa,mBAC1C4e,EAAenjC,EAAMuD,OAAOghB,aAAa,MAGzC+U,EAAoBL,EAAa,kBACjCntB,EAAawtB,EAEjB,GAAIA,EAAkB5qB,KAAK,SAAAyI,GAAI,OAAIA,EAAKgsB,eAAiBA,IAAe,CAEtE,IAAI52B,EAAQ+sB,EAAkB8J,UAC5B,SAAA/yB,GAAI,OAAIA,EAAK8yB,eAAiBA,IAEhC7J,EAAkB5iB,OAAOnK,EAAO,GAEhC0sB,EAAa,kBAAwBK,EACrCx+B,aAAa2yB,QACX,sBACArrB,KAAKC,UAAU42B,SAIjBntB,EAAWQ,KAAK,CACd62B,aAAcA,EACdnS,cAAeA,IAGjBiI,EAAa,kBAAwBntB,EACrC2X,GAAE,qBAAuB0f,EAAe,KAAKE,KAAK,WAAW,GAC7DvoC,aAAa2yB,QACX,sBACArrB,KAAKC,UAAU42B,IAyO2BqK,CAAsBziC,IAExBrG,KAAK,WACL2M,GAAIwH,EAAUxH,GACdo8B,kBAAiB9yB,EAAWtJ,GAC5Bmd,UACEgV,EAAkB5qB,KAChB,SAAAyI,GAAI,OACFA,EAAKgsB,eACLx0B,EAAUxH,QAOpBtI,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,SACEE,UACEs6B,EAAkB5qB,KAChB,SAAAyI,GAAI,OACFA,EAAKgsB,eACLx0B,EAAUxH,KAEV,0BACA,kBAENq8B,QAAS70B,EAAUxH,IAElB,IACAwH,EAAU1J,mBAcrCpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,UACEiB,SAAU,SAAAc,GAAC,OA/ab,SAAAb,GACpB,IAAIi5B,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,wBAChDi2B,EAAgBhxB,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAenL,aAC3D,mBAEEkf,EAAezjC,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAenL,aAC1D,kBAEEwO,EAAY/yB,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAe3rB,KAEzD,GAAI0/B,IAAiB/B,EACnBje,GAAE,kCAAoCuN,EAAgB,KAAKqS,KACzD,WACA,GAEF5f,GAAE,kCAAoCuN,EAAgB,KAAKqS,KACzD,YACA,GAGFjB,EAA2BpR,OACtB,CAEL,IAAI0S,EAAUzK,EAAa,QAE3B,GAAIyK,EAAQh1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAE1M,gBAAkBA,IAAgB,CAExD,GAAI0S,EAAQD,eAAiBA,EAAc,CACzC,IAAIl3B,EAAQm3B,EAAQN,UAClB,SAAA/yB,GAAI,OAAIA,EAAK2gB,gBAAkBA,IAGjC0S,EAAQhtB,OAAOnK,EAAO,EAAG,CACvBykB,cAAeA,EACfyS,aAAcA,EACd1Q,UAAWA,IAIfkG,EAAa,QAAcyK,EAC3B5oC,aAAa2yB,QACX,sBACArrB,KAAKC,UAAU42B,QAEZ,CAEL,IAAIyK,EAAUzK,EAAa,QAC3ByK,EAAQp3B,KAAK,CACX0kB,cAAeA,EACfyS,aAAcA,EACd1Q,UAAWA,IAEbkG,EAAa,QAAcyK,EAC3B5oC,aAAa2yB,QACX,sBACArrB,KAAKC,UAAU42B,IAInBxV,GAAE,kCAAoCuN,EAAgB,KAAKqS,KACzD,WACA,GAEF5f,GAAE,kCAAoCuN,EAAgB,KAAKqS,KACzD,YACA,GAIFlB,EAAwBnR,IA0WW2S,CAAc9iC,IAC7Bk5B,aACEp1B,EAAQ+J,KAAK,SAAAgvB,GAAC,OAAIA,EAAE1M,gBAAkBvgB,EAAWtJ,KAC7CxC,EAAQ+J,KACN,SAAAgvB,GAAC,OAAIA,EAAE1M,gBAAkBvgB,EAAWtJ,KACpCs8B,aACF/B,GAGLH,EAAgBn8B,IAAI,SAACy4B,EAAO5+B,GAAR,OACnBJ,EAAAzB,EAAA0B,cAAA,UACEG,IAAKA,EACLmB,MAAOy9B,EAAM12B,GACby8B,iBAAgB/F,EAAM12B,GACtBo8B,kBAAiB9yB,EAAWtJ,IAE3B02B,EAAM54B,uBAsB9B4+B,GACAhf,EACChmB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,+CAEAD,EAAAzB,EAAA0B,cAAA,OAAKqI,GAAG,UAAUnI,UAAU,oBAC1BH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,UACG+lB,EAAQ5f,MAAM6+B,OAAO,GAAG/a,cACvBlE,EAAQ5f,MAAM8+B,MAAM,GAAI,IAF5B,KAGKlf,EAAQmN,YAKjBnzB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,+BACZ6lB,EAAQoQ,iBAAiB,GACxBp2B,EAAAzB,EAAA0B,cAAA,OACEyrB,IACE1F,EAAQoQ,iBAAiB,GAAG1K,IACxB1F,EAAQoQ,iBAAiB,GAAG1K,IAC5B4W,KAEN5+B,MAAM,QACN+nB,IAAI,KAGN,GAEFzrB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,WACC+lB,EAAQkN,OAFX,KAEqBlN,EAAQgN,IAF7B,WAKFhzB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,aACVglC,wBAAyBlB,EACvB,gCACAje,EAAQoN,iBAOZpzB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,aACVglC,wBAAyBlB,EACvB,8BACAje,EAAQiN,eAIZjzB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,aACVglC,wBAAyBlB,EACvB,yBACAje,EAAQqN,oBAMhBrzB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,+BACAD,EAAAzB,EAAA0B,cAAA,uDAC8C,IAC3Cq+B,EAFH,2TASAt+B,EAAAzB,EAAA0B,cAAA,mGAIAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,yBACbH,EAAAzB,EAAA0B,cAAA,gCAAgC,IAChCD,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,iBAAiBk+B,MAKrCr+B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sBAEXH,EAAAzB,EAAA0B,cAAA,QAAM0B,SAAU,SAAAK,GAAC,OAAI4hB,EAAa5hB,KAC/B4gC,EACD5iC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,gBACbH,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,SAASxE,KAAK,UAAhC,SACQqE,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sCASjCH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBAafH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,+BACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBAuBvB,YAgBOilC,GAVmB,kBAChCplC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,sDACL4U,UAAWqe,OChsBJ4C,GAAmB,SAAAznC,GAC9B,IAAI+hB,EAAUyc,cACRptB,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAHrBjI,EAKTC,qBALSC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAKhCwe,EALgCte,EAAA,GAKvB+xB,EALuB/xB,EAAA,GAAAI,EAMPL,qBANOM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAMhCs1B,EANgCr1B,EAAA,GAMtB81B,EANsB91B,EAAA,GAAA2L,EAOWjM,qBAPXkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAOhCoqB,EAPgCnqB,EAAA,GAOb6pB,EAPa7pB,EAAA,GAAAG,EAQOrM,mBAAS,MARhBsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAQhC4pB,EARgC3pB,EAAA,GAQfkqB,EARelqB,EAAA,GAAA0jB,EASLhwB,qBATKiwB,EAAAn8B,OAAAoM,EAAA,EAAApM,CAAAk8B,EAAA,GAShClwB,EATgCmwB,EAAA,GASrB4B,EATqB5B,EAAA,GAAAE,EAUGnwB,qBAVHowB,EAAAt8B,OAAAoM,EAAA,EAAApM,CAAAq8B,EAAA,GAUhCmG,EAVgClG,EAAA,GAUjBmG,EAViBnG,EAAA,GAYnCuG,EAAiB,GAEjBC,EAA0B,GAC1BxtB,EAAkB,GAClBytB,EAAoB,GAGpBx4B,EAAU,GAGVu7B,EAAS,GAab/T,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACV26B,EAAWl2B,KAAKwxB,MAAM94B,aAAaC,QAAQ,kBADjC,cAAA0C,EAAAE,KAAA,EAGVO,MAAK,GAAAC,OACN9C,EADM,2DAGRiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJo+B,EAAiBp+B,KARL,cAAAhB,EAAAE,KAAA,EAWVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,uCAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ05B,EAAa15B,KAhBD,cAAAhB,EAAAE,KAAA,EAkBVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,iDAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJi+B,EAAYj+B,KAvBA,wBAAAhB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,aAAA,EA0BfssB,IACC,CAAClZ,EAAeC,IAEnB,IAAM0vB,EAAe,SAAA/sB,GACnB,GAAI9L,EAAS,CACX,IAAI84B,EAAM94B,EAAQ+J,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,IAC7C,IAAIgtB,EAWF,MAAO,GAVP,GAAIb,EAOF,OAHgBA,EACbluB,KAAK,SAAAivB,GAAI,OAAIA,EAAK14B,MAAMwK,gBAAkB5B,IAC1C+vB,iBAAiBlvB,KAAK,SAAAmvB,GAAK,OAAIA,EAAM12B,KAAOs2B,EAAI1K,cAkBrD+K,EAAc,SAAAnzB,GAClB,IAAIozB,EAAcnB,EAAcluB,KAC9B,SAAAivB,GAAI,OAAIA,EAAK14B,MAAMwK,gBAAkB5B,IACrC+vB,iBAAiBljC,OAInB,OAFAwlC,EAASv1B,EAAO,MAAQozB,EAAc,GAAKpzB,EAAKqzB,cAAgB,EAChE19B,QAAQC,IAAIoK,GACLu1B,GAyKT,OACErhC,EAAAzB,EAAA0B,cAAA,YAtKI89B,IACFA,EAAcx3B,IAAI,SAAAu4B,GA6BhB,OA5BIA,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IAAI,SAACy4B,EAAOtxB,GAAR,OACxB2wB,EAAwB5wB,KACtBzN,EAAAzB,EAAA0B,cAAA,MACEG,IAAK4+B,EAAMG,aACXh/B,UAAU,gBACVK,MAAO,CAAE2uB,UAAW,WAEpBnvB,EAAAzB,EAAA0B,cAAA,OACEq/B,WAAUN,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD25B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBz/B,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,+BACb,IACA6+B,EAAMG,aAAc,KACf,IACRn/B,EAAAzB,EAAA0B,cAAA,gBAAQ++B,EAAM54B,QAEhBpG,EAAAzB,EAAA0B,cAACy/B,GAAA,EAAD,CAAcv/B,UAAU,wBAKzB,OAET49B,EAAcx3B,IAAI,SAAAu4B,GAMhB,OALIA,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,QAIP4f,IACFlgB,EAAUkgB,EAAQgP,gBAClBvzB,QAAQC,IAAIoE,SAGVyB,IACF62B,EAAiB72B,EAAUhB,IAAI,SAAAiL,GAAI,OACjCA,EAAKC,QAAQlL,IAAI,SAACmL,EAAQkuB,GAAT,OACf5/B,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKw/B,GACR5/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBACbH,EAAAzB,EAAA0B,cAAA,UAAKyR,EAAOtL,OAAY,MAG3BsL,EAAOC,aAAapL,IAAI,SAACqL,EAAYiuB,GAAb,OACvB7/B,EAAAzB,EAAA0B,cAAA,OAAKG,IAAKy/B,GACR7/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,oBACb,IACAyR,EAAWxL,MAAMvK,OAAS,IACvB+V,EAAWxL,MACRqJ,MAAM,KACNoI,OAAO,EAAG,IACV2V,KAAK,KAAO,MACf5b,EAAWxL,QAGnBpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,YACbH,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,cACVK,MAAO,CACLkD,MAAOu7B,EAAYN,EAAa/sB,EAAWtJ,KAAO,IAClDiP,QAAS,cAGXvX,EAAAzB,EAAA0B,cAAA,QACEO,MAAO,CACLkI,MAC+C,IAA7Cu2B,EAAYN,EAAa/sB,EAAWtJ,KAChC,OACA,SAERnI,UAAU,uBAETw+B,EAAa/sB,EAAWtJ,IACrBq2B,EAAa/sB,EAAWtJ,IAAI62B,aAC5B,OAMdn/B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,mDAGjB8Z,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,mDAIhB0Q,EAAgBtK,IAAI,SAACygB,EAAgB8Y,GACpC,OACE9/B,EAAAzB,EAAA0B,cAAA,OACEG,IAAK0/B,EACL3/B,UAAU,2BACVmlC,uBAAA,GAEAtlC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,+CACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,kBAAU+mB,EAAV,MAEFhnB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BAEhByR,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OAAIA,EAAUnU,OAASqrB,IAEjCzgB,IAAI,SAACuJ,EAAWiwB,GACf,OACE//B,EAAAzB,EAAA0B,cAAA,OACEG,IAAK2/B,EACL5/B,UAAU,0CAEVH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ2P,EAAU1J,OAEbpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBA3JpB,SAAA8W,GACzB,GAAInR,EAIF,OAH6BA,EAAQ+J,KAAK,SAAAgvB,GAAC,OACzCA,EAAE5xB,WAAW4C,KAAK,SAAAtR,GAAC,OAAIA,IAAM0Y,MAyJA+oB,CACClwB,EAAUxH,IAGVtI,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,gCAEb,wBA0B/B6lB,EACChmB,EAAAzB,EAAA0B,cAAA,OAAKqI,GAAG,WACNtI,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE0/B,UAAW,MAAOz8B,aAAc,QAC1CuiB,EAAQ5f,MADX,MACqB4f,EAAQ0O,WAG7B10B,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAEkI,MAAO,UACnB1I,EAAAzB,EAAA0B,cAACggC,GAAD,CACE7C,SAAUA,EACVpX,QAASA,EACT0X,gBAAiBA,EACjBF,qBAAsB,SAAAl1B,GACpBk1B,EAAqBl1B,IAEvBq1B,kBAAmB,WApQzBG,EACFne,EAAQlS,KAAR,cAAAnO,OACgB0P,EADhB,KAAA1P,OACiC2P,EADjC,qBACsE,QADtE,KAAA3P,OACiFw+B,IAGjFG,EAAmB,+BAmQbj+B,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,sBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEF,UAAU,UACVG,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,0BAFJ,eAIe,IACbjP,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,yCAMrBH,EAAAzB,EAAA0B,cAAA,OACEE,UAAW6lB,EAAQxF,kBAAoB,2BAEvCxgB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,cACED,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,GACJjrB,MAAO,CAAE+W,QAAS,QAAS4T,SAAU,SACrCO,IAAK1F,EAAQ6O,MAAM,GAAK7O,EAAQ6O,MAAM,GAAG13B,IAAMmlC,QAInDtiC,EAAAzB,EAAA0B,cAAA,UACAD,EAAAzB,EAAA0B,cAAA,OAAKO,MAAO,CAAE2uB,UAAW,WACH,SAAnBnJ,EAAQkN,OACPlzB,EAAAzB,EAAA0B,cAAA,WACG+lB,EAAQkN,QAA6B,mBAAnBlN,EAAQkN,OACzBlzB,EAAAzB,EAAA0B,cAAA,wCAEA,GAGD+lB,EAAQkN,QAA6B,mBAAnBlN,EAAQkN,OACzBlzB,EAAAzB,EAAA0B,cAAA,wBAAgB+lB,EAAQkN,OAAxB,KAEA,IAIJ,GAGDlN,EAAQgN,IAAMhzB,EAAAzB,EAAA0B,cAAA,kBAAU+lB,EAAQgN,IAAM,SAAxB,KAAyC,KAG5DhzB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,0CAEC+lB,EAAQ2O,yBACLhsB,IAAOqd,EAAQ2O,0BACf,GAEJ30B,EAAAzB,EAAA0B,cAAA,wCACC+lB,EAAQyO,aAAe9rB,IAAOqd,EAAQyO,cAAgB,GAEtDzO,EAAQ4O,uBACLjsB,IAAOqd,EAAQ4O,wBACf,IAEN50B,EAAAzB,EAAA0B,cAAA,WAEFD,EAAAzB,EAAA0B,cAAA,iBAEAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ,IACDH,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE0/B,UAAW,SACrB5B,EADH,IACuBrvB,EADvB,oBAIFjP,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBAAwBK,MAAO,CAAEkI,MAAO,UACnD21B,KAIPr+B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sBAEjBH,EAAAzB,EAAA0B,cAAA,WACCm+B,GAGH,kBAGFp+B,EAAAzB,EAAA0B,cAAA,QAAM0B,SAAU,SAAAK,GAjHlBhG,OAAOmkC,UAkHHngC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,gBACbH,EAAAzB,EAAA0B,cAAA,UAAQE,UAAU,iCAAiCxE,KAAK,UAAxD,SACQqE,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,iCAErBH,EAAAzB,EAAA0B,cAAA,KAAGO,MAAO,CAAEqb,WAAY,SAAxB,oGAoBK0pB,GAViB,kBAC9BvlC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,oDACL4U,UAAWihB,OCjZXzgB,GAAI5oB,OAAO4oB,EAEJ4gB,GAAkB,SAAA5nC,GAC7B,IAAMw5B,EAAiB,IAAIhD,GADW5sB,EAGRC,qBAHQC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAG/Bwe,EAH+Bte,EAAA,GAGtB+xB,EAHsB/xB,EAAA,GAAAI,EAIJL,qBAJIM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAI/BP,EAJ+BQ,EAAA,GAIpBuxB,EAJoBvxB,EAAA,GAAA2L,EAKIjM,qBALJkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAK/BqqB,EAL+BpqB,EAAA,GAKhBqqB,EALgBrqB,EAAA,GAAAG,EAMRrM,qBANQsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAM/BhO,EAN+BiO,EAAA,GAMtB0xB,EANsB1xB,EAAA,GAOhC/E,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAExDmzB,EAAiB,GACjB7D,EAAmB,GACnBV,EAA0B,GAC1BwE,EAA2B,GAC3BhyB,EAAkB,GAClBytB,EAAoB,GAExBhR,oBAAU,WA6BHxnB,GA5BU,eAAAU,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAA27B,EAAA,OAAA97B,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACVs7B,EAAgB72B,KAAKwxB,MAAM94B,aAAaC,QAAQ,oBAEpDu9B,EAAWW,GACXqL,EACErL,EAAcpF,gBAAkBoF,EAAcpF,gBAAkB,KALpDp2B,EAAAE,KAAA,EASVO,MAAK,GAAAC,OACN9C,EADM,2DAGRiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJo+B,EAAiBp+B,KAdL,cAgBhB6B,QAAQC,IAAIlF,GAhBIoC,EAAAE,KAAA,EAkBVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,uCAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ05B,EAAa15B,KAvBD,wBAAAhB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,YAAA,EA6BbssB,IASD,CAAClZ,EAAeC,EAAkBnJ,IAErC,IAAM8d,EAAY,eAAAha,EAAArO,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAoW,EAAM5S,GAAN,IAAA6J,EAAA,OAAAvN,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,cACnBkD,EAAEC,iBADiB4S,EAAA/V,KAAA,EAGEs4B,EAAesO,gBAAgB5/B,GAHjC,OAGf+F,EAHegJ,EAAA8Z,KAInBltB,QAAQC,IAAImK,GACZjO,EAAM+hB,QAAQlS,KAAd,cAAAnO,OACgB0P,EADhB,KAAA1P,OACiC2P,EADjC,wBALmB,wBAAA4F,EAAA9V,SAAA6V,MAAH,gBAAAqB,GAAA,OAAArM,EAAAsM,MAAAza,KAAAG,YAAA,GAqRlB,OACEoE,EAAAzB,EAAA0B,cAAA,YApMI89B,IACFA,EAAcpwB,QAAQ,SAAAmxB,GAChBA,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IACpB,SAACy4B,EAAOK,GAAR,OACGN,EAAiBC,EAAM12B,IAAM02B,EAAM54B,MACpB,mBAAhB44B,EAAM54B,QACDy8B,EAA2B7D,EAAM12B,IAEtC+1B,EAAwB5wB,KACtBzN,EAAAzB,EAAA0B,cAAA,MACEG,IAAKi/B,EACLl/B,UAAU,gBACVK,MAAO,CAAE2uB,UAAW,WAEpBnvB,EAAAzB,EAAA0B,cAAA,OACEq/B,WAAUN,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD25B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBz/B,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,+BACb,IACA6+B,EAAMG,aAAc,KACf,IACRn/B,EAAAzB,EAAA0B,cAAA,gBAAQ++B,EAAM54B,QAEhBpG,EAAAzB,EAAA0B,cAACy/B,GAAA,EAAD,CAAcv/B,UAAU,0BAOpC49B,EAAcx3B,IAAI,SAAAu4B,GAMhB,OALIA,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,aAIPmB,IACFq7B,EAAiBr7B,EAAUhB,IAAI,SAAAiL,GAAI,OACjCA,EAAKC,QAAQlL,IAAI,SAACmL,EAAQyV,GAAT,OACfnnB,EAAAzB,EAAA0B,cAAA,MAAIG,IAAG,KAAAd,OAAO6nB,IACZnnB,EAAAzB,EAAA0B,cAAA,MAAIG,IAAK+mB,EAAKhnB,UAAU,eACtBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAd,IAA+BuR,EAAOtL,SAG1CpG,EAAAzB,EAAA0B,cAAA,UACGyR,EAAOC,aAAapL,IAAI,SAACqL,EAAYvC,GAAb,OACvBrP,EAAAzB,EAAA0B,cAAA,MAAIG,IAAKiP,EAAKlP,UAAU,mBACtBH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,iDACb,KAEHH,EAAAzB,EAAA0B,cAAA,YAAO2R,EAAWxL,QAGtB6T,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,gDACb,KAEHH,EAAAzB,EAAA0B,cAAA,YAAO2R,EAAWxL,SAItBpG,EAAAzB,EAAA0B,cAAA,UACG4Q,EAAgBtK,IACf,SAACygB,EAAgB8Y,GACf,OACE9/B,EAAAzB,EAAA0B,cAAA,MACEG,IAAK0/B,EACL3/B,UAAU,kBAET6mB,EACDhnB,EAAAzB,EAAA0B,cAAA,UACG2R,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OACPA,EAAUnU,OAASqrB,IAEtBzgB,IAAI,SAACuJ,EAAWiwB,GAAZ,OACH//B,EAAAzB,EAAA0B,cAAA,MACEG,IAAK2/B,EACL5/B,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,WACL2M,GAAIwH,EAAUxH,GACdpH,SAAU,SAAAc,GAAC,OA5HpC,SAAAA,GACrB,IAAI2jC,EAAiB3jC,EAAE0C,OAAO+gB,QAC1B0M,EAAgBnwB,EAAE0C,OAAOmS,QAAQjF,WACjCg0B,EAAc9/B,EAClB,GAAI8/B,EAAa,CACf,IAAuB,IAAnBD,EACF3jC,EAAE0C,OAAO+gB,SAAU,EACXmgB,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAC7CllB,WAAWQ,KAAKzL,EAAE0C,OAAO4D,QACtB,CACL,IAAIu2B,EAAI+G,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAC/C0M,EAAE5xB,WAAW4K,OAAOgnB,EAAE5xB,WAAW0Y,QAAQ3jB,EAAE0C,OAAO4D,IAAK,GAEzDm9B,EAAWG,GAEbnkC,QAAQC,IAAIoE,GA8GoC+/B,CAAe7jC,IAEjBolB,iBACEthB,KACIA,EAAQ+J,KAAK,SAAAgvB,GAAC,OACZA,EAAE5xB,WAAW4C,KACX,SAAAtR,GAAC,OACCA,IAAMuR,EAAUxH,OAO5Bw9B,UACEhgC,IACIA,EAAQ+J,KACN,SAAAgvB,GAAC,OACCA,EAAEjtB,aACFA,EAAWtJ,KAMrBo8B,kBACE9yB,EAAWtJ,MAIjBtI,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,SACEE,UAAU,kBACVwkC,QAAS70B,EAAUxH,IAElB,IACAwH,EAAU1J,mBAcvCpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,UACEiB,SAAU,SAAAc,GAAC,OAtOd,SAAAb,GACnB,IAAIgxB,EAAgBhxB,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAenL,aAC3D,mBAEEkf,EAAezjC,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAenL,aAC1D,kBAEEkgB,EAAc9/B,EAEdigC,EAAiB,GACjBC,EAAaphB,GAAE,kCAAoCuN,EAAgB,KAEvE,GAAIyS,IAAiB/B,EACnBmD,EAAWlgB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCz0B,EAAKiU,SAAU,EACfjU,EAAKs0B,UAAW,IAOlBrkC,QAAQC,IAAIkkC,GAEZA,EAAcA,EAAYz9B,OAAO,SAAA02B,GAAC,OAAIA,EAAEjtB,aAAeugB,IACvD1wB,QAAQC,IAAIkkC,QACP,GAAIA,EACT,GAAIA,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAAgB,CACzD,IAAI0M,EAAI+G,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAC/C0M,EAAE3K,UAAY0Q,EAEdoB,EAAWlgB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCF,EAAet4B,KAAK+D,EAAKlJ,IACzBkJ,EAAKiU,SAAU,EACfjU,EAAKs0B,UAAW,IAElBjH,EAAE5xB,WAAa84B,OAEfC,EAAWlgB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCF,EAAet4B,KAAK+D,EAAKlJ,IACzBkJ,EAAKiU,SAAU,EACfjU,EAAKs0B,UAAW,IAElBF,EAAYn4B,KAAK,CACfmE,WAAYugB,EACZ+B,UAAW0Q,EACX33B,WAAY84B,IAIlBN,EAAWG,GAoL0BzgB,CAAanjB,IAC5Bk5B,aACEp1B,GACIA,EAAQ+J,KACN,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,EAAWtJ,KAEjCxC,EAAQ+J,KACN,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,EAAWtJ,KACjC4rB,UAEJ2O,EAEN1iC,UAAU,mBAET4+B,EAAiBx4B,IAAI,SAACnG,EAAKmB,GAAN,OACpBvB,EAAAzB,EAAA0B,cAAA,UACEG,IAAKmB,EACLA,MAAOA,EACPwjC,iBAAgBxjC,EAChBmjC,kBAAiB9yB,EAAWtJ,IAE3BlI,qBAmBxB4lB,EACChmB,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,UACRJ,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,SAAUD,UAAU,OAC5BH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACfH,EAAAzB,EAAA0B,cAAA,iCACAD,EAAAzB,EAAA0B,cAAA,UACG8gB,GAAS5Y,OAAO,SAAAqJ,GAAI,OAAIA,EAAKpL,QAAU4I,IAAe,GAAGgS,KAD5D,KAEGsd,EAFH,IAEuBrvB,EAFvB,OAE6C+W,EAAQ0O,UAAW,KAGhE10B,EAAAzB,EAAA0B,cAAA,OAAKG,IAAK,SAAUD,UAAU,oBAC5BH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,yBACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,wBAEFjP,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,qCAHf,qBAMAH,EAAAzB,EAAA0B,cAAA,YAIJD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,OACEyrB,IAAK1F,EAAQ6O,MAAM,GAAK7O,EAAQ6O,MAAM,GAAG13B,IAAMmlC,KAC/C5+B,MAAM,QACN+nB,IAAI,MAGRzrB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mCACbH,EAAAzB,EAAA0B,cAAA,2MAQJD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ,IACDH,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE0/B,UAAW,SACrB5B,EADH,IACuBrvB,EADvB,oBAIFjP,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,MACEE,UAAU,wBACVK,MAAO,CAAEkI,MAAO,UAEf21B,KAIPr+B,EAAAzB,EAAA0B,cAAA,WAEAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sBAEXH,EAAAzB,EAAA0B,cAAA,QAAMG,IAAK4lB,EAAQ1d,GAAI3G,SAAU,SAAAK,GAAC,OAAI4hB,EAAa5hB,KAChD4gC,EACD5iC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,gBACbH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVxE,KAAK,UAFP,QAIOqE,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sCAUlC,YAgBOqP,GAVK,kBAClBxP,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,mDACL4U,UAAWohB,OC/aJU,GAAc,SAAAtoC,GACzB,IAAMoR,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACtDskB,EAAYn2B,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAK/C2nB,EAAiB,IAAIhD,GARO5sB,EASRC,qBATQC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAS3BpB,EAT2BsB,EAAA,GASpB2vB,EAToB3vB,EAAA,GAAAI,EAUZL,qBAVYM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAU3BkrB,EAV2BjrB,EAAA,GAUtBuvB,EAVsBvvB,EAAA,GAAA2L,EAWIjM,qBAXJkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAW3Buf,EAX2Btf,EAAA,GAWd4jB,EAXc5jB,EAAA,GAAAG,EAYNrM,qBAZMsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAY3Bof,EAZ2Bnf,EAAA,GAYnByjB,EAZmBzjB,EAAA,GAAA0jB,EAcMhwB,qBAdNiwB,EAAAn8B,OAAAoM,EAAA,EAAApM,CAAAk8B,EAAA,GAc3BtB,EAd2BuB,EAAA,GAcbC,EAdaD,EAAA,GAAAE,EAeZnwB,qBAfYowB,EAAAt8B,OAAAoM,EAAA,EAAApM,CAAAq8B,EAAA,GAe3BgD,EAf2B/C,EAAA,GAetBsO,EAfsBtO,EAAA,GAAAE,EAgBEtwB,qBAhBFuwB,EAAAz8B,OAAAoM,EAAA,EAAApM,CAAAw8B,EAAA,GAgB3BE,EAhB2BD,EAAA,GAgBfE,EAhBeF,EAAA,GAAAG,EAiBQ1wB,qBAjBR2wB,EAAA78B,OAAAoM,EAAA,EAAApM,CAAA48B,EAAA,GAiB3BE,EAjB2BD,EAAA,GAiBZE,EAjBYF,EAAA,GAAAG,EAkBQ9wB,qBAlBR+wB,EAAAj9B,OAAAoM,EAAA,EAAApM,CAAAg9B,EAAA,GAkB3BE,EAlB2BD,EAAA,GAkBZE,EAlBYF,EAAA,GAAAG,EAoBFlxB,qBApBEmxB,EAAAr9B,OAAAoM,EAAA,EAAApM,CAAAo9B,EAAA,GAoB3BxF,EApB2ByF,EAAA,GAoBjBC,EApBiBD,EAAA,GAAAE,EAqBQrxB,qBArBRsxB,EAAAx9B,OAAAoM,EAAA,EAAApM,CAAAu9B,EAAA,GAqB3B1F,GArB2B2F,EAAA,GAqBZC,GArBYD,EAAA,GAAAE,GAsBUxxB,qBAtBVyxB,GAAA39B,OAAAoM,EAAA,EAAApM,CAAA09B,GAAA,GAsB3B5F,GAtB2B6F,GAAA,GAsBXC,GAtBWD,GAAA,GAAAE,GAuBQ3xB,qBAvBR4xB,GAAA99B,OAAAoM,EAAA,EAAApM,CAAA69B,GAAA,GAuB3BpF,GAvB2BqF,GAAA,GAuBZ+M,GAvBY/M,GAAA,GAAAE,GAwBU9xB,mBAAS,IAxBnB+xB,GAAAj+B,OAAAoM,EAAA,EAAApM,CAAAg+B,GAAA,GAwB3B2E,GAxB2B1E,GAAA,GAwBX2E,GAxBW3E,GAAA,GA2B9BgF,GAAWviC,aAAaC,QAAQ,QAChCD,aAAaC,QAAQ,QACrB,GAMJoxB,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVO,MAAK,GAAAC,OAAI9C,EAAJ,UAAA8C,OAAmBy0B,EAAnB,kBACRt0B,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GAEJy3B,EAASz3B,EAAawG,MAAM,GAAG7E,OAC/B22B,EACEt4B,EAAai0B,YAAY,GAAKj0B,EAAai0B,YAAY,GAAG12B,IAAM,IAElEgpC,EACEvmC,EAAai0B,YAAY,GACrBj0B,EAAai0B,YAAY,GAAGvqB,UAC5B,IAENuvB,EACEj5B,EAAa+zB,gBAAgB,GACzB/zB,EAAa+zB,gBAAgB,GAAGpyB,MAChC,IAEN+1B,EACE13B,EAAa4zB,UAAU,GAAK5zB,EAAa4zB,UAAU,GAAGjyB,MAAQ,IAEhEi2B,EACE53B,EAAa8zB,aAAa,GACtB9zB,EAAa8zB,aAAa,GAAGnyB,MAC7B,QAENg2B,EACE33B,EAAa6zB,mBAAmB,GAC5B7zB,EAAa6zB,mBAAmB,GAAGlyB,MACnC,IAENy3B,GACEp5B,EAAag0B,+BAA+B,GACxCh0B,EAAag0B,+BAA+B,GAAGryB,MAC/C,IAEN43B,GACEv5B,EAAa6L,6BAA6B,GACtC7L,EAAa6L,6BAA6B,GAAGlK,MAC7C,IAEN6kC,GACExmC,EAAak0B,wBAAwB,GACjCl0B,EAAak0B,wBAAwB,GAAGvyB,MACxC,MA7CM,cAAA3C,EAAAE,KAAA,EAiDVO,MAAK,GAAAC,OAAI9C,EAAJ,uBAAA8C,OAAgCk/B,GAAhC,iBAAyD,CAClEj/B,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJu+B,GAAkBv+B,KAvDN,wBAAAhB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,aAAA,EA0DfssB,IACC,CAAC6L,EAAWyK,KAEf,IAAM5a,GAAY,eAAAha,EAAArO,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAoW,EAAM4M,GAAN,IAAApiB,EAAAk0B,EAAAznB,EAAA,OAAAvN,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,UACnB0iB,EAAIvf,oBAEDmE,IACA+sB,GACD/sB,EAAMvK,OAAS,GACfs3B,EAASt3B,OAAS,GAClB48B,GACAJ,GARiB,CAAAxjB,EAAA/V,KAAA,QAAA+V,EAAA/V,KAAA,mBAWbM,EAAQnD,aAAaC,QAAQ,cAC7Bo3B,EAASsH,GACTzE,EAba,CAAAthB,EAAA/V,KAAA,gBAcf2C,QAAQC,IAAIy0B,GAdGthB,EAAA/V,KAAA,GAeTO,MACJ7C,EAAS,qDACT,CACEgD,YAAa,UACbD,OAAQ,OACRmkB,QAAS,iBACTzmB,QAAS,CACPy9B,OAAQ,2BACRt+B,eAAgB,2BAChBC,eAAgB+C,EAChBu7B,sBAAuB,wCAEzBp9B,KAAM44B,IAGP12B,KAAK,SAAAstB,GAAI,OAAIA,EAAKptB,SAClBF,KAAK,SAASqM,GACbrK,QAAQC,IAAIoK,GACZwnB,EAASxnB,EAAK8uB,IAAI,GAAGr5B,QAjCV,eAAAsT,EAAA/V,KAAA,GAqCIs4B,EAAe9C,YAClCP,EACA3tB,EACA4sB,EACAC,EACAC,EACAC,EACAC,GACAC,GACAW,GACAV,GA/Ce,SAqCbznB,EArCagJ,EAAA8Z,MAkDJ9c,IAAI,GAAGtQ,OAClB3D,EAAM+hB,QAAQlS,KAAd,cAAAnO,OACgB0P,EADhB,KAAA1P,OACiC2P,EADjC,iBAAA3P,OAEIuM,EAASgG,IAAI,GAAGtQ,QArDL,yBAAAsT,EAAA9V,SAAA6V,MAAH,gBAAAqB,GAAA,OAAArM,EAAAsM,MAAAza,KAAAG,YAAA,GA2ElB,IAQMiH,GARsB,WAC1B,IAAIA,EAAc,cAIlB,OAHK5G,aAAaC,QAAQ,WACxB2G,EAAc,QAETA,EAGWg4B,GAGhBC,GAAoB,sBACpBC,GAAuB,sBACvBC,GAAW,0DACXC,GACF,+DACE70B,GACEA,EAAMvK,OAAS,IACjBm/B,GAAW,GACXF,GAAoB,IAIpB3H,GACEA,EAASt3B,OAAS,IACpBo/B,GAAe,GACfF,GAAuB,IA+D3B,OACE/6B,EAAAzB,EAAA0B,cAAA,WAboB,WACpB,IAAIgoB,EAAO,GAKX,OAJAiW,GAAe33B,IAAI,SAAAiL,GAEjB,OADAyW,EAAKxa,KAAK+D,EAAKZ,eACR,SAELqX,EAAKlnB,SAASiO,GAQfq3B,GACCrmC,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,kBAAA3P,OAAkEy0B,EAAlE,WAED,IAHH,OAIO,KAEP/zB,EAAAzB,EAAA0B,cAAA,oBAAY4C,GAAZ,YAEA7C,EAAAzB,EAAA0B,cAAA,QACEE,UAAU,OACVmI,GAAG,sBACH3G,SAAUiiB,IAEV5jB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,sBACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACL2M,GAAG,QACHzF,YAAY,OACZtB,MAAO6E,EACPlF,SAAU,SAAAc,GAAC,OAAIq1B,EAASr1B,EAAE0C,OAAOnD,QACjCpB,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW26B,IACd96B,EAAAzB,EAAA0B,cAAA,SAAI+6B,MAGRh7B,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,uBACAD,EAAAzB,EAAA0B,cAAA,SAAOtE,KAAK,OAAO2M,GAAG,aAAapH,SArF9B,SAAAc,GACnB,GAAKA,EAAE0C,OAAOy2B,OAAmC,IAA1Bn5B,EAAE0C,OAAOy2B,MAAMt/B,OAAtC,CAIE,IAAMyqC,EAAYve,IAAIwe,gBAAgBvkC,EAAE0C,OAAOy2B,MAAM,IAEjDn5B,EAAE0C,OAAOy2B,MAAM,GAAGC,KAAO,QAC3B9C,EAAiB,GAEjBA,OAAiBx8B,GAIU,eAA3BkG,EAAE0C,OAAOy2B,MAAM,GAAGx/B,MACS,cAA3BqG,EAAE0C,OAAOy2B,MAAM,GAAGx/B,KAElB+8B,EAAiB,GAEjBA,OAAiB58B,GAGnB2F,QAAQC,IAAIM,EAAE0C,OAAOy2B,MAAM,IAE3BjD,EAAcoO,GACd3O,EAAgB31B,EAAE0C,OAAOy2B,MAAM,SAvB/BxD,OAAgB77B,OAsFNkE,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,GACJnjB,GAAG,mBACH5E,MAAM,QACNgoB,IAAKuM,EACLt0B,OAAO,QACPnD,MAAO,CACL4G,OAAQ,iBACR3G,QAAS,MACTiD,MAAO,SAGVu0B,EACCj4B,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,UAAQY,QAAS,SAAAmB,GAAC,OA1Ed,SAAAA,GACtBA,EAAEC,iBACFi2B,OAAcp8B,GACdqqC,OAAOrqC,GACP48B,OAAiB58B,GACjBw8B,OAAiBx8B,GACjBqJ,SAASyY,eAAe,cAAcrc,MAAQ,GAoENm6B,CAAgB15B,KAAtC,kBAKF,GAGDq2B,EACCr4B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,uDAAmD,KAGrD,GAGDw4B,EACCz4B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,kDAA8C,KAGhD,IAGJD,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,gCACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACL2M,GAAG,MACHzF,YAAY,MACZa,MAAO,EACPnC,MAAOyxB,EACP9xB,SAAU,SAAAc,GAAC,OAAIs1B,EAAOt1B,EAAE0C,OAAOnD,QAC/BpB,UAAU,oBAGdH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wBACAD,EAAAzB,EAAA0B,cAAA,UACEsB,MAAO2xB,EACPgI,aAAa,SACbh6B,SAAU,SAAAc,GAAC,OAAIw1B,EAAUx1B,EAAE0C,OAAOnD,QAClCpB,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,QACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,QACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,UAAf,UACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,aAAf,aACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,kBAAf,wBAINvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,2BACAD,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,OACL2M,GAAG,WACHzF,YAAY,YACZtB,MAAO4xB,EACPjyB,SAAU,SAAAc,GAAC,OAAI62B,EAAY72B,EAAE0C,OAAOnD,QACpCpB,UAAU,mBAEZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAW46B,IACd/6B,EAAAzB,EAAA0B,cAAA,SAAIg7B,MAGRj7B,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,8CACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMsnB,GACNyI,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpB2kB,GAAiBltB,IAEnB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,4CACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMmnB,EACN4I,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpBkjB,EAAezrB,IAEjB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,wCACAD,EAAAzB,EAAA0B,cAAC07B,GAAAp9B,EAAD,CACE6V,OAAQwnB,KACR9vB,KAAMunB,GACNwI,OAAQ,SAAAznB,KACRlT,SAAU,SAACC,EAAOiT,GAChB,IAAMtI,EAAOsI,EAAOC,UACpB8kB,GAAkBrtB,IAEpB3L,UAAU,oBAIdH,EAAAzB,EAAA0B,cAAA,YACED,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAAA,UACEsB,MAAOyyB,GACPkH,aAAa,SACbh6B,SAAU,SAAAc,GAAC,OAAIokC,GAAiBpkC,EAAE0C,OAAOnD,QACzCpB,UAAU,mBAEVH,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,SAAf,SACAvB,EAAAzB,EAAA0B,cAAA,UAAQsB,MAAO,QAAf,YAMRvB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,kBACbH,EAAAzB,EAAA0B,cAAA,WACAD,EAAAzB,EAAA0B,cAAA,YAEFD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBAGjBH,EAAAzB,EAAA0B,cAAA,UACAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAvSd,WACE,IAAI67B,EAAoB,mBAKxB,OAJK7/B,aAAaC,QAAQ,WACxB4/B,EAAoB,YAIpB97B,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,SACLwE,UAAU,6CACVoB,MAAOu6B,KA6RC,OAEF97B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBAKrB,KAgBOqmC,GAVY,kBACzBxmC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,kDACL4U,UAAW8hB,OCpdXthB,GAAI5oB,OAAO4oB,EAEJ6hB,GAAa,SAAA7oC,GAExB,IAAMw5B,EAAiB,IAAIhD,GAFM5sB,EAIHC,qBAJGC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAI1Bwe,EAJ0Bte,EAAA,GAIjB+xB,EAJiB/xB,EAAA,GAAAI,EAKCL,qBALDM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAK1BP,EAL0BQ,EAAA,GAKfuxB,EALevxB,EAAA,GAAA2L,EAMSjM,qBANTkM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAM1BqqB,EAN0BpqB,EAAA,GAMXqqB,EANWrqB,EAAA,GAAAG,EASHrM,qBATGsM,EAAAxY,OAAAoM,EAAA,EAAApM,CAAAuY,EAAA,GAS1BhO,EAT0BiO,EAAA,GASjB0xB,EATiB1xB,EAAA,GAW3B/E,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACtDskB,EAAYn2B,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAEjDmzB,EAAiB,GACjB7D,EAAmB,GACnBV,EAA0B,GAC1BwE,EAA2B,GAC3BhyB,EAAkB,GAClBytB,EAAoB,GAMxBhR,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,8BAAA3P,OACsEy0B,EADtE,0BAGRt0B,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ65B,EAAW75B,KANC,cAAAhB,EAAAE,KAAA,EASVO,MAAK,GAAAC,OACN9C,EADM,2DAGRiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJo+B,EAAiBp+B,KAdL,cAAAhB,EAAAE,KAAA,EAiBVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,uCAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ05B,EAAa15B,KAtBD,wBAAAhB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,YAAA,EAyBfssB,GAEIpiB,IACe8e,GAAE,kBACRkB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCxkC,QAAQC,IAAI,QAAU8P,EAAKqF,YAG9B,CAACkd,EAAW/kB,EAAeC,EAAkBnJ,IAEhD,IAAM8d,EAAY,eAAAha,EAAArO,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAoW,EAAM5S,GAAN,IAAA6J,EAAA,OAAAvN,EAAAC,EAAAI,KAAA,SAAAkW,GAAA,cAAAA,EAAAhW,KAAAgW,EAAA/V,MAAA,cACnBkD,EAAEC,iBADiB4S,EAAA/V,KAAA,EAGEs4B,EAAe7C,WAAWR,EAAWjuB,GAHvC,OAGf+F,EAHegJ,EAAA8Z,KAInBltB,QAAQC,IAAImK,GACZjO,EAAM+hB,QAAQlS,KAAd,cAAAnO,OACgB0P,EADhB,KAAA1P,OACiC2P,EADjC,kBAAA3P,OACkEy0B,EADlE,WALmB,wBAAAlf,EAAA9V,SAAA6V,MAAH,gBAAAqB,GAAA,OAAArM,EAAAsM,MAAAza,KAAAG,YAAA,GAiQlB,OACEoE,EAAAzB,EAAA0B,cAAA,YApLI89B,IACFA,EAAcx3B,IAAI,SAAAu4B,GA+BhB,OA9BIA,EAAK14B,MAAMwK,gBAAkB5B,IAC/BsvB,EAAoBQ,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OACFD,EAAiBC,EAAM12B,IAAM02B,EAAM54B,MACpB,mBAAhB44B,EAAM54B,QACDy8B,EAA2B7D,EAAM12B,IAEtC+1B,EAAwB5wB,KACtBzN,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAgBK,MAAO,CAAE2uB,UAAW,WAChDnvB,EAAAzB,EAAA0B,cAAA,OACEq/B,WAAUN,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD25B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBz/B,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,+BACb,IACA6+B,EAAMG,aAAc,KACf,IACRn/B,EAAAzB,EAAA0B,cAAA,gBAAQ++B,EAAM54B,QAEhBpG,EAAAzB,EAAA0B,cAACy/B,GAAA,EAAD,CAAcv/B,UAAU,wBAM3B,OAET49B,EAAcx3B,IAAI,SAAAu4B,GAMhB,OALIA,EAAK14B,MAAMwK,gBAAkB5B,GAC/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,QAIP4f,IACGlgB,GACH2/B,EAAWzf,EAAQgP,iBAErBvzB,QAAQC,IAAIoE,SAGVyB,IACFq7B,EAAiBr7B,EAAUhB,IAAI,SAAAiL,GAAI,OACjCA,EAAKC,QAAQlL,IAAI,SAACmL,EAAQyV,GAAT,OACfnnB,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,eACZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,gBAAd,IAA+BuR,EAAOtL,SAG1CpG,EAAAzB,EAAA0B,cAAA,UACGyR,EAAOC,aAAapL,IAAI,SAACqL,EAAYvC,GAAb,OACvBrP,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,mBACZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,iDACb,KAEHH,EAAAzB,EAAA0B,cAAA,YAAO2R,EAAWxL,QAGtB6T,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,gDACb,KAEHH,EAAAzB,EAAA0B,cAAA,YAAO2R,EAAWxL,SAItBpG,EAAAzB,EAAA0B,cAAA,UACG4Q,EAAgBtK,IAAI,SAAAygB,GACnB,OACEhnB,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kBACX6mB,EACDhnB,EAAAzB,EAAA0B,cAAA,UACG2R,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OACPA,EAAUnU,OAASqrB,IAEtBzgB,IAAI,SAAAuJ,GAAS,OACZ9P,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,mBACZH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,SACEtE,KAAK,WACL2M,GAAIwH,EAAUxH,GACdpH,SAAU,SAAAc,GAAC,OAzHlC,SAAAA,GACrB,IAAI2jC,EAAiB3jC,EAAE0C,OAAO+gB,QAC1B0M,EAAgBnwB,EAAE0C,OAAOmS,QAAQjF,WACjCg0B,EAAc9/B,EAClB,GAAI8/B,EAAa,CACf,IAAuB,IAAnBD,EACF3jC,EAAE0C,OAAO+gB,SAAU,EACXmgB,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAC7CllB,WAAWQ,KAAKzL,EAAE0C,OAAO4D,QACtB,CACL,IAAIu2B,EAAI+G,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAC/C0M,EAAE5xB,WAAW4K,OAAOgnB,EAAE5xB,WAAW0Y,QAAQ3jB,EAAE0C,OAAO4D,IAAK,GAEzDm9B,EAAWG,GAEbnkC,QAAQC,IAAIoE,GA2GkC+/B,CAAe7jC,IAEjBolB,iBACEthB,EAAQ+J,KAAK,SAAAgvB,GAAC,OACZA,EAAE5xB,WAAW4C,KACX,SAAAtR,GAAC,OAAIA,IAAMuR,EAAUxH,OAM3Bw9B,UACEhgC,EAAQ+J,KACN,SAAAgvB,GAAC,OACCA,EAAEjtB,aACFA,EAAWtJ,KAKjBo8B,kBAAiB9yB,EAAWtJ,MAGhCtI,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,SACEE,UAAU,kBACVqrB,IAAK1b,EAAUxH,IAEd,IACAwH,EAAU1J,mBAarCpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,kBACVe,SAAU,SAAAc,GAAC,OAxNd,SAAAb,GACnB,IAAIgxB,EAAgBhxB,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAenL,aAC3D,mBAEEkf,EAAezjC,EAAMuD,OAAOvD,EAAMuD,OAAOmsB,eAAenL,aAC1D,kBAEEkgB,EAAc9/B,EAEdigC,EAAiB,GACjBC,EAAaphB,GAAE,kCAAoCuN,EAAgB,KAEvE,GAAIyS,IAAiB/B,EACnBmD,EAAWlgB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCz0B,EAAKiU,SAAU,EACfjU,EAAKs0B,UAAW,IAGlBrkC,QAAQC,IAAIkkC,GAEZA,EAAcA,EAAYz9B,OAAO,SAAA02B,GAAC,OAAIA,EAAEjtB,aAAeugB,IACvD1wB,QAAQC,IAAIkkC,QACP,GAAIA,EACT,GAAIA,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAAgB,CACzD,IAAI0M,EAAI+G,EAAY/1B,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeugB,IAC/C0M,EAAE3K,UAAY0Q,EAEdoB,EAAWlgB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCF,EAAet4B,KAAK+D,EAAKlJ,IACzBkJ,EAAKiU,SAAU,EACfjU,EAAKs0B,UAAW,IAElBjH,EAAE5xB,WAAa84B,OAEfC,EAAWlgB,KAAK,SAASpY,EAAO8D,EAAMy0B,GACpCF,EAAet4B,KAAK+D,EAAKlJ,IACzBkJ,EAAKiU,SAAU,EACfjU,EAAKs0B,UAAW,IAElBF,EAAYn4B,KAAK,CACfmE,WAAYugB,EACZ+B,UAAW0Q,EACX33B,WAAY84B,IAIlBN,EAAWG,GA0K0BzgB,CAAanjB,IAC5Bk5B,aACEp1B,EAAQ+J,KAAK,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,EAAWtJ,KAC1CxC,EAAQ+J,KACN,SAAAgvB,GAAC,OAAIA,EAAEjtB,aAAeA,EAAWtJ,KACjC4rB,UACF2O,GAGL9D,EAAiBx4B,IAAI,SAACnG,EAAKmB,GAAN,OACpBvB,EAAAzB,EAAA0B,cAAA,UACEsB,MAAOA,EACPwjC,iBAAgBxjC,EAChBmjC,kBAAiB9yB,EAAWtJ,IAE3BlI,qBAmBxB4lB,EACChmB,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACfH,EAAAzB,EAAA0B,cAAA,iCACAD,EAAAzB,EAAA0B,cAAA,UACG8gB,GAAS5Y,OAAO,SAAAqJ,GAAI,OAAIA,EAAKpL,QAAU4I,IAAe,GAAGgS,KAD5D,KAEGsd,EAFH,IAEuBrvB,EAFvB,OAE6C+W,EAAQ0O,UAAW,KAGhE10B,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBACfH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,EAAjC,kBAAA3P,OAAkEy0B,EAAlE,WAEF/zB,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,qCAHf,qBAMAH,EAAAzB,EAAA0B,cAAA,YAIJD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,OACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,OACEwrB,IAAI,GACJC,IAAK1F,EAAQ6O,MAAM,GAAK7O,EAAQ6O,MAAM,GAAG13B,IAAMmlC,KAC/C5+B,MAAM,WAGV1D,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,8BACbH,EAAAzB,EAAA0B,cAAA,yMAQJD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACZ,IACDH,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAE0/B,UAAW,SACrB5B,EADH,IACuBrvB,EADvB,oBAIFjP,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,wBACbH,EAAAzB,EAAA0B,cAAA,MACEE,UAAU,wBACVK,MAAO,CAAEkI,MAAO,UAEf21B,KAIPr+B,EAAAzB,EAAA0B,cAAA,WAEAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,sBAEXH,EAAAzB,EAAA0B,cAAA,QAAM0B,SAAU,SAAAK,GAAC,OAAI4hB,EAAa5hB,KAC/B4gC,EACD5iC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,gBACbH,EAAAzB,EAAA0B,cAAA,UACEE,UAAU,6CACVxE,KAAK,UAFP,QAIOqE,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,sCAUlC,YAgBOumC,GAVW,kBACxB1mC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,iDACL4U,UAAWqiB,OClaJE,GAAyB,SAAA/oC,GACpC,IAAMoR,EAAgBpR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACnDR,EAAmBrR,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GACtDskB,EAAYn2B,EAAMuF,SAASC,SAASqM,MAAM,KAAK,GAHRjI,EAKXC,qBALWC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GAKtCD,EALsCG,EAAA,GAK3B4xB,EAL2B5xB,EAAA,GAAAI,EAMHL,qBANGM,EAAAxM,OAAAoM,EAAA,EAAApM,CAAAuM,EAAA,GAMtCi2B,EANsCh2B,EAAA,GAMvBi2B,EANuBj2B,EAAA,GAOvC5E,EAAWyjC,cAP4BlzB,EAQfjM,qBARekM,EAAApY,OAAAoM,EAAA,EAAApM,CAAAmY,EAAA,GAQtCmzB,EARsClzB,EAAA,GAQ7BmzB,EAR6BnzB,EAAA,GAUzC8tB,EAAkBt+B,EAASnE,MAAMyiC,gBACjCZ,EAAiB19B,EAASnE,MAAM6hC,eAChCzC,EAAiB,GACjBvtB,EAAkB,GAQtByc,oBAAU,YACO,eAAA9mB,EAAAjL,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVO,MAAK,GAAAC,OAAI9C,EAAJ,sCACRiD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJo+B,EAAiBp+B,KAJL,cAAAhB,EAAAE,KAAA,EAOVO,MAAK,GAAAC,OACN9C,EADM,SAAA8C,OACQ0P,EADR,KAAA1P,OACyB2P,EADzB,kBAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ05B,EAAa15B,KAZD,cAAAhB,EAAAE,KAAA,EAeVO,MAAK,GAAAC,OACN9C,EADM,yBAAA8C,OACwB0P,EADxB,KAAA1P,OACyC2P,EADzC,kBAGRxP,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJknC,EAAWlnC,KApBC,wBAAAhB,EAAAG,SAAAN,MAAH,yBAAA+H,EAAA0P,MAAAza,KAAAG,aAAA,EAuBfssB,IACC,CAAC6L,EAAW9kB,EAAkBD,IAE7B63B,GACFplC,QAAQC,IAAImlC,GAgId,OACE7mC,EAAAzB,EAAA0B,cAAA,YApGI89B,GACFA,EAAcx3B,IAAI,SAAAu4B,GAShB,OARIA,EAAK14B,MAAMwK,gBAAkB5B,GAI/B8vB,EAAKjuB,gBAAgBtK,IACnB,SAAAuJ,GAAS,OAAKe,EAAgBf,EAAUxH,IAAMwH,EAAU1J,QAGrD,YAIPmB,IACF62B,EAAiB72B,EAAUhB,IAAI,SAAAiL,GAAI,OACjCA,EAAKC,QAAQlL,IAAI,SAAAmL,GAAM,OACrB1R,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,UAAKyR,EAAOtL,OAAY,KAE1BpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,kCAGHyR,EAAOC,aAAapL,IAAI,SAAAqL,GAAU,OACU,IAA3CivB,EAAelb,QAAQ/T,EAAWtJ,IAChCtI,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAA,OAAKqI,GAAIsJ,EAAWtJ,GAAInI,UAAU,OAChCH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,oBACdH,EAAAzB,EAAA0B,cAAA,WACED,EAAAzB,EAAA0B,cAAC8Z,GAAAxb,EAAD,CACEyb,QACEha,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,kDAAmD,IAC/DyR,EAAWxL,OAGhB6T,gBACEja,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,oBACbH,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,iDAAkD,IAC9DyR,EAAWxL,QAIfyK,EAAgBtK,IAAI,SAAAygB,GACnB,OACEhnB,EAAAzB,EAAA0B,cAAA,OACEE,UAAU,2BACVmlC,uBAAA,GAEAtlC,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,4BACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,kBAAU+mB,EAAV,MAEFhnB,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,qBAEhByR,EAAW3E,WACT9E,OACC,SAAA2H,GAAS,OACPA,EAAUnU,OAASqrB,IAEtBzgB,IAAI,SAAAuJ,GACH,OACE9P,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,uBACbH,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACZ2P,EAAU1J,iBAYnCpG,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,mBACbH,EAAAzB,EAAA0B,cAAA,UA3GE,SAAAkyB,GACpB,GAAI0U,EAoBF,OAnBWA,EAAQtgC,IAAI,SAAAiL,GACrB,OAAIA,EAAKlJ,KAAO6pB,EACP3gB,EAAK4L,UAAU7W,IAAI,SAAAyG,GACxB,OACEhN,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,KACEW,KAAMoM,EAAS+5B,aACfC,IAAI,sBACJtiC,OAAO,UAEN,IACAsI,EAASi6B,aAAc,QAM3B,OAwFYC,CAAct1B,EAAWtJ,QAKpC,aAgBVtI,EAAAzB,EAAA0B,cAAA,2CACAD,EAAAzB,EAAA0B,cAAA,KAAGE,UAAU,QAAb,iJAEwE,IACrEshC,GAEFrD,IAeQ+I,GAVY,kBACzBnnC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACEC,OAAK,EACL3U,KAAK,gEACL4U,UAAWuiB,qCCvLFS,GAfO,WAMpB,OALA9Z,oBAAU,WACRtxB,OAAO+uB,SAAS,EAAG,GACnBtpB,QAAQC,IAAI,aACX,IAGD1B,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAEi9B,MAAO,SAApB,qBACAz9B,EAAAzB,EAAA0B,cAAA,2EACAD,EAAAzB,EAAA0B,cAAConC,GAAA,EAAD,CAAWC,KAAMx7B,OCuBRy7B,8MAxBbvkC,QAAU,SAACnB,EAAUC,GACnB2sB,GAAM5sB,EAAUC,MAGlBpD,SAAW,WACTN,8EAGO,IAAA6E,EAEiBxH,KAAKmC,MAArBkC,EAFDmD,EAECnD,MAAOb,EAFRgE,EAEQhE,KAEf,OACEe,EAAAzB,EAAA0B,cAAA,WACGhB,GAAQa,EACPE,EAAAzB,EAAA0B,cAAA,+BAEAD,EAAAzB,EAAA0B,cAAC0vB,EAAD,CAAWhuB,SAAUlG,KAAKuH,kBAzBhBhC,aCFdwmC,GAAmB,SAAA5pC,GAAS,IAAA4J,EACIC,qBADJC,EAAAnM,OAAAoM,EAAA,EAAApM,CAAAiM,EAAA,GACzBtI,EADyBwI,EAAA,GACbylB,EADazlB,EAAA,GAE5BzI,EAAOhD,aAAaC,QAAQ,QAC5BkD,EAAQnD,aAAaC,QAAQ,cAgBjC,OAdAoxB,oBAAU,WAENjuB,MAAK,GAAAC,OAAI9C,EAAJ,uBAAA8C,OAAgCL,EAAhC,iBAAqD,CACxDM,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJutB,EAAcvtB,MAInB,CAACX,EAAMG,IAGRY,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,eACbH,EAAAzB,EAAA0B,cAAA,+BACAD,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,+BACXjB,EACCA,EAAWqH,IAAI,SAAAgB,GACb,OACEvH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,oBAAoBC,IAAKmH,GACrCvH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CACEC,GAAE,cAAAhB,OAAgBiI,EACfqJ,cACA/H,QAAQ,OAAQ,IAFjB,iBAIDtB,MAMTvH,EAAAzB,EAAA0B,cAAA,MAAIO,MAAO,CAAEi9B,MAAO,SAApB,0CAaKgK,GANG,kBAChBznC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAOC,OAAK,EAAC3U,KAAK,qBAAqB4U,UAAWojB,OC8FvCE,GA9IK,WAClB,IACItkC,EADWwjC,cACSxjC,SACpB2kB,EAAM3kB,EAASqM,MAAM,KACrBT,EAAgB+Y,EAAI,GACpB9Y,EAAmB8Y,EAAI,GAErB4f,EAAuB,SAAArmC,GAC3B,MAAa,aAATA,EACK,WAGI,WAATA,EACK,SAGI,SAATA,EACK,OAGI,YAATA,EACK,UAGI,WAATA,EACK,SAGI,QAATA,EACK,MAGI,gBAATA,EACK,oBADT,GAgGF,MAAkB,KAAXymB,EAAI,IAAwB,KAAXA,EAAI,GAC1B/nB,EAAAzB,EAAA0B,cAAA,aAEAD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,iBAAiB8E,aAAW,cACzCjF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,kDACZH,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,KAAR,mBAhGF8C,EAASrC,SAAS,WAElBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,IACtC04B,EAAqB34B,GADxB,IACyCC,IAG3CjP,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,4BAKKnb,EAASrC,SAAS,WAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,IACtC04B,EAAqB34B,GADxB,IACyCC,IAG3CjP,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,wBAKKnb,EAASrC,SAAS,cAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,wBACZH,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAMC,GAAE,cAAAhB,OAAgB0P,EAAhB,KAAA1P,OAAiC2P,IACtC04B,EAAqB34B,GADxB,IACyCC,IAG3CjP,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,uBAKKnb,EAASrC,SAAS,aAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAC/CopB,EAAqB34B,GADxB,IACyCC,IAIpC7L,EAASrC,SAAS,0BAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,8BAKKnb,EAASrC,SAAS,YAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,sBAKKnb,EAASrC,SAAS,iBAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,sBAKKnb,EAASrC,SAAS,SAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,UAKKnb,EAASrC,SAAS,wBAEzBf,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,MAAIE,UAAU,uBAAuBoe,eAAa,YAAlD,8BAHC,KC7CIqpB,GAzEY,WAMzB,OALAta,oBAAU,WACRtxB,OAAO+uB,SAAS,EAAG,GACnBtpB,QAAQC,IAAI,aACX,IAGD1B,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAAA,kCACAD,EAAAzB,EAAA0B,cAAA,gJAEwE,KAExED,EAAAzB,EAAA0B,cAAA,0GAE2B,KAG3BD,EAAAzB,EAAA0B,cAAA,mCACAD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,0FAIAD,EAAAzB,EAAA0B,cAAA,mJAMFD,EAAAzB,EAAA0B,cAAA,+CACAD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,6DACAD,EAAAzB,EAAA0B,cAAA,4GAIAD,EAAAzB,EAAA0B,cAAA,2IAMFD,EAAAzB,EAAA0B,cAAA,gEACAD,EAAAzB,EAAA0B,cAAA,yBACAD,EAAAzB,EAAA0B,cAAA,UACED,EAAAzB,EAAA0B,cAAA,yFAEW,MAGbD,EAAAzB,EAAA0B,cAAA,OAAKE,UAAU,0BACbH,EAAAzB,EAAA0B,cAAA,6BACoB,IAClBD,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,kDAAR,mCAEK,IAJP,8EAQAZ,EAAAzB,EAAA0B,cAAA,eACM,IACJD,EAAAzB,EAAA0B,cAAA,KAAGW,KAAK,kDAAR,mBAEK,IAJP,qHCiQOinC,8MA9Qb7oC,MAAQ,CACN8oC,UAAU,EACVhoC,MAAO7D,aAAaC,QAAQ,UAAY,GACxC+C,KAAMhD,aAAaC,QAAQ,SAAW,MAExC0S,eAAiB,IAAIvB,IAqBrB06B,qBAAuB,SAAAC,GACrBnqC,EAAKgC,SAAS,CAAEioC,SAAUE,OAG5BC,+BAAiC,SAAAzhC,GAAuB,IAApBpG,EAAoBoG,EAApBpG,IAAKuF,EAAea,EAAfb,SAC3B,SAARvF,IACEuF,EACF9H,EAAKgC,SAAS,CACZZ,KAAMhD,aAAaC,QAAQ,QAC3B4D,MAAO7D,aAAaC,QAAQ,WAG9B2B,EAAKgC,SAAS,CAAEZ,KAAM,GAAIa,MAAO,SAKvCwvB,kDAAc,SAAA7wB,EAAOoD,EAAUC,GAAjB,OAAAxD,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEJ2vB,GAAM5sB,EAAUC,GAFZ,OAGVjE,EAAKgC,SAAS,CACZZ,KAAMhD,aAAaC,QAAQ,QAC3B4D,MAAO7D,aAAaC,QAAQ,WAE9BiJ,SAAShC,SAAS6pB,SAPRpuB,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAAoR,GAAApR,EAAA,SASV5C,OAAOyF,QAAQ8tB,MAAf3wB,EAAAoR,KACIpR,EAAAoR,GAAMnE,SAVA,CAAAjN,EAAAE,KAAA,SAAAF,EAAA4wB,GAWA5wB,EAAAoR,GAAMnE,SAASmF,OAXfpS,EAAAE,KAYD,MAZCF,EAAA4wB,GAAA,2BAaJxzB,OAAOsgB,MAAM1d,EAAAoR,GAAMnE,SAASC,KAAKnF,SAb7B/H,EAAAowB,OAAA,kBAgBJhzB,OAAOsgB,MACL,gEAjBE,QAoBRtgB,OAAOsgB,MACL,gEArBM,yBAAA1d,EAAAG,SAAAN,EAAA,2EA2BdypC,aAAe,WACbrqC,EAAKgC,SAAS,CAAEZ,KAAM,GAAIa,MAAO,KACjC1B,KACA+G,SAAShC,SAAS6pB,6FA9DlBvxB,KAAKoE,SAAS,CAAEioC,SAAUrsC,KAAKmT,eAAek5B,WAC9CrsC,KAAK0sC,YAAc1sC,KAAKmT,eAAexJ,iBACrC3J,KAAKssC,sBAGP/rC,OAAOoJ,iBAAiB,UAAW3J,KAAKwsC,+EAIpCxsC,KAAK0sC,aACP1sC,KAAKmT,eAAevJ,oBAAoB5J,KAAK0sC,aAE/CnsC,OAAOqJ,oBAAoB,UAAW5J,KAAKwsC,iEAqDpC,IAAArmC,EAC2BnG,KAAKuD,MAA/B8oC,EADDlmC,EACCkmC,SAAUhoC,EADX8B,EACW9B,MAAOb,EADlB2C,EACkB3C,KACzB,OACEe,EAAAzB,EAAA0B,cAAAD,EAAAzB,EAAA2B,SAAA,KACEF,EAAAzB,EAAA0B,cAACmoC,EAAA,iBAAD,CACEC,SAAU,EACVC,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDC,kBAAgB,GAEhBzoC,EAAAzB,EAAA0B,cAACyoC,GAAD,MAEA1oC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAAC0oC,EAAD,CACE7oC,MAAOA,EACPb,KAAMA,EACN6oC,SAAUA,EACV9kC,QAASvH,KAAK6zB,YACd5wB,SAAUjD,KAAKysC,gBAInBloC,EAAAzB,EAAA0B,cAAA,WAASqI,GAAG,oBAAoBnI,UAAU,MAAMyoC,KAAK,QACnD5oC,EAAAzB,EAAA0B,cAAA,QAAME,UAAU,UACdH,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,KACElkB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,mBACpCyO,KAAK,+BACL4U,UAAWhD,KAEbphB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,mBACpCyO,KAAK,4BACL4U,UAAWC,KAGbrkB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,gEACL4U,UAAWiN,KAGbrxB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,mEACL4U,UAAWzV,KAEb3O,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,uDACL4U,UAAW7P,KAGbvU,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,+CACL4U,UAAWrI,KAGb/b,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,yDACL4U,UAAWnH,KAGbjd,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,gDACL4U,UAAW0L,KAGb9vB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,sDACL4U,UAAW+X,KAGbn8B,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,gDACL4U,UAAW+S,KAGbn3B,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,oDACL4U,UAAWihB,KAGbrlC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,mDACL4U,UAAWohB,KAGbxlC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,yDACL4U,UAAWwZ,KAGb59B,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,gEACL4U,UAAWuiB,KAGb3mC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,sEACL4U,UAAWwd,KAGb5hC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,sDACL4U,UAAWqe,KAGbziC,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,kDACL4U,UAAW8hB,KAGblmC,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,qBACpCyO,KAAK,iDACL4U,UAAWqiB,KAGbzmC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,iCACL4U,UAAW5F,KAQbxe,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,mBACpCyO,KAAK,yCACL4U,UAAWS,KAGb7kB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,GAAQa,EAAMiB,SAAS,mBACpCyO,KAAK,iDACL4U,UAAWuO,KAGb3yB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,4BACL4U,UAAWyD,KAGb7nB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,0BACL4U,UAAWmG,KAEbvqB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,2BACL4U,UAAWkI,KAGbtsB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,EACbuQ,KAAK,wBACL4U,UAAWoI,KAGbxsB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,EACbuQ,KAAK,aACL4U,UAAW6I,KAGbjtB,EAAAzB,EAAA0B,cAAC4oC,GAAD,CACEC,YAAa7pC,EACbuQ,KAAK,qBACL4U,UAAWojB,KAGbxnC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAO1U,KAAK,iBAAiB4U,UAAWgjB,KACxCpnC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CACE1U,KAAK,wBACL4U,UAAWwjB,KAEb5nC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAO1U,KAAK,SAAS4U,UAAWsJ,KAChC1tB,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAO1U,KAAK,SAAS4U,UAAWmjB,KAChCvnC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAO1U,KAAK,IAAI4U,UAAWiL,iBApQxBruB,aAiRb+nC,oLACK,IAAA9lC,EAC+CxH,KAAKmC,MAAxCoD,EADZiC,EACCmhB,UAAsB0kB,EADvB7lC,EACuB6lC,UAAclrC,EADrCrC,OAAAytC,EAAA,EAAAztC,CAAA0H,EAAA,2BAEP,OACEjD,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD3oB,OAAA0tC,OAAA,GACMrrC,EADN,CAEEiH,OAAQ,SAAAjH,GAAK,OACXkrC,EAAY9oC,EAAAzB,EAAA0B,cAACe,EAAcpD,GAAYoC,EAAAzB,EAAA0B,cAACikB,EAAA,EAAD,CAAU5jB,GAAG,iBAPjCU,aCzTvBkoC,GAAO/jC,SAASyY,eAAe,QACrCurB,IAAStkC,OACP7E,EAAAzB,EAAA0B,cAACI,EAAA,EAAD,CAAe+oC,SAAU3sC,0BACvBuD,EAAAzB,EAAA0B,cAACopC,GAAD,OAEFH,IAGFvhB,IAAMC,cAAcshB,sBChBpBI,EAAAC,QAAA,47ECAAD,EAAAC,QAAA,8tDCAAD,EAAAC,QAAiBC,EAAA9K,EAAuB,gECAxC4K,EAAAC,QAAiBC,EAAA9K,EAAuB,2DCAxC4K,EAAAC,QAAiBC,EAAA9K,EAAuB","file":"static/js/main.2826861f.chunk.js","sourcesContent":["class HeadersService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (HeadersService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    HeadersService.instance = this;\r\n  }\r\n\r\n  get(type = 'hal+json') {\r\n    const csfrToken = window.localStorage.getItem('csrf_token');\r\n    if (type === 'json') {\r\n      return {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': csfrToken,\r\n        Authorization: 'Basic'\r\n      };\r\n    }\r\n\r\n    return {\r\n      Accept: 'application/hal+json',\r\n      'Content-Type': 'application/hal+json',\r\n      'X-CSRF-Token': csfrToken,\r\n      Authorization: 'Basic'\r\n    };\r\n  }\r\n}\r\n\r\nexport default HeadersService;\r\n","import Headers from './headers';\r\nimport axios from 'axios';\r\n\r\nconst checkUser = localStorage.getItem('userid');\r\n\r\nexport const apiUrl = checkUser\r\n  ? process.env.REACT_APP_HTTPS_CMS_API_URL\r\n  : process.env.REACT_APP_PROXY_API_URL;\r\n\r\n/* note that for API requests that include the _links: {type: {href:''}} parameter, the request fails if the href value\r\nis preceded with HTTPS. it only works if HTTP is used instead. Drupal responds with an error message such as:\r\nmessage: \"Type https://cms.competency.ebi.ac.uk/rest/type/node/training_resource does not correspond to an entity on\r\nthis site.\" but when HTTP is used instead of HTTPS, Drupal is able to recognise the resource. Thus, to avoid this error,\r\nwe use process.env.REACT_APP_HTTP_CMS_API_URL as seen in the variable declared below.\r\nNOTE that, the href mentioned here is not referring to the address of the API request, rather we are referring to the\r\nhref value passed in the _links.type.href request parameter as stated above.\r\n */\r\nexport const apiUrlWithHTTP = process.env.REACT_APP_HTTP_CMS_API_URL;\r\n\r\naxios.defaults.baseURL = apiUrl;\r\n\r\nconst needTimeStamp = checkUser ? '&timestamp=' + Date.now() : '';\r\n\r\nclass HttpService {\r\n  static instance;\r\n  headers = new Headers();\r\n\r\n  constructor() {\r\n    if (HttpService.instance) {\r\n      return HttpService.instance;\r\n    }\r\n\r\n    HttpService.instance = this;\r\n  }\r\n\r\n  get(url, credentialType = '') {\r\n    if (credentialType) {\r\n      return axios.get(url, {\r\n        headers: this.headers.get(credentialType),\r\n        withCredentials: true\r\n      });\r\n    }\r\n    return axios.get(url + '&source=competencyhub' + needTimeStamp);\r\n  }\r\n\r\n  post(url, body, option = 'hal+json') {\r\n    // return axios.post(apiUrl + url, body, {\r\n    //   headers: this.headers.get(option),\r\n    //   withCredentials: true\r\n    // });\r\n    return axios.post(process.env.REACT_APP_HTTPS_CMS_API_URL + url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  patch(url, body, option = 'hal+json') {\r\n    // return axios.patch(apiUrl + url, body, {\r\n    //   headers: this.headers.get(option),\r\n    //   withCredentials: true\r\n    // });\r\n    return axios.patch(process.env.REACT_APP_HTTPS_CMS_API_URL + url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { apiUrl } from '../../services/http/http';\r\n//import HttpService from '../../services/http/http';\r\n//import ManageFrameworks from './ManageFrameworks';\r\n\r\n//const http = new HttpService();\r\n\r\n//const $ = window.$;\r\n\r\nclass Navigation extends Component {\r\n  navRef = React.createRef();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: this.props.user,\r\n      frameworks: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    //$(this.navRef.current).foundation();\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/api/authorisation/${this.state.user}?_format=json`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n      headers: {\r\n        'X-CSRF-Token': token\r\n      }\r\n    })\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  logout = async () => {\r\n    const { onLogout } = this.props;\r\n    await onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles } = this.props;\r\n    const frameworkResources = (\r\n      <>\r\n        <li className=\"vf-list__item\" key=\"navigation\">\r\n          <Link\r\n            className=\"vf-link\"\r\n            to=\"/manage-frameworks\" // eslint-disable-line jsx-a11y/anchor-is-valid\r\n            tabIndex=\"0\"\r\n          >\r\n            Manage frameworks\r\n          </Link>\r\n        </li>\r\n        <li className=\"vf-list__item\" style={{ padding: '5px' }}>\r\n          |\r\n        </li>\r\n      </>\r\n    );\r\n\r\n    const trainingResources = (\r\n      <>\r\n        <li className=\"vf-list__item\" key=\"resources\">\r\n          <Link className=\"vf-link\" to=\"/all-training-resources\">\r\n            Manage Training Resources\r\n          </Link>\r\n        </li>\r\n        <li className=\"vf-list__item\" style={{ padding: '5px' }}>\r\n          |\r\n        </li>\r\n      </>\r\n    );\r\n\r\n    const userDropdown = (\r\n      <>\r\n        <li\r\n          className=\"vf-list__item\"\r\n          key=\"myaccount\"\r\n          style={{ padding: '5px' }}\r\n        >\r\n          <Link className=\"vf-link\" to={'/user/view'}>\r\n            My account\r\n          </Link>\r\n        </li>\r\n        <li\r\n          className=\"vf-list__item\"\r\n          key=\"changepwd\"\r\n          style={{ padding: '5px' }}\r\n        >\r\n          <Link className=\"vf-link\" to={'/user/change/password'}>\r\n            Change password\r\n          </Link>\r\n        </li>\r\n        <li className=\"vf-list__item\" style={{ padding: '5px' }}>\r\n          <span\r\n            className=\"vf-link\"\r\n            href=\"#\" // eslint-disable-line jsx-a11y/anchor-is-valid\r\n            onClick={this.logout}\r\n            style={{ cursor: 'pointer' }}\r\n          >\r\n            Logout\r\n          </span>\r\n        </li>\r\n      </>\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"vf-breadcrumbs\">\r\n          <ul className=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\r\n            {roles.includes('framework_manager') && frameworkResources}\r\n            {roles.includes('content_manager') && trainingResources}\r\n            {userDropdown}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport 'react-responsive-modal/styles.css';\r\nimport { Modal } from 'react-responsive-modal';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showModal: false,\r\n      username: '',\r\n      password: ''\r\n    };\r\n  }\r\n\r\n  // state = {\r\n  //   username: \"\",\r\n  //   password: \"\"\r\n  // };\r\n\r\n  onChange = event => {\r\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\r\n  };\r\n\r\n  OpenModal(e) {\r\n    e.preventDefault();\r\n    this.setState({ showModal: true });\r\n  }\r\n\r\n  CloseModal() {\r\n    this.setState({ showModal: false });\r\n  }\r\n\r\n  submit = () => {\r\n    console.log('this.submit');\r\n    const { onSubmit } = this.props;\r\n    const { username, password } = this.state;\r\n    if (username && password) {\r\n      onSubmit(username, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <>\r\n        {/* The wrapping in an `ul.menu.float-left > li` is necessary for the sticky header to work */}\r\n        {/*<button\r\n          style={{ float: 'right' }}\r\n          href={'#'}\r\n          //id=\"loginSwitch\"\r\n          onClick={e => this.OpenModal(e)}\r\n          className=\"vf-button vf-button--sm vf-button--tertiary vf-button--outline\"\r\n        >\r\n          Admin login <i className=\"fa fa-key\" aria-hidden=\"true\" />\r\n        </button>*/}\r\n        <div>\r\n          <h3>\r\n            <a href=\"#\" onClick={e => this.OpenModal(e)}>\r\n              Login as administrator\r\n            </a>\r\n          </h3>\r\n          <p>Manage frameworks and competencies.</p>\r\n        </div>\r\n        <Modal\r\n          open={this.state.showModal}\r\n          onClose={e => this.CloseModal()}\r\n          center\r\n          classNames={{\r\n            overlay: 'customOverlay',\r\n            modal: 'customModal'\r\n          }}\r\n        >\r\n          <div>\r\n            <h3>Admin login</h3>\r\n            <p>\r\n              If you are a framework manager or content manager, please login to\r\n              continue\r\n            </p>\r\n          </div>\r\n          <div className=\"vf-form__item\">\r\n            <input\r\n              value={username}\r\n              name=\"username\"\r\n              onChange={event => this.onChange(event)}\r\n              type=\"text\"\r\n              autoComplete=\"username\"\r\n              placeholder=\"Username\"\r\n              className=\"vf-form__input\"\r\n            />\r\n          </div>\r\n          <div className=\"vf-form__item\">\r\n            <input\r\n              value={password}\r\n              name=\"password\"\r\n              onChange={event => this.onChange(event)}\r\n              type=\"password\"\r\n              autoComplete=\"current-password\"\r\n              placeholder=\"Password\"\r\n              className=\"vf-form__input\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <button\r\n              className=\"vf-button vf-button--sm vf-button--primary\"\r\n              onClick={() => this.submit()}\r\n            >\r\n              <i className=\"fa fa-key\" aria-hidden=\"true\" /> Login\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\n//import ProgressBar from '../../../shared/components/progress-bar/progress-bar';\r\nimport Navigation from '../navigation/Navigation';\r\nimport LoginForm from '../login-form/LoginForm';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nclass Masthead extends Component {\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    this.props.onLogin(username, password);\r\n  };\r\n\r\n  onLogout = async () => {\r\n    await this.props.onLogout();\r\n  };\r\n\r\n  render() {\r\n    // const { roles, user, isActive } = this.props;\r\n\r\n    const { roles, user, location } = this.props;\r\n    const avoidPath = location.pathname;\r\n\r\n    const bgStyle = {\r\n      backgroundImage:\r\n        'url(' +\r\n        JSON.stringify(\r\n          'https://acxngcvroo.cloudimg.io/v7/https://cms.competency.ebi.ac.uk/themes/custom/ebi_academy/images/mastheads/CH_Jigsaw.jpg'\r\n        ) +\r\n        ')',\r\n      marginBottom: 0\r\n    };\r\n\r\n    return (\r\n      <>\r\n        {!avoidPath.includes('profile/view') &&\r\n        !avoidPath.includes('profile/create') &&\r\n        !avoidPath.includes('profiles/compare') &&\r\n        !avoidPath.includes('profile/edit') &&\r\n        !avoidPath.includes('profile/map') ? (\r\n          <>\r\n            <section className=\"vf-hero | vf-u-fullbleed\" style={bgStyle}>\r\n              <div className=\"vf-hero__content | vf-box | vf-stack vf-stack--400\">\r\n                <h1 className=\"vf-hero__heading\">\r\n                  {/*<a className=\"vf-hero__heading_link\" href=\"/\">*/}\r\n                  Competency Hub\r\n                  {/*</a>*/}\r\n                </h1>\r\n                <p className=\"vf-hero__subheading\">\r\n                  Browse competencies, career profiles and training resources to\r\n                  advance your career in the life sciences\r\n                </p>\r\n                {/* <p className=\"vf-hero__text\">\r\n                  Browse competencies, career profiles and training resources to advance your career in the life sciences\r\n                </p>{' '} */}\r\n                <Link className=\"vf-hero__link\" to=\"/about\">\r\n                  Learn more about competencies and the Competency Hub\r\n                  <svg\r\n                    width=\"24\"\r\n                    height=\"24\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0C5.376.008.008 5.376 0 12zm13.707-5.209l4.5 4.5a1 1 0 010 1.414l-4.5 4.5a1 1 0 01-1.414-1.414l2.366-2.367a.25.25 0 00-.177-.424H6a1 1 0 010-2h8.482a.25.25 0 00.177-.427l-2.366-2.368a1 1 0 011.414-1.414z\"\r\n                      fill=\"\"\r\n                      fillRule=\"nonzero\"\r\n                    />\r\n                  </svg>\r\n                </Link>\r\n              </div>\r\n            </section>\r\n            <div className=\"vf-grid\">\r\n              <div />\r\n              <div />\r\n              <div />\r\n              <div />\r\n              <div />\r\n              <div>\r\n                {user && roles ? (\r\n                  <Navigation\r\n                    roles={roles}\r\n                    user={user}\r\n                    onLogout={this.onLogout}\r\n                  />\r\n                ) : (\r\n                  '' // <LoginForm onSubmit={this.onLogin} />\r\n                )}\r\n                {/*<ProgressBar isActive={isActive} />*/}\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          ''\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Masthead;\r\n","import React, { Component } from 'react';\r\n\r\nimport './EditInline.css';\r\n\r\nconst defaultProps = {\r\n  style: {} as Record<string, string | number>,\r\n  text: '',\r\n  change: (newValue: string) => {},\r\n  staticElement: 'div',\r\n  editable: true\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  oriValue: '',\r\n  value: '',\r\n  active: false\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class EditInline extends Component<Props, State> {\r\n  static defaultProps = defaultProps; // No idea why the props are marked as optional (see '!' in the code below)\r\n  readonly state: State = defaultState;\r\n  selfRef = React.createRef<HTMLDivElement>();\r\n  inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  componentDidMount() {\r\n    const { text } = this.props;\r\n    this.setState({ value: text!, oriValue: text! });\r\n    document.addEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    const { active } = this.state;\r\n    if (active && !prevState.active) {\r\n      // Unable to focus on the input element.\r\n      // this.inputRef.current && this.inputRef.current.focus();\r\n\r\n      // Dirty: The only way I was able to focus on the input element.\r\n      setTimeout(\r\n        () => this.inputRef.current && this.inputRef.current.focus(),\r\n        0\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleActive = (event: MouseEvent) => {\r\n    if (\r\n      this.selfRef.current &&\r\n      this.selfRef.current.contains(event.target as Node)\r\n    ) {\r\n      this.setState({ active: true });\r\n      return;\r\n    }\r\n    this.reset();\r\n  };\r\n\r\n  onChange(value: string) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  reset = () => {\r\n    const { oriValue, active } = this.state;\r\n    if (active) {\r\n      this.setState({ active: false, value: oriValue });\r\n    }\r\n  };\r\n\r\n  submit = () => {\r\n    const { change } = this.props;\r\n    const { value } = this.state;\r\n    change!(value);\r\n    this.setState({ active: false, oriValue: value });\r\n  };\r\n\r\n  render = () => {\r\n    const { style, staticElement, editable } = this.props;\r\n    const { value, active } = this.state;\r\n\r\n    if (!editable) {\r\n      return React.createElement(staticElement!, { style }, value);\r\n    }\r\n\r\n    if (!active) {\r\n      return React.createElement(staticElement!, { style, ref: this.selfRef }, [\r\n        value,\r\n        <>\r\n          <i\r\n            key=\"dummy\"\r\n            className=\"icon icon-common icon-edit icon-left-spacer edit-indicator cursor\"\r\n            aria-label=\"edit\"\r\n          />\r\n          <span className=\"edit-indicator cursor\">Edit</span>\r\n        </>\r\n      ]);\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-inline-container\" ref={this.selfRef}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inner-input vf-form__input\"\r\n          value={value}\r\n          onChange={event => this.onChange(event.target.value)}\r\n          ref={this.inputRef}\r\n          // autoFocus={true} // It only works when it is rendered after mounting\r\n        />\r\n        <div className=\"edit-inline-controls\">\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.submit}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-check\"\r\n              aria-label=\"accept changes\"\r\n            />\r\n          </button>\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.reset}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-undo\"\r\n              aria-label=\"undo changes\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nconst defaultProps = {\r\n  showMappingField: false\r\n};\r\n\r\ntype Props = {\r\n  title: string;\r\n  placeholder: string;\r\n  options: Record<'description' | 'uuid', string>[];\r\n  onCreate(newValue: string, uuid: string, mapping: string): any;\r\n} & Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  description: '',\r\n  uuid: '',\r\n  mapping: ''\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class SimpleForm extends Component<Props, State> {\r\n  static defaultProps = defaultProps;\r\n  readonly state = defaultState;\r\n\r\n  componentDidMount() {\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  setDefaultOption() {\r\n    const { options } = this.props;\r\n    if (options.length) {\r\n      const { uuid } = options[0];\r\n      this.setState({ uuid });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.setState(defaultState);\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  onChange = (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    event.preventDefault();\r\n    const { value } = event.currentTarget;\r\n    const name = event.currentTarget.name;\r\n    // https://github.com/Microsoft/TypeScript/issues/13948\r\n    if (name === 'uuid') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'description') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'mapping') {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const { onCreate } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    if (description.trim() && uuid) {\r\n      onCreate(description, uuid, mapping);\r\n      this.reset();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, placeholder, options, showMappingField } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    const selectOptions = options.map(({ description, uuid }) => (\r\n      <option key={uuid} value={uuid}>\r\n        {description}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <form onSubmit={this.onSubmit} className=\"callout\">\r\n        <h4>{title}</h4>\r\n        <div className=\"row\">\r\n          <div className=\"column large-7\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              name=\"description\"\r\n              value={description}\r\n              required\r\n              onChange={this.onChange}\r\n            />\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <select name=\"uuid\" value={uuid} required onChange={this.onChange}>\r\n              {selectOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <input type=\"submit\" className=\"button\" value=\"Create\" />\r\n          </div>\r\n          {showMappingField ? (\r\n            <div className=\"column\">\r\n              <label>\r\n                Maps to competency/attribute from other framework\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Framework (version), competency or attribute\"\r\n                  name=\"mapping\"\r\n                  value={mapping}\r\n                  onChange={this.onChange}\r\n                />\r\n              </label>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst defaultProps = {\r\n  message: 'Sorry, there was a problem when fetching the data!',\r\n  style: {} as Record<string, string | number>\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nexport const ErrorLoading: React.FC<Props> = ({ message, style }) => {\r\n  return (\r\n    <div className=\"margin-top-large callout alert\" style={style}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nErrorLoading.defaultProps = defaultProps;\r\n\r\nexport default ErrorLoading;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  versions: Version[];\r\n  framework: string;\r\n  style: string;\r\n};\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    right: 'auto',\r\n    bottom: 'auto',\r\n    marginRight: '-50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: '80%',\r\n    height: '50%',\r\n    border: '1px solid #000'\r\n  }\r\n};\r\n\r\nexport const FrameworkVersion: React.FC<Props> = ({ versions, framework }) => {\r\n  const [showNotes, setShowNotes] = useState(false);\r\n  const [notes, setNotes] = useState('');\r\n\r\n  //let versionNumber = '';\r\n\r\n  const versionItems = versions\r\n    .filter(version => version.number !== 'draft')\r\n    .map(version => (\r\n      <li key={version.id}>\r\n        <Link to={`/framework/${framework}/${version.number}`}>\r\n          {version.number}\r\n        </Link>{' '}\r\n        <button\r\n          className=\"vf-link ch_link\"\r\n          onClick={() => {\r\n            setNotes('Version: ' + version.number + version.release_notes);\r\n            setShowNotes(true);\r\n          }}\r\n        >\r\n          (release notes)\r\n        </button>\r\n      </li>\r\n    ));\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={showNotes} style={customStyles}>\r\n        <h4>Release notes for {framework} </h4>\r\n        <div style={{ float: 'right' }}>\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            X\r\n          </button>\r\n        </div>\r\n        {Parser(notes)}\r\n        {versionItems}\r\n        <div className=\"padding-top-large\">\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n      <div>\r\n        <h5>Framework versions</h5>\r\n        {versions.length === 0 ? (\r\n          'No previous versions'\r\n        ) : (\r\n          <ul>{versionItems}</ul>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FrameworkVersion;\r\n","import { apiUrl } from '../http/http';\r\n//requests fail when https is included in _links.type.href below\r\n//so we moved changed the value of apiUrl to exclude the s and only have http\r\nconst httpApiURl = apiUrl.replace('https', 'http');\r\n\r\nclass BodyService {\r\n  static createCompetency({\r\n    description,\r\n    domainId,\r\n    domainUuid,\r\n    mapping = '',\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${httpApiURl}/rest/type/node/competency`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${httpApiURl}/node/${domainId}?_format=hal_json`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'competency'\r\n        }\r\n      ],\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      _embedded: {\r\n        [`${httpApiURl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${httpApiURl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static createAttribute({\r\n    description,\r\n    attributeTypeId,\r\n    attributeTypeUuid,\r\n    competencyId,\r\n    competencyUuid,\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${httpApiURl}/rest/type/node/attribute`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${httpApiURl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${httpApiURl}/node/${attributeTypeId}?_format=hal_json`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'attribute'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${httpApiURl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ],\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static mutateCompetency(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateCompetencyPosition(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateAttribute(key, value) {\r\n    return BodyService.mutate(key, value, 'attribute');\r\n  }\r\n\r\n  static mutateDomain(key, value) {\r\n    return BodyService.mutate(key, value, 'domain');\r\n  }\r\n  // https://cms.competency.ebi.ac.uk\r\n  static mutate(key, value, target) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${httpApiURl}/rest/type/node/${target}`\r\n          // href: `http://cms.competency.ebi.ac.uk/rest/type/node/${target}`\r\n        }\r\n      },\r\n      [key]: [\r\n        {\r\n          value: value\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: target\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static publishFramework(framework, version, releaseNotes) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: releaseNotes\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: version\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createDraftFramework(framework) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: 'draft'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static toggleArchivingVersionedNode(framework, nodeId) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: nodeId\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static updateReleaseNotes(notes) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href:\r\n            //'https://dev-competency-mapper.pantheonsite.io/rest/type/taxonomy_term/version'\r\n            `${httpApiURl}/rest/type/taxonomy_term/version`\r\n        }\r\n      },\r\n      vid: [\r\n        {\r\n          target_id: 'version'\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: notes\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  // Change domain service\r\n\r\n  static changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${httpApiURl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${httpApiURl}/rest/type/node/competency`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${httpApiURl}/node/${domainId}?_format=hal_json`\r\n        }\r\n      },\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      type: {\r\n        target_id: 'competency'\r\n      },\r\n      _embedded: {\r\n        [`${httpApiURl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  // Change competency service\r\n\r\n  static changeAttributeSettings(\r\n    attribuiteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${httpApiURl}/node/${attribuiteId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${httpApiURl}/rest/type/node/attribute`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${httpApiURl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${httpApiURl}/node/${attributeTypeId}?_format=hal_json`\r\n        }\r\n      },\r\n      type: {\r\n        target_id: 'attribute'\r\n      },\r\n      _embedded: {\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${httpApiURl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${httpApiURl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${httpApiURl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static editResource(\r\n    resourceID,\r\n    title,\r\n    dates,\r\n    dates2,\r\n    type,\r\n    description,\r\n    location,\r\n    url,\r\n    target_audience,\r\n    learning_outcomes,\r\n    keywords,\r\n    organisers,\r\n    trainers\r\n  ) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${httpApiURl}/rest/type/node/training_resource`\r\n        }\r\n      },\r\n      title: [\r\n        {\r\n          value: title\r\n        }\r\n      ],\r\n\r\n      type: [\r\n        {\r\n          target_id: 'training_resource'\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createBulkData(parentID, versionID, newData, type, addtional) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      body: [\r\n        {\r\n          value: newData\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: parentID\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: versionID\r\n        }\r\n      ],\r\n      field_type: [\r\n        {\r\n          value: type\r\n        }\r\n      ],\r\n      field_additional_information: [\r\n        {\r\n          value: addtional\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static saveSorting(items) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      body: [\r\n        {\r\n          value: items\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\nexport default BodyService;\r\n","import HttpService from '../http/http';\r\nimport Body from './body';\r\n\r\nclass CompetencyService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CompetencyService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CompetencyService.instance = this;\r\n  }\r\n\r\n  async getFramework(framework) {\r\n    const response = await this.http.get(\r\n      `/api/v1/framework/${framework}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedDraftFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/edit?_format=json&timestamp=${Date.now()}`,\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/${version}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworks() {\r\n    const response = await this.http.get(`/api/v1/framework?_format=json`);\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getAllVersionedFrameworks() {\r\n    // const response = await this.http.get(\r\n    //   `/api/version_manager?_format=json&timestamp=${Date.now()}`\r\n    // );\r\n    const response = await this.http.get(`/api/version_manager?_format=json`);\r\n    return response.data;\r\n  }\r\n\r\n  async createAttribute(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createAttribute(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async createCompetency(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createCompetency(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetency(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetency(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchDomain(domainId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${domainId}?_format=hal_json`,\r\n      Body.mutateDomain(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetencyPosition(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetencyPosition(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async toggleArchivingVersionedNode(framework, nodeId) {\r\n    const response = await this.http.patch(\r\n      `/api/${framework}/edit?_format=json`,\r\n      Body.toggleArchivingVersionedNode(framework, nodeId),\r\n      'json'\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttribute(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttributePosition(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async publishFramework(framework, version, releaseNotes) {\r\n    const response = await this.http.patch(\r\n      '/api/version_manager?_format=json',\r\n      Body.publishFramework(framework, version, releaseNotes),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createDraftFramework(framework) {\r\n    const response = await this.http.post(\r\n      '/api/version_manager?_format=json',\r\n      Body.createDraftFramework(framework),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async updateReleaseNotes(notes, versionId) {\r\n    const response = await this.http.patch(\r\n      `/taxonomy/term/${versionId}?_format=hal_json`,\r\n      Body.updateReleaseNotes(notes)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.changeDomain(competencyId, domainId, domainUuid, mapping)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async editResource(\r\n    resourceID,\r\n    title,\r\n    dates,\r\n    dates2,\r\n    type,\r\n    description,\r\n    location,\r\n    url,\r\n    target_audience,\r\n    learning_outcomes,\r\n    keywords,\r\n    organisers,\r\n    trainers\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${resourceID}?_format=hal_json`,\r\n      Body.editResource(\r\n        resourceID,\r\n        title,\r\n        dates,\r\n        dates2,\r\n        type,\r\n        description,\r\n        location,\r\n        url,\r\n        target_audience,\r\n        learning_outcomes,\r\n        keywords,\r\n        organisers,\r\n        trainers\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeAttributeSettings(\r\n    attribiuteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${attribiuteId}?_format=hal_json`,\r\n      Body.changeAttributeSettings(\r\n        attribiuteId,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async demap(resource, items) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&items=` +\r\n        items +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async attrmap(resource, attributes, framework_id) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&attributes=` +\r\n        attributes +\r\n        `&framework_id=` +\r\n        framework_id +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createBulkData(parentID, versionID, newData, type, addtional) {\r\n    const response = await this.http.post(\r\n      '/api/data_manager?_format=json',\r\n      Body.createBulkData(parentID, versionID, newData, type, addtional),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async saveSorting(items) {\r\n    const response = await this.http.patch(\r\n      '/api/data_manager?_format=json',\r\n      Body.saveSorting(items),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CompetencyService;\r\n","class ActiveRequestsService {\r\n  static instance;\r\n  counter = 0;\r\n  callbacks = [];\r\n\r\n  get isActive() {\r\n    return !!this.counter;\r\n  }\r\n\r\n  constructor() {\r\n    if (ActiveRequestsService.instance) {\r\n      return ActiveRequestsService.instance;\r\n    }\r\n\r\n    ActiveRequestsService.instance = this;\r\n  }\r\n\r\n  addEventListener(fn) {\r\n    return this.callbacks.push(fn);\r\n  }\r\n\r\n  removeEventListener(index) {\r\n    return delete this.callbacks[index - 1];\r\n  }\r\n\r\n  startRequest() {\r\n    if (this.counter === 0) {\r\n      this.callbacks.forEach(fn => fn && fn(true));\r\n    }\r\n    ++this.counter;\r\n  }\r\n\r\n  finishRequest() {\r\n    if (this.counter === 1) {\r\n      this.callbacks.forEach(fn => fn && fn(false));\r\n    }\r\n\r\n    if (this.counter > 0) {\r\n      --this.counter;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActiveRequestsService;\r\n","// In modern browser (es2018), instead of `reduce` it is possible to call `flat`\r\nexport const safeFlat = array =>\r\n  Array.prototype.flat\r\n    ? array.flat()\r\n    : array.reduce((acc, cur) => [...acc, ...cur], []);\r\n\r\nconst tagsReg = new RegExp('</?.+?/?>', 'g');\r\nconst nbspReg = /&nbsp;/g;\r\n\r\nexport const removeHtmlTags = (htmlString, replaceBy = '') =>\r\n  htmlString.replace(tagsReg, replaceBy).replace(nbspReg, ' ');\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat } from '../services/util/util';\r\n\r\nclass ManageAttributes extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    // framework level\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    frameworkVersion: '',\r\n    frameworStatus: '',\r\n    attributeTypes: [], // defined at framework level\r\n    versions: [],\r\n\r\n    // domain level\r\n    domainId: '',\r\n    domainName: '',\r\n\r\n    // competency level\r\n    competencyId: this.props.match.params.cid,\r\n    competencyUuid: '',\r\n    competencyName: '',\r\n    competencyData: [],\r\n\r\n    path: this.props.location.pathname.split('/'),\r\n\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scroll(0, 0);\r\n    this.loadData();\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions() {\r\n    const { framework } = this.state;\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const attributeTypes = currentFramework[0].attribute_types.map(\r\n        attribute => ({ description: attribute.title, uuid: attribute.uuid })\r\n      );\r\n      this.setState({\r\n        versions: currentFramework[0].versions.reverse(),\r\n        attributeTypes\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchFramework() {\r\n    const { framework, versions, competencyId } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    const competencyMatch = this.filterByCompetencyId(\r\n      frameworkData,\r\n      competencyId\r\n    );\r\n\r\n    if (competencyMatch.length) {\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        domainName: competencyMatch[0].domainTitle,\r\n        domainId: competencyMatch[0].domainId,\r\n        competencyUuid: competencyMatch[0].uuid,\r\n        competencyName: competencyMatch[0].title,\r\n        competencyData: competencyMatch[0],\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  filterByCompetencyId(data, id) {\r\n    return safeFlat(\r\n      data.map(item =>\r\n        safeFlat(\r\n          item.domains.map(domain =>\r\n            domain.competencies\r\n              .filter(competency => competency.id === id)\r\n              .map(competency => {\r\n                competency.domainTitle = domain.title;\r\n                competency.domainId = domain.nid;\r\n                return competency;\r\n              })\r\n          )\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  createAttribute = async (description, attributeTypeUuid, mapping) => {\r\n    const {\r\n      competencyId,\r\n      competencyUuid,\r\n      attributeTypes,\r\n      versions\r\n    } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const attributeTypeId = attributeTypes.find(\r\n        attribute => attribute.uuid === attributeTypeUuid\r\n      ).id;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createAttribute({\r\n        description,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editAttribute(attributeId, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(attributeId, 'title', title);\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editAttributePosition(attributeId, position) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttributePosition(\r\n        attributeId,\r\n        'field_number',\r\n        position\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(attributeId, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(\r\n        attributeId,\r\n        'field_archived',\r\n        isArchived === '1' ? false : true\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getAttributeRows(attributeType) {\r\n    const { competencyData, editable } = this.state;\r\n\r\n    return competencyData.attributes\r\n      .filter(attribute => attribute.type === attributeType.description)\r\n      .map(attribute => {\r\n        if (editable) {\r\n          return (\r\n            <tr key={attribute.uuid}>\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.title}\r\n                  change={newValue =>\r\n                    this.editAttribute(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.field_number}\r\n                  change={newValue =>\r\n                    this.editAttributePosition(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td>\r\n                <button\r\n                  className=\"cursor\"\r\n                  onClick={() =>\r\n                    this.toggleArchive(attribute.id, attribute.archived)\r\n                  }\r\n                >\r\n                  {attribute.archived === '1' ? (\r\n                    <span className=\"fas fa-toggle-on\">\r\n                      <span>Archived</span>\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"fas fa-toggle-off\" />\r\n                  )}\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <Link\r\n                  to={`/framework/${this.state.framework}/competency/${\r\n                    this.state.competencyId\r\n                  }/attribute/${attribute.id}/settings`}\r\n                >\r\n                  <i className=\"fas fa-cog\" />\r\n                </Link>\r\n              </td>\r\n            </tr>\r\n          );\r\n        }\r\n\r\n        if (attribute.archived === '1') {\r\n          return null;\r\n        }\r\n        return (\r\n          <tr key={attribute.uuid}>\r\n            <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={attribute.title}\r\n                change={newValue => this.editAttribute(attribute.id, newValue)}\r\n                editable={editable}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributeList() {\r\n    const { attributeTypes, editable } = this.state;\r\n    return attributeTypes.map(attributeType => (\r\n      <React.Fragment key={attributeType.uuid}>\r\n        <tr className=\"secondary-background-important white-color\">\r\n          <td>\r\n            <strong>\r\n              <em>{attributeType.description}</em>\r\n            </strong>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getAttributeRows(attributeType)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      attributeTypes,\r\n      versions,\r\n      domainId,\r\n      domainName,\r\n      competencyName,\r\n      competencyData,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (competencyData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage attributes</h2>\r\n        <h4>\r\n          <Link to={`/framework/${framework}/manage/competencies`}>\r\n            {frameworkName}\r\n          </Link>\r\n          {' / '}\r\n          <Link to={`/framework/${framework}/manage/competencies/${domainId}`}>\r\n            {domainName}\r\n          </Link>\r\n          {' / '}\r\n          {competencyName}\r\n        </h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new attribute\"\r\n            placeholder=\"Attribute description\"\r\n            options={attributeTypes}\r\n            onCreate={this.createAttribute}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getAttributeList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageAttributes);\r\n","import React, { FC, useState } from 'react';\r\n\r\nimport Modal from 'react-modal';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  release(version: string, notes: string): void;\r\n  updateNotes(notes: string): void;\r\n  createDraft(): void;\r\n  versions: Version[];\r\n  editable: false;\r\n};\r\n\r\nexport const VersionControls: React.FC<Props> = ({\r\n  release,\r\n  updateNotes,\r\n  createDraft,\r\n  versions,\r\n  editable\r\n}) => {\r\n  const liveVersion = versions.reduce((prev, curr) => {\r\n    if (curr.status === 'live') {\r\n      return curr.number;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const originalNotes = versions.reduce((prev, curr) => {\r\n    if (curr.number === 'draft') {\r\n      return curr.release_notes;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const [version, setVersion] = useState('');\r\n  const [notes, setNotes] = useState(originalNotes);\r\n  const [pressedRelease, setPressedRelease] = useState(false);\r\n  const [pressedNotes, setPressedNotes] = useState(false);\r\n\r\n  const reset = () => {\r\n    setVersion('');\r\n    setPressedRelease(false);\r\n  };\r\n\r\n  const publish = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const cleanNotes = notes.trim();\r\n    if (pressedRelease && version && cleanNotes) {\r\n      release(version, cleanNotes);\r\n      reset();\r\n    }\r\n  };\r\n\r\n  if (editable) {\r\n    return (\r\n      <div>\r\n        <Modal isOpen={pressedNotes}>\r\n          <CKEditor\r\n            content={notes}\r\n            events={{\r\n              change: (event: any) => setNotes(event.editor.getData())\r\n            }}\r\n          />\r\n          <div className=\"padding-top-large\">\r\n            <span className=\"padding-right-small\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={() => {\r\n                  setNotes(originalNotes);\r\n                  setPressedNotes(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </span>\r\n            <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                updateNotes(notes);\r\n                setPressedNotes(false);\r\n              }}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n        <Modal isOpen={pressedRelease}>\r\n          <form onSubmit={publish}>\r\n            <label>\r\n              Version{' '}\r\n              {liveVersion\r\n                ? `(live version ${liveVersion})`\r\n                : '(no live version)'}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"1.0.0\"\r\n                value={version}\r\n                required\r\n                onChange={event => setVersion(event.currentTarget.value.trim())}\r\n              />\r\n            </label>\r\n            <CKEditor\r\n              content={notes}\r\n              events={{\r\n                change: (event: any) => setNotes(event.editor.getData())\r\n              }}\r\n            />\r\n            <div className=\"padding-top-large\">\r\n              <span className=\"padding-right-small\">\r\n                <button className=\"button\" onClick={reset}>\r\n                  Cancel\r\n                </button>\r\n              </span>\r\n              <button className=\"button\" type=\"submit\">\r\n                Publish\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </Modal>\r\n        <span className=\"padding-right-small\">\r\n          <button\r\n            className=\"vf-button vf-button--tertiary vf-button--sm\"\r\n            onClick={() => setPressedRelease(true)}\r\n          >\r\n            Release new version <i className=\"icon icon-common icon-send\" />\r\n          </button>\r\n        </span>\r\n        <button\r\n          className=\"vf-button vf-button--tertiary vf-button--sm\"\r\n          onClick={() => setPressedNotes(true)}\r\n        >\r\n          Update release notes <i className=\"icon icon-common icon-edit\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"padding-right-small\">\r\n        <button\r\n          className=\"vf-button vf-button--tertiary vf-button--sm\"\r\n          onClick={() => createDraft()}\r\n        >\r\n          Create draft\r\n        </button>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControls;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\nimport VersionControls from '../containers/version-controls/VersionControls';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nclass ManageCompetencies extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkName: '',\r\n    frameworkData: [],\r\n    frameworkVersion: '',\r\n    frameworkVersionId: '',\r\n    frameworkStatus: '',\r\n    competencyTypes: [],\r\n    versions: [],\r\n    loadingError: false,\r\n    editable: false,\r\n    allowedFrms: []\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework } = props.match.params;\r\n    if (framework !== state.framework) {\r\n      return {\r\n        framework,\r\n        frameworkData: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, domainId } = this.props.match.params;\r\n    await this.loadData(framework);\r\n\r\n    if (domainId) {\r\n      setTimeout(() => {\r\n        const ref = this.refs[domainId];\r\n        if (ref) {\r\n          ref.scrollIntoView();\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkData, loadingError } = this.state;\r\n    if (framework !== prevState.framework) {\r\n      if (frameworkData.length === 0 && !loadingError) {\r\n        this.loadData(framework);\r\n      }\r\n    }\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework) {\r\n    const { versions } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      this.setState({ frameworkVersionId: draftVersion[0].id });\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    if (frameworkData.length) {\r\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\r\n        description: domain.title,\r\n        uuid: domain.uuid\r\n      }));\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkData,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        competencyTypes,\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  createCompetency = async (description, domainUuid, mapping) => {\r\n    const { framework, frameworkData, versions } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const domainId = frameworkData[0].domains.find(\r\n        domain => domain.uuid === domainUuid\r\n      ).nid;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createCompetency({\r\n        description,\r\n        domainId,\r\n        domainUuid,\r\n        mapping,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editCompetency(cid, title) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetency(cid, 'title', title);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editCompetencyPosition(cid, position) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetencyPosition(\r\n        cid,\r\n        'field_number',\r\n        position\r\n      );\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(cid, isArchived) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.toggleArchivingVersionedNode(framework, cid);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  releaseNewVersion = async (version, notes) => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.publishFramework(framework, version, notes);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  updateNotes = async notes => {\r\n    const { framework, frameworkVersionId } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.updateReleaseNotes(\r\n        notes,\r\n        frameworkVersionId\r\n      );\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  createDraft = async () => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.createDraftFramework(framework);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  getCompetencyList() {\r\n    const { frameworkData, editable } = this.state;\r\n    return frameworkData[0].domains.map(domain => (\r\n      <React.Fragment key={domain.nid}>\r\n        <tr\r\n          className=\"secondary-background-important white-color\"\r\n          ref={domain.nid}\r\n        >\r\n          <td>\r\n            <h4>{domain.title}</h4>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          <td>Attributes</td>\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getCompetencyRows(domain.competencies)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  getCompetencyRows(competencies) {\r\n    const { framework, editable } = this.state;\r\n    return competencies.map(competency => {\r\n      if (editable) {\r\n        return (\r\n          <tr key={competency.id}>\r\n            <td className={competency.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={competency.title}\r\n                change={newValue =>\r\n                  this.editCompetency(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n            <td>\r\n              <InlineEdit\r\n                text={competency.position}\r\n                change={newValue =>\r\n                  this.editCompetencyPosition(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n\r\n            <td>\r\n              <button\r\n                className=\"cursor\"\r\n                onClick={this.toggleArchive.bind(\r\n                  this,\r\n                  competency.id,\r\n                  competency.archived\r\n                )}\r\n              >\r\n                {competency.archived === '1' ? (\r\n                  <span className=\"fas fa-toggle-on\">\r\n                    <span>Archived</span>\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"fas fa-toggle-off\" />\r\n                )}\r\n              </button>\r\n            </td>\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/manage/competencies/${\r\n                  competency.id\r\n                }/manage-attributes`}\r\n              >\r\n                <i className=\"fas fa-sitemap\" />\r\n              </Link>\r\n            </td>\r\n\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/competency/${\r\n                  competency.id\r\n                }/settings`}\r\n              >\r\n                <i className=\"fas fa-cog\" />\r\n              </Link>\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n\r\n      if (competency.archived === '1') {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <tr key={competency.id}>\r\n          <td>\r\n            <InlineEdit\r\n              text={competency.title}\r\n              change={newValue => this.editCompetency(competency.id, newValue)}\r\n              editable={editable}\r\n            />\r\n          </td>\r\n          <td>\r\n            <Link\r\n              to={`/framework/${framework}/manage/competencies/${\r\n                competency.id\r\n              }/manage-attributes`}\r\n            >\r\n              <i className=\"fas fa-sitemap\" />\r\n            </Link>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // if(this.state.allowedFrms.length > 0){\r\n    //   if(this.state.allowedFrms.indexOf(this.state.framework) == -1){\r\n    //     return(<h4 className=\"callout warning\"> <i className=\"icon icon-common icon-exclamation-triangle\"></i> You are not authorised to manage this framework </h4> );\r\n    //   }\r\n    // }\r\n\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkData,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      competencyTypes,\r\n      versions,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (frameworkData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage framework</h2>\r\n        <h4>{frameworkName}</h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        <VersionControls\r\n          editable={editable}\r\n          createDraft={this.createDraft}\r\n          versions={versions}\r\n          release={this.releaseNewVersion}\r\n          updateNotes={this.updateNotes}\r\n        />\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new competency\"\r\n            placeholder=\"Competency description\"\r\n            options={competencyTypes}\r\n            onCreate={this.createCompetency}\r\n            showMappingField={true}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getCompetencyList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageCompetencies);\r\n","import React from 'react';\n\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\n\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass ManageAttribute extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingError: false,\n      editable: false,\n      showModal: false,\n      parentID: '',\n      parentTitle: '',\n      showAttributeModal: '',\n      attributeType: '',\n      attributeTypeTitle: '',\n      newAttributes: '',\n      competency: [],\n      typetitle: ''\n    };\n    this.handleOpenAttributeModal = this.handleOpenAttributeModal.bind(this);\n    this.handleCloseAttributeModal = this.handleCloseAttributeModal.bind(this);\n    this.OpenModalPosition = this.OpenModalPosition.bind(this);\n    this.closeModalPosition = this.closeModalPosition.bind(this);\n    //this.archiveAttribute = this.archiveAttribute.bind(this);\n  }\n\n  OpenModalPosition(e, competency) {\n    this.setState({ showModalPosition: true });\n    this.setState({ competency: competency });\n    this.setState({ typetitle: e.target.dataset.typetitle });\n    console.log(e.target.dataset.typetitle);\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  handleOpenAttributeModal(e) {\n    this.setState({ showAttributeModal: true });\n    this.setState({ parentID: e.target.dataset.competencyid });\n    this.setState({ parentTitle: e.target.dataset.competencytitle });\n    this.setState({ attributeType: e.target.dataset.attributetype });\n    this.setState({ attributeTypeTitle: e.target.dataset.typetitle });\n\n    e.preventDefault();\n  }\n\n  handleCloseAttributeModal() {\n    this.setState({ showAttributeModal: false });\n  }\n\n  async editAttribute(aid, title) {\n    const { framework, loadData } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchCompetency(aid, 'title', title);\n      await loadData(framework);\n      this.props.enqueueSnackbar('Attribute updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  setAttributes(e) {\n    this.setState({ newAttributes: e.target.value });\n    console.log(e.target.value);\n  }\n\n  async saveAttributes(e) {\n    const { frameworkData, framework, loadData } = this.props;\n    const { newAttributes, attributeType, parentID } = this.state;\n\n    let versionID = frameworkData[0].version_id;\n    let newData = newAttributes;\n    let type = 'attribute';\n    let addtional = attributeType;\n    let response = '';\n    try {\n      //this.activeRequests.startRequest();\n      response = this.competencyService.createBulkData(\n        parentID,\n        versionID,\n        newData,\n        type,\n        addtional\n      );\n      console.log(response);\n      loadData(framework);\n      this.props.enqueueSnackbar('Attributes created', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      //this.activeRequests.finishRequest();\n    }\n    e.preventDefault();\n    this.handleCloseAttributeModal();\n  }\n\n  async archiveAttribute(attribute, isArchived) {\n    const { framework, loadData } = this.props;\n\n    try {\n      //this.activeRequests.startRequest();\n      await this.competencyService.toggleArchivingVersionedNode(\n        framework,\n        attribute\n      );\n      loadData(framework);\n      this.props.enqueueSnackbar('Attribute status updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      //this.activeRequests.finishRequest();\n    }\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n    console.log(this.dragged.parentNode);\n    //update state and call api for PATCH request\n    //var data = this.props.frameworkData[0].domains;\n    var data = this.state.competency.attributes;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ sorting: data });\n    console.log(data.map(d => d.id));\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  saveSorting = async data => {\n    const { framework } = this.props;\n    const { sorting } = this.state;\n    let items = sorting.map(d => d.id);\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.saveSorting(items);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Items updated', {\n        variant: 'success'\n      });\n    } catch {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.setState({ sorting: undefined });\n      this.closeModalPosition();\n      //window.location.reload()\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  getAttributes(frameworkDef, frameworkData, competency, domain, editableFrm) {\n    return frameworkDef.map(def => (\n      <div className=\"row\">\n        <div className=\"column medium-12\">\n          <li className=\"attribute_type\">\n            <em>{def.title}</em>\n            <span style={{ display: 'flex' }}>\n              {editableFrm === true ? (\n                <button\n                  className=\"ch_link addButton icon icon-common icon-plus-circle icon-custom \"\n                  data-competencyid={competency.id}\n                  data-competencytitle={competency.title}\n                  data-typetitle={def.title}\n                  data-attributetype={def.id}\n                  title=\"Add attributes\"\n                  onClick={e => this.handleOpenAttributeModal(e)}\n                >\n                  Add {def.title}{' '}\n                </button>\n              ) : (\n                ''\n              )}\n            </span>\n\n            <ul>\n              {competency.attributes.map(attr => {\n                if (attr.type === def.title)\n                  return (\n                    <li\n                      key={attr.id}\n                      className={attr.archived === '1' ? 'strikeout' : ''}\n                    >\n                      <div className=\"attribute_title\">\n                        <InlineEdit\n                          style={{ display: 'inline' }}\n                          text={attr.title}\n                          change={newValue =>\n                            this.editAttribute(attr.id, newValue)\n                          }\n                          editable={\n                            attr.archived === '1' || editableFrm === false\n                              ? false\n                              : true\n                          }\n                        />\n                        {editableFrm === true ? (\n                          <>\n                            <span className=\"edit-indicator\">\n                              <button\n                                className=\"ch_link\"\n                                onClick={() =>\n                                  this.archiveAttribute(attr.id, attr.archived)\n                                }\n                              >\n                                {attr.archived === '1' ? (\n                                  <span className=\"fas fa-toggle-on icon-left-spacer\">\n                                    <span>Archived</span>\n                                  </span>\n                                ) : (\n                                  <span className=\"fas fa-toggle-off icon-left-spacer\">\n                                    {' '}\n                                    <span> Archive</span>\n                                  </span>\n                                )}\n                              </button>\n                            </span>\n                            <span className=\"edit-indicator\">\n                              <button\n                                className=\"ch_link addButton icon icon-common icon-sort\"\n                                title=\"Change order\"\n                                data-typetitle={def.title}\n                                onClick={e =>\n                                  this.OpenModalPosition(e, competency)\n                                }\n                              >\n                                Change order{' '}\n                              </button>\n                            </span>\n                          </>\n                        ) : (\n                          ''\n                        )}\n                      </div>\n                    </li>\n                  );\n                return null;\n              })}\n            </ul>\n\n            <hr />\n          </li>\n        </div>\n        {/*<div className=\"column medium-4\" style={{ display: 'flex' }}>\n          <button\n            className=\"addButton\"\n            data-competencyid={competency.id}\n            data-competencytitle={competency.title}\n            data-typetitle={def.title}\n            data-attributetype={def.id}\n            title=\"Add attributes\"\n            onClick={e => this.handleOpenAttributeModal(e)}\n          >\n            Add {def.title} <i className=\"icon icon-common icon-plus-circle\" />\n          </button>\n          <button\n            className=\"addButton\"\n            title=\"Change order\"\n            data-typetitle={def.title}\n            onClick={e => this.OpenModalPosition(e, competency)}\n          >\n            Change order <i className=\"icon icon-common icon-sort\" />\n          </button>\n            </div>*/}\n      </div>\n    ));\n  }\n\n  render() {\n    const {\n      frameworkDef,\n      frameworkData,\n      competency,\n      domain,\n      editableFrm\n    } = this.props;\n    const {\n      //parentID,\n      parentTitle,\n      //attributeType,\n      attributeTypeTitle\n    } = this.state;\n    return (\n      <div>\n        {this.getAttributes(\n          frameworkDef,\n          frameworkData,\n          competency,\n          domain,\n          editableFrm\n        )}\n        {/* Modal for adding attributes */}\n        <Modal\n          open={this.state.showAttributeModal}\n          onClose={this.handleCloseAttributeModal}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Add {attributeTypeTitle} attributes</h3>\n          <h4>{parentTitle} </h4>\n          <h5>Please enter one {attributeTypeTitle} attribute per line</h5>\n          <form className=\"vf-form\">\n            <textarea\n              id=\"attribute_txt\"\n              rows=\"5\"\n              onChange={e => this.setAttributes(e)}\n              required\n              className=\"vf-form__input\"\n            />\n            <button\n              className=\"vf-button vf-button--primary vf-button--sm\"\n              onClick={e => this.saveAttributes(e)}\n            >\n              Save\n            </button>\n          </form>\n        </Modal>\n\n        {/* Modal for sorting attribute positions */}\n\n        <Modal\n          open={this.state.showModalPosition}\n          onClose={this.closeModalPosition}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Change order</h3>\n          <p>Please drag and drop items to change order</p>\n          {this.state.competency.id ? (\n            <>\n              <h4>{this.state.competency.title}</h4>\n              <ul onDragOver={this.dragOver.bind(this)}>\n                {this.state.competency.attributes.map((attribute, i) => {\n                  if (attribute.type === this.state.typetitle) {\n                    return (\n                      <li\n                        style={{ listStyleType: 'none' }}\n                        data-position={i}\n                        key={attribute.position}\n                        draggable=\"true\"\n                        onDragEnd={this.dragEnd.bind(this)}\n                        onDragStart={this.dragStart.bind(this)}\n                      >\n                        <i className=\"icon icon-common icon-move\" />{' '}\n                        {attribute.title}\n                      </li>\n                    );\n                  }\n                  return null;\n                })}\n              </ul>\n            </>\n          ) : (\n            ''\n          )}\n\n          <button\n            className=\"vf-button vf-button--primary vf-button--sm\"\n            onClick={this.saveSorting}\n          >\n            Save\n          </button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(ManageAttribute);\n","import React from 'react';\nimport CKEditor from 'react-ckeditor-component';\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\n//import ErrorLoading from '../components/error-loading/ErrorLoading';\nimport Parser from 'html-react-parser';\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport ManageAttribute from './ManageAttribute';\n\nimport Collapsible from 'react-collapsible';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass ManageCompetency extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingError: false,\n      editable: false,\n      domain: [],\n      comp: '',\n      mapping: ''\n    };\n    this.OpenModalPosition = this.OpenModalPosition.bind(this);\n    this.closeModalPosition = this.closeModalPosition.bind(this);\n    this.OpenModalMapping = this.OpenModalMapping.bind(this);\n    this.CloseModalMapping = this.CloseModalMapping.bind(this);\n  }\n\n  OpenModalPosition(e, domain) {\n    this.setState({ showModalPosition: true });\n    this.setState({ domain: domain });\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  OpenModalMapping(e, competency) {\n    this.setState({ showModalMapping: true });\n    this.setState({ comp: competency });\n    this.setState({ mapping: competency.mapped_other_competency });\n  }\n\n  CloseModalMapping() {\n    this.setState({ showModalMapping: false });\n  }\n\n  async editCompetency(competency, title) {\n    const { framework } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchCompetency(competency, 'title', title);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Competency updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  async editMapping(e, competency, mapping) {\n    e.preventDefault();\n    const { framework } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchCompetency(\n        competency,\n        'field_map_other_competency',\n        mapping\n      );\n      await this.props.loadData(framework);\n      this.CloseModalMapping();\n      this.props.enqueueSnackbar('Record updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  async archiveCompetency(competency, isArchived) {\n    const { framework, loadData } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.toggleArchivingVersionedNode(\n        framework,\n        competency\n      );\n      loadData(framework);\n      this.props.enqueueSnackbar('Competency status updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n      console.log(e);\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n\n    //update state and call api for PATCH request\n    //var data = this.props.frameworkData[0].domains;\n    var data = this.state.domain.competencies;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ sorting: data });\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  saveSorting = async data => {\n    const { framework } = this.props;\n    const { sorting } = this.state;\n    let items = sorting.map(d => d.id);\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.saveSorting(items);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Items updated', {\n        variant: 'success'\n      });\n    } catch {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.setState({ sorting: undefined });\n      this.closeModalPosition();\n      //window.location.reload()\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  getCompetencies(competencies) {\n    const {\n      frameworkData,\n      domain,\n      frameworkDef,\n      framework,\n      loadData,\n      editableFrm\n    } = this.props;\n    return competencies.map(competency => (\n      <li\n        id={competency.id}\n        key={competency.id}\n        style={{ listStyleType: 'none' }}\n      >\n        <div className=\"row competency_title\">\n          <h3 className={competency.archived === '1' ? 'strikeout' : ''}>\n            <InlineEdit\n              style={{ display: 'inline' }}\n              text={competency.title}\n              change={newValue => this.editCompetency(competency.id, newValue)}\n              editable={\n                competency.archived === '1' || editableFrm === false\n                  ? false\n                  : true\n              }\n            />\n            {editableFrm === true ? (\n              <>\n                <span className=\"edit-indicator\">\n                  <button\n                    className=\"ch_link\"\n                    onClick={() =>\n                      this.archiveCompetency(competency.id, competency.archived)\n                    }\n                  >\n                    {competency.archived === '1' ? (\n                      <span className=\"fas fa-toggle-on icon-left-spacer\">\n                        <span>Archived</span>\n                      </span>\n                    ) : (\n                      <span className=\"fas fa-toggle-off icon-left-spacer\">\n                        {' '}\n                        <span> Archive</span>\n                      </span>\n                    )}\n                  </button>\n                </span>\n\n                <span className=\"edit-indicator\">\n                  <button\n                    className=\"ch_link\"\n                    onClick={e => this.OpenModalPosition(e, domain)}\n                  >\n                    <span className=\"fas fa-sort icon-left-spacer\">\n                      <span>Change order</span>\n                    </span>\n                  </button>\n                </span>\n              </>\n            ) : (\n              ''\n            )}\n          </h3>\n        </div>\n\n        <Collapsible\n          trigger={\n            <div className=\"open-close-title collapsible-arrows\">\n              <span className=\"icon icon-common icon-angle-right icon-custom\" />\n            </div>\n          }\n          triggerWhenOpen={\n            <div className=\"open-close-title collapsible-arrows\">\n              <span className=\"icon icon-common icon-angle-down icon-custom\" />\n            </div>\n          }\n        >\n          <em>\n            <span>\n              This competency maps to:\n              {Parser(competency.mapped_other_competency || '')}\n              <button\n                className=\"ch_link\"\n                onClick={e => this.OpenModalMapping(e, competency)}\n              >\n                <span className=\"fas fa-edit icon-left-spacer\" />\n              </button>\n            </span>\n          </em>\n          <ul>\n            <ManageAttribute\n              framework={framework}\n              frameworkData={frameworkData}\n              domain={domain}\n              competency={competency}\n              frameworkDef={frameworkDef}\n              loadData={loadData}\n              editableFrm={editableFrm}\n            />\n          </ul>\n        </Collapsible>\n      </li>\n    ));\n  }\n\n  render() {\n    const { frameworkData, domain } = this.props;\n    const competencies = frameworkData.map(item =>\n      item.domains.map(item => {\n        if (item.nid === domain.nid) {\n          return <ul>{this.getCompetencies(item.competencies)}</ul>;\n        }\n        return null;\n      })\n    );\n    return (\n      <>\n        <div key={'domainlist'}>\n          {competencies\n            ? competencies\n            : 'No competencies found. Add new competencies to start.'}\n        </div>\n        <Modal\n          open={this.state.showModalMapping}\n          onClose={this.CloseModalMapping}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <form\n            onSubmit={e =>\n              this.editMapping(e, this.state.comp.id, this.state.mapping)\n            }\n          >\n            <div className=\"column medium-9\">\n              <h3>{this.state.comp.title}</h3>\n              <h4>This competency maps to:</h4>\n              {console.log(this.state.comp.id)}\n              <CKEditor\n                key={'mapsto_'}\n                content={this.state.mapping}\n                events={{\n                  change: e => this.setState({ mapping: e.editor.getData() }) //this.editMapping(this.state.comp.id, \"This info\")\n                }}\n                activeclassName=\"p10\"\n                config={{\n                  toolbarGroups: [\n                    {\n                      name: 'document',\n                      groups: ['mode', 'document', 'doctools']\n                    },\n                    {\n                      name: 'paragraph',\n                      groups: [\n                        'list',\n                        'indent',\n                        'blocks',\n                        'align',\n                        'bidi',\n                        'paragraph'\n                      ]\n                    },\n                    { name: 'links', groups: ['links'] }\n                  ]\n                }}\n              />\n              <input type=\"submit\" className=\"button\" value=\"Save\" />\n            </div>\n          </form>\n        </Modal>\n\n        {/* Modal for sorting competency positions */}\n\n        <Modal\n          open={this.state.showModalPosition}\n          onClose={this.closeModalPosition}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Change order</h3>\n          <p>Please drag and drop items to change order</p>\n          {this.state.domain.nid ? <h4>{this.state.domain.title}</h4> : ''}\n\n          <ul onDragOver={this.dragOver.bind(this)}>\n            {frameworkData.map(item =>\n              item.domains.map(domain => {\n                if (domain.nid === this.state.domain.nid) {\n                  return domain.competencies.map((competency, i) => {\n                    return (\n                      <li\n                        style={{ listStyleType: 'none' }}\n                        data-position={i}\n                        key={competency.position}\n                        draggable=\"true\"\n                        onDragEnd={this.dragEnd.bind(this)}\n                        onDragStart={this.dragStart.bind(this)}\n                      >\n                        <i className=\"icon icon-common icon-move\" />{' '}\n                        {competency.title}\n                      </li>\n                    );\n                  });\n                }\n                return null;\n              })\n            )}\n          </ul>\n          <button\n            className=\"vf-button vf-button--primary vf-button--sm\"\n            onClick={this.saveSorting}\n          >\n            Save\n          </button>\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport default withSnackbar(ManageCompetency);\n","import React from 'react';\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\nimport CKEditor from 'react-ckeditor-component';\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport ManageCompetency from './ManageCompetency';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass ManageDomains extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingError: false,\n      editable: false,\n      showModal: false,\n      newDomains: '',\n      showModalCompetency: false,\n      showModalMapping: false,\n      newCompetencies: [{ competency: '', mapping: '' }],\n      parentID: '',\n      parentTitle: '',\n      sorting: []\n    };\n\n    this.archiveDomain = this.archiveDomain.bind(this);\n    this.OpenModalCompetency = this.OpenModalCompetency.bind(this);\n    this.closeModalCompetency = this.closeModalCompetency.bind(this);\n\n    this.OpenModalMapping = this.OpenModalMapping.bind(this);\n    this.CloseModalMapping = this.CloseModalMapping.bind(this);\n\n    this.handleRemoveCompetencies = this.handleRemoveCompetencies.bind(this);\n    this.setCompetencies = this.setCompetencies.bind(this);\n\n    this.OpenModalPosition = this.OpenModalPosition.bind(this);\n    this.closeModalPosition = this.closeModalPosition.bind(this);\n  }\n\n  OpenModalMapping(e, domain) {\n    this.setState({ showModalMapping: true });\n    //this.setState({ domain: domain });\n  }\n\n  CloseModalMapping() {\n    this.setState({ showModalMapping: false });\n  }\n\n  handleOpenModal() {\n    this.setState({ showModal: true });\n  }\n\n  handleCloseModal() {\n    this.setState({ showModal: false });\n  }\n\n  OpenModalPosition(e) {\n    this.setState({ showModalPosition: true });\n    console.log('change positions');\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  OpenModalCompetency(e) {\n    this.setState({ parentID: e.target.dataset.domainid });\n    this.setState({ parentTitle: e.target.dataset.domaintitle });\n    this.setState({ showModalCompetency: true });\n  }\n\n  closeModalCompetency() {\n    this.setState({ showModalCompetency: false });\n  }\n\n  handleAddMoreCompetencies(e) {\n    this.setState({\n      newCompetencies: [\n        ...this.state.newCompetencies,\n        { competency: '', mapping: '' }\n      ]\n    });\n    e.preventDefault();\n  }\n\n  handleRemoveCompetencies(e, index) {\n    this.state.newCompetencies.splice(index, 1);\n    this.setState({ newCompetencies: this.state.newCompetencies });\n    e.preventDefault();\n  }\n\n  setCompetencies(e, index, type) {\n    let newData = this.state.newCompetencies;\n    if (type === 'competency') {\n      newData[index].competency = e.target.value;\n    } else {\n      newData[index].mapping = e.editor.getData(); //e.target.value;\n    }\n    this.setState({ newCompetencies: newData });\n  }\n\n  async saveCompetencies(e) {\n    const { framework, frameworkData } = this.props;\n    const { newCompetencies, parentID } = this.state;\n\n    let versionID = frameworkData[0].version_id;\n    let newData = newCompetencies;\n    let type = 'competency';\n    let addtional = '';\n    e.preventDefault();\n\n    console.log(this.state.newCompetencies);\n\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.createBulkData(\n        parentID,\n        versionID,\n        newData,\n        type,\n        addtional\n      );\n      await this.props.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Competencies added successfully', {\n        variant: 'success'\n      });\n    }\n    this.setState({ newCompetencies: [{ competency: '', mapping: '' }] });\n    this.closeModalCompetency();\n  }\n\n  async editDomain(domain, title) {\n    const { framework } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchDomain(domain, 'title', title);\n      await this.props.loadData(framework);\n      await this.props.enqueueSnackbar('Domain updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n      // this.props.enqueueSnackbar('Domain updated', {\n      //   variant: 'success'\n      // });\n    }\n  }\n\n  async archiveDomain(domain, isArchived) {\n    const { framework } = this.props;\n    try {\n      //this.activeRequests.startRequest();\n      await this.competencyService.toggleArchivingVersionedNode(\n        framework,\n        domain\n      );\n      this.props.loadData(framework);\n      console.log('all good gg');\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      //this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Domain updated', {\n        variant: 'success'\n      });\n    }\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n    console.log(this.dragged.parentNode);\n    //update state and call api for PATCH request\n    var data = this.props.frameworkData[0].domains;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ sorting: data });\n    console.log(data.map(d => d.nid));\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  saveSorting = async data => {\n    const { framework } = this.props;\n    const { sorting } = this.state;\n    let items = sorting.map(d => d.nid);\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.saveSorting(items);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Items updated', {\n        variant: 'success'\n      });\n    } catch {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.setState({ sorting: undefined });\n      this.closeModalPosition();\n      //window.location.reload()\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  render() {\n    const {\n      framework,\n      frameworkData,\n      frameworkDef,\n      loadData,\n      editableFrm\n    } = this.props;\n    const domains = frameworkData.map(item =>\n      item.domains.map((domain, index) => (\n        <li\n          key={'li_' + index}\n          id={domain.nid}\n          className={domain.archived === '1' ? 'strikeout' : ''}\n          style={{ listStyleType: 'none' }}\n        >\n          <div key={'div1_' + domain.nid} className=\"row domain_title\">\n            <hr />\n            <div key={'div2_' + domain.nid} className=\"column medium-12\">\n              <h2 key={'h4_' + domain.nid}>\n                <InlineEdit\n                  style={{ display: 'inline' }}\n                  text={domain.title}\n                  change={newValue => this.editDomain(domain.nid, newValue)}\n                  editable={\n                    domain.archived === '1' || editableFrm === false\n                      ? false\n                      : true\n                  }\n                  key={'inline_edit_' + domain.nid}\n                />\n                {editableFrm !== false ? (\n                  <>\n                    <span key={'span_' + domain.nid} className=\"edit-indicator\">\n                      <button\n                        key={domain.nid}\n                        className=\"ch_link \"\n                        onClick={() =>\n                          this.archiveDomain(domain.nid, domain.archived)\n                        }\n                      >\n                        {domain.archived === '1' ? (\n                          <span className=\"ch_link fas fa-toggle-on icon-left-spacer\">\n                            <span>Archived</span>\n                          </span>\n                        ) : (\n                          <span className=\"fas fa-toggle-off icon-left-spacer\">\n                            {' '}\n                            <span> Archive</span>\n                          </span>\n                        )}\n                      </button>\n                    </span>\n                    <span key={'span_' + domain.nid} className=\"edit-indicator\">\n                      <button\n                        className=\"ch_link addButton\"\n                        onClick={this.OpenModalPosition}\n                      >\n                        {' '}\n                        <i className=\"icon icon-common icon-sort icon-left-spacer\" />{' '}\n                        Change order{' '}\n                      </button>\n                    </span>\n                    {domain.archived !== '1' ? (\n                      <span\n                        key={'span_' + domain.nid}\n                        className=\"edit-indicator\"\n                      >\n                        <button\n                          className=\"ch_link addButton icon icon-common icon-plus-circle icon-left-spacer\"\n                          href=\"#\"\n                          data-domainid={domain.nid}\n                          data-domaintitle={domain.title}\n                          onClick={e => this.OpenModalCompetency(e)}\n                        >\n                          Add competencies\n                        </button>\n                      </span>\n                    ) : (\n                      ''\n                    )}\n                  </>\n                ) : (\n                  ''\n                )}\n              </h2>\n            </div>\n          </div>\n          <div key={'p_' + domain.nid}>\n            <ManageCompetency\n              framework={framework}\n              frameworkData={frameworkData}\n              frameworkDef={frameworkDef}\n              loadData={loadData}\n              domain={domain}\n              editableFrm={editableFrm}\n            />\n          </div>\n        </li>\n      ))\n    );\n\n    return (\n      <div key={'domains_list'}>\n        {domains[0].length > 0 ? (\n          <>\n            <ul key={'ul_' + domains.count}>{domains}</ul>{' '}\n            {console.log(domains)}{' '}\n          </>\n        ) : (\n          <>\n            <p className=\"callout\">\n              No data found. You may start by adding domains.\n            </p>{' '}\n            {console.log(domains)}\n          </>\n        )}\n\n        {/* Modal for mapping */}\n\n        {/* <Modal\n          open={this.state.showModalCompetency}\n          onClose={this.closeModalCompetency}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n         <form onSubmit={e => this.saveCompetencies(e)}>\n            {this.state.newCompetencies.map((item, index) => (\n              <div key={'competency_' + index} className=\"row callout\">\n                <div className=\"column medium-9\">\n\n                  Add/edit this competency maps to:\n  \n                   <CKEditor\n                    key={'mapsto_' + index}\n                    content={item.mapping}\n                    events={{\n                      change: (e) => this.setCompetencies(e, index, 'mapping')\n                    }}\n                    activeClass=\"p10\"\n                    config={{\n                      toolbarGroups :[\n                        { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },\n                        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi', 'paragraph' ] },\n                        { name: 'links', groups: [ 'links' ] },\n                    ]\n                  }}\n                  />\n                </div>\n\n              </div>\n            ))}\n\n            <input type=\"submit\" className=\"button\" value=\"Save\" />\n          </form> \n        </Modal> */}\n\n        {/* Modal for competencies */}\n\n        <Modal\n          open={this.state.showModalCompetency}\n          onClose={this.closeModalCompetency}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h2>{this.state.parentTitle}</h2>\n          <h3>Add competencies(s) </h3>\n\n          <form className=\"vf-form\" onSubmit={e => this.saveCompetencies(e)}>\n            {this.state.newCompetencies.map((item, index) => (\n              <div key={'competency_' + index} className=\"row callout\">\n                <div className=\"column medium-9\">\n                  Competency\n                  <input\n                    key={index}\n                    type=\"text\"\n                    onChange={e => this.setCompetencies(e, index, 'competency')}\n                    value={item.competency}\n                    required\n                    className=\"vf-form__input\"\n                  />\n                  This competency maps to:\n                  <CKEditor\n                    key={'mapsto_' + index}\n                    className=\"vf-form__input\"\n                    content={item.mapping}\n                    events={{\n                      change: e => this.setCompetencies(e, index, 'mapping')\n                    }}\n                    activeClass=\"p10\"\n                    config={{\n                      toolbarGroups: [\n                        {\n                          name: 'document',\n                          groups: ['mode', 'document', 'doctools']\n                        },\n                        {\n                          name: 'paragraph',\n                          groups: [\n                            'list',\n                            'indent',\n                            'blocks',\n                            'align',\n                            'bidi',\n                            'paragraph'\n                          ]\n                        },\n                        { name: 'links', groups: ['links'] }\n                      ]\n                    }}\n                  />\n                </div>\n                <div className=\"column medium-3\" style={{ paddingTop: '1%' }}>\n                  {index > 0 ? (\n                    <button\n                      className=\"vf-button vf-button--sm\"\n                      onClick={e => this.handleRemoveCompetencies(e, index)}\n                    >\n                      <i className=\"icon icon-common icon-close\" />{' '}\n                    </button>\n                  ) : (\n                    ''\n                  )}\n                </div>\n              </div>\n            ))}\n\n            <div className=\"row\">\n              <div className=\"column medium-10\">\n                <button\n                  className=\"vf-button vf-button--sm vf-button--secondary\"\n                  onClick={e => this.handleAddMoreCompetencies(e)}\n                >\n                  <i className=\"icon icon-common icon-plus-circle\" /> Add more\n                </button>\n              </div>\n            </div>\n            <input\n              type=\"submit\"\n              className=\"vf-button vf-button--sm vf-button--primary\"\n              value=\"Save\"\n            />\n          </form>\n        </Modal>\n\n        {/* Modal for sorting domain positions */}\n\n        <Modal\n          open={this.state.showModalPosition}\n          onClose={this.closeModalPosition}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Change order</h3>\n          <p>Please drag and drop items to change order</p>\n\n          <ul onDragOver={this.dragOver.bind(this)}>\n            {frameworkData.map(item =>\n              item.domains.map((domain, i) => {\n                return (\n                  <li\n                    style={{ listStyleType: 'none' }}\n                    data-position={i}\n                    key={item.position}\n                    draggable=\"true\"\n                    onDragEnd={this.dragEnd.bind(this)}\n                    onDragStart={this.dragStart.bind(this)}\n                  >\n                    <i className=\"icon icon-common icon-move\" /> {domain.title}\n                  </li>\n                );\n              })\n            )}\n          </ul>\n          <button\n            className=\"vf-button vf-button--sm vf-button--primary\"\n            onClick={this.saveSorting}\n          >\n            Save\n          </button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(ManageDomains);\n","import React from 'react';\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\nimport VersionControls from '../containers/version-controls/VersionControls';\n\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport ManageDomains from './ManageDomains';\n\nclass ManageData extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      framework: '',\n      frameworkName: '',\n      frameworkData: [],\n      frameworkVersion: '',\n      frameworkVersionId: '',\n      frameworkStatus: '',\n      frameworkDef: [],\n      versions: [],\n      loadingError: false,\n      editable: false,\n      showModal: false,\n      showModalPosition: false,\n      newDomains: '',\n      parent: ''\n    };\n\n    this.handleOpenModal = this.handleOpenModal.bind(this);\n    this.handleCloseModal = this.handleCloseModal.bind(this);\n    this.saveDomains = this.saveDomains.bind(this);\n    this.loadData = this.loadData.bind(this);\n  }\n\n  handleOpenModal() {\n    this.setState({ showModal: true });\n  }\n\n  handleCloseModal() {\n    this.setState({ showModal: false });\n  }\n\n  OpenModalPosition(e) {\n    this.setState({ showModalPosition: true });\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  setDomains(e) {\n    this.setState({ newDomains: e.target.value });\n  }\n\n  async saveDomains(e) {\n    const { framework, frameworkData, newDomains } = this.state;\n\n    let parentID = frameworkData[0].nid;\n    let versionID = frameworkData[0].version_id;\n    let newData = newDomains;\n    let type = 'domain';\n    let addtional = '';\n    e.preventDefault();\n\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.createBulkData(\n        parentID,\n        versionID,\n        newData,\n        type,\n        addtional\n      );\n      await this.loadData(framework);\n      this.props.enqueueSnackbar('Domains created', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n\n    this.handleCloseModal();\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { framework } = props.match.params;\n    if (framework !== state.framework) {\n      return {\n        framework,\n        frameworkData: [],\n        loadingError: false\n      };\n    }\n\n    // No state update necessary\n    return null;\n  }\n\n  async componentDidMount() {\n    const { framework, domainId } = this.props.match.params;\n    await this.loadData(framework);\n\n    if (domainId) {\n      setTimeout(() => {\n        const ref = this.refs[domainId];\n        if (ref) {\n          ref.scrollIntoView();\n        }\n      }, 100);\n    }\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    const { framework, frameworkData, loadingError } = this.state;\n    if (framework !== prevState.framework) {\n      if (frameworkData.length === 0 && !loadingError) {\n        this.loadData(framework);\n      }\n    }\n  }\n\n  async loadData(framework) {\n    try {\n      this.activeRequests.startRequest();\n      await this.fetchVersions(framework);\n      await this.fetchFramework(framework);\n    } catch (error) {\n      this.setState({ loadingError: true });\n      alert(`Error: ${error}`);\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  async fetchVersions(framework) {\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\n    const currentFramework = allFrameworks.filter(\n      fw => fw.title.toLowerCase().replace(/\\s+/g, '') === framework\n    );\n    if (currentFramework.length > 0) {\n      this.setState({ versions: currentFramework[0].versions.reverse() });\n      this.setState({ frameworkDef: currentFramework[0].attribute_types });\n    }\n  }\n\n  async fetchFramework(framework) {\n    const { versions } = this.state;\n    const liveVersion = versions.filter(version => version.status === 'live');\n    const draftVersion = versions.filter(version => version.status === 'draft');\n    let frameworkData = [];\n    let editable = false;\n\n    if (draftVersion.length) {\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\n        framework\n      );\n      this.setState({ frameworkVersionId: draftVersion[0].id });\n      editable = true;\n      console.log(frameworkData);\n    } else {\n      if (liveVersion.length) {\n        frameworkData = await this.competencyService.getVersionedFramework(\n          framework,\n          liveVersion[0].number\n        );\n      }\n    }\n\n    if (frameworkData.length) {\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\n        description: domain.title,\n        uuid: domain.uuid\n      }));\n      this.setState({\n        frameworkName: frameworkData[0].title,\n        frameworkData: frameworkData,\n        frameworkVersion: frameworkData[0].version,\n        frameworkStatus: frameworkData[0].status,\n        competencyTypes,\n        editable\n      });\n    }\n  }\n\n  releaseNewVersion = async (version, notes) => {\n    const { framework } = this.state;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.publishFramework(framework, version, notes);\n      this.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  updateNotes = async notes => {\n    const { framework, frameworkVersionId } = this.state;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.updateReleaseNotes(\n        notes,\n        frameworkVersionId\n      );\n      this.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  createDraft = async () => {\n    const { framework } = this.state;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.createDraftFramework(framework);\n      this.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  render() {\n    const {\n      framework,\n      frameworkName,\n      frameworkData,\n      frameworkVersion,\n      frameworkStatus,\n      frameworkDef,\n      //competencyTypes,\n      versions,\n      loadingError,\n      editable\n    } = this.state;\n\n    if (loadingError) {\n      return <ErrorLoading />;\n    }\n\n    if (frameworkData.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"row\">\n        <h2>Manage framework data</h2>\n        <h4>{frameworkName}</h4>\n        <p>\n          <span className=\"tag\">{frameworkVersion}</span>\n          <span className=\"tag secondary-background\">\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\n          </span>\n        </p>\n        <div className=\"row\">\n          <div className=\"column medium-9\">\n            <VersionControls\n              editable={editable}\n              createDraft={this.createDraft}\n              versions={versions}\n              release={this.releaseNewVersion}\n              updateNotes={this.updateNotes}\n            />\n          </div>\n          <div className=\"vf-grid vf-grid vf-grid__col-4\">\n            <div className=\"vf-grid vf-grid__col--span-3\" />\n\n            <div className=\"vf-grid vf-grid__col--span-1\">\n              {editable === true ? (\n                <button\n                  href=\"#\"\n                  className=\"vf-button vf-button--tertirary vf-button--sm\"\n                  onClick={this.handleOpenModal}\n                >\n                  {' '}\n                  <i className=\"icon icon-common icon-plus-circle\" /> Add\n                  domains{' '}\n                </button>\n              ) : (\n                ''\n              )}\n            </div>\n          </div>\n        </div>\n\n        <ManageDomains\n          editableFrm={editable}\n          framework={framework}\n          frameworkData={frameworkData}\n          frameworkDef={frameworkDef}\n          loadData={this.loadData}\n        />\n\n        <FrameworkVersions framework={framework} versions={versions} />\n\n        {/* Modal for adding domains */}\n\n        <Modal\n          open={this.state.showModal}\n          onClose={this.handleCloseModal}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h2>Add domain(s) </h2>\n          <h3>Please enter one domain per line</h3>\n          <form className=\"vf-form\">\n            <textarea\n              id=\"domain_txt_area\"\n              rows=\"5\"\n              onChange={e => this.setDomains(e)}\n              required\n              className=\"vf-form__input\"\n            />\n            <button\n              className=\"vf-button vf-button--sm vf-button--primary\"\n              onClick={e => this.saveDomains(e)}\n            >\n              Save\n            </button>\n          </form>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(ManageData);\n","import HttpService from '../http/http';\r\n\r\nexport const apiUrl = process.env.REACT_APP_PROXY_API_URL;\r\n\r\nclass CoursesService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor(props) {\r\n    //super(props);\r\n    if (CoursesService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CoursesService.instance = this;\r\n  }\r\n\r\n  // removed timestamp\r\n  async checkForTrainingResources(page, filter, filterType, $framework) {\r\n    const response = await this.http.get(\r\n      `${apiUrl}/api/competency_framework_resources?_format=json&source=competencyhub&page=${page}&title=${filter}&type=${filterType}&framework=${$framework}&checkForTrainingResources=${true}&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getCourses(page, filter, filterType) {\r\n    const response = await this.http.get(\r\n      //`${apiUrl}/api/resources?_format=json`\r\n      // `${apiUrl}/api/resources?_format=json&page=${page}&title=${filter}&type=${filterType}`\r\n      `${apiUrl}/api/resources?_format=json&source=competencyhub&page=${page}&title=${filter}&type=${filterType}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getByFramework(page, filter, filterType, $framework) {\r\n    const response = await this.http.get(\r\n      `${apiUrl}/api/competency_framework_resources?_format=json&source=competencyhub&page=${page}&title=${filter}&type=${filterType}&framework=${$framework}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getByCompetency($competencyID) {\r\n    const response = await this.http.get(\r\n      `${apiUrl}/api/competency-resources?field_competency_target_id=${$competencyID}?source=competencyhub`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CoursesService;\r\n","export function slugify(string) {\n  return string\n    .toLowerCase()\n    .replace(/[^\\w ]+/g, '')\n    .replace(/ +/g, '-');\n}\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport CoursesService from '../services/courses/courses';\r\nimport { slugify } from '../services/util/slugifier';\r\n\r\nclass CompetencyDetails extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n    version: this.props.location.pathname.split('/'),\r\n    frameworkData: [],\r\n    competencyId: this.props.match.params.cid,\r\n    attributeDefs: [],\r\n    resources: []\r\n  };\r\n\r\n  // slugify(string) {\r\n  //   return string\r\n  //     .toLowerCase()\r\n  //     .replace(/[^\\w ]+/g, '')\r\n  //     .replace(/ +/g, '-');\r\n  // }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.getFramework(),\r\n        this.getAttributes(),\r\n        this.getResources()\r\n      ]).then(() => {\r\n        const params = new URLSearchParams(window.location.search);\r\n        let scroll = params.get('scroll');\r\n        if (scroll === 'true') {\r\n          let element = document.getElementById('training-resources-block');\r\n          if (element) {\r\n            element.scrollIntoView();\r\n            element.scrollIntoView(false);\r\n            element.scrollIntoView({ block: 'start' });\r\n            element.scrollIntoView({\r\n              behavior: 'smooth',\r\n              block: 'start',\r\n              inline: 'nearest'\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async getFramework() {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      version[3]\r\n    );\r\n\r\n    this.setState({\r\n      frameworkData\r\n    });\r\n  }\r\n\r\n  async getAttributes() {\r\n    const allFrameworks = await this.competencyService.getAllFrameworks();\r\n    const { framework } = this.state;\r\n    const frameworkMatch = allFrameworks.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n    if (frameworkMatch.length) {\r\n      const attributeDefs = frameworkMatch[0].attribute_types.map(\r\n        attribute => attribute.title\r\n      );\r\n      this.setState({ attributeDefs });\r\n    }\r\n  }\r\n\r\n  async getResources() {\r\n    try {\r\n      const resources = await this.coursesService.getByCompetency(\r\n        this.state.competencyId\r\n      );\r\n      // const resources = allResources.filter(\r\n      //   resource =>\r\n      //     resource.archived === 'no' &&\r\n      //     !!resource.competency_profile.find(\r\n      //       profile => profile.competency_id === this.state.competencyId\r\n      //     )\r\n      // );\r\n\r\n      this.setState({ resources });\r\n      /*const resources = [{\"id\":1, \"title\":this.state.version[3]}];*/\r\n      this.setState({ resources });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to retrieve training resources', {\r\n        variant: 'error'\r\n      });\r\n    }\r\n  }\r\n\r\n  resourceBlock() {\r\n    const { resources } = this.state;\r\n    return resources.map(resource => (\r\n      <li key={resource.nid}>\r\n        <Link\r\n          to={{\r\n            pathname: `/training-resources/${slugify(resource.title)}`,\r\n            state: {\r\n              training_resource_id: resource.nid\r\n            }\r\n          }}\r\n        >\r\n          {resource.title}\r\n        </Link>\r\n        {/*<Link to={`/training-resources/${resource.nid}`}>{resource.title}</Link>*/}\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      competencyId,\r\n      frameworkData,\r\n      attributeDefs,\r\n      resources\r\n    } = this.state;\r\n\r\n    const competencies = [];\r\n    console.log(frameworkData);\r\n    frameworkData.forEach(item =>\r\n      item.domains.forEach(domain =>\r\n        domain.competencies.forEach(competency => {\r\n          if (competency.id === competencyId) {\r\n            competencies.push({\r\n              ...competency,\r\n              framework: item.title,\r\n              domain: domain.title\r\n            });\r\n          }\r\n        })\r\n      )\r\n    );\r\n\r\n    const competencyDetails = competencies.map(competency => (\r\n      <div key={competency.id}>\r\n        <div className=\"vf-grid\">\r\n          <div>\r\n            <h1>{competency.title}</h1>\r\n            <br />\r\n            <br />\r\n            <h2>Competency attributes</h2>\r\n            <ul>\r\n              {attributeDefs.map(def => {\r\n                return (\r\n                  <div key={def}>\r\n                    <div className=\"margin-top-medium\">\r\n                      {' '}\r\n                      <h3>{def}</h3>\r\n                    </div>\r\n                    {competency.attributes.map(attribute => {\r\n                      if (attribute.type === def) {\r\n                        return <li key={attribute.id}>{attribute.title} </li>;\r\n                      }\r\n                      return null;\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </ul>\r\n\r\n            <div>\r\n              <h2>Competency derived from:</h2>\r\n              <p>\r\n                {' '}\r\n                {competency.mapped_other_competency\r\n                  ? Parser(competency.mapped_other_competency)\r\n                  : 'No data available'}{' '}\r\n              </p>\r\n\r\n              {resources.length === 0 ? null : (\r\n                <div id=\"training-resources-block\">\r\n                  <h2>Training resources mapped to this competency</h2>\r\n                  <ul>{this.resourceBlock()}</ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"column large-12\">\r\n          {frameworkData.length > 0 ? (\r\n            <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\r\n              <ul className=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\r\n                <li className=\"vf-breadcrumbs__item\">\r\n                  <Link to=\"/\" className=\"vf-breadcrumbs__link\">\r\n                    Home\r\n                  </Link>\r\n                </li>\r\n                <li className=\"vf-breadcrumbs__item\">\r\n                  <Link\r\n                    to={`/framework/${frameworkData[0].title.toLowerCase()}/${\r\n                      frameworkData[0].version\r\n                    }`}\r\n                  >\r\n                    {frameworkData[0].title} {frameworkData[0].version}\r\n                  </Link>{' '}\r\n                </li>\r\n                <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\r\n                  Competency details\r\n                </li>\r\n              </ul>\r\n            </nav>\r\n          ) : (\r\n            ''\r\n          )}\r\n\r\n          {competencyDetails}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(CompetencyDetails);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Collapsible from 'react-collapsible';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { groupBy } from 'lodash-es';\r\nimport './CompetencyList.css';\r\n\r\nfunction CompetencyList({\r\n  index,\r\n  framework,\r\n  competency,\r\n  disable,\r\n  version,\r\n  attributeTypes,\r\n  trainingResourcesExist\r\n}) {\r\n  const attributesGrouped = groupBy(competency.attributes, 'type');\r\n  const attrTypes = attributeTypes;\r\n  const attributes = attrTypes.map(type => {\r\n    const attributes = attributesGrouped[type]\r\n      ? attributesGrouped[type].map(attribute => (\r\n          <li className=\"vf-list__item\" key={attribute.id}>\r\n            {attribute.title}\r\n          </li>\r\n        ))\r\n      : '';\r\n    return attributes ? (\r\n      <div key={type} className=\"attribute_type\">\r\n        <em>{type}</em>\r\n        <ul className=\"vf-list--unordered\" style={{ paddingLeft: '24px' }}>\r\n          {attributes}\r\n        </ul>\r\n      </div>\r\n    ) : (\r\n      ''\r\n    );\r\n  });\r\n\r\n  if (competency.archived === '1') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        {/* <Collapsible\r\n          trigger={\r\n            <div className=\"open-close-title\">\r\n              <span className=\"icon icon-common icon-angle-right float-left icon-custom\" />\r\n              <span>{competency.title}</span>\r\n            </div>\r\n          }\r\n          triggerWhenOpen={\r\n            <div className=\"open-close-title\">\r\n              <span className=\"icon icon-common icon-angle-down float-left icon-custom\" />\r\n              <span>{competency.title}</span>\r\n            </div>\r\n          }\r\n        >\r\n          <div>\r\n            {attributes}\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.id\r\n              }?scroll=true`}\r\n            >\r\n              <span>\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />\r\n                {trainingResourcesExist\r\n                  ? 'View training resources mapped to this competency'\r\n                  : 'View more information about this competency'}\r\n              </span>\r\n            </Link>\r\n          </div>\r\n        </Collapsible> */}\r\n        <details className=\"vf-details\" close>\r\n          <summary className=\"vf-details--summary\">{competency.title}</summary>\r\n          {attributes}\r\n          <div>\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.id\r\n              }?scroll=true`}\r\n            >\r\n              <span>\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />\r\n                {trainingResourcesExist\r\n                  ? 'View training resources mapped to this competency'\r\n                  : 'View more information about this competency'}\r\n              </span>\r\n            </Link>\r\n          </div>\r\n        </details>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nCompetencyList.defaultProps = {\r\n  parentIndex: 0,\r\n  index: 0,\r\n  disable: true,\r\n  trainingResourcesExist: false\r\n};\r\n\r\nCompetencyList.propTypes = {\r\n  parentIndex: PropTypes.number,\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  competency: PropTypes.shape({\r\n    title: PropTypes.string\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CompetencyList from '../competency-list/CompetencyList';\r\n\r\nfunction DomainList({\r\n  index,\r\n  framework,\r\n  domain,\r\n  disable,\r\n  version,\r\n  attributeTypes,\r\n  trainingResourcesExist\r\n}) {\r\n  const competencies = domain.competencies.map((competency, childIndex) => (\r\n    <CompetencyList\r\n      key={competency.id}\r\n      index={childIndex}\r\n      framework={framework}\r\n      competency={competency}\r\n      disable={disable}\r\n      version={version}\r\n      attributeTypes={attributeTypes}\r\n      trainingResourcesExist={trainingResourcesExist}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <tbody style={{ border: 'none' }}>\r\n      <tr>\r\n        <td>\r\n          <h2 style={{ marginBottom: 0 }}> {domain.title}</h2>\r\n        </td>\r\n      </tr>\r\n      {competencies}\r\n    </tbody>\r\n  );\r\n}\r\n\r\nDomainList.defaultProps = {\r\n  domain: { title: '', competencies: [] },\r\n  disable: true,\r\n  trainingResourcesExist: false\r\n};\r\n\r\nDomainList.propTypes = {\r\n  framework: PropTypes.string,\r\n  domain: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    competencies: PropTypes.array\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default DomainList;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport ErrorLoading from '../../components/error-loading/ErrorLoading';\r\n\r\nimport ActiveRequestsService from '../../services/active-requests/active-requests';\r\nimport CoursesService from '../../services/courses/courses';\r\nimport { safeFlat } from '../../services/util/util';\r\nimport Pagination from 'react-js-pagination';\r\nimport { slugify } from '../../services/util/slugifier';\r\n\r\nclass Courses extends Component {\r\n  static propTypes = {\r\n    framework: PropTypes.string,\r\n    frameworkId: PropTypes.string,\r\n    version: PropTypes.string\r\n  };\r\n  coursesService = new CoursesService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      courses: [],\r\n      filteredCourses: [],\r\n      filter: '',\r\n      filterType: '',\r\n      loadingError: false,\r\n      activePage: 1,\r\n      totalItemsCount: 0,\r\n      noResultsFound: false,\r\n      loading: false\r\n    };\r\n    this.state.framework = props.framework;\r\n    this.state.frameworkId = props.frameworkId;\r\n    this.state.version = props.version;\r\n    this.state.totalItemsCount = 0;\r\n  }\r\n\r\n  async handlePageChange(pageNumber) {\r\n    await this.setState({ courses: null });\r\n    await this.setState({ activePage: pageNumber });\r\n    await this.fetchData();\r\n    setTimeout(function() {\r\n      window.scrollTo(0, 0);\r\n    }, 700);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  async fetchData() {\r\n    this.setState({\r\n      loading: true\r\n    });\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const allCourses = await this.coursesService.getByFramework(\r\n        this.state.activePage,\r\n        this.state.filter,\r\n        this.state.filterType,\r\n        this.props.framework\r\n      );\r\n      const courses = this.filterCourses(allCourses);\r\n      this.showAllTrainingResources = this.showAllTrainingResources.bind(this);\r\n      this.setState({ courses, filteredCourses: courses });\r\n      if (courses.length > 0) {\r\n        this.setState({\r\n          totalItemsCount: courses[0].hitcount\r\n        });\r\n      } else {\r\n        this.setState({\r\n          noResultsFound: true\r\n        });\r\n      }\r\n      this.setState({\r\n        totalItemsCount: courses.length > 0 ? courses[0].hitcount : 0\r\n      });\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async showAllTrainingResources() {\r\n    await this.setState({ filter: '' });\r\n    await this.setState({ activePage: 1 });\r\n    await this.setState({ filterType: '' });\r\n    await this.fetchData().then(() => {\r\n      this.setState({\r\n        noResultsFound: false\r\n      });\r\n    });\r\n  }\r\n\r\n  async searchSubmit(e) {\r\n    e.preventDefault();\r\n    //await this.setState({ resources: null });\r\n    await this.setState({ activePage: 0 });\r\n    await this.fetchData();\r\n  }\r\n\r\n  filterCourses(allCourses) {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const filteredCourses = [];\r\n    allCourses.forEach(course => {\r\n      if (course.archived === 'archived') {\r\n        return;\r\n      }\r\n\r\n      const filteredProfiles = course.competency_profile.filter(\r\n        profile => (profile.framework_label || '').toLowerCase() === framework\r\n      );\r\n\r\n      if (filteredProfiles.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const modifiedCourse = {\r\n        ...course,\r\n        competencies: safeFlat(filteredProfiles.map(profile => profile))\r\n      };\r\n      filteredCourses.push(modifiedCourse);\r\n    });\r\n    return filteredCourses;\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { courses } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredCourses = courses.filter(course => term.test(course.title));\r\n    this.setState({ filteredCourses, filter });\r\n  };\r\n\r\n  async filter(e) {\r\n    await this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  async filterTypeHandle(e) {\r\n    await this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      filteredCourses,\r\n      framework,\r\n      filter,\r\n      loadingError,\r\n      version\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    let duplicates = [];\r\n\r\n    const competencyList = competencies =>\r\n      competencies\r\n        .filter(\r\n          (competency, index, all) =>\r\n            all.findIndex(c => c.competency_id === competency.competency_id) ===\r\n            index\r\n        )\r\n        .map(competency => (\r\n          <li key={competency.id}>\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.competency_id\r\n              }`}\r\n            >\r\n              {competency.competency_label}\r\n            </Link>\r\n          </li>\r\n        ));\r\n    const resources = filteredCourses.map((course, index) => (\r\n      // <tr key={course.id}>\r\n      <tr key={course.slug}>\r\n        <td>\r\n          {index +\r\n            1 +\r\n            (this.state.activePage ? (this.state.activePage - 1) * 15 : 0)}{' '}\r\n        </td>\r\n        <td>\r\n          <Link\r\n            to={{\r\n              // pathname: `/training-resources/${slugify(course.title)}`,\r\n              pathname: `/training-resources/${course.slug}`,\r\n              state: {\r\n                training_resource_id: course.id\r\n              }\r\n            }}\r\n          >\r\n            {course.title}\r\n          </Link>\r\n        </td>\r\n        <td>{course.type}</td>\r\n        <td>\r\n          <ul>{competencyList(course.competencies)} </ul>\r\n        </td>\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        {this.state.noResultsFound ? (\r\n          <>\r\n            <p className=\"vf-text-body vf-text-body--2\">No results found</p>\r\n            <button\r\n              className=\"vf-button vf-button--primary vf-button--sm \"\r\n              onClick={this.showAllTrainingResources}\r\n            >\r\n              Show all training resources\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <div>\r\n            <form\r\n              className=\"vf-form | vf-search\"\r\n              onSubmit={e => this.searchSubmit(e)}\r\n            >\r\n              <div className=\"vf-grid vf-grid__col-4\">\r\n                <div className=\"vf-form__item | vf-search__item vf-grid__col--span-2\">\r\n                  <input\r\n                    type=\"search\"\r\n                    onChange={this.filter.bind(this)}\r\n                    placeholder=\"Type to search\"\r\n                    className=\"vf-form__input | vf-search__item\"\r\n                  />\r\n                </div>\r\n                <div className=\"vf-form__item vf-grid__col--span-1\">\r\n                  <select\r\n                    ref={'type'}\r\n                    onChange={this.filterTypeHandle.bind(this)}\r\n                    className=\"vf-form__select\"\r\n                  >\r\n                    <option value={'All'}>All types</option>\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"vf-form__item vf-grid__col--span-1\">\r\n                  <input\r\n                    type=\"submit\"\r\n                    className=\"vf-search__button | vf-button vf-button--primary vf-button--sm\"\r\n                    value=\"Search\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n            {this.state.loading ? (\r\n              <div>\r\n                <div className=\"vf-u-margin__top--200\" />\r\n                <span>Fetching data...</span>\r\n                <img\r\n                  alt=\"progress\"\r\n                  style={{ width: '7%' }}\r\n                  src=\"/dev-competency-mapper/progressbar.gif\"\r\n                />\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>S. No.</th>\r\n                      <th>Training resource(s)</th>\r\n                      <th>Type</th>\r\n                      <th>Competencies</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>{resources}</tbody>\r\n                </table>\r\n                <nav className=\"vf-pagination\" aria-label=\"Pagination\">\r\n                  <Pagination\r\n                    activePage={this.state.activePage}\r\n                    itemsCountPerPage={15}\r\n                    totalItemsCount={this.state.totalItemsCount}\r\n                    pageRangeDisplayed={10}\r\n                    onChange={e => this.handlePageChange(e)}\r\n                    innerClass=\"vf-pagination__list\"\r\n                    itemClass=\"vf-pagination__item\"\r\n                    itemClassPrev=\"vf-pagination__item--previous-page\"\r\n                    itemClassNext=\"vf-pagination__item--next-page\"\r\n                    linkClass=\"vf-pagination__link vf-pagination__label\"\r\n                    activeClass=\"vf-pagination__item--is-active\"\r\n                    prevPageText=\"Previous\"\r\n                    nextPageText=\"Next\"\r\n                  />\r\n                </nav>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Courses;\r\n","import React, { Component, history } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\nimport ProfileList from './ProfileList';\r\nimport PathwaysList from './PathwaysList';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\nimport FAIRDownload from '../components/FAIRDownload';\r\nimport CoursesService from '../services/courses/courses';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\n\r\nimport jsonData from './masterList.json';\r\nimport Copyright from './Copyright';\r\n// import \"@visual-framework/vf-tabs/index.scss\";\r\n\r\nclass CompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkVersion: '',\r\n    frameworkName: '',\r\n    frameworkStatus: '',\r\n    frameworkDescription: '',\r\n    versions: [],\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false,\r\n    trainingResourcesExist: false,\r\n    profileCount: 0,\r\n    pathwayCount: 0,\r\n    attributeTypes: [],\r\n    allResourcesFetched: false,\r\n    visibleTabs: [],\r\n    selectedTabIndex: 0,\r\n    pathnames: this.props.history.location.pathname,\r\n    pathnames_count: 0\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework, version: frameworkVersion } = props.match.params;\r\n    if (\r\n      framework !== state.framework ||\r\n      frameworkVersion !== state.frameworkVersion\r\n    ) {\r\n      return {\r\n        framework,\r\n        frameworkVersion,\r\n        domains: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async setCurrentTab() {\r\n    let visibleTabs = [];\r\n    if (localStorage.getItem('roles') || this.state.profileCount > 0) {\r\n      visibleTabs.push('career-profiles');\r\n    }\r\n    if (localStorage.getItem('roles') || this.state.pathwayCount > 0) {\r\n      visibleTabs.push('learning-pathways');\r\n    }\r\n    visibleTabs.push('competencies');\r\n    if (this.state.trainingResourcesExist) {\r\n      visibleTabs.push('training-resources');\r\n    }\r\n    visibleTabs.push('export');\r\n    await this.setState({ visibleTabs: visibleTabs });\r\n    let currentUrl = window.location.href;\r\n    let selectedTabIndex = 0;\r\n    for (let i = 0; i < this.state.visibleTabs.length; i++) {\r\n      if (currentUrl.includes(this.state.visibleTabs[i])) {\r\n        selectedTabIndex = i;\r\n      }\r\n    }\r\n    this.setState({\r\n      selectedTabIndex: selectedTabIndex\r\n    });\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, version: frameworkVersion } = this.props.match.params;\r\n    this.setState({ pathnames_count: this.state.pathnames.split('/').length });\r\n    window.vfTabs();\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        await this.fetchFramework(framework, frameworkVersion),\r\n        await this.fetchVersions(framework),\r\n        await this.fetchProfiles(),\r\n        await this.fetchPathways(),\r\n        await this.coursesService\r\n          .checkForTrainingResources(1, '', 'All', framework)\r\n          .then(count => {\r\n            if (count > 0) {\r\n              this.setState({\r\n                trainingResourcesExist: true\r\n              });\r\n            }\r\n          })\r\n      ]).then(() => {\r\n        this.setState({\r\n          allResourcesFetched: true\r\n        });\r\n        this.setCurrentTab();\r\n      });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n      \r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkVersion, domains, loadingError } = this.state;\r\n    if (\r\n      framework !== prevState.framework ||\r\n      frameworkVersion !== prevState.frameworkVersion\r\n    ) {\r\n      if (domains.length === 0 && !loadingError) {\r\n        try {\r\n          this.activeRequests.startRequest();\r\n          await this.fetchFramework(framework, frameworkVersion);\r\n        } catch (error) {\r\n          this.setState({ loadingError: true });\r\n        } finally {\r\n          this.activeRequests.finishRequest();\r\n        }\r\n      }\r\n      this.fetchProfiles();\r\n      this.fetchPathways();\r\n    }\r\n  }\r\n\r\n  // Removed timestamp\r\n  fetchProfiles() {\r\n    const { framework, frameworkVersion } = this.state;\r\n    fetch(\r\n      `${apiUrl}/api/${framework}/${frameworkVersion}/profiles?_format=json&source=competencyhub`\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findResponse => {\r\n        this.setState({\r\n          profileCount: findResponse.filter(\r\n            item => item.publishing_status === 'Live'\r\n          ).length\r\n        });\r\n      });\r\n  }\r\n\r\n  // Removed timestamp\r\n  fetchPathways() {\r\n    const { framework } = this.state;\r\n    fetch(\r\n      `${apiUrl}/api/${framework}/pathways?_format=json&source=competencyhub`\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findResponse => {\r\n        this.setState({\r\n          pathwayCount: findResponse.filter(\r\n            item => item.publishing_status === true\r\n          ).length\r\n          //pathwayCount: findResponse.length\r\n        });\r\n      });\r\n  }\r\n\r\n  async fetchFramework(framework, frameworkVersion) {\r\n    window.scroll(0, 0);\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      frameworkVersion\r\n    );\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    const frameworkDescription = removeHtmlTags(frameworkData[0].description);\r\n\r\n    this.setState({\r\n      frameworkName: frameworkData[0].title,\r\n      //frameworkStatus: frameworkData[0].status,\r\n      frameworkDescription,\r\n      domains,\r\n      filteredDomains: domains,\r\n      frameWorkId: frameworkData[0].nid\r\n    });\r\n\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase().replace(/ /g, '') === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const versionStatus = currentFramework[0].versions.filter(\r\n        vr => vr.number === frameworkVersion\r\n      );\r\n      this.setState({ frameworkStatus: versionStatus[0].status });\r\n      let attrTypes = currentFramework[0].attribute_types.map(\r\n        type => type.title\r\n      );\r\n      this.setState({ attributeTypes: attrTypes });\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase().replace(/ /g, '') === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkVersion,\r\n      frameworkName,\r\n      frameWorkId,\r\n      frameworkStatus,\r\n      frameworkDescription,\r\n      filteredDomains,\r\n      versions,\r\n      filter,\r\n      loadingError,\r\n      attributeTypes\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map(domain =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n          version={frameworkVersion}\r\n          attributeTypes={attributeTypes}\r\n          trainingResourcesExist={this.state.trainingResourcesExist}\r\n        />\r\n      )\r\n    );\r\n\r\n    const changeTabURL = url => {\r\n      if (this.state.pathnames_count == 4) {\r\n        this.props.history.push(\r\n          `${this.props.history.location.pathname}/${url}`\r\n        );\r\n        this.setState({ pathnames_count: 5 });\r\n      } else {\r\n        this.props.history.push(url);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <div className=\"vf-u-margin__top--400\" />\r\n        <h2>\r\n          {' '}\r\n          {\r\n            jsonData.filter(item => item.title === this.state.framework)[0].desc\r\n          }{' '}\r\n        </h2>\r\n        <h3>{frameworkName}</h3>\r\n        <p>\r\n          <span className=\"vf-badge\">{frameworkVersion}</span>\r\n          <span className=\"vf-badge vf-badge--primary\"> {frameworkStatus}</span>\r\n        </p>\r\n        <p>{frameworkDescription}</p>\r\n\r\n        {/* {this.state.allResourcesFetched ? (\r\n          <Tabs\r\n            className=\"vf-tabs ch_tabs__list\"\r\n            selectedIndex={this.state.selectedTabIndex}\r\n            onSelect={index =>\r\n              this.setState({\r\n                selectedTabIndex: index\r\n              })\r\n            }\r\n          >\r\n            <TabList className=\"vf-tabs__list\">\r\n              {localStorage.getItem('roles') ? (\r\n                <Tab onClick={e => changeTabURL(`career-profiles`)}>\r\n                  <Link\r\n                    to={`/framework/${framework}/${\r\n                      this.props.match.params.version\r\n                    }/career-profiles`}\r\n                    className=\"customTabLinks\"\r\n                  >\r\n                    Career profiles\r\n                  </Link>\r\n                </Tab>\r\n              ) : this.state.profileCount > 0 ? (\r\n                <Tab onClick={e => changeTabURL(`career-profiles`)}>\r\n                  <Link\r\n                    to={`/framework/${framework}/${\r\n                      this.props.match.params.version\r\n                    }/career-profiles`}\r\n                    className=\"customTabLinks\"\r\n                  >\r\n                    Career profiles\r\n                  </Link>\r\n                </Tab>\r\n              ) : (\r\n                ''\r\n              )}\r\n              {localStorage.getItem('roles') ? (\r\n                <Tab onClick={e => changeTabURL(`learning-pathways`)}>\r\n                  <Link\r\n                    to={`/framework/${framework}/${\r\n                      this.props.match.params.version\r\n                    }/learning-pathways`}\r\n                    className=\"customTabLinks\"\r\n                  >\r\n                    Learning pathways\r\n                  </Link>\r\n                </Tab>\r\n              ) : this.state.pathwayCount > 0 ? (\r\n                <Tab onClick={e => changeTabURL(`learning-pathways`)}>\r\n                  <Link\r\n                    to={`/framework/${framework}/${\r\n                      this.props.match.params.version\r\n                    }/learning-pathways`}\r\n                    className=\"customTabLinks\"\r\n                  >\r\n                    Learning pathways\r\n                  </Link>\r\n                </Tab>\r\n              ) : (\r\n                ''\r\n              )}\r\n\r\n              <Tab onClick={e => changeTabURL(`competencies`)}>\r\n                <Link\r\n                  to={`/framework/${framework}/${\r\n                    this.props.match.params.version\r\n                  }/competencies`}\r\n                  className=\"customTabLinks\"\r\n                >\r\n                  Competencies\r\n                </Link>\r\n              </Tab>\r\n\r\n              {this.state.trainingResourcesExist ? (\r\n                <Tab onClick={e => changeTabURL(`training-resources`)}>\r\n                  <Link\r\n                    to={`/framework/${framework}/${\r\n                      this.props.match.params.version\r\n                    }/training-resources`}\r\n                    className=\"customTabLinks\"\r\n                  >\r\n                    Training resources\r\n                  </Link>\r\n                </Tab>\r\n              ) : (\r\n                ''\r\n              )}\r\n              <Tab onClick={e => changeTabURL(`export`)}>\r\n                <Link\r\n                  to={`/framework/${framework}/${\r\n                    this.props.match.params.version\r\n                  }/export`}\r\n                  className=\"customTabLinks\"\r\n                >\r\n                  Export\r\n                </Link>\r\n              </Tab>\r\n            </TabList>\r\n\r\n            {localStorage.getItem('roles') ? (\r\n              <TabPanel>\r\n                <ProfileList framework={framework} version={frameworkVersion} />\r\n                <div className=\"vf-grid\">\r\n                  <div>\r\n                    <FrameworkVersions\r\n                      framework={framework}\r\n                      versions={versions}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <Copyright framework={framework} />\r\n                  </div>\r\n                </div>\r\n              </TabPanel>\r\n            ) : this.state.profileCount > 0 ? (\r\n              <TabPanel>\r\n                <ProfileList framework={framework} version={frameworkVersion} />\r\n                <div className=\"vf-u-margin__top--1600\" />\r\n                <div className=\"vf-grid\">\r\n                  <div>\r\n                    <FrameworkVersions\r\n                      framework={framework}\r\n                      versions={versions}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <Copyright framework={framework} />\r\n                  </div>\r\n                </div>\r\n                <div className=\"vf-u-margin__top--1600\" />\r\n              </TabPanel>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            {localStorage.getItem('roles') ? (\r\n              <TabPanel>\r\n                <PathwaysList framework={framework} />\r\n                <FrameworkVersions framework={framework} versions={versions} />\r\n                <div className=\"vf-u-margin__top--1600\" />\r\n              </TabPanel>\r\n            ) : this.state.pathwayCount > 0 ? (\r\n              <TabPanel>\r\n                <PathwaysList framework={framework} />\r\n                <FrameworkVersions framework={framework} versions={versions} />\r\n                <div className=\"vf-u-margin__top--1600\" />\r\n              </TabPanel>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            <TabPanel>\r\n              <form\r\n                action=\"#\"\r\n                className=\"vf-form | vf-search vf-search--inline\"\r\n              >\r\n                <div className=\"vf-form__item | vf-search__item\">\r\n                  <label\r\n                    className=\"vf-form__label vf-u-sr-only | vf-search__label\"\r\n                    htmlFor=\"inlinesearchitem\"\r\n                  >\r\n                    Inline search\r\n                  </label>\r\n                  <input\r\n                    type=\"search\"\r\n                    placeholder=\"Filter competencies\"\r\n                    id=\"inlinesearchitem\"\r\n                    className=\"vf-form__input | vf-search__input\"\r\n                    onChange={event => this.onFilter(event.target.value)}\r\n                    value={filter}\r\n                  />\r\n                </div>\r\n              </form>\r\n              <table>{domainList}</table>\r\n              <div className=\"vf-u-margin__top--800\" />\r\n              <div className=\"vf-grid\">\r\n                <div>\r\n                  <FrameworkVersions\r\n                    framework={framework}\r\n                    versions={versions}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Copyright framework={framework} />\r\n                </div>\r\n              </div>\r\n              <div className=\"vf-u-margin__top--1600\" />\r\n            </TabPanel>\r\n\r\n            {this.state.trainingResourcesExist ? (\r\n              <TabPanel>\r\n                <Courses\r\n                  framework={framework}\r\n                  version={frameworkVersion}\r\n                  frameworkId={frameWorkId}\r\n                />\r\n              </TabPanel>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            <TabPanel>\r\n              <FAIRDownload />\r\n              <FrameworkVersions framework={framework} versions={versions} />\r\n              <div className=\"vf-u-margin__top--1600\" />\r\n            </TabPanel>\r\n          </Tabs>\r\n        ) : (\r\n          <div>\r\n            <div className=\"vf-u-margin__top--200\" />\r\n            <span>Fetching data...</span>\r\n            <img\r\n              alt=\"progress\"\r\n              style={{ width: '7%' }}\r\n              src=\"/dev-competency-mapper/progressbar.gif\"\r\n            />\r\n          </div>\r\n        )} */}\r\n\r\n        <div className=\"vf-tabs\">\r\n          <ul className=\"vf-tabs__list\" data-vf-js-tabs>\r\n            <li className=\"vf-tabs__item\">\r\n              <a className=\"vf-tabs__link\" href=\"#vf-tabs__section--1\">Section</a>\r\n            </li>\r\n            <li className=\"vf-tabs__item\">\r\n              <a className=\"vf-tabs__link\" href=\"#vf-tabs__section--2\">A Short Section</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"vf-tabs-content\" data-vf-js-tabs-content>\r\n          <section className=\"vf-tabs__section\" id=\"vf-tabs__section--1\">\r\n            <h2>Section 1</h2>\r\n            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam euismod, tortor nec pharetra ultricies, ante erat imperdiet velit, nec laoreet enim lacus a velit. <a className=\"vf-link\" href=\"#\">Nam luctus</a>, enim in interdum condimentum, nisl diam iaculis lorem, vel volutpat mi leo sit amet lectus. Praesent non odio bibendum magna bibendum accumsan.</p>\r\n          </section>\r\n          <section className=\"vf-tabs__section\" id=\"vf-tabs__section--2\">\r\n            <h2>Section 2</h2>\r\n            <p>Nullam at diam nec arcu suscipit auctor non a erat. Sed et magna semper, eleifend magna non, facilisis nisl. Proin et est et lorem dictum finibus ut nec turpis. Aenean nisi tortor, euismod a mauris a, mattis scelerisque tortor. Sed dolor risus, varius a nibh id, condimentum lacinia est. In lacinia cursus odio a aliquam. Curabitur tortor magna, laoreet ut rhoncus at, sodales consequat tellus.</p>\r\n            <a className='vf-link' href=\"https://www.ebi.ac.uk/training/on-demand\">Click to view the resource</a>\r\n          </section>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CompetencyList;\r\n","import React, { Children, Component } from 'react';\nimport { TabPanel } from 'react-tabs';\n\nclass ProfilePanel extends Component {\n  render() {\n    alert(123);\n    return (\n      <TabPanel>\n        <Children />\n      </TabPanel>\n    );\n  }\n}\n\nexport default ProfilePanel;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n// import {vfTabs} from \"@visual-framework/vf-tabs\";\r\nimport { vfTabs } from '@visual-framework/vf-tabs/vf-tabs.js';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\nimport ProfileList from './ProfileList';\r\nimport PathwaysList from './PathwaysList';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\nimport FAIRDownload from '../components/FAIRDownload';\r\nimport CoursesService from '../services/courses/courses';\r\nimport ProfilePanel from './competency-nested-components/ProfilePanel';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\n\r\nclass VFTabsCompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkVersion: '',\r\n    frameworkName: '',\r\n    frameworkStatus: '',\r\n    frameworkDescription: '',\r\n    versions: [],\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false,\r\n    trainingResourcesExist: false,\r\n    profileCount: 0,\r\n    pathwayCount: 0,\r\n    attributeTypes: [],\r\n    allResourcesFetched: false,\r\n    visibleTabs: [],\r\n    selectedTabIndex: 0\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework, version: frameworkVersion } = props.match.params;\r\n    if (\r\n      framework !== state.framework ||\r\n      frameworkVersion !== state.frameworkVersion\r\n    ) {\r\n      return {\r\n        framework,\r\n        frameworkVersion,\r\n        domains: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async setCurrentTab() {\r\n    let visibleTabs = [];\r\n    if (localStorage.getItem('roles') || this.state.profileCount > 0) {\r\n      visibleTabs.push('career-profiles');\r\n    }\r\n    if (localStorage.getItem('roles') || this.state.pathwayCount > 0) {\r\n      visibleTabs.push('learning-pathways');\r\n    }\r\n    visibleTabs.push('competencies');\r\n    if (this.state.trainingResourcesExist) {\r\n      visibleTabs.push('training-resources');\r\n    }\r\n    visibleTabs.push('export');\r\n    await this.setState({ visibleTabs: visibleTabs });\r\n    let currentUrl = window.location.href;\r\n    let selectedTabIndex = 0;\r\n    for (let i = 0; i < this.state.visibleTabs.length; i++) {\r\n      if (currentUrl.includes(this.state.visibleTabs[i])) {\r\n        selectedTabIndex = i;\r\n      }\r\n    }\r\n    this.setState({\r\n      selectedTabIndex: selectedTabIndex\r\n    });\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, version: frameworkVersion } = this.props.match.params;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        await this.fetchFramework(framework, frameworkVersion),\r\n        await this.fetchVersions(framework),\r\n        await this.fetchProfiles(),\r\n        await this.fetchPathways(),\r\n        await this.coursesService\r\n          .checkForTrainingResources(1, '', 'All', framework)\r\n          .then(count => {\r\n            if (count > 0) {\r\n              this.setState({\r\n                trainingResourcesExist: true\r\n              });\r\n            }\r\n          })\r\n      ]).then(() => {\r\n        this.setState({\r\n          allResourcesFetched: true\r\n        });\r\n        this.setCurrentTab();\r\n      });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    // vfTabs();\r\n    const { framework, frameworkVersion, domains, loadingError } = this.state;\r\n    if (\r\n      framework !== prevState.framework ||\r\n      frameworkVersion !== prevState.frameworkVersion\r\n    ) {\r\n      if (domains.length === 0 && !loadingError) {\r\n        try {\r\n          this.activeRequests.startRequest();\r\n          await this.fetchFramework(framework, frameworkVersion);\r\n        } catch (error) {\r\n          this.setState({ loadingError: true });\r\n        } finally {\r\n          this.activeRequests.finishRequest();\r\n        }\r\n      }\r\n      this.fetchProfiles();\r\n      this.fetchPathways();\r\n    }\r\n  }\r\n\r\n  // Removed timestamp\r\n  fetchProfiles() {\r\n    const { framework, frameworkVersion } = this.state;\r\n    fetch(\r\n      `${apiUrl}/api/${framework}/${frameworkVersion}/profiles?_format=json&source=competencyhub`\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findResponse => {\r\n        this.setState({\r\n          profileCount: findResponse.filter(\r\n            item => item.publishing_status === 'Live'\r\n          ).length\r\n        });\r\n      });\r\n  }\r\n\r\n  // Removed timestamp\r\n  fetchPathways() {\r\n    const { framework } = this.state;\r\n    fetch(\r\n      `${apiUrl}/api/${framework}/pathways?_format=json&source=competencyhub`\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findResponse => {\r\n        this.setState({\r\n          pathwayCount: findResponse.filter(\r\n            item => item.publishing_status === true\r\n          ).length\r\n          //pathwayCount: findResponse.length\r\n        });\r\n      });\r\n  }\r\n\r\n  async fetchFramework(framework, frameworkVersion) {\r\n    window.scroll(0, 0);\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      frameworkVersion\r\n    );\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    const frameworkDescription = removeHtmlTags(frameworkData[0].description);\r\n\r\n    this.setState({\r\n      frameworkName: frameworkData[0].title,\r\n      //frameworkStatus: frameworkData[0].status,\r\n      frameworkDescription,\r\n      domains,\r\n      filteredDomains: domains,\r\n      frameWorkId: frameworkData[0].nid\r\n    });\r\n\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase().replace(/ /g, '') === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const versionStatus = currentFramework[0].versions.filter(\r\n        vr => vr.number === frameworkVersion\r\n      );\r\n      this.setState({ frameworkStatus: versionStatus[0].status });\r\n      let attrTypes = currentFramework[0].attribute_types.map(\r\n        type => type.title\r\n      );\r\n      this.setState({ attributeTypes: attrTypes });\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase().replace(/ /g, '') === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkVersion,\r\n      frameworkName,\r\n      frameWorkId,\r\n      frameworkStatus,\r\n      frameworkDescription,\r\n      filteredDomains,\r\n      versions,\r\n      filter,\r\n      loadingError,\r\n      attributeTypes\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map(domain =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n          version={frameworkVersion}\r\n          attributeTypes={attributeTypes}\r\n          trainingResourcesExist={this.state.trainingResourcesExist}\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <h1 style={{ color: '#000000' }}>{frameworkName}</h1>\r\n        <p>\r\n          <span className=\"vf-badge\">{frameworkVersion}</span>\r\n          <span className=\"vf-badge vf-badge--primary\"> {frameworkStatus}</span>\r\n        </p>\r\n        <p>{frameworkDescription}</p>\r\n\r\n        {this.state.allResourcesFetched ? (\r\n          <div>\r\n            <div className=\"vf-tabs\">\r\n              <ul className=\"vf-tabs__list\" data-vf-js-tabs>\r\n                {localStorage.getItem('roles') ? (\r\n                  <li className=\"vf-tabs__item\">\r\n                    <a className=\"vf-tabs__link\" href=\"#career-profiles\">\r\n                      Section\r\n                    </a>\r\n                  </li>\r\n                ) : this.state.profileCount > 0 ? (\r\n                  <li className=\"vf-tabs__item\">\r\n                    <a className=\"vf-tabs__link\" href=\"#career-profiles\">\r\n                      Section\r\n                    </a>\r\n                  </li>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                <li className=\"vf-tabs__item\">\r\n                  <a className=\"vf-tabs__link\" href=\"#vf-tabs__section--2\">\r\n                    A Short Section\r\n                  </a>\r\n                </li>\r\n                <li className=\"vf-tabs__item\">\r\n                  <a className=\"vf-tabs__link\" href=\"#vf-tabs__section--3\">\r\n                    A 3rd Section\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <div className=\"vf-tabs-content\" data-vf-js-tabs-content>\r\n              <section className=\"vf-tabs__section\" id=\"career-profiles\">\r\n                <h2>Section 1</h2>\r\n                <p>\r\n                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam\r\n                  euismod, tortor nec pharetra ultricies, ante erat imperdiet\r\n                  velit, nec laoreet enim lacus a velit.{' '}\r\n                  <a className=\"vf-link\" href=\"#\">\r\n                    Nam luctus\r\n                  </a>\r\n                  , enim in interdum condimentum, nisl diam iaculis lorem, vel\r\n                  volutpat mi leo sit amet lectus. Praesent non odio bibendum\r\n                  magna bibendum accumsan.\r\n                </p>\r\n              </section>\r\n              <section className=\"vf-tabs__section\" id=\"vf-tabs__section--2\">\r\n                <h2>Section 2</h2>\r\n                <p>\r\n                  Nullam at diam nec arcu suscipit auctor non a erat. Sed et\r\n                  magna semper, eleifend magna non, facilisis nisl. Proin et est\r\n                  et lorem dictum finibus ut nec turpis. Aenean nisi tortor,\r\n                  euismod a mauris a, mattis scelerisque tortor. Sed dolor\r\n                  risus, varius a nibh id, condimentum lacinia est. In lacinia\r\n                  cursus odio a aliquam. Curabitur tortor magna, laoreet ut\r\n                  rhoncus at, sodales consequat tellus.\r\n                </p>\r\n              </section>\r\n              <section className=\"vf-tabs__section\" id=\"vf-tabs__section--3\">\r\n                <h2>Section 3</h2>\r\n                <p>3rd section</p>\r\n              </section>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <div className=\"vf-u-margin__top--200\" />\r\n            <span>Fetching data...</span>\r\n            <img\r\n              alt=\"progress\"\r\n              style={{ width: '7%' }}\r\n              src=\"/dev-competency-mapper/progressbar.gif\"\r\n            />\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VFTabsCompetencyList;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass ResourceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      path: this.props.location.pathname.split('/'),\r\n      nid: '',\r\n      title: '',\r\n      dates: '',\r\n      dates2: '',\r\n      type: '',\r\n      description: '',\r\n      location: '',\r\n      url: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      keywords: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n    this.redirectTo = this.redirectTo.bind(this);\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ nid: this.state.path[3] });\r\n\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchResource = `${apiUrl}/node/${this.state.path[3]}?_format=json`;\r\n    //let fetchResource = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    //let fetchResource = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(fetchResource)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    //console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  redirectTo() {\r\n    //alert(this.state.nid)\r\n    this.props.history.push('/training-resources/' + this.state.nid);\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let nid = '';\r\n    let title = '';\r\n    let dates = '';\r\n    let dates2 = '';\r\n    let type = '';\r\n    let description = '';\r\n    let location = '';\r\n    let url = '';\r\n    let target_audience = '';\r\n    let learning_outcomes = '';\r\n    let keywords = '';\r\n    let organisers = '';\r\n    let trainers = '';\r\n\r\n    //this.state.data.forEach(item => {\r\n    //  if (item.id === this.state.nid) {\r\n    if (this.state.data.nid) {\r\n      let item = this.state.data;\r\n      nid = item.nid[0].value;\r\n      title = item.title[0].value;\r\n      dates = item.field_dates[0] ? item.field_dates[0].value : null;\r\n      dates2 = item.field_end_date[0] ? item.field_end_date[0].value : null;\r\n      type = item.field_type[0].value;\r\n      description = item.field_description[0]\r\n        ? item.field_description[0].value\r\n        : null;\r\n      location = item.field_location[0] ? item.field_location[0].value : null;\r\n      url = item.field_url[0] ? item.field_url[0].value : null;\r\n      target_audience = item.field_target_audience[0]\r\n        ? item.field_target_audience[0].value\r\n        : null;\r\n      learning_outcomes = item.field_learning_outcomes[0]\r\n        ? item.field_learning_outcomes[0].value\r\n        : null;\r\n      keywords = item.field_domain_topics[0]\r\n        ? item.field_domain_topics[0].value\r\n        : null;\r\n      organisers = item.field_organisers[0]\r\n        ? item.field_organisers[0].value\r\n        : null;\r\n      trainers = item.field_trainers[0] ? item.field_trainers[0].value : null;\r\n      //console.log(item.nid[0].value)\r\n    }\r\n\r\n    //  }\r\n    //});\r\n    if (this.state.data.nid) {\r\n      console.log(dates);\r\n      return (\r\n        <EditForm\r\n          nid={nid}\r\n          title={title}\r\n          dates={dates}\r\n          dates2={dates2}\r\n          type={type}\r\n          description={description}\r\n          location={location}\r\n          url={url}\r\n          target_audience={target_audience}\r\n          learning_outcomes={learning_outcomes}\r\n          keywords={keywords}\r\n          organisers={organisers}\r\n          trainers={trainers}\r\n          redirectTo={this.redirectTo}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass EditForm extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nid: this.props.nid,\r\n      title: this.props.title,\r\n      dates: this.props.dates,\r\n      dates2: this.props.dates2,\r\n      type: this.props.type,\r\n      description: this.props.description,\r\n      location: this.props.location,\r\n      url: this.props.url,\r\n      target_audience: this.props.target_audience,\r\n      learning_outcomes: this.props.learning_outcomes,\r\n      keywords: this.props.keywords,\r\n      organisers: this.props.organisers,\r\n      trainers: this.props.trainers,\r\n      redirect: false,\r\n      updateFlag: false,\r\n      csrf: ''\r\n    };\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleDates = this.handleDates.bind(this);\r\n    this.handleDates2 = this.handleDates2.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.handleDesc = this.handleDesc.bind(this);\r\n    this.handleLocation = this.handleLocation.bind(this);\r\n    this.handleURL = this.handleURL.bind(this);\r\n    this.handleTargetAudience = this.handleTargetAudience.bind(this);\r\n    this.handleLearningOutcomes = this.handleLearningOutcomes.bind(this);\r\n    this.handleKeywords = this.handleKeywords.bind(this);\r\n    this.handleOrganisers = this.handleOrganisers.bind(this);\r\n    this.handleTrainers = this.handleTrainers.bind(this);\r\n    //this.redirectTo = this.redirectTo.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  static contextTypes = {\r\n    router: PropTypes.object\r\n  };\r\n\r\n  handleTitle(event) {\r\n    this.setState({ title: event.value });\r\n  }\r\n\r\n  handleDates(event) {\r\n    this.setState({ dates: event.value });\r\n  }\r\n\r\n  handleDates2(event) {\r\n    this.setState({ dates2: event.value });\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ type: event.value });\r\n  }\r\n\r\n  handleDesc(event) {\r\n    this.setState({ description: event.editor.getData() });\r\n    //this.setState({ description: \"test\" });\r\n    //console.log(this.setState({ description: event.editor.getData() }));\r\n  }\r\n  handleLocation(event) {\r\n    this.setState({ location: event.value });\r\n  }\r\n  handleURL(event) {\r\n    this.setState({ url: event.value });\r\n  }\r\n\r\n  handleTargetAudience(event) {\r\n    this.setState({ target_audience: event.editor.getData() });\r\n    //this.setState({ target_audience: \"test\" });\r\n  }\r\n\r\n  handleLearningOutcomes(event) {\r\n    this.setState({ learning_outcomes: event.editor.getData() });\r\n    //this.setState({ learning_outcomes: \"hi\" });\r\n  }\r\n\r\n  handleKeywords(event) {\r\n    this.setState({ keywords: event.value });\r\n  }\r\n\r\n  handleOrganisers(event) {\r\n    this.setState({ organisers: event.editor.getData() });\r\n    //this.setState({ organisers: \"test\" });\r\n  }\r\n\r\n  handleTrainers(event) {\r\n    this.setState({ trainers: event.editor.getData() });\r\n    //this.setState({ trainers: \"test\" });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.props.history.push('all-training-resources');\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      // setTimeout(() => {\r\n      //  // this.props.redirectTo()\r\n      // }, 1000);\r\n      //await this.handleSubmit();\r\n      //this.props.redirectTo();\r\n    }\r\n  }\r\n\r\n  dateValidate(d1, d2) {\r\n    let date1 = new Date(d1);\r\n    let date2 = new Date(d2);\r\n\r\n    if (date1 > date2) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    event.preventDefault();\r\n    let resourceID = this.state.nid;\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n\r\n    let type = this.refs.type.value;\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n    let keywords = this.refs.keywords.value;\r\n    let csrf = localStorage.getItem('csrf_token');\r\n\r\n    if (this.dateValidate(dates, dates2)) {\r\n      await fetch(`${apiUrl}/node/` + resourceID + '?_format=hal_json', {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        cookies: 'x-access-token',\r\n        headers: {\r\n          Accept: 'application/hal+json',\r\n          'Content-Type': 'application/hal+json',\r\n          'X-CSRF-Token': csrf\r\n          //Authorization: 'Basic'\r\n        },\r\n        body: JSON.stringify({\r\n          _links: {\r\n            type: {\r\n              href: `${apiUrl}/rest/type/node/training_resource`\r\n            }\r\n          },\r\n          title: [\r\n            {\r\n              value: title\r\n            }\r\n          ],\r\n          field_dates: [\r\n            {\r\n              value: dates ? dates : null\r\n            }\r\n          ],\r\n          field_end_date: [\r\n            {\r\n              value: dates2 ? dates2 : null\r\n            }\r\n          ],\r\n          field_type: [\r\n            {\r\n              value: type\r\n            }\r\n          ],\r\n          field_description: [\r\n            {\r\n              value: description,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_location: [\r\n            {\r\n              value: location\r\n            }\r\n          ],\r\n          field_url: [\r\n            {\r\n              value: url\r\n            }\r\n          ],\r\n          field_target_audience: [\r\n            {\r\n              value: target_audience,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_learning_outcomes: [\r\n            {\r\n              value: learning_outcomes,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_domain_topics: [\r\n            {\r\n              value: keywords\r\n            }\r\n          ],\r\n          field_organisers: [\r\n            {\r\n              value: organisers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_trainers: [\r\n            {\r\n              value: trainers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          type: [\r\n            {\r\n              target_id: 'training_resource'\r\n            }\r\n          ]\r\n        })\r\n      });\r\n      // setTimeout(() => {\r\n      //   this.props.redirectTo();\r\n      // }, 1000);\r\n      this.props.redirectTo();\r\n    } else {\r\n      alert('Incorrect dates');\r\n    }\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Edit Training Resources</h2>\r\n        <p>(* fields are mandatory)</p>\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"vf-form\"\r\n              id={'resource_edit_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"vf-form__item\">\r\n                <strong>Title *</strong>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  ref=\"title\"\r\n                  id={'title'}\r\n                  value={this.state.title}\r\n                  onChange={this.handleTitle.bind(this)}\r\n                  required\r\n                  placeholder=\"Title\"\r\n                  className=\"vf-form__input\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-grid\">\r\n                <div className=\"vf-form__item\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates\"\r\n                    value={this.state.dates}\r\n                    onChange={this.handleDates.bind(this)}\r\n                    placeholder=\"Date\"\r\n                    className=\"vf-form__input\"\r\n                  />\r\n                </div>\r\n                <div className=\"vf-form__item\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates2\"\r\n                    value={this.state.dates2}\r\n                    onChange={this.handleDates2.bind(this)}\r\n                    placeholder=\"Date\"\r\n                    className=\"vf-form__input\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n\r\n              <div className=\"vf-form__item\">\r\n                <strong>Event type *</strong>\r\n                <select\r\n                  ref={'type'}\r\n                  value={this.state.type}\r\n                  onChange={this.handleType.bind(this)}\r\n                  className=\"vf-form__select\"\r\n                >\r\n                  <option value={'Online'}>Online</option>\r\n                  <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                  <option value={'Webinar'}>Webinar</option>\r\n                  <option value={'Hackathon'}>Hackathon</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Description</strong>\r\n                <CKEditor\r\n                  content={this.state.description}\r\n                  events={{\r\n                    change: this.handleDesc\r\n                  }}\r\n                  onChange={this.handleDesc}\r\n                  activeClass=\"p10\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Location</strong>\r\n                <input\r\n                  type=\"text\"\r\n                  ref=\"location\"\r\n                  value={this.state.location}\r\n                  onChange={this.handleLocation.bind(this)}\r\n                  placeholder=\"Location\"\r\n                  className=\"vf-form__input\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>URL *</strong>\r\n                <input\r\n                  type=\"text\"\r\n                  ref=\"url\"\r\n                  value={this.state.url}\r\n                  onChange={this.handleURL.bind(this)}\r\n                  required\r\n                  placeholder=\"URL\"\r\n                  className=\"vf-form__input\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Target audience</strong>\r\n                <CKEditor\r\n                  content={this.state.target_audience}\r\n                  events={{\r\n                    change: this.handleTargetAudience\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Learning outcomes</strong>\r\n                <CKEditor\r\n                  content={this.state.learning_outcomes}\r\n                  events={{\r\n                    change: this.handleLearningOutcomes\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Organisers</strong>\r\n                <CKEditor\r\n                  content={this.state.organisers}\r\n                  events={{\r\n                    change: this.handleOrganisers\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Trainers</strong>\r\n                <CKEditor\r\n                  content={this.state.trainers}\r\n                  events={{\r\n                    change: this.handleTrainers\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Keywords</strong>\r\n                <input\r\n                  type=\"text\"\r\n                  ref=\"keywords\"\r\n                  value={this.state.keywords}\r\n                  onChange={this.handleKeywords.bind(this)}\r\n                  placeholder=\"Keywords\"\r\n                  className=\"vf-form__input\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <input\r\n                  type=\"submit\"\r\n                  className=\"vf-button vf-button--primary vf-button--sm\"\r\n                  value=\"Update\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/edit/:nid\" component={ResourceEdit} />\r\n  </Switch>\r\n);\r\n\r\nexport default EditResources;\r\n","import React from 'react';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport { apiUrl, apiUrlWithHTTP } from '../services/http/http';\r\nimport { slugify } from '../services/util/slugifier';\r\n\r\nclass ResourceCreate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //this.onChange = this.onChange.bind(this);\r\n    this.changeDescription = this.changeDescription.bind(this);\r\n    this.changeTargetAudience = this.changeTargetAudience.bind(this);\r\n    this.changeLearningOutcomes = this.changeLearningOutcomes.bind(this);\r\n    this.changeOrganisers = this.changeOrganisers.bind(this);\r\n    this.changeTrainers = this.changeTrainers.bind(this);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      content: 'content',\r\n      description: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.props.history.push('/all-training-resources');\r\n        //this.setState({'updateFlag': false});\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  dateValidate(d1, d2) {\r\n    let date1 = new Date(d1);\r\n    let date2 = new Date(d2);\r\n\r\n    if (date1 > date2) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = 'Online';\r\n    if (this.refs.type.value) {\r\n      type = this.refs.type.value;\r\n    }\r\n\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let keywords = this.refs.keywords.value;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n\r\n    let token = localStorage.getItem('csrf_token');\r\n\r\n    //alert(learning_outcomes);\r\n    if (this.dateValidate(dates, dates2)) {\r\n      fetch(`${apiUrl}/node?_format=hal_json`, {\r\n        credentials: 'include',\r\n        method: 'POST',\r\n        cookies: 'x-access-token',\r\n        headers: {\r\n          Accept: 'application/hal+json',\r\n          'Content-Type': 'application/hal+json',\r\n          'X-CSRF-Token': token,\r\n          Authorization: 'Basic'\r\n        },\r\n        body: JSON.stringify({\r\n          _links: {\r\n            type: {\r\n              href: `${apiUrlWithHTTP}/rest/type/node/training_resource`\r\n            }\r\n          },\r\n          title: [\r\n            {\r\n              value: title\r\n            }\r\n          ],\r\n          field_dates: [\r\n            {\r\n              value: dates ? dates : null\r\n            }\r\n          ],\r\n          field_end_date: [\r\n            {\r\n              value: dates2 ? dates2 : null\r\n            }\r\n          ],\r\n          field_type: [\r\n            {\r\n              value: type\r\n            }\r\n          ],\r\n          field_description: [\r\n            {\r\n              value: description,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_location: [\r\n            {\r\n              value: location\r\n            }\r\n          ],\r\n          field_url: [\r\n            {\r\n              value: url\r\n            }\r\n          ],\r\n          field_target_audience: [\r\n            {\r\n              value: target_audience,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_learning_outcomes: [\r\n            {\r\n              value: learning_outcomes,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_domain_topics: [\r\n            {\r\n              value: keywords\r\n            }\r\n          ],\r\n          field_organisers: [\r\n            {\r\n              value: organisers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_trainers: [\r\n            {\r\n              value: trainers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n\r\n          type: [\r\n            {\r\n              target_id: 'training_resource'\r\n            }\r\n          ]\r\n        })\r\n      })\r\n        .then(response => response.json())\r\n        .then(data =>\r\n          this.props.history.push({\r\n            pathname: `/training-resources/${slugify(title)}`,\r\n            state: {\r\n              training_resource_id: data.nid[0].value\r\n            }\r\n          })\r\n        );\r\n    } else {\r\n      alert('Incorrect dates');\r\n    }\r\n\r\n    //event.target.reset();\r\n    //this.setState({ updateFlag: true });\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <p>\r\n          <nav>\r\n            <Link to={`/`}>Home</Link> /{' '}\r\n            <Link to={`/all-training-resources`}>All training resources</Link> /\r\n            Create resource{' '}\r\n          </nav>\r\n        </p>\r\n        <h2>Create Training Resource</h2>\r\n        <p>(* fields are mandatory)</p>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"vf-form\"\r\n              id={'resource_create_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"vf-form__item\">\r\n                <strong>Title *</strong>\r\n                <input\r\n                  className=\"vf-form__input\"\r\n                  type=\"text\"\r\n                  ref=\"title\"\r\n                  required\r\n                  placeholder=\"Title\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-grid\">\r\n                <div className=\"vf-form__item\">\r\n                  <strong>Start Date</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"vf-form__input\"\r\n                    ref=\"dates\"\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n                <div className=\"vf-form__item\">\r\n                  <strong>End Date</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"vf-form__input\"\r\n                    ref=\"dates2\"\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Event type *</strong>\r\n                <select className=\"vf-form__select\" ref={'type'}>\r\n                  <option value={'Online'}>Online</option>\r\n                  <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                  <option value={'Webinar'}>Webinar</option>\r\n                  <option value={'Hackathon'}>Hackathon</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Description</strong>\r\n                <CKEditor\r\n                  content={this.state.description}\r\n                  events={{\r\n                    change: this.changeDescription\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Location</strong>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"vf-form__input\"\r\n                  ref=\"location\"\r\n                  placeholder=\"Location\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>URL *</strong>\r\n                <input\r\n                  type=\"url\"\r\n                  className=\"vf-form__input\"\r\n                  ref=\"url\"\r\n                  required\r\n                  placeholder=\"URL\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Target audience</strong>\r\n                <CKEditor\r\n                  content={this.state.target_audience}\r\n                  events={{\r\n                    change: this.changeTargetAudience\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Learning outcomes</strong>\r\n                <CKEditor\r\n                  content={this.state.learning_outcomes}\r\n                  events={{\r\n                    change: this.changeLearningOutcomes\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Organisers</strong>\r\n                <CKEditor\r\n                  content={this.state.organisers}\r\n                  events={{\r\n                    change: this.changeOrganisers\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Trainers</strong>\r\n                <CKEditor\r\n                  content={this.state.trainers}\r\n                  events={{\r\n                    change: this.changeTrainers\r\n                  }}\r\n                  activeClass=\"p10\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <strong>Keywords</strong>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"vf-form__input\"\r\n                  ref=\"keywords\"\r\n                  placeholder=\"Keywords\"\r\n                />\r\n              </div>\r\n              <div className=\"vf-u-margin__bottom--600\" />\r\n              <div className=\"vf-form__item\">\r\n                <input\r\n                  type=\"submit\"\r\n                  className=\"vf-button vf-button--primary\"\r\n                  value=\"Submit\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/create\" component={ResourceCreate} />\r\n  </Switch>\r\n);\r\n\r\nexport default CreateResources;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nconst $ = window.$;\r\n\r\nclass AttributeMap extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      //framework: this.props.selectedFramework,\r\n      //resourceID: this.props.resourceID,\r\n      framework: this.props.location.pathname.split('/')[4].replace(/ /g, ''),\r\n      framework_id: '',\r\n      resourceID: this.props.location.pathname.split('/')[2],\r\n      frameworkdetails: [],\r\n      csrf: '',\r\n      frameworkUUID: '',\r\n      competencies: [],\r\n      //attributes: this.props.selectedAttributes,\r\n      //selectedAttributes: this.props.selectedAttributes,\r\n      selectedAttributes: [],\r\n      //selectedCompetencies: this.props.selectedCompetencies,\r\n      resourceDetails: '',\r\n      resourcePath: this.props.location.pathname.split('/')\r\n    };\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    //this.loadSelectedAttributes = this.loadSelectedAttributes.bind(this);\r\n  }\r\n\r\n  async handleSelect() {\r\n    let checkedAttributes = this.state.selectedAttributes;\r\n    let framework_id = this.state.framework_id;\r\n    let attributeIDs = [];\r\n    //let token = localStorage.getItem('csrf_token');\r\n    for (let i = 0; i < checkedAttributes.length; i++) {\r\n      attributeIDs.push(checkedAttributes[i].split('id', 2));\r\n    }\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.competencyService.attrmap(\r\n          this.state.resourceID,\r\n          attributeIDs,\r\n          framework_id\r\n        )\r\n      ]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n      this.props.history.push('/training-resources/' + this.state.resourceID);\r\n    }\r\n  }\r\n\r\n  handleAllCheck(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let childItems = document.getElementsByName(id);\r\n    if (e.target.checked) {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        childItems[i].checked = true;\r\n        selectedAttributes.push(\r\n          // childItems[i].getAttribute('data-uuid') +\r\n          //   'id' +\r\n          childItems[i].getAttribute('data-id')\r\n        );\r\n        this.setState({ selectedAttributes });\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        if (childItems[i].checked === true) {\r\n          childItems[i].checked = false;\r\n          //selectedAttributes.pop(childItems[i].getAttribute('data-id'));\r\n          //let index = array.indexOf(element);\r\n          selectedAttributes.splice(\r\n            selectedAttributes.indexOf(childItems[i]),\r\n            1\r\n          );\r\n          this.setState({ selectedAttributes });\r\n          //console.log(this.state.selectedAttributes);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAttributeClick(id, uuid, e) {\r\n    let selectedAttributes = this.state.selectedAttributes;\r\n    //let selectedAttributes =\r\n    let isChecked = e.target.checked;\r\n    if (isChecked) {\r\n      //selectedAttributes.push(uuid + 'id' + id);\r\n      selectedAttributes.push(id);\r\n      this.setState({ selectedAttributes });\r\n      document.getElementById(e.target.name).checked = true;\r\n      console.log(selectedAttributes);\r\n    } else {\r\n      //selectedAttributes.pop(id);\r\n      selectedAttributes.splice(selectedAttributes.indexOf(id), 1);\r\n      this.setState({ selectedAttributes });\r\n      if (!$(':checkbox[name=' + e.target.name + ']').is(':checked')) {\r\n        document.getElementById(e.target.name).checked = false;\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleListAllChecked(e) {\r\n    let lists = [];\r\n    $(':checkbox').each(function() {\r\n      if ($(this).is(':checked')) {\r\n        lists.push($(this).attr('id'));\r\n      }\r\n    });\r\n    alert(lists);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(\r\n      `${apiUrl}` +\r\n        '/api/resources/?_format=hal_json&id=' +\r\n        this.state.resourceID +\r\n        '&timestamp=' +\r\n        Date.now()\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resourceDetails: findresponse\r\n        });\r\n      });\r\n\r\n    console.log(this.state.resourceDetails);\r\n\r\n    let selectedAttributes = [];\r\n    this.state.resourceDetails.competency_profile.map(profile => {\r\n      //if(profile.title.toLowerCase() == this.state.framewor  k){\r\n      profile.domains.map(domain => {\r\n        domain.competencies.map(competency => {\r\n          competency.attributes.map(attribute => {\r\n            selectedAttributes.push(attribute.id);\r\n            return null;\r\n          });\r\n          return null;\r\n        });\r\n        return null;\r\n      });\r\n      //}\r\n      return null;\r\n    });\r\n\r\n    this.setState({ selectedAttributes: selectedAttributes });\r\n\r\n    //console.log(this.state.framework);\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchFrameworkDetails = `${apiUrl}/api/version_manager?_format=json&timestamp=${Date.now()}`;\r\n    await fetch(fetchFrameworkDetails)\r\n      .then(Response => Response.json())\r\n      .then(findresponse1 => {\r\n        this.setState({\r\n          frameworkdetails: findresponse1\r\n        });\r\n      });\r\n\r\n    let latest_version = '';\r\n\r\n    this.state.frameworkdetails.map(detail => {\r\n      if (\r\n        detail.title.toLowerCase().replace(/ /g, '') === this.state.framework\r\n      ) {\r\n        detail.versions.map(version => {\r\n          if (version.status === 'live') {\r\n            latest_version = version.number;\r\n            this.state.framework_id = detail.nid;\r\n            console.log(detail.nid);\r\n          }\r\n          return null;\r\n        });\r\n      }\r\n      return null;\r\n    });\r\n\r\n    console.log(latest_version);\r\n\r\n    let fetchCompetencyList =\r\n      `${apiUrl}` +\r\n      '/api/' +\r\n      this.state.framework +\r\n      '/' +\r\n      latest_version +\r\n      '?_format=json';\r\n\r\n    await fetch(fetchCompetencyList)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.state.attributes === nextState.attributes;\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.state.data);\r\n    let frameworkDetails = this.state.frameworkdetails;\r\n    let data = this.state.data;\r\n    let frameworkDefs = [];\r\n    let domainsOptions = [];\r\n    let attributeTypeOptions = [];\r\n    let resDetails = this.state.resourceDetails;\r\n    //let resDetails = this.state.resourceDetails;\r\n    let selectedAttributesArray = [];\r\n    let selectedCompetenciesArray = [];\r\n    if (resDetails) {\r\n      resDetails.competency_profile.map(profile => {\r\n        profile.domains.map(domain => {\r\n          domain.competencies.map(competency => {\r\n            selectedCompetenciesArray.push(competency.id);\r\n            competency.attributes.map(attribute => {\r\n              selectedAttributesArray.push(attribute.id);\r\n              return null;\r\n            });\r\n            return null;\r\n          });\r\n          return null;\r\n        });\r\n        return null;\r\n      });\r\n\r\n      //console.log(selectedAttributesArray);\r\n    }\r\n    //this.loadSelectedAttributes();\r\n\r\n    frameworkDetails.forEach((item, ikey) => {\r\n      if (item.title.toLowerCase().replace(/ /g, '') === this.state.framework) {\r\n        //this.state.frameworkUUID = item.uuid;\r\n        item.attribute_types.forEach(attribute_type => {\r\n          frameworkDefs.push(attribute_type.title);\r\n          attributeTypeOptions.push(\r\n            <option data-id={attribute_type.id} value={attribute_type.uuid}>\r\n              {attribute_type.title}\r\n            </option>\r\n          );\r\n        });\r\n        item.domains.forEach(domain => {\r\n          domainsOptions.push(\r\n            <option data-id={domain.id} value={domain.uuid}>\r\n              {domain.title}\r\n            </option>\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    // console.log(data);\r\n\r\n    const ListOfCompetencies = data.map(item =>\r\n      item.domains.map((domain, did) => (\r\n        <tbody>\r\n          <tr key={domain.nid}>\r\n            <td>{did + 1}</td>{' '}\r\n            <td>\r\n              <strong> {domain.title}</strong>{' '}\r\n            </td>{' '}\r\n          </tr>\r\n          {domain.competencies.map((competency, cid) => (\r\n            <tr key={competency.id}>\r\n              <td>\r\n                {did + 1}.{cid + 1}\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type={'checkbox'}\r\n                  defaultChecked={\r\n                    -1 !== selectedCompetenciesArray.indexOf(competency.id)\r\n                  }\r\n                  data-test={competency.uuid}\r\n                  id={competency.id}\r\n                  onChange={this.handleAllCheck.bind(\r\n                    this,\r\n                    competency.id,\r\n                    competency.uuid\r\n                  )}\r\n                />{' '}\r\n                {competency.title}\r\n                <ul style={{ marginLeft: 1 + 'em', marginBottom: 1 + 'em' }}>\r\n                  {frameworkDefs.map(def => {\r\n                    return (\r\n                      <div style={{ marginLeft: 1 + 'em' }}>\r\n                        <div>\r\n                          {' '}\r\n                          <strong>\r\n                            <em>{def}</em>\r\n                          </strong>\r\n                        </div>\r\n                        {competency.attributes\r\n                          .filter(attribute => attribute.type === def)\r\n                          .map(attribute => {\r\n                            return (\r\n                              <li\r\n                                key={attribute.id}\r\n                                style={{ marginLeft: 1 + 'em' }}\r\n                              >\r\n                                <input\r\n                                  type={'checkbox'}\r\n                                  defaultChecked={\r\n                                    -1 !==\r\n                                    selectedAttributesArray.indexOf(\r\n                                      //attribute.uuid + 'id' + attribute.id\r\n                                      attribute.id\r\n                                    )\r\n                                  }\r\n                                  name={competency.id}\r\n                                  data-id={attribute.id}\r\n                                  data-uuid={attribute.uuid}\r\n                                  id={attribute.id}\r\n                                  onChange={this.handleAttributeClick.bind(\r\n                                    this,\r\n                                    attribute.id,\r\n                                    attribute.uuid\r\n                                  )}\r\n                                />{' '}\r\n                                <span className={attribute.archived}>\r\n                                  {' '}\r\n                                  {attribute.title}\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          })}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          <tr>\r\n            <td>\r\n              <td />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      ))\r\n    );\r\n    console.log(this.state.data);\r\n    return (\r\n      <div>\r\n        <h2>{resDetails.title}</h2>\r\n        <h4>Type: {resDetails.type}</h4>\r\n        <h4>URL: {resDetails.url}</h4>\r\n        <table className={'table'}>{ListOfCompetencies}</table>\r\n        <div id={'footer-button'}>\r\n          <button\r\n            className={'vf-button vf-button--primary vf-button--sm'}\r\n            onClick={this.handleSelect.bind(this)}\r\n          >\r\n            {' '}\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst AttrMap = () => (\r\n  <Switch>\r\n    <Route\r\n      exact\r\n      path=\"/training-resources/:id/map/:framework\"\r\n      component={AttributeMap}\r\n    />\r\n  </Switch>\r\n);\r\n\r\nexport default AttrMap;\r\n","import React from 'react';\n\nimport Modal from 'react-modal';\nimport { Link } from 'react-router-dom';\n\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)'\n  }\n};\n\n// Make sure to bind modal to your appElement (http://reactcommunity.org/react-modal/accessibility/)\nModal.setAppElement('#root');\n\nclass ItemVersions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalIsOpen: false\n    };\n\n    this.openModal = this.openModal.bind(this);\n    // this.afterOpenModal = this.afterOpenModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  openModal() {\n    this.setState({ modalIsOpen: true });\n  }\n\n  // afterOpenModal() {\n  //   // references are now sync'd and can be accessed.\n  //   this.subtitle.style.color = '#f00';\n  // }\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  render() {\n    return (\n      <span>\n        <button onClick={this.openModal}>\n          {' '}\n          <i className={'fa fa-question-circle'} />{' '}\n        </button>\n        <Modal\n          isOpen={this.state.modalIsOpen}\n          onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n        >\n          <button className={'float-right'} onClick={this.closeModal}>\n            <i className={'fa fa-window-close'} />\n          </button>\n          <p />\n          <div className={'callout'}>\n            This item is deprecated in the latest version of this framework.\n            Please see the\n            <Link\n              to={`/framework/${this.props.framework.toLowerCase()}/${\n                this.props.version\n              }`}\n            >\n              {' '}\n              release notes\n            </Link>\n          </div>\n        </Modal>\n      </span>\n    );\n  }\n}\n\nexport default ItemVersions;\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport AttributeMap from './AttributeMap';\r\nimport Parser from 'html-react-parser';\r\nimport ItemVersions from '../containers/framework-versions/VersionNotice';\r\nimport { apiUrl } from '../services/http/http';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ResourceDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resource: [],\r\n      frameworks: [],\r\n      resourcePath: this.props.location.pathname.split('/'),\r\n      showModal: false,\r\n      selectedFramework: '',\r\n      updateFlag: ''\r\n    };\r\n    this.handleOpenModal = this.handleOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n  }\r\n\r\n  getSlugFromURLBar() {\r\n    const url = new URL(window.location.href);\r\n    return url.pathname.split('training-resources/').pop();\r\n  }\r\n\r\n  handleOpenModal(event, temp) {\r\n    this.setState({ showModal: true });\r\n    this.setState({ selectedFramework: event });\r\n    temp.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.setState({ showModal: false });\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token?source=competencyhub`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n    this.getSlugFromURLBar();\r\n    let resourcesURL = `${apiUrl}/api/resources/?_format=json&slug=${this.getSlugFromURLBar()}&timestamp=${Date.now()}&source=competencyhub`;\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse3 => {\r\n        this.setState({ resource: findresponse3 });\r\n      });\r\n    fetch(`${apiUrl}/api/version_manager?_format=json&source=competencyhub`)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  mappingBlock() {\r\n    if (localStorage.getItem('roles')) {\r\n      if (localStorage.getItem('roles').includes('content_manager')) {\r\n        return (\r\n          <div>\r\n            <strong> Manage competency profile </strong>\r\n            <ul>\r\n              {this.state.frameworks.map((item, id) => {\r\n                return (\r\n                  <li style={{ display: 'inline', margin: '5px' }}>\r\n                    <Link\r\n                      to={\r\n                        '/training-resources/' +\r\n                        (this.props.location.state\r\n                          ? this.props.location.state.training_resource_id\r\n                          : this.state.resourcePath[2]) +\r\n                        '/map/' +\r\n                        item.title.toLowerCase().replace(/ /g, '')\r\n                      }\r\n                    >\r\n                      {' '}\r\n                      <i className=\"fas fa-tags\" /> {item.title}{' '}\r\n                    </Link>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  formatDates(start, end) {\r\n    let months = [\r\n      'January',\r\n      'February',\r\n      'March',\r\n      'April',\r\n      'May',\r\n      'June',\r\n      'July',\r\n      'August',\r\n      'September',\r\n      'October',\r\n      'November',\r\n      'December'\r\n    ];\r\n\r\n    let start_dt = new Date(start);\r\n    let end_date = new Date(end);\r\n\r\n    let start_day = start_dt.getDate();\r\n    let start_month = start_dt.getMonth();\r\n    let start_year = start_dt.getFullYear();\r\n\r\n    if (end) {\r\n      let end_day = end_date.getDate();\r\n      let end_month = end_date.getMonth();\r\n      let end_year = end_date.getFullYear();\r\n\r\n      if (start_year === end_year) {\r\n        if (start_month === end_month) {\r\n          if (start_day === end_day) {\r\n            return start_day + ' ' + months[start_month] + ' ' + start_year;\r\n          } else {\r\n            return (\r\n              start_day +\r\n              ' - ' +\r\n              end_day +\r\n              ' ' +\r\n              months[start_month] +\r\n              ' ' +\r\n              start_year\r\n            );\r\n          }\r\n        } else {\r\n          return (\r\n            start_day +\r\n            ' ' +\r\n            months[start_month] +\r\n            ' - ' +\r\n            end_day +\r\n            ' ' +\r\n            months[end_month] +\r\n            ' ' +\r\n            start_year\r\n          );\r\n        }\r\n      } else {\r\n        return (\r\n          start_day +\r\n          ' ' +\r\n          months[start_month] +\r\n          ' ' +\r\n          start_year +\r\n          ' - ' +\r\n          end_day +\r\n          ' ' +\r\n          months[end_month] +\r\n          ' ' +\r\n          end_year\r\n        );\r\n      }\r\n    } else {\r\n      return start_day + ' ' + months[start_month] + ' ' + start_year;\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      return false;\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json&source=competencyhub', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    let attributes = [];\r\n    let selectedCompetencies = [];\r\n    let attribute_types = [];\r\n    let item = this.state.resource;\r\n    let frameworkLiveVersion = '';\r\n\r\n    let link = '/bioexcel/1.1';\r\n    let check_array = Array.isArray(item.competency_profile);\r\n    const Resource = (\r\n      <>\r\n        <h2>{item.title}</h2>\r\n        <div className=\"vf-grid  vf-grid__col-4\">\r\n          <div className=\"vf-grid__col--span-3\">\r\n            <h3>Overview</h3>\r\n            {item.description ? Parser(item.description) : ''}\r\n\r\n            {item.url ? (\r\n              <p>\r\n                <a href={item.url} target={'_blank'}>\r\n                  <button className=\"vf-button vf-button--primary vf-button--sm\">\r\n                    Go to resource\r\n                  </button>\r\n                </a>\r\n              </p>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            {item.target_audience\r\n              ? Parser('<h3>Target Audience</h3>' + item.target_audience)\r\n              : ''}\r\n            {item.learning_outcomes\r\n              ? Parser('<h3>Learning Outcomes</h3>' + item.learning_outcomes)\r\n              : ''}\r\n            {item.organisers\r\n              ? Parser('<h3>Organisers</h3>' + item.organisers)\r\n              : ''}\r\n\r\n            {/*{item.trainers ? Parser('<h3>Trainers</h3>' + item.trainers) : ''}*/}\r\n\r\n            <div>\r\n              <h3>Associated competencies</h3>\r\n              <p>\r\n                This resource provides learning to support the development of\r\n                the following competencies\r\n              </p>\r\n              <div>\r\n                {check_array ? (\r\n                  item.competency_profile.map((profile, index) => {\r\n                    return (\r\n                      <div className=\"vf-grid\" key={index}>\r\n                        {this.state.frameworks.map(framework => {\r\n                          if (framework.nid === profile.id) {\r\n                            framework.attribute_types.map(type => {\r\n                              if (attribute_types.indexOf(type.title) === -1) {\r\n                                attribute_types.push(type.title);\r\n                              }\r\n                              return null;\r\n                            });\r\n                            frameworkLiveVersion = framework.versions.find(\r\n                              version => version.status === 'live'\r\n                            );\r\n                          }\r\n\r\n                          return null;\r\n                        })}\r\n                        <div>\r\n                          <h3>{profile.title}</h3>\r\n                        </div>\r\n                        <div>\r\n                          {profile.domains.map((domain, index) => (\r\n                            <div key={index}>\r\n                              <h3>{domain.title}</h3>\r\n                              <ul className=\"vf-list vf-list--unordered\">\r\n                                {domain.competencies.map(\r\n                                  (competency, index) => (\r\n                                    <li className=\"vf-list__item\" key={index}>\r\n                                      <span\r\n                                        className={\r\n                                          competency.archived === 'archived'\r\n                                            ? 'archived'\r\n                                            : ''\r\n                                        }\r\n                                      >\r\n                                        <p>\r\n                                          <a\r\n                                            className=\"vf-link\"\r\n                                            href={`/framework/${profile.title\r\n                                              .toLowerCase()\r\n                                              .replace(/\\s+/g, '')}/${\r\n                                              profile.version\r\n                                            }/competency/details/${\r\n                                              competency.id\r\n                                            }`}\r\n                                          >\r\n                                            {' '}\r\n                                            {competency.title}{' '}\r\n                                          </a>\r\n                                        </p>\r\n                                        {/* {competency.archived === 'archived' ? (\n                                          <ItemVersions\n                                            framework=\"bioexcel\"\n                                            versions={link}\n                                          />\n                                        ) : (\n                                          ''\n                                        )} */}\r\n                                      </span>\r\n                                      {/* <ul\n                                        className=\"vf-list\"\n                                        style={{ marginLeft: '2rem' }}\n                                      >\n                                        {attribute_types.map((type, index) => (\n                                          <span key={index}>\n                                            <li className=\"vf-list__item vf-u-type__text-body--2\">\n                                              {competency.attributes.find(\n                                                attribute =>\n                                                  attribute.type === type\n                                              )\n                                                ? type\n                                                : ''}\n                                              <div class=\"vf-u-margin__top--500\" />\n                                              <ul className=\"vf-list vf-list--unordered\">\n                                                {competency.attributes.map(\n                                                  (attribute, index) => {\n                                                    if (\n                                                      attribute.type === type\n                                                    ) {\n                                                      return (\n                                                        <li\n                                                          className=\"vf-list__item vf-u-type__text-body--2\"\n                                                          key={index}\n                                                        >\n                                                          <span\n                                                            className={\n                                                              attribute.archived ===\n                                                              'archived'\n                                                                ? 'archived'\n                                                                : ''\n                                                            }\n                                                          >\n                                                            {attribute.title}\n                                                            {attribute.archived ===\n                                                            'archived' ? (\n                                                              <ItemVersions\n                                                                framework={\n                                                                  profile.title\n                                                                }\n                                                                version={\n                                                                  frameworkLiveVersion.number\n                                                                }\n                                                              />\n                                                            ) : (\n                                                              ''\n                                                            )}\n                                                            {attribute.archived ===\n                                                            'archived' ? (\n                                                              <a\n                                                                href={\n                                                                  '/training-resources/' +\n                                                                  item.id +\n                                                                  '/demap/' +\n                                                                  attribute.id\n                                                                }\n                                                              >\n                                                                <i className=\"fas fa-times-circle\" />\n                                                              </a>\n                                                            ) : (\n                                                              ''\n                                                            )}\n                                                          </span>\n                                                        </li>\n                                                      );\n                                                    }\n                                                    return null;\n                                                  }\n                                                )}\n                                              </ul>\n                                            </li>\n                                          </span>\n                                        ))}\n                                      </ul> */}\r\n                                    </li>\r\n                                  )\r\n                                )}\r\n                              </ul>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <td />\r\n                  </tr>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"vf-grid__col--span-1\">\r\n            {this.checkUser() ? (\r\n              <div className=\"float-right\">\r\n                <div>\r\n                  <Link\r\n                    to={'/training-resource/edit/' + this.state.resourcePath[2]}\r\n                  >\r\n                    <i className=\"fas fa-edit\" /> Edit this resource{' '}\r\n                  </Link>\r\n                </div>\r\n                {item.archived === 'archived' ? (\r\n                  <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                    style={{ cursor: 'pointer' }}\r\n                    onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n                  >\r\n                    {' '}\r\n                    <i className=\"fas fa-toggle-on\" />{' '}\r\n                    <span>Resource is archived</span>{' '}\r\n                  </a>\r\n                ) : (\r\n                  <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                    style={{ cursor: 'pointer' }}\r\n                    onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n                  >\r\n                    {' '}\r\n                    <i className=\"fas fa-toggle-off\" />{' '}\r\n                    <span>Archive this resource</span>\r\n                  </a>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            <p />\r\n\r\n            <p>\r\n              {item.trainers ? Parser('<h3>Trainers</h3>' + item.trainers) : ''}\r\n            </p>\r\n\r\n            {item.dates ? (\r\n              <span>\r\n                <strong>Dates:</strong>{' '}\r\n                {this.formatDates(item.dates, item.end_date)}\r\n              </span>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            {item.location ? (\r\n              <p>\r\n                <strong>Location:</strong> {item.location}\r\n              </p>\r\n            ) : (\r\n              ''\r\n            )}\r\n            {item.type ? (\r\n              <p>\r\n                <strong>Type:</strong> {item.type}\r\n              </p>\r\n            ) : (\r\n              ''\r\n            )}\r\n            {item.keywords ? (\r\n              <p>\r\n                <strong>Keywords:</strong> {item.keywords}\r\n              </p>\r\n            ) : (\r\n              ''\r\n            )}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n\r\n    return (\r\n      <div className={'row'}>\r\n        <div className={'column large-12'}>\r\n          {Resource}\r\n          {this.mappingBlock()}\r\n        </div>\r\n\r\n        <div style={{ overflow: 'scroll' }}>\r\n          <ReactModal\r\n            isOpen={this.state.showModal}\r\n            className=\"Modal\"\r\n            overlayClassName=\"Overlay\"\r\n            contentLabel=\"Minimal Modal Example\"\r\n          >\r\n            <div>\r\n              <h2 style={{ 'text-align': 'center' }}>\r\n                Manage competency profile for{' '}\r\n                {this.state.selectedFramework.toUpperCase()}{' '}\r\n                <i\r\n                  className=\"fas fa-window-close float-right\"\r\n                  data-close\r\n                  onClick={this.handleCloseModal}\r\n                />{' '}\r\n              </h2>\r\n            </div>\r\n            <table>\r\n              <AttributeMap\r\n                selectedCompetencies={selectedCompetencies}\r\n                selectedAttributes={attributes}\r\n                selectedFramework={this.state.selectedFramework}\r\n                resourceID={this.state.resourcePath[2]}\r\n                handleCloseModal={this.handleCloseModal}\r\n              />\r\n            </table>\r\n          </ReactModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ResDetails = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resources/:id\" component={ResourceDetails} />\r\n  </Switch>\r\n);\r\n\r\nexport default ResDetails;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\nimport Pagination from 'react-js-pagination';\r\nimport { apiUrl } from '../services/http/http';\r\nimport { slugify } from '../services/util/slugifier';\r\n\r\nclass ResourcesList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      filterType: '',\r\n      filterMapping: '',\r\n      userid: '',\r\n      activePage: 0,\r\n      totalItemsCount: 0,\r\n      filter: ''\r\n    };\r\n    this.archiveHandle = this.archiveHandle.bind(this);\r\n    this.handlePageChange = this.handlePageChange.bind(this);\r\n    this.searchSubmit = this.searchSubmit.bind(this);\r\n  }\r\n\r\n  async handlePageChange(pageNumber) {\r\n    await this.setState({ resources: null });\r\n    await this.setState({ activePage: pageNumber });\r\n    await this.fetchData();\r\n    setTimeout(function() {\r\n      window.scrollTo(0, 0);\r\n    }, 700);\r\n  }\r\n\r\n  async searchSubmit(e) {\r\n    e.preventDefault();\r\n    await this.setState({ resources: null });\r\n    await this.setState({ activePage: 1 });\r\n    await this.setState({ totalItemsCount: 0 });\r\n    await this.fetchData();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  async fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    //let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    let resourcesURL = `${apiUrl}/api/resources?_format=json&page=${\r\n      this.state.activePage\r\n    }&title=${this.state.filter}&type=${this.state.filterType}`;\r\n    await fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resources: findresponse\r\n        });\r\n      });\r\n    if (this.state.resources[0]) {\r\n      let hitcount = this.state.resources[0].hitcount;\r\n      this.setState({ totalItemsCount: hitcount });\r\n    }\r\n  }\r\n\r\n  checkAuthor(author_id) {\r\n    let userid = localStorage.getItem('userid');\r\n    if (userid === author_id) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async filter(e) {\r\n    await this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  filterTypeHandle(e) {\r\n    this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  filterMappingHandle(e) {\r\n    if (this.state.filterMapping) {\r\n      this.setState({ filterMapping: 0 });\r\n    } else {\r\n      this.setState({ filterMapping: 1 });\r\n    }\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    console.log(status);\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  formatDates(start, end) {\r\n    let months = [\r\n      'January',\r\n      'February',\r\n      'March',\r\n      'April',\r\n      'May',\r\n      'June',\r\n      'July',\r\n      'August',\r\n      'September',\r\n      'October',\r\n      'November',\r\n      'December'\r\n    ];\r\n\r\n    let start_dt = new Date(start);\r\n    let end_date = new Date(end);\r\n\r\n    let start_day = start_dt.getDate();\r\n    let start_month = start_dt.getMonth();\r\n    let start_year = start_dt.getFullYear();\r\n\r\n    if (end) {\r\n      let end_day = end_date.getDate();\r\n      let end_month = end_date.getMonth();\r\n      let end_year = end_date.getFullYear();\r\n\r\n      if (start_year === end_year) {\r\n        if (start_month === end_month) {\r\n          if (start_day === end_day) {\r\n            return start_day + ' ' + months[start_month] + ' ' + start_year;\r\n          } else {\r\n            return (\r\n              start_day +\r\n              ' - ' +\r\n              end_day +\r\n              ' ' +\r\n              months[start_month] +\r\n              ' ' +\r\n              start_year\r\n            );\r\n          }\r\n        } else {\r\n          return (\r\n            start_day +\r\n            ' ' +\r\n            months[start_month] +\r\n            ' - ' +\r\n            end_day +\r\n            ' ' +\r\n            months[end_month] +\r\n            ' ' +\r\n            start_year\r\n          );\r\n        }\r\n      } else {\r\n        return (\r\n          start_day +\r\n          ' ' +\r\n          months[start_month] +\r\n          ' ' +\r\n          start_year +\r\n          ' - ' +\r\n          end_day +\r\n          ' ' +\r\n          months[end_month] +\r\n          ' ' +\r\n          end_year\r\n        );\r\n      }\r\n    } else {\r\n      return start_day + ' ' + months[start_month] + ' ' + start_year;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let resources = this.state.resources;\r\n    var ListOfResources = '';\r\n    if (resources) {\r\n      ListOfResources = resources.map((item, index) => (\r\n        <tr className=\"vf-table__row\" key={index}>\r\n          <td className=\"vf-table__cell\">{index + 1} </td>\r\n          <td className=\"vf-table__cell\">\r\n            <div style={{ maxWidth: '500px' }}>\r\n              <Link\r\n                to={{\r\n                  pathname: `/training-resources/${slugify(item.title)}`,\r\n                  state: {\r\n                    training_resource_id: item.id\r\n                  }\r\n                }}\r\n              >\r\n                {item.title}\r\n              </Link>\r\n            </div>\r\n          </td>\r\n          <td className=\"vf-table__cell\">\r\n            {item.dates ? this.formatDates(item.dates, item.end_date) : ''}\r\n          </td>\r\n          <td className=\"vf-table__cell\">{item.type}</td>\r\n          <td className=\"vf-table__cell\">\r\n            <a href={item.url} target={'_blank'}>\r\n              Resource URL\r\n            </a>\r\n          </td>\r\n          <td className=\"vf-table__cell\">\r\n            {item.archived === 'archived' ? (\r\n              <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n              >\r\n                {' '}\r\n                <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\r\n              </a>\r\n            ) : (\r\n              <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                style={{ cursor: 'pointer' }}\r\n                onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n              >\r\n                {' '}\r\n                <i className=\"fas fa-toggle-off\" />\r\n              </a>\r\n            )}\r\n          </td>\r\n          <td className=\"vf-table__cell\">\r\n            {this.checkAuthor(item.author) ? (\r\n              <Link to={`/training-resource/edit/${item.id}`}>\r\n                <i className=\"fas fa-edit\" />{' '}\r\n              </Link>\r\n            ) : (\r\n              ''\r\n            )}\r\n          </td>\r\n        </tr>\r\n      ));\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h3>Training Resources</h3>\r\n        <form\r\n          className=\"vf-form | vf-search\"\r\n          onSubmit={e => this.searchSubmit(e)}\r\n        >\r\n          <div className=\"vf-grid vf-grid__col-6\">\r\n            <div className=\"vf-form__item | vf-search__item vf-grid__col--span-2\">\r\n              <input\r\n                type=\"search\"\r\n                onChange={this.filter.bind(this)}\r\n                placeholder=\"Type to search\"\r\n                className=\"vf-form__input | vf-search__item\"\r\n              />\r\n            </div>\r\n            <div className=\"vf-form__item vf-grid__col--span-1\">\r\n              <select\r\n                ref={'type'}\r\n                onChange={this.filterTypeHandle.bind(this)}\r\n                className=\"vf-form__select\"\r\n              >\r\n                <option value={'All'}>All</option>\r\n                <option value={'Online'}>Online</option>\r\n                <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                <option value={'Webinar'}>Webinar</option>\r\n                <option value={'Hackathon'}>Hackathon</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"vf-form__item vf-grid__col--span-1\">\r\n              <input\r\n                type=\"submit\"\r\n                className=\"vf-search__button | vf-button vf-button--primary vf-button--sm\"\r\n                value=\"Search\"\r\n              />\r\n            </div>\r\n            <div className=\"vf-grid__col--span-1\">\r\n              <Link\r\n                className={'vf-button vf-button--primary vf-button--sm'}\r\n                to={'/training-resource/create'}\r\n              >\r\n                <i className=\"fas fa-plus-circle\"> </i> Add training resource{' '}\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div className=\"vf-grid vf-grid__col-6\">\r\n          <div className=\"vf-form__item vf-grid__col--span-3\">\r\n            <h5>Total: {this.state.totalItemsCount}</h5>\r\n          </div>\r\n          <div\r\n            className=\"vf-form__item vf-grid__col--span-3\"\r\n            style={{ paddingTop: '30px' }}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"checkboxMapping\"\r\n              checked={this.state.filterMapping}\r\n              onChange={this.filterMappingHandle.bind(this)}\r\n              className=\"vf-form__checkbox\"\r\n            />\r\n            <label for=\"checkboxMapping\" className=\"vf-form__label\">\r\n              {' '}\r\n              Show resources with deprecated mapping{' '}\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <table className=\"vf-table vf-table--striped\">\r\n          <thead className=\"vf-table__header\">\r\n            <tr className=\"vf-table__row\">\r\n              <th className=\"vf-table__heading\">S. No.</th>\r\n              <th className=\"vf-table__heading\">Title</th>\r\n              <th className=\"vf-table__heading\">Date(s)</th>\r\n              <th className=\"vf-table__heading\">Type</th>\r\n              <th className=\"vf-table__heading\">URL</th>\r\n              <th className=\"vf-table__heading\">Archive</th>\r\n              <th className=\"vf-table__heading\">Edit</th>\r\n            </tr>\r\n          </thead>\r\n          {resources ? (\r\n            resources.length > 0 ? (\r\n              <tbody className=\"vf-table__body\">{ListOfResources}</tbody>\r\n            ) : (\r\n              <h5>No results found</h5>\r\n            )\r\n          ) : (\r\n            <center>\r\n              <img\r\n                alt=\"progress\"\r\n                src=\"/dev-competency-mapper/progressbar.gif\"\r\n              />\r\n              <h4>Loading resources</h4>\r\n            </center>\r\n          )}\r\n        </table>\r\n        <nav className=\"vf-pagination\" aria-label=\"Pagination\">\r\n          <Pagination\r\n            activePage={this.state.activePage}\r\n            itemsCountPerPage={50}\r\n            totalItemsCount={this.state.totalItemsCount}\r\n            pageRangeDisplayed={5}\r\n            onChange={e => this.handlePageChange(e)}\r\n            innerclassName=\"vf-pagination__list\"\r\n            itemclassName=\"vf-pagination__item\"\r\n            itemClassPrev=\"vf-pagination__item--previous-page\"\r\n            itemClassNext=\"vf-pagination__item--next-page\"\r\n            linkclassName=\"vf-pagination__link vf-pagination__label\"\r\n            activeclassName=\"vf-pagination__item--is-active\"\r\n            prevPageText=\"Previous\"\r\n            nextPageText=\"Next\"\r\n          />\r\n        </nav>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Resources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/all-training-resources\" component={ResourcesList} />\r\n  </Switch>\r\n);\r\n\r\nexport default Resources;\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n//import Parser from 'html-react-parser';\nimport { Link } from 'react-router-dom';\n\n//import { apiUrl } from '../services/http/http';\n\nclass ResourcesHome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resources: [],\n      filterType: ''\n    };\n    //this.archiveHandle = this.archiveHandle.bind(this);\n  }\n\n  checkUser() {\n    if (!localStorage.getItem('roles')) {\n      this.props.history.push('/');\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\n      alert(\n        'You are not authorised to access this page. Contact the administrator'\n      );\n      this.props.history.push('/');\n    }\n    console.log(localStorage.getItem('roles'));\n  }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (this.state.updateFlag) {\n  //     this.fetchData();\n  //     setTimeout(() => {\n  //       this.setState({ updateFlag: false });\n  //     }, 1000);\n  //     console.log('componentDidUpdate');\n  //   }\n  // }\n\n  // componentDidMount() {\n  //   this.fetchData();\n  // }\n\n  // fetchData() {\n  //   let csrfURL = `${apiUrl}/rest/session/token`;\n  //   fetch(csrfURL)\n  //     .then(Response => Response)\n  //     .then(findresponse2 => {\n  //       this.setState({ csrf: findresponse2 });\n  //     });\n\n  //   //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\n  //   let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\n  //   fetch(resourcesURL)\n  //     .then(Response => Response.json())\n  //     .then(findresponse => {\n  //       this.setState({\n  //         resources: findresponse\n  //       });\n  //     });\n  // }\n\n  // filter(e) {\n  //   this.setState({ filter: e.target.value });\n  // }\n\n  // filterTypeHandle(e) {\n  //   this.setState({ filterType: e.target.value });\n  // }\n\n  // archiveHandle(rid, status, event) {\n  //   //alert(\"competency \"+ cid+ \"is \"+ status);\n  //   let archivedStatus = '';\n  //   if (status === 1) {\n  //     archivedStatus = false;\n  //   } else {\n  //     archivedStatus = true;\n  //   }\n  //   let token = localStorage.getItem('csrf_token');\n  //   fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\n  //     credentials: 'include',\n  //     method: 'PATCH',\n  //     cookies: 'x-access-token',\n  //     headers: {\n  //       Accept: 'application/hal+json',\n  //       'Content-Type': 'application/hal+json',\n  //       'X-CSRF-Token': token,\n  //       Authorization: 'Basic'\n  //     },\n  //     body: JSON.stringify({\n  //       _links: {\n  //         type: {\n  //           href: `${apiUrl}/rest/type/node/training_resource`\n  //         }\n  //       },\n  //       field_archived: [\n  //         {\n  //           value: archivedStatus\n  //         }\n  //       ],\n  //       type: [\n  //         {\n  //           target_id: 'training_resource'\n  //         }\n  //       ]\n  //     })\n  //   });\n\n  //   this.setState({ updateFlag: true });\n\n  //   event.preventDefault();\n  // }\n\n  render() {\n    this.checkUser();\n    // let resources = this.state.resources;\n    // if (this.state.filter) {\n    //   resources = resources.filter(\n    //     item =>\n    //       item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\n    //       item.description\n    //         .toLocaleLowerCase()\n    //         .includes(this.state.filter.toLowerCase())\n    //   );\n    // }\n\n    // if (this.state.filterType !== 'All') {\n    //   resources = resources.filter(item =>\n    //     item.type\n    //       .toLocaleLowerCase()\n    //       .includes(this.state.filterType.toLowerCase())\n    //   );\n    // }\n\n    // const ListOfResources = resources.map((item, index) => (\n    //   <tr key={index}>\n    //     <td>{index + 1} </td>\n    //     <td>\n    //       {' '}\n    //       <h4>\n    //         {' '}\n    //         <Link to={'/training-resources/' + item.id}>{item.title} </Link>\n    //       </h4>\n    //       <p>{item.dates} </p>\n    //       <strong>Learning resource type:</strong> {item.type} <br />\n    //       {Parser(item.description.substr(0, 240) + '...')} <br />\n    //       <br />\n    //       <strong> URL: </strong>{' '}\n    //       <a href={item.url} target={'_blank'}>\n    //         {item.url}\n    //       </a>\n    //     </td>\n    //     <td>\n    //       {item.archived === '1' ? (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 1)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\n    //         </a>\n    //       ) : (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 0)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-off\" />\n    //         </a>\n    //       )}\n    //     </td>\n    //     <td>\n    //       <Link to={`/training-resource/edit/${item.id}`}>\n    //         <i className=\"fas fa-edit\" />{' '}\n    //       </Link>\n    //     </td>\n    //   </tr>\n    // ));\n    return (\n      <div className={'row'}>\n        <h3>Training Resources</h3>\n        <div className=\"row\">\n          <div className=\"column large-4 callout\">\n            <Link\n              className={'button float-right'}\n              to={'/all-training-resources'}\n            >\n              <i className=\"fas fa-list\"> </i> View published training resources{' '}\n            </Link>\n          </div>\n          <div className=\"column large-4 callout\">\n            <Link className={'button float-right'} to={'#'}>\n              <i className=\"fas fa-list\"> </i> View unpublished training\n              resources{' '}\n            </Link>\n          </div>\n          <div className={'column large-4 callout'}>\n            <Link className={'button float-right'} to={'#'}>\n              <i className=\"fas fa-tasks\"> </i> Manage training resources{' '}\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst ResourcesHomepage = () => (\n  <Switch>\n    <Route exact path=\"/training-resources-home\" component={ResourcesHome} />\n  </Switch>\n);\n\nexport default ResourcesHomepage;\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      roles: '',\r\n      user: ''\r\n    };\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    let old = this.refs.old.value;\r\n    let new1 = this.refs.new1.value;\r\n    let uid = localStorage.getItem('userid');\r\n    fetch(`${apiUrl}/user/` + uid + '?_format=json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': localStorage.getItem('csrf_token')\r\n      },\r\n      body: JSON.stringify({\r\n        pass: [\r\n          {\r\n            existing: old,\r\n            value: new1\r\n          }\r\n        ]\r\n      })\r\n    })\r\n      .then(resp => resp)\r\n      .then(data =>\r\n        setTimeout(() => {\r\n          alert('Password changed successfully');\r\n          window.location.reload();\r\n        }, 1000)\r\n      );\r\n    e.preventDefault();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h3>Change password:</h3>\r\n        <form className=\"vf-form\" id={'passChange'}>\r\n          <input\r\n            className=\"vf-form__input\"\r\n            type={'password'}\r\n            ref={'old'}\r\n            placeholder={'Old password'}\r\n          />\r\n          <input\r\n            className=\"vf-form__input\"\r\n            type={'password'}\r\n            ref={'new1'}\r\n            placeholder={'New password'}\r\n          />\r\n          <input\r\n            className=\"vf-form__input\"\r\n            type={'password'}\r\n            placeholder={'Confirm new password'}\r\n          />\r\n          <input\r\n            type={'button'}\r\n            className={'vf-button vf-button--sm vf-button--primary'}\r\n            onClick={this.handlePasswordChange.bind(this)}\r\n            value={'Submit'}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\n\nconst UserView = () => {\n  const [user, setUser] = useState();\n  //const [test, setTest] = useState();\n  const [frameworks, setFrameworks] = useState();\n  const [frm, setFrm] = useState();\n\n  let uid = localStorage.getItem('userid');\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/user/${uid}?_format=json`, {\n        credentials: 'include',\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': localStorage.getItem('csrf_token')\n        }\n      })\n        .then(Response => Response.json())\n        .then(findResponse => setUser(findResponse));\n\n      await fetch(`${apiUrl}/api/version_manager/?_format=json`)\n        .then(Response => Response.json())\n        .then(findResponse => setFrameworks(findResponse));\n    };\n    fetchData();\n  }, [uid]);\n\n  if (!frm && user && frameworks) {\n    let test = [];\n    frameworks.map(item => {\n      user.field_frameworks.map(framework => {\n        if (framework.target_id === item.nid) {\n          test.push(item.title);\n        }\n        return null;\n      });\n      return null;\n    });\n    if (test.length > 0) {\n      setFrm(test.join());\n    }\n  }\n\n  return (\n    <div>\n      <h2>My profile</h2>\n      <div className=\"row\">\n        <div className=\"column medium-3\">&nbsp;</div>\n        <div className=\"column medium-6\">\n          {user ? (\n            <table className=\"responsive-table userprofile-table\">\n              <tbody>\n                <tr>\n                  <td>\n                    <strong>Username:</strong>\n                  </td>\n                  <td>{user.name[0].value}</td>\n                </tr>\n                <tr>\n                  <td>\n                    <strong>Email:</strong>\n                  </td>\n                  <td>{user.mail[0].value}</td>\n                </tr>\n                <tr>\n                  <td>\n                    <strong>Frameworks:</strong>\n                  </td>\n                  <td>{frm ? frm : 'NA'}</td>\n                </tr>\n              </tbody>\n            </table>\n          ) : (\n            'Loading profile'\n          )}\n        </div>\n        <div className=\"column medium-3\" />\n      </div>\n    </div>\n  );\n};\n\nexport const path = () => (\n  <Switch>\n    <Route exact path=\"/user/view\" component={UserView} />\n  </Switch>\n);\n\nexport default path;\n","import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nconst About = () => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    console.log('scrolled');\n  }, []);\n\n  return (\n    <>\n      <h2>About Competency Hub</h2>\n      <p className=\"lead\">\n        The Competency Hub is a repository of competency frameworks that define\n        the abilities required by professionals in a specific field and relate\n        them to training resources and career profiles, so that you can:\n      </p>\n      <ul>\n        <li>\n          Assess your competency abilities against a professional standard and\n          check example career profiles\n        </li>\n        <li>\n          Find training resources to develop specific competencies and progress\n          in your career\n        </li>\n        <li>\n          Design training courses and programmes that help your learners develop\n          specific competencies\n        </li>\n      </ul>\n\n      <h3>Career profiles</h3>\n      <p>\n        In this section, you will find a series of career profiles, example\n        descriptions of professional roles.\n      </p>\n      <p>Each profile shows:</p>\n      <ul>\n        <li>\n          The level at which each competency is required to fulfil that role\n        </li>\n        <li>Qualifications and background</li>\n        <li>Activities of the role</li>\n      </ul>\n\n      <p>\n        You can create your own profile by assessing yourself against the list\n        of competencies and then compare your profile to the existing ones. This\n        allows you to see which competencies you need to develop further to\n        perform that role.\n      </p>\n\n      <p>The profile that you create is saved on your own browser.</p>\n\n      <p>\n        Not all the competency frameworks on the site contain career profiles.\n      </p>\n\n      <h3>Find training resources</h3>\n      <p>\n        Training resources are linked to the competencies that they support\n        trainees to gain. You can find this information on:\n      </p>\n      <ul>\n        <li>\n          The page for each training resource, which shows a list of related\n          competencies\n        </li>\n        <li>\n          The page for each competency, which shows a list of related training\n          resources\n        </li>\n      </ul>\n\n      <p>\n        Not all the competency frameworks on the site contain training\n        resources.\n      </p>\n\n      <h3>Develop courses</h3>\n      <p>\n        <Link to=\"/develop-your-courses\">Develop your courses</Link> using the\n        Competency Hub to design competency-based courses and course programmes.\n      </p>\n\n      <h3>Competency</h3>\n      <p>\n        A competency is an observable ability of any professional. A competency\n        can be defined as a combination of knowledge, skills and attitudes to\n        make it more concrete and useful for individual professionals. It is\n        observable, so its acquisition can be validated objectively.\n      </p>\n\n      <h3>Competency framework</h3>\n      <p>\n        A competency framework defines a core set of competencies required by\n        professionals working in a specific field. In the Competency Hub, the\n        professionals covered by the framework are specified on the entry card\n        for each competency framework.\n      </p>\n\n      <p>\n        A competency framework can specify which competencies are especially\n        relevant for professionals in different roles or at different career\n        stages, which is what is done in the Competency Hub for the frameworks\n        that include career profiles.\n      </p>\n\n      <h3>Additional documentation</h3>\n      <p>\n        The following are documents that explain how some of the competency\n        frameworks on this site have been developed and used:{' '}\n      </p>\n      <ul>\n        <li>\n          <a href=\"https://zenodo.org/record/5418103#.YhiW3ZPP30o\">\n            Guidelines for developing and updating short courses and course\n            programs using the ISCB competency framework\n          </a>\n        </li>\n        <li>\n          <a href=\"https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005772\">\n            The development and application of bioinformatics core competencies\n            to improve bioinformatics training and education\n          </a>\n        </li>\n        <li>\n          <a href=\"https://zenodo.org/record/4623713#.YiCrSxPP30o\">\n            Professionalising data stewardship in the Netherlands. Competences,\n            training and education. Dutch roadmap towards national\n            implementation of FAIR data stewardship\n          </a>\n        </li>\n        <li>\n          <a href=\"https://zenodo.org/record/264231#.YiCtoxPP30o\">\n            BioExcel Deliverable 4.2 - Competency framework, mapping to current\n            training & initial training plan\n          </a>\n        </li>\n        <li>\n          <a href=\"https://zenodo.org/record/4301475#.YiCtzxPP30o\">\n            BioExcel-2 Deliverable D4.2 - Training Plan\n          </a>\n        </li>\n      </ul>\n    </>\n  );\n};\n\nexport default About;\n","import React from 'react';\r\n\r\nimport { removeHtmlTags } from '../../services/util/util';\r\nimport Parser from 'html-react-parser';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FrameworkButton({ desc, sub_text, card_link }) {\r\n  // let description = removeHtmlTags(framework.description);\r\n  // if (description.length > 120) {\r\n  //   description = `${description.slice(0, 120).trim()}...`;\r\n  // }\r\n  // const liveVersion = framework.versions.reduce((prevVersion, newVersion) => {\r\n  //   if (newVersion.status === 'live') {\r\n  //     return newVersion.number;\r\n  //   }\r\n  //   return prevVersion;\r\n  // }, null);\r\n\r\n  // if (liveVersion === null) {\r\n  //   return null;\r\n  // }\r\n\r\n  return (\r\n    <article className=\"vf-card vf-card--brand vf-card--bordered\">\r\n      <div className=\"vf-card__content | vf-stack vf-stack--400\">\r\n        <h3 className=\"vf-card__heading\">\r\n          <a className=\"vf-card__link\" href={card_link}>\r\n            {' '}\r\n            {desc}{' '}\r\n            <svg\r\n              aria-hidden=\"true\"\r\n              className=\"vf-card__heading__icon | vf-icon vf-icon-arrow--inline-end\"\r\n              width=\"1em\"\r\n              height=\"1em\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0C5.376.008.008 5.376 0 12zm13.707-5.209l4.5 4.5a1 1 0 010 1.414l-4.5 4.5a1 1 0 01-1.414-1.414l2.366-2.367a.25.25 0 00-.177-.424H6a1 1 0 010-2h8.482a.25.25 0 00.177-.427l-2.366-2.368a1 1 0 011.414-1.414z\"\r\n                fill=\"currentColor\"\r\n                fill-rule=\"nonzero\"\r\n              />\r\n            </svg>\r\n          </a>\r\n        </h3>\r\n        {sub_text ? Parser(sub_text) : ''}\r\n      </div>\r\n    </article>\r\n    // {<article className=\"vf-card vf-card--primary\">\r\n    //   <div className=\"vf-card__content | vf-stack vf-stack--400\">\r\n    //     <div className=\"vf-card__title\">\r\n    //       <Link\r\n    //         className=\"vf-card__link\"\r\n    //         data-equalizer-watch\r\n    //         to={`/framework/${framework.title\r\n    //           .toLowerCase()\r\n    //           .replace(/ /g, '')}/${liveVersion}`}\r\n    //       >\r\n    //         {framework.title}\r\n    //       </Link>\r\n    //     </div>\r\n\r\n    //     <div className=\"vf-card__text\">\r\n    //       {tempDesc.map(item =>\r\n    //         item.title === framework.title.toLowerCase().replace(/ /g, '')\r\n    //           ? item.desc\r\n    //           : ''\r\n    //       )}\r\n    //     </div>\r\n    //   </div>\r\n    // </article>}\r\n  );\r\n}\r\n\r\nexport default FrameworkButton;\r\n","import React from 'react';\r\n\r\nimport FrameworkButton from '../framework-button/FrameworkButton';\r\n\r\n// function FrameworkButtons({ frameworks }) {\r\n//   const selfRef = new React.createRef();\r\n\r\n//   const invokeFoundation = () => {\r\n//     // window.setTimeout(() => $(selfRef.current).foundation());\r\n//     return (\r\n//       <div className=\"vf-grid vf-grid__col-3\">\r\n//         {' '}\r\n//         {frameworks.map(framework => (\r\n//           // <FrameworkButton key={framework.nid} framework={framework} />\r\n//           <div>hi</div>\r\n//         ))}\r\n//       </div>\r\n//     );\r\n//   };\r\n\r\n//   return frameworks.length < 1 ? null : (\r\n//     <div className=\"row\" data-equalizer ref={selfRef}>\r\n//       {invokeFoundation()}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nfunction FrameworkButtons({ frameworkDetails }) {\r\n  // const selfRef = new React.createRef();\r\n\r\n  // const invokeFoundation = () => {\r\n  // window.setTimeout(() => $(selfRef.current).foundation());\r\n  return (\r\n    <section\r\n      className=\"vf-card-container vf-card-container__col-3\"\r\n      style={{ margin: '0' }}\r\n    >\r\n      <div className=\"vf-card-container__inner\">\r\n        {frameworkDetails.map(framework => (\r\n          <FrameworkButton\r\n            desc={framework.desc}\r\n            sub_text={framework.sub_text}\r\n            card_link={framework.card_link}\r\n          />\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n  // };\r\n\r\n  // return frameworks.length < 1 ? null : (\r\n  //   <div className=\"row\" data-equalizer ref={selfRef}>\r\n  //     {invokeFoundation()}\r\n  //   </div>\r\n  // );\r\n}\r\n\r\nexport default FrameworkButtons;\r\n","import React from 'react';\nimport EU from '../components/assets/european-union.png';\nimport PerMed from '../components/assets/PerMedCoE.jpg';\nimport BioExcel from '../components/assets/Bioexcel.png';\n\nconst Footer = () => {\n  return (\n    <div>\n      <div className=\"vf-u-margin__top--1600\" />\n      <hr class=\"vf-divider\" />\n      <div className=\"vf-u-margin__top--1600\" />\n      <div>\n        <div className=\"vf-grid\">\n          <p>\n            The Competency Hub's web infrastructure is developed by the\n            <a className=\"vf-link\" href=\"http://www.ebi.ac.uk/training\">\n              {' '}\n              EMBL-EBI Training Team\n            </a>{' '}\n            with support from the{' '}\n            <a className=\"vf-link\" href=\"https://bioexcel.eu/\">\n              BioExcel\n            </a>{' '}\n            and{' '}\n            <a href=\"https://permedcoe.eu/\" className=\"vf-link\">\n              PerMedCoE Centres of Excellence\n            </a>\n            . BioExcel and PerMedCoE are funded by the{' '}\n            <a\n              className=\"vf-link\"\n              href=\"https://ec.europa.eu/programmes/horizon2020/en\"\n            >\n              {' '}\n              European Union Horizon 2020 programme\n            </a>{' '}\n            under grant agreements 823830, 675728, 951773. Both projects are\n            part of{' '}\n            <a className=\"vf-link\" href=\"https://www.hpccoe.eu/\">\n              {' '}\n              the EU HPC CoE Initiative\n            </a>\n            .\n          </p>\n\n          <figure className=\"vf-figure\" style={{ margin: '10px' }}>\n            <img\n              className=\"vf-figure__image\"\n              src={EU}\n              loading=\"lazy\"\n              width=\"120px\"\n              alt=\"\"\n            />\n          </figure>\n          <figure className=\"vf-figure\" style={{ margin: '10px' }}>\n            <img\n              className=\"vf-figure__image\"\n              src={PerMed}\n              loading=\"lazy\"\n              width=\"170px\"\n              alt=\"\"\n            />\n          </figure>\n          <figure className=\"vf-figure\" style={{ margin: '10px' }}>\n            <img\n              className=\"vf-figure__image\"\n              src={BioExcel}\n              loading=\"lazy\"\n              width=\"180px\"\n              style={{ backgroundColor: '#fff', padding: '7px' }}\n              alt=\"\"\n            />\n          </figure>\n        </div>\n        <p>\n          <span>\n            <a\n              className=\"vf-link\"\n              href=\"https://www.ebi.ac.uk/data-protection/privacy-notice/competency-hub\"\n            >\n              Privacy notice for the Competency Hub\n            </a>\n          </span>\n        </p>\n      </div>\n\n      <div className=\"vf-u-margin__top--200\" />\n      <p>\n        Contact us at competency [at] ebi.ac.uk if you have any questions,\n        comments or suggestions.\n      </p>\n      <div className=\"vf-u-margin__top--1600\" />\n    </div>\n  );\n};\n\nexport default Footer;\n","import HttpService from '../http/http';\r\n\r\nconst http = new HttpService();\r\nconst loginUrl = '/user/login?_format=json';\r\nconst logoutUrl = '/user/logout';\r\n\r\nexport async function login(username, password) {\r\n  const credentials = { name: username, pass: password };\r\n  try {\r\n    const response = await http.post(loginUrl, credentials);\r\n    const { data } = response;\r\n    console.log(response);\r\n\r\n    localStorage.setItem('roles', data.current_user.roles);\r\n    localStorage.setItem('csrf_token', data.csrf_token);\r\n    localStorage.setItem('logout_token', data.logout_token);\r\n    localStorage.setItem('user', data.current_user.name);\r\n    localStorage.setItem('userid', data.current_user.uid);\r\n    console.log(localStorage.getItem('roles'));\r\n    return data;\r\n  } catch (error) {\r\n    logout();\r\n    //throw error;\r\n    alert(`Login failed with ${error.response.data}`);\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  let logout_token = localStorage.getItem('logout_token');\r\n  localStorage.removeItem('roles');\r\n  localStorage.removeItem('csrf_token');\r\n  localStorage.removeItem('logout_token');\r\n  localStorage.removeItem('userid');\r\n  localStorage.removeItem('user');\r\n  return http.get(\r\n    `${\r\n      process.env.REACT_APP_HTTPS_CMS_API_URL\r\n    }/user/logout?_format=json&token=${logout_token}`,\r\n    true\r\n  );\r\n}\r\n","import React from 'react';\n\nconst Association = framework => {\n  let data = framework.framework;\n  return (\n    <div style={{ textAlign: '-webkit-center' }}>\n      <a href={data.link ? data.link : '#'}>\n        <figure className=\"vf-figure\">\n          <img\n            className=\"vf-figure__image\"\n            src={data.src}\n            alt={data.alt}\n            loading=\"lazy\"\n          />\n        </figure>\n      </a>\n    </div>\n  );\n};\n\nexport default Association;\n","import React, { Component } from 'react';\r\n\r\nimport FrameworkButtons from '../components/framework-buttons/FrameworkButtons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Navigation from './navigation/Navigation';\r\nimport LoginForm from './login-form/LoginForm';\r\nimport Footer from '../components/Footer';\r\nimport { login, logout } from '../services/auth/auth';\r\n\r\nimport Association from './Association';\r\n\r\nimport masterList from './masterList.json';\r\n\r\nclass Frameworks extends Component {\r\n  // function Frameworks () {\r\n  // activeRequests = new ActiveRequestsService();\r\n  // competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    frameworks: [],\r\n    user: localStorage.getItem('user'),\r\n    roles: localStorage.getItem('roles')\r\n  };\r\n  // const { roles, user } = this.props;\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    // this.props.onLogin(username, password);\r\n    this.handleLogin(username, password);\r\n    // login(username, password);\r\n  };\r\n\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n      document.location.reload();\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  // async componentDidMount() {\r\n  //   try {\r\n  //     // this.activeRequests.startRequest();\r\n  //     // const frameworks = await this.competencyService.getAllVersionedFrameworks();\r\n  //     // this.setState({ frameworks });\r\n  //   } catch (error) {\r\n  //     this.props.enqueueSnackbar('Unable to fetch framework data', {\r\n  //       variant: 'error'\r\n  //     });\r\n  //     console.error(error);\r\n  //   } finally {\r\n  //     this.activeRequests.finishRequest();\r\n  //   }\r\n  // }\r\n\r\n  render() {\r\n    const { roles, user } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <section className=\"vf-u-fullbleed vf-u-background-color-ui--grey--light vf-u-padding__top--800\">\r\n          <h2>Who is the Competency Hub for?</h2>\r\n          <FrameworkButtons frameworkDetails={masterList} />\r\n\r\n          <div className=\"vf-u-padding__top--800\" />\r\n        </section>\r\n        <div className=\"vf-u-margin__top--1200\" />\r\n        <div>\r\n          <h2>Do more with the Competency Hub</h2>\r\n          <div className=\"vf-grid\">\r\n            <div>\r\n              <h3>\r\n                <Link to=\"/develop-your-courses\">Develop your courses</Link>\r\n              </h3>\r\n              <p>\r\n                Use competency frameworks and career profiles to design your\r\n                training.\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <h3>\r\n                <Link to=\"/documentation\">Review API Documentation</Link>\r\n              </h3>\r\n              <p>\r\n                Learn how to list frameworks and query framework data with our\r\n                API.\r\n              </p>\r\n            </div>\r\n            <div>\r\n              {this.state.user && this.state.roles ? (\r\n                <div>\r\n                  <h3>You are logged-in</h3>\r\n                  <p>You can manage frameworks and competencies.</p>\r\n                </div>\r\n              ) : (\r\n                <LoginForm onSubmit={this.onLogin} />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"vf-u-margin__top--1200\" />\r\n        <h2>In association with</h2>\r\n        <div className=\"vf-grid vf-grid__col-3\">\r\n          {masterList.map(framework => {\r\n            return <Association framework={framework} />;\r\n          })}\r\n        </div>\r\n        <div className=\"vf-u-margin__top--800\" />\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Frameworks);\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n// import Collapsible from 'react-collapsible';\n// import ReactModal from 'react-modal';\n// import { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n// import CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass CompetencySettings extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      competency: '',\n      competencyUUID: '',\n      competencyTitle: '',\n      frameworkList: [],\n      domainID: '',\n      domainUuid: '',\n      csrf: '',\n      mapping: ''\n    };\n\n    this.editDomain = this.editDomain.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.onTextChange = this.onTextChange.bind(this);\n  }\n\n  async fetchData() {\n    let competencyID = this.state.path[4];\n    let url = `${apiUrl}/node/` + competencyID + `/?_format=json`;\n    fetch(url)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ competency: findresponse }, this.setMappingText);\n      });\n\n    // Load all domains of all frameworks from version_manager API\n\n    let versoinManagerURL = `${apiUrl}/api/version_manager/?_format=json&timestamp=${Date.now()}`;\n    fetch(versoinManagerURL)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    //console.log(apiUrl);\n  }\n\n  async setMappingText() {\n    let competency = this.state.competency;\n    if (competency.field_map_other_competency.length > 0) {\n      this.setState({\n        mapping: competency.field_map_other_competency[0].value\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.fetchData();\n    //await this.setMappingText();\n  }\n\n  editDomain(e) {\n    let competencyID = this.state.path[4];\n    let selectedDomainID = this.state.domainID;\n    let selectedDomainUUID = this.state.domainUuid;\n    let mapping = this.state.mapping;\n    if (!selectedDomainID) {\n      selectedDomainID = this.state.competency.field_domain[0].target_id;\n      selectedDomainUUID = this.state.competency.field_domain[0].target_uuid;\n    }\n    this.competencyService.changeDomain(\n      competencyID,\n      selectedDomainID,\n      selectedDomainUUID,\n      mapping\n    );\n    //console.log(\"editDomain() called\");\n    this.props.history.push(\n      '/framework/' + this.state.path[2] + '/manage/competencies'\n    );\n    e.preventDefault();\n  }\n\n  onTextChange(event) {\n    this.setState({ mapping: event.target.value });\n    //console.log(this.state.mapping);\n  }\n\n  handleChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({ domainID: dataset.id, domainUuid: dataset.uuid });\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let competency_title = '';\n    let domain_id = '';\n    //let domain_uuid = '';\n    let domain_title = '';\n    let competency = this.state.competency;\n    let frameworkList = this.state.frameworkList;\n    let domainOptions = [];\n    let domainArray = [];\n    //let mapped_other_competency = \"\";\n\n    if (frameworkList.length > 0) {\n      console.log(this.state.frameworkList);\n      frameworkList.map(framework => {\n        if (framework.title.toLowerCase() === this.state.path[2]) {\n          framework.domains.map(domain => {\n            domainOptions.push(\n              <option\n                key={domain.id}\n                data-id={domain.id}\n                data-uuid={domain.uuid}\n                value={domain.id}\n              >\n                {domain.title}\n              </option>\n            );\n            domainArray.push({ key: domain.id, value: domain.title });\n            return null;\n          });\n        }\n        return null;\n      });\n    }\n\n    if (competency) {\n      competency_title = competency.title[0].value;\n      domain_id = competency.field_domain[0].target_id;\n      //domain_uuid = competency.field_domain[0].target_uuid;\n      if (domainArray.length > 0) {\n        let obj = domainArray.find(d => d.key === domain_id);\n        domain_title = obj.value;\n      }\n    }\n\n    return (\n      <div>\n        <h2>Change domain</h2>\n        <table className=\"table hover stack\">\n          <tbody>\n            <tr>\n              <td>\n                <h4>Domain:</h4>\n              </td>\n              <td>\n                <h4>{domain_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <h4>Competency:</h4>\n              </td>\n              <td>\n                <h4>{competency_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td colSpan={2}>\n                <p className=\"lead\">\n                  Select the domain from the following list to change:\n                </p>\n                <form\n                  id={'changeDomainForm'}\n                  onSubmit={this.editDomain.bind(this)}\n                >\n                  <div className=\"row\">\n                    <div className=\"column large-11\">\n                      <select\n                        value={\n                          this.state.domainID ? this.state.domainID : domain_id\n                        }\n                        onChange={this.handleChange}\n                      >\n                        {domainOptions}\n                      </select>\n                      <label>\n                        Maps to competency/attribute from other framework\n                        <input\n                          type=\"text\"\n                          placeholder=\"Framework (version), competency or attribute\"\n                          name=\"mapping\"\n                          value={this.state.mapping}\n                          onChange={this.onTextChange.bind(this)}\n                        />\n                      </label>\n                      <input type=\"submit\" className=\"button\" value=\"Save\" />\n                    </div>\n                    <div className=\"column large-1\" />\n                  </div>\n                </form>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst CompetencySettingsRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/competency/:id/settings\"\n      component={CompetencySettings}\n    />\n  </Switch>\n);\n\nexport default CompetencySettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n// import Collapsible from 'react-collapsible';\n// import ReactModal from 'react-modal';\n// import { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n// import CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass AttributeSettings extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      attributeID: this.props.location.pathname.split('/')[6],\n      frameworkName: this.props.location.pathname.split('/')[2],\n      frameworkList: [],\n      attributeType: '',\n      attribute: '',\n      competencyID: this.props.location.pathname.split('/')[4],\n      competencyUUID: '',\n      competencyTitle: '',\n      attributeTypeID: '',\n      attributeTypeUUID: '',\n      frameworkData: []\n    };\n\n    this.changeSettings = this.changeSettings.bind(this);\n    this.handleCompetencyChange = this.handleCompetencyChange.bind(this);\n    this.handleTypeChange = this.handleTypeChange.bind(this);\n  }\n\n  async fetchData() {\n    // Load the attribute\n\n    let attributeID = this.state.attributeID;\n    let url =\n      `${apiUrl}/node/` +\n      attributeID +\n      `/?_format=json&timestamp=${Date.now()}`;\n    fetch(url)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ attribute: findresponse });\n      });\n\n    // Load all domains of all frameworks from version_manager API\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    let result = await this.competencyService.getVersionedDraftFramework(\n      this.state.frameworkName\n    );\n    this.setState({ frameworkData: result });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  changeSettings(e) {\n    let attributeID = this.state.attributeID;\n    let selectedCompetencyID = this.state.competencyID\n      ? this.state.competencyID\n      : this.state.attribute.field_competency[0].target_id;\n    let selectedCompetencyUUID = this.state.competencyUUID\n      ? this.state.competencyUUID\n      : this.state.attribute.field_competency[0].target_uuid;\n    let selectedAttributeTypeID = this.state.attributeTypeID\n      ? this.state.attributeTypeID\n      : this.state.attribute.field_attribute_type[0].target_id;\n    let selectedAttributeTypeUUID = this.state.attributeTypeUUID\n      ? this.state.attributeTypeUUID\n      : this.state.attribute.field_attribute_type[0].target_uuid;\n\n    // console.log(\"competencyID: \"+selectedCompetencyID + \" attributeTypeID: \"+ selectedAttributeTypeID);\n    // if(!selectedCompetencyID){\n    //   selectedCompetencyID = this.state.attribute.field_competency[0].target_id;\n    //   selectedCompetencyUUID = this.state.competency.field_competency[0].target_uuid;\n    // }\n\n    // if(!selectedAttributeTypeID){\n    //   selectedAttributeTypeID = this.state.attribute.field_attribute_type[0].target_id;\n    //   selectedAttributeTypeUUID = this.state.competency.field_attribute_type[0].target_uuid;\n    // }\n\n    this.competencyService.changeAttributeSettings(\n      attributeID,\n      selectedCompetencyID,\n      selectedCompetencyUUID,\n      selectedAttributeTypeID,\n      selectedAttributeTypeUUID\n    );\n\n    this.props.history.push(\n      '/framework/' +\n        this.state.path[2] +\n        '/manage/competencies/' +\n        this.props.location.pathname.split('/')[4] +\n        '/manage-attributes'\n    );\n    e.preventDefault();\n  }\n\n  handleCompetencyChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({ competencyID: dataset.id, competencyUUID: dataset.uuid });\n    //console.log(dataset.uuid);\n  }\n\n  handleTypeChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({\n      attributeTypeID: dataset.id,\n      attributeTypeUUID: dataset.uuid\n    });\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let attribute_title = '';\n    let competency_id = '';\n    //let competency_uuid = '';\n    let competency_title = '';\n    let attribute_type_id = '';\n    //let attribute_type_uuid = '';\n    let attribute_type_title = '';\n    let attribute = this.state.attribute;\n    let frameworkData = this.state.frameworkData;\n    let frameworkList = this.state.frameworkList;\n    let competencyOptions = [];\n    let competencyArray = [];\n    let attributeTypeOptions = [];\n    let attributeTypeArray = [];\n\n    //console.log(frameworkList);\n\n    if (frameworkList) {\n      frameworkList.map(framework => {\n        if (framework.title.toLowerCase() === this.state.frameworkName) {\n          framework.attribute_types.map(attribute_type => {\n            attributeTypeOptions.push(\n              <option\n                key={attribute_type.id}\n                data-id={attribute_type.id}\n                data-uuid={attribute_type.uuid}\n                value={attribute_type.id}\n              >\n                {attribute_type.title}\n              </option>\n            );\n            attributeTypeArray.push({\n              key: attribute_type.id,\n              value: attribute_type.title\n            });\n            return null;\n          });\n        }\n        return null;\n      });\n      //console.log(attributeTypeArray);\n    }\n\n    if (frameworkData) {\n      frameworkData.map(framework => {\n        framework.domains.map(domain => {\n          domain.competencies.map(competency => {\n            if (competency.archived === 0) {\n              competencyOptions.push(\n                <option\n                  key={competency.id}\n                  data-id={competency.id}\n                  data-uuid={competency.uuid}\n                  value={competency.id}\n                >\n                  {competency.title}\n                </option>\n              );\n              competencyArray.push({\n                key: competency.id,\n                value: competency.title\n              });\n            }\n            return null;\n          });\n          return null;\n        });\n        return null;\n      });\n    }\n\n    if (attribute) {\n      attribute_title = attribute.title[0].value;\n      competency_id = attribute.field_competency[0].target_id;\n      //competency_uuid = attribute.field_competency[0].target_uuid;\n      attribute_type_id = attribute.field_attribute_type[0].target_id;\n      if (competencyArray.length > 0) {\n        let obj = competencyArray.find(d => d.key === competency_id);\n        competency_title = obj.value;\n        //console.log(attribute_type_id);\n      }\n\n      if (attributeTypeArray.length > 0) {\n        let obj = attributeTypeArray.find(d => d.key === attribute_type_id);\n        attribute_type_title = obj.value;\n      }\n\n      //console.log(attribute_title);\n    }\n\n    return (\n      <div>\n        <h2>Change attribute settings</h2>\n        <h3>Attribute: {attribute_title}</h3>\n        <table className=\"table hover stack\">\n          <tbody>\n            <tr>\n              <td>Competency:</td>\n              <td>{competency_title}</td>\n              <td rowSpan={2}>\n                <form\n                  id={'changeDomainForm'}\n                  onSubmit={this.changeSettings.bind(this)}\n                >\n                  <label>Change competency:</label>\n                  <select\n                    value={\n                      this.state.competencyID\n                        ? this.state.competencyID\n                        : competency_id\n                    }\n                    onChange={this.handleCompetencyChange}\n                  >\n                    {competencyOptions}\n                  </select>\n                  <label>Change attribute type:</label>\n                  <select\n                    value={\n                      this.state.attributeTypeID\n                        ? this.state.attributeTypeID\n                        : attribute_type_id\n                    }\n                    onChange={this.handleTypeChange}\n                  >\n                    {attributeTypeOptions}\n                  </select>\n                  <input type=\"submit\" className=\"button\" value=\"Save\" />\n                </form>\n              </td>\n            </tr>\n\n            <tr>\n              <td>Attribute type:</td>\n              <td>{attribute_type_title}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst AttributeSettingsRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\n      component={AttributeSettings}\n    />\n  </Switch>\n);\n\nexport default AttributeSettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport CompetencyService from '../services/competency/competency';\n\n//const $ = window.$;\n\nclass AttributeDemap extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      resourceID: this.props.location.pathname.split('/')[2],\n      attributeID: this.props.location.pathname.split('/')[4],\n      resourceDetails: [],\n      csrf: ''\n    };\n    this.demap = this.demap.bind(this);\n  }\n\n  async demap(e) {\n    //alert(\"mapping removed\");\n    let resource = 1034;\n    let items = [20, 21];\n    //this.activeRequests.startRequest();\n    let result = await this.competencyService.demap(resource, items);\n    console.log(result);\n    //this.activeRequests.finishRequest();\n    //console.log(this.state.resourceDetails);\n    //this.props.history.push(\"/training-resources/\"+this.props.location.pathname.split('/')[2]);\n    //e.preventDefault();\n  }\n\n  componentDidMount() {\n    //fetch(`${apiUrl}`+'/api/resources/?_format=hal_json&id='+ this.state.resourceID)\n    fetch(`${apiUrl}/node/ ${this.state.resourceID}?_format=hal_json`)\n      .then(Response => Response.json())\n      .then(findresponse => {\n        this.setState({\n          resourceDetails: findresponse\n        });\n      });\n\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n  }\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return this.state.attributes === nextState.attributes;\n  // }\n\n  render() {\n    return (\n      <div>\n        <h3>\n          Are you sure you want to remove this mapping? This action cannot be\n          undone!\n        </h3>\n        <button className=\"button\" onClick={this.demap.bind(this)}>\n          Yes\n        </button>\n      </div>\n    );\n  }\n}\n\nconst AttributeDemapRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/training-resources/:resource/demap/:attribute\"\n      component={AttributeDemap}\n    />\n  </Switch>\n);\n\nexport default AttributeDemapRoot;\n","import { apiUrl } from '../http/http';\n//requests fail when https is included in _links.type.href below\n//so we moved changed the value of apiUrl to exclude the s and only have http\nconst httpApiURl = apiUrl.replace('https', 'http');\nclass BodyService {\n  static createProfile({\n    title,\n    frameworkId,\n    frameworkUuid,\n    versionID,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    fileid\n  }) {\n    return {\n      _links: {\n        type: {\n          href: `${httpApiURl}/rest/type/node/profile`\n        },\n        [`${httpApiURl}/rest/relation/node/profile/field_competency_framework`]: {\n          href: `${httpApiURl}/node/${frameworkId}?_format=hal_json`\n        }\n      },\n      title: [\n        {\n          value: title\n        }\n      ],\n      field_versions: [\n        {\n          target_id: versionID\n        }\n      ],\n      field_age: [\n        {\n          value: age\n        }\n      ],\n      field_current_role: [\n        {\n          value: currentRole,\n          format: 'basic_html'\n        }\n      ],\n      field_gender: [\n        {\n          value: gender\n        }\n      ],\n      field_job_title: [\n        {\n          value: jobTitle\n        }\n      ],\n      field_qualification_background: [\n        {\n          value: qualification\n        }\n      ],\n      field_additional_information: [\n        {\n          value: additionalInfo\n        }\n      ],\n      field_image: [\n        {\n          target_id: fileid,\n          description: 'persona picture'\n        }\n      ],\n      field_publishing_status: [\n        {\n          value: 'Draft'\n        }\n      ],\n      type: [\n        {\n          target_id: 'profile'\n        }\n      ],\n      _embedded: {\n        [`${httpApiURl}/rest/relation/node/profile/field_competency_framework`]: [\n          {\n            _links: {\n              self: {\n                href: `${httpApiURl}/node/${frameworkId}?_format=hal_json`\n              },\n              type: {\n                href: `${httpApiURl}/rest/type/node/competency_framework`\n              }\n            },\n            uuid: [\n              {\n                value: frameworkUuid\n              }\n            ],\n            lang: 'en'\n          }\n        ]\n      }\n    };\n  }\n\n  static editProfile(\n    profileId,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    publishStatus,\n    fileid\n  ) {\n    return {\n      _links: {\n        self: {\n          href: `${httpApiURl}/node/${profileId}?_format=json`\n        },\n        type: {\n          href: `${httpApiURl}/rest/type/node/profile`\n        }\n      },\n      title: [\n        {\n          value: title\n        }\n      ],\n      field_age: [\n        {\n          value: age\n        }\n      ],\n      field_current_role: [\n        {\n          value: currentRole,\n          format: 'basic_html'\n        }\n      ],\n      field_gender: [\n        {\n          value: gender\n        }\n      ],\n      field_job_title: [\n        {\n          value: jobTitle\n        }\n      ],\n      field_qualification_background: [\n        {\n          value: qualification,\n          format: 'basic_html'\n        }\n      ],\n      field_additional_information: [\n        {\n          value: additionalInfo,\n          format: 'basic_html'\n        }\n      ],\n      field_image: [\n        {\n          target_id: fileid ? fileid : null\n          //description: 'persona picture'\n        }\n      ],\n      field_publishing_status: [\n        {\n          value: publishStatus\n        }\n      ],\n      type: [\n        {\n          target_id: 'profile'\n        }\n      ]\n    };\n  }\n\n  static mapProfile(profileId, mapping) {\n    let mappingBody = [];\n    mapping.forEach(function(item) {\n      mappingBody.push({\n        competency: item.competency,\n        expertise: item.expertise,\n        attributes: item.attributes.join()\n      });\n    });\n\n    //  console.log(mappingBody)\n\n    return {\n      type: [\n        {\n          target_id: 'article'\n        }\n      ],\n      field_item: [\n        {\n          value: profileId\n        }\n      ],\n      field_profile_mapping: mappingBody\n    };\n  }\n}\n\nexport default BodyService;\n","import HttpService from '../http/http';\nimport Body from './body';\n//import Download from './download';\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nclass ProfileService {\n  static instance;\n  http = new HttpService();\n\n  constructor() {\n    if (ProfileService.instance) {\n      return this.instance;\n    }\n    ProfileService.instance = this;\n  }\n\n  async createProfile(options) {\n    const response = await this.http.post(\n      `/node?_format=hal_json`,\n      Body.createProfile(options)\n    );\n    return response.data;\n  }\n\n  async editProfile(\n    profileId,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    publishStatus,\n    fileid\n  ) {\n    const response = await this.http.patch(\n      `/node/${profileId}?_format=hal_json`,\n      Body.editProfile(\n        profileId,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        publishStatus,\n        fileid\n      )\n    );\n\n    return response.data;\n  }\n\n  async mapProfile(profileId, mapping) {\n    const response = await this.http.patch(\n      `/api/permedcoe/2.0/profiles?_format=json`,\n      Body.mapProfile(profileId, mapping),\n      'json'\n    );\n    return response.data;\n  }\n\n  async createGuestProfile(\n    frameworkName,\n    frameworkId,\n    versionNumber,\n    title,\n    age,\n    current_role,\n    gender,\n    job_title,\n    qualification_background,\n    additional_information,\n    image\n  ) {\n    let mapping = [];\n\n    let existingGuestProfile = JSON.parse(localStorage.getItem('guestProfile'));\n    if (existingGuestProfile) {\n      if (existingGuestProfile.profile_mapping) {\n        mapping = existingGuestProfile.profile_mapping;\n      }\n    }\n\n    let guestProfile = {\n      frameworkName,\n      frameworkId,\n      versionNumber,\n      title,\n      age,\n      current_role,\n      gender,\n      job_title,\n      qualification_background,\n      additional_information,\n      image\n    };\n\n    guestProfile['profile_mapping'] = mapping;\n\n    localStorage.setItem('guestProfile', JSON.stringify(guestProfile));\n    console.log('Profile service called for Guest user');\n  }\n\n  async mapProfileGuest(mapping) {\n    let guestProfile = JSON.parse(localStorage.getItem('guestProfile'));\n    guestProfile['profile_mapping'] = mapping;\n    localStorage.setItem('guestProfile', JSON.stringify(guestProfile));\n  }\n\n  mapDownloadProfile(options) {\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(options));\n  }\n\n  downloadProfile(options) {\n    // Download.getProfile(options);\n    // console.log(options)\n\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    //const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    //let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    // PROFILE Header\n    doc.setFontType('normal');\n    doc.setFontSize(22);\n    doc.text(marginleft, startHeight, 'EMBL-EBI Competency Profile');\n\n    // Framework Logo\n    if (options.frameworkLogoData) {\n      let frameworkLogoWidth = options.frameworkLogoData[0]\n        ? options.frameworkLogoData[0].width\n        : 100;\n      let frameworkLogoHeight = options.frameworkLogoData[0]\n        ? options.frameworkLogoData[0].height\n        : 30;\n      let logoRatio = frameworkLogoWidth / frameworkLogoHeight;\n      let pdfLogoHeight = pageLogoWidth / logoRatio;\n\n      let logoData = options.frameworkLogoData[0].src;\n      let logoType = 'PNG';\n      doc.addImage(\n        logoData,\n        logoType,\n        marginright - 100,\n        5,\n        pageLogoWidth,\n        pdfLogoHeight,\n        '',\n        'SLOW'\n      );\n    }\n\n    currentYAxis = currentYAxis + 50;\n\n    // PROFILE Title\n    doc.setFontSize(18);\n    doc.text(\n      marginleft,\n      currentYAxis,\n      options.title + ' - ' + options.jobTitle\n    );\n\n    // PROFILE Image\n    if (options.selectedFile) {\n      let type = options.selectedFile.type === 'image/jpeg' ? 'JPEG' : 'PNG'; // maybe you should add some controls to prevent loading of other file types\n      let imgData = options.selectedFileData[0].src;\n      doc.addImage(\n        imgData,\n        type,\n        marginleft,\n        currentYAxis + 30,\n        pdfProfileImgWidth,\n        pdfProfileImgHeight,\n        '',\n        'SLOW'\n      ); // Compression options are NONE, FAST, MEDIUM and SLOW\n    }\n\n    // doc.setFontType('normal');\n    // PROFILE Demographics\n    if (options.gender || options.age) {\n      let gender = options.gender\n        ? options.age\n          ? options.gender + ', '\n          : options.gender\n        : '';\n      let age = options.age ? options.age + ' years' : '';\n\n      doc.setFontSize(12);\n      doc.text(\n        marginleft,\n        pdfProfileImgHeight + currentYAxis + 60,\n        gender + age\n      );\n    }\n\n    currentYAxis = currentYAxis + 40;\n\n    // PROFILE Qualifications\n    let qDim;\n    if (options.qualification) {\n      doc.setFontSize(16);\n      doc.text(fifthCol, currentYAxis, 'Qualifications & background');\n      currentYAxis = currentYAxis + 20;\n\n      doc.setFontSize(12);\n      let qualification = doc.splitTextToSize(\n        options.qualification,\n        profileBody\n      );\n      // Adjust yAxis based on text height\n      qDim = doc.getTextDimensions(qualification);\n      //let margins = {\n      //   top: 70,\n      //   bottom: 40,\n      //   left: 30,\n      //   width: 550\n      // };\n\n      doc.fromHTML(options.qualification, fifthCol, currentYAxis, {\n        // y coord\n        width: profileBody // max width of content on PDF\n      });\n\n      // doc.text(fifthCol, currentYAxis, qualification)\n      currentYAxis = currentYAxis + 30;\n    }\n\n    // PROFILE Activities\n    if (options.currentRole) {\n      doc.setFontSize(16);\n      doc.text(fifthCol, qDim.h + currentYAxis, 'Activities and current role');\n      currentYAxis = currentYAxis + 20;\n\n      doc.setFontSize(12);\n      let currentRole = doc.splitTextToSize(options.currentRole, profileBody);\n      // Adjust yAxis based on text height\n      //let cDim = doc.getTextDimensions(currentRole);\n      currentYAxis = qDim.h + currentYAxis;\n\n      doc.text(fifthCol, currentYAxis, currentRole);\n    }\n\n    doc.setFontSize(9);\n    doc.text(\n      marginleft,\n      pdfHeight - 20,\n      'Profile created on ' + currentDate + ' at ' + currentTime\n    );\n\n    // Save the Data\n    let jobTitleUnderscored = options.jobTitle.split(' ').join('_');\n    doc.save(jobTitleUnderscored.toLowerCase() + '.pdf');\n  }\n}\n\nexport default ProfileService;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n//import FileUpload from './FileUpload';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\n//import { Link, Redirect } from 'react-router-dom';\n\nexport const ProfileCreate = props => {\n  //const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState('');\n  const [age, setAge] = useState('');\n  const [currentRole, setCurrentRole] = useState('');\n  const [gender, setGender] = useState('');\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [selectedFileData, setSelectedFileData] = useState([]);\n  //const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [additionalInfo, setAdditionalInfo] = useState('');\n\n  const [framework, setFramework] = useState();\n  //const [frameworkLogoData, setFrameworkLogoData] = useState([]);\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n\n  //const [errorMsgTitle, setErrorMsgTitle] = useState();\n  //const [errorMsgJobTitle, setErrorMsgJobTitle] = useState();\n\n  const [frameworkMoreData, setFrameworkMoreData] = useState();\n\n  //let errors = [];\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    // Set variables from Local Storage to populate form fields onload\n    const bootstrap = () => {\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n      setProfile(storedProfile);\n\n      if (storedProfile) {\n        setTitle(storedProfile.title);\n        setJobTitle(storedProfile.jobTitle);\n        setAge(storedProfile.age);\n        setGender(storedProfile.gender);\n        setQualification(storedProfile.qualification);\n        setCurrentRole(storedProfile.currentRole);\n        setAdditionalInfo(storedProfile.additionalInfo);\n        if (storedProfile.selectedFileData[0]) {\n          setSelectedFileData(storedProfile.selectedFileData);\n          setImgpreview(storedProfile.selectedFileData[0].src);\n        }\n      }\n    };\n\n    // Calling multiple APIs, since data Framework are in two different endpoints\n    const fetchData = async () => {\n      try {\n        const promise1 = http\n          .get(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&timestamp=${Date.now()}`\n          )\n          .then(response1 => response1.data);\n\n        const promise2 = http\n          .get(\n            `${apiUrl}/api/version_manager?_format=json&timestamp=${Date.now()}`\n          )\n          .then(response2 => response2.data);\n\n        const [data1, data2] = await Promise.all([promise1, promise2]);\n\n        setFramework(data1);\n        setFrameworkMoreData(\n          data2.filter(item => {\n            return item.title.toLowerCase() === frameworkName;\n          })\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    bootstrap();\n    fetchData();\n  }, [selectedFile, frameworkName, frameworkVersion, http]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    let frameworkId = framework[0].nid;\n    let frameworkName = framework[0].title;\n    let frameworkUuid = framework[0].uuid;\n    console.log(frameworkMoreData);\n    let liveVersion = frameworkMoreData[0].versions.find(\n      ver => ver.status === 'live'\n    );\n\n    let versionID = liveVersion.id;\n\n    var fileid = null;\n\n    // Do nothing if Form doesn't pass validation criteris above\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n    }\n    // Check if is Anonymous/Authenticated\n    else if (!localStorage.getItem('roles')) {\n      //setErrorMsgTitle('');\n      //setErrorMsgJobTitle('');\n\n      // Retrieve values from Local Storage if exist\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n\n      profileService.mapDownloadProfile({\n        title,\n        frameworkId,\n        //frameworkLogoData,\n        frameworkName,\n        frameworkUuid,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        selectedFile,\n        // selectedFileData: storedProfile ? selectedFileData ? selectedFileData : '' : '',\n        selectedFileData,\n        mapping: storedProfile ? storedProfile.mapping : [],\n        mappingAttributes: storedProfile ? storedProfile.mappingAttributes : []\n      });\n      //props.history.push('/framework/bioexcel/2.0/profile/map/download/');\n    } else if (localStorage.getItem('roles').includes('framework_manager')) {\n      if (selectedFile) {\n        let token = localStorage.getItem('csrf_token');\n        await fetch(\n          apiUrl + '/file/upload/node/profile/field_image?_format=hal_json',\n          {\n            credentials: 'include',\n            method: 'POST',\n            cookies: 'x-access-token',\n            headers: {\n              accept: 'application/octet-stream',\n              'Content-Type': 'application/octet-stream',\n              'X-CSRF-Token': token,\n              'Content-Disposition': 'file; filename=\"persona_picture.png\"'\n            },\n            body: selectedFile\n          }\n        )\n          .then(resp => resp.json())\n          .then(function(data) {\n            fileid = data.fid[0].value;\n          });\n      }\n\n      let response = await profileService.createProfile({\n        title,\n        frameworkId,\n        frameworkUuid,\n        versionID,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        fileid\n      });\n\n      // props.history.push(\n      //   `/framework/${frameworkName.toLowerCase()}/${frameworkVersion}/profile/view/${\n      //     response.nid[0].value\n      //   }/${response.path[0].alias}`\n      // );\n      props.history.push(\n        `/framework/${frameworkName.toLowerCase()}/${frameworkVersion}/profile/map/${\n          response.nid[0].value\n        }`\n      );\n    }\n  };\n\n  // const setPreview = () => {\n  //   props.history.push(\n  //     `/framework/${frameworkName}/${frameworkVersion}/profile/preview`,\n  //     {\n  //       title: title\n  //     }\n  //   );\n  // };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      //const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type !== 'image/jpeg' &&\n        e.target.files[0].type !== 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      // convert image file to base64 string. From https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      const reader = new FileReader();\n      reader.addEventListener(\n        'load',\n        function() {\n          // Set Image Preview\n          setImgpreview(reader.result);\n\n          // Set selected image src\n          let img = new Image();\n          img.src = reader.result;\n          img.addEventListener('load', function() {\n            img.width = this.width;\n            img.height = this.height;\n\n            setSelectedFileData([\n              {\n                src: this.src,\n                width: this.width,\n                height: this.height\n              }\n            ]);\n          });\n        },\n        false\n      );\n      if (e.target.files) {\n        reader.readAsDataURL(e.target.files[0]);\n      }\n\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setSelectedFile(undefined);\n    setImgpreview(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Map Competencies';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Map Competencies';\n    }\n\n    return (\n      <input\n        type=\"submit\"\n        className=\"vf-button vf-button--sm vf-button--primary\"\n        value={submitButtonLabel}\n      />\n    );\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  // From https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript\n  // const getImageData = (url, callback) => {\n  //   var xhr = new XMLHttpRequest();\n  //   xhr.onload = function() {\n  //     var reader = new FileReader();\n  //     reader.onloadend = function() {\n  //       return callback(reader.result);\n  //     };\n  //     reader.readAsDataURL(xhr.response);\n  //   };\n  //   xhr.open('GET', url);\n  //   xhr.responseType = 'blob';\n  //   xhr.send();\n  // };\n\n  // const toDataURL = (src, callback, outputFormat) => {\n  //   var img = new Image();\n  //   img.crossOrigin = 'Anonymous';\n  //   img.onload = function() {\n  //     var canvas = document.createElement('CANVAS');\n  //     var ctx = canvas.getContext('2d');\n  //     var dataURL;\n  //     canvas.height = this.naturalHeight;\n  //     canvas.width = this.naturalWidth;\n  //     ctx.drawImage(this, 0, 0);\n  //     dataURL = canvas.toDataURL(outputFormat);\n  //     callback(dataURL);\n  //   };\n  //   img.src = src;\n  //   if (img.complete || img.complete === undefined) {\n  //     img.src =\n  //       'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n  //     img.src = src;\n  //   }\n  // };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  return (\n    <div>\n      <h2>Create {placeholder} profile</h2>\n      <form\n        className=\"vf-form\"\n        id=\"profile_create_form\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"vf-grid vf-grid__col-6\">\n          <div className=\"vf-grid__col--span-2\">\n            <span>\n              <strong>Name</strong>\n              <input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Name\"\n                onChange={e => setTitle(e.target.value)}\n                defaultValue={profile ? profile.title : title}\n                className=\"vf-form__input\"\n              />\n              <div className={titleCalloutClass}>\n                <i>{nameHelp}</i>\n              </div>\n            </span>\n            <span>\n              <strong>Image</strong>\n              <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n            </span>\n            <span>\n              <img\n                alt=\"\"\n                id=\"imgpreview_image\"\n                width=\"100px\"\n                src={imgpreview}\n                height=\"100px\"\n                style={{\n                  border: '1px solid #ccc',\n                  padding: '5px',\n                  width: '30%'\n                }}\n              />\n              {imgpreview ? (\n                <div>\n                  <button\n                    className=\"vf-button vf-button--secondary vf-button--sm\"\n                    href=\"#\"\n                    onClick={e => clearimgpreview(e)}\n                  >\n                    Clear image x\n                  </button>\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileSizeError ? (\n                <div className=\"small callout alert\">\n                  <em> Image size should not be more than 2 MB </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileTypeError ? (\n                <div className=\"small callout alert\">\n                  <em> Only JPG or PNG images are allowed </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n            </span>\n            <span>\n              <strong>Age (in years)</strong>\n              <input\n                type=\"number\"\n                id=\"age\"\n                placeholder=\"Age\"\n                width={4}\n                onChange={e => setAge(e.target.value)}\n                defaultValue={profile ? profile.age : age}\n                className=\"vf-form__input\"\n              />\n            </span>\n\n            <span>\n              <strong>Gender</strong>\n              <select\n                onChange={e => setGender(e.target.value)}\n                defaultValue={profile ? profile.gender : gender}\n                className=\"vf-form__input\"\n              >\n                <option value={'None'}>None</option>\n                <option value={'Male'}>Male</option>\n                <option value={'Female'}>Female</option>\n                <option value={'Nonbinary'}>Nonbinary</option>\n                <option value={'Prefernottosay'}>Prefer not to say</option>\n              </select>\n            </span>\n          </div>\n          <div className=\"vf-grid__col--span-4\">\n            <span>\n              <strong>Job title</strong>\n              <input\n                type=\"text\"\n                id=\"jobTitle\"\n                placeholder=\"Job title\"\n                onChange={e => setJobTitle(e.target.value)}\n                defaultValue={profile ? profile.jobTitle : jobTitle}\n                className=\"vf-form__input\"\n              />\n              <div className={jobTitleCalloutClass}>\n                <i>{jobTitleHelp}</i>\n              </div>\n            </span>\n            <span>\n              <strong>Qualification and background</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={qualification}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setQualification(data);\n                }}\n                className=\"vf-form__input\"\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Activities of current role</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={currentRole}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setCurrentRole(data);\n                }}\n                className=\"vf-form__input\"\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Additional information</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={additionalInfo}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setAdditionalInfo(data);\n                }}\n                className=\"vf-form__input\"\n              />\n            </span>\n            <br />\n          </div>\n        </div>\n\n        <div className=\"vf-grid\">\n          <div />\n          <div>\n            <ButtonLabel />\n          </div>\n          <div />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const CreateProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/create\"\n      component={ProfileCreate}\n    />\n  </Switch>\n);\n\nexport default CreateProfile;\n","import React from 'react';\nimport ReactModal from 'react-modal';\n\nconst GuestHelp = props => {\n  const modalOpen = props.modalOpen;\n\n  const closeModal = e => {\n    //e.preventDefault(e);\n    props.closeModal();\n  };\n\n  const customStyles = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: 'auto',\n      bottom: 'auto',\n      marginRight: '-50%',\n      transform: 'translate(-50%, -50%)',\n      width: '70%',\n      backgroundColor: '#f1f1f1'\n    }\n  };\n\n  return (\n    <div>\n      <ReactModal isOpen={modalOpen} style={customStyles}>\n        <button style={{ float: 'right' }} onClick={e => closeModal(e)}>\n          <i className=\"icon icon-common icon-window-close\" />\n        </button>\n        <h2>Help</h2>\n        <h4>Create/edit your profile</h4>\n        <p className=\"lead\">\n          Fill the Create/Edit Profile form in order to create your own user\n          profile. The profile will be saved in your browser so that you can\n          print it or compare it with other profiles.\n        </p>\n\n        <h4>Map competencies to your profile</h4>\n        <p className=\"lead\">\n          In the second step, select your level of expertise in each competency\n          and choose the knowledge, skills and attitudes that are applicable to\n          you.\n        </p>\n\n        <h4>Compare your profile</h4>\n        <p className=\"lead\">\n          Compare the profile that you created with one of the reference\n          profiles in the site.\n        </p>\n\n        <h4>Download your profile</h4>\n        <p className=\"lead\">Click the print button and download the profile</p>\n      </ReactModal>\n    </div>\n  );\n};\n\nexport default GuestHelp;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n//import FileUpload from './FileUpload';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\n//import { Link, Redirect } from 'react-router-dom';\nimport GuestHelp from './GuestHelp';\n\nexport const ProfileCreateGuest = props => {\n  const history = useHistory();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState('');\n  const [age, setAge] = useState('');\n  const [currentRole, setCurrentRole] = useState('');\n  const [gender, setGender] = useState('');\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [selectedFileData, setSelectedFileData] = useState([]);\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [additionalInfo, setAdditionalInfo] = useState('');\n\n  const [framework, setFramework] = useState();\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n  const [modalOpen, setModelOpen] = useState(false);\n\n  const http = new HttpService();\n  const storedProfile = JSON.parse(localStorage.getItem('guestProfile'));\n\n  useEffect(() => {\n    // Set variables from Local Storage to populate form fields onload\n    let bootstrap = async () => {\n      setProfile(storedProfile);\n      setTitle(storedProfile.title);\n      setJobTitle(storedProfile.job_title);\n      setAge(parseInt(storedProfile.age));\n      setGender(storedProfile.gender);\n      setQualification(storedProfile.qualification_background);\n      setCurrentRole(storedProfile.current_role);\n      setAdditionalInfo(storedProfile.additional_information);\n      if (storedProfile.image[0]) {\n        setSelectedFileData(storedProfile.image);\n        setImgpreview(storedProfile.image[0].url);\n      }\n    };\n\n    // Calling multiple APIs, since data Framework are in two different endpoints\n    const fetchData = async () => {\n      try {\n        const promise1 = http\n          .get(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&timestamp=${Date.now()}`\n          )\n          .then(response1 => response1.data);\n\n        const promise2 = http\n          .get(\n            `${apiUrl}/api/version_manager?_format=json&timestamp=${Date.now()}`\n          )\n          .then(response2 => response2.data);\n\n        const [data1] = await Promise.all([promise1, promise2]);\n        setFramework(data1);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    if (storedProfile && !profile) {\n      bootstrap();\n    }\n\n    if (!framework) {\n      fetchData();\n    }\n  }, [\n    selectedFile,\n    frameworkName,\n    frameworkVersion,\n    http,\n    storedProfile,\n    framework,\n    profile\n  ]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    let frameworkId = framework[0].nid;\n    let versionNumber = frameworkVersion;\n\n    // Do nothing if Form doesn't pass validation criteris above\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n      return 0;\n    }\n    // Check if is Anonymous/Authenticated\n    else if (!localStorage.getItem('roles')) {\n      let current_role = currentRole ? currentRole : '';\n      let job_title = jobTitle ? jobTitle : '';\n      let qualification_background = qualification ? qualification : '';\n      let additional_information = additionalInfo ? additionalInfo : '';\n      let image = selectedFileData ? selectedFileData : '';\n\n      profileService.createGuestProfile(\n        frameworkName,\n        frameworkId,\n        versionNumber,\n        title,\n        age,\n        current_role,\n        gender,\n        job_title,\n        qualification_background,\n        additional_information,\n        image\n      );\n      // history.push(\n      //   `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest/`\n      // );\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profile/map/guest/`\n      );\n    }\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      //const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type !== 'image/jpeg' &&\n        e.target.files[0].type !== 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      // convert image file to base64 string. From https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      const reader = new FileReader();\n      reader.addEventListener(\n        'load',\n        function() {\n          // Set Image Preview\n          setImgpreview(reader.result);\n\n          // Set selected image src\n          let img = new Image();\n          img.src = reader.result;\n          img.addEventListener('load', function() {\n            img.width = this.width;\n            img.height = this.height;\n\n            setSelectedFileData([\n              {\n                url: this.src\n              }\n            ]);\n          });\n        },\n        false\n      );\n      if (e.target.files) {\n        reader.readAsDataURL(e.target.files[0]);\n      }\n\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setSelectedFile(undefined);\n    setImgpreview(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    setSelectedFileData(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Map Competencies';\n    }\n\n    return (\n      <input\n        type=\"submit\"\n        className=\"vf-button vf-button--primary vf-button--sm\"\n        value={submitButtonLabel}\n      />\n    );\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  const openModal = e => {\n    e.preventDefault();\n    setModelOpen(true);\n  };\n\n  const closeModal = () => {\n    //e.preventDefault();\n    setModelOpen(false);\n  };\n\n  return (\n    <div>\n      <h2>Create / Edit {placeholder} profile</h2>\n      <div className=\"callout warning\">\n        <i className=\"icon icon-common icon-exclamation-triangle\" /> Your\n        profile will be saved in your browser.\n        <button\n          className=\"vf-button vf-button--secondary vf-button--sm\"\n          onClick={e => openModal(e)}\n        >\n          Get help\n        </button>\n        <GuestHelp modalOpen={modalOpen} closeModal={closeModal} />\n      </div>\n      <form\n        className=\"vf-form\"\n        id=\"profile_create_form\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"vf-grid vf-grid__col-6\">\n          <div className=\"vf-grid__col--span-2\">\n            <span>\n              <strong>Name</strong>\n              <input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Name\"\n                onChange={e => setTitle(e.target.value)}\n                defaultValue={profile ? profile.title : ''}\n                className=\"vf-form__input\"\n              />\n              <div className={titleCalloutClass}>\n                <i>{nameHelp}</i>\n              </div>\n            </span>\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <strong>Image</strong>\n              <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n            </span>\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <img\n                alt=\"\"\n                id=\"imgpreview_image\"\n                width=\"100px\"\n                src={imgpreview}\n                height=\"100px\"\n                style={{\n                  border: '1px solid #ccc',\n                  padding: '5px',\n                  width: '30%'\n                }}\n              />\n              {imgpreview ? (\n                <div>\n                  <button\n                    className=\"vf-button vf-button--secondary vf-button--sm\"\n                    href=\"#\"\n                    onClick={e => clearimgpreview(e)}\n                  >\n                    Clear image x\n                  </button>\n                </div>\n              ) : (\n                ''\n              )}\n              <div className=\"vf-u-margin__bottom--600\" />\n              {fileSizeError ? (\n                <div className=\"small callout alert\">\n                  <em> Image size should not be more than 2 MB </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileTypeError ? (\n                <div className=\"small callout alert\">\n                  <em> Only JPG or PNG images are allowed </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n            </span>\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <strong>Age (in years)</strong>\n              <input\n                type=\"number\"\n                id=\"age\"\n                placeholder=\"Age\"\n                width={4}\n                onChange={e => setAge(e.target.value)}\n                defaultValue={profile ? profile.age : ''}\n                className=\"vf-form__input\"\n              />\n            </span>\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <strong>Gender</strong>\n              <select\n                onChange={e => setGender(e.target.value)}\n                //defaultValue={gender?gender:'-None-'}\n                value={gender ? gender : '-None-'}\n                className=\"vf-form__select\"\n              >\n                <option value={'None'}>None</option>\n                <option value={'Male'}>Male</option>\n                <option value={'Female'}>Female</option>\n                <option value={'Nonbinary'}>Nonbinary</option>\n                <option value={'Prefernottosay'}>Prefer not to say</option>\n              </select>\n            </span>\n          </div>\n          <div className=\"vf-grid__col--span-4\">\n            <span>\n              <strong>Job title</strong>\n              <input\n                type=\"text\"\n                id=\"jobTitle\"\n                placeholder=\"Job title\"\n                onChange={e => setJobTitle(e.target.value)}\n                defaultValue={profile ? profile.job_title : ''}\n                className=\"vf-form__input\"\n              />\n              <div className={jobTitleCalloutClass}>\n                <i>{jobTitleHelp}</i>\n              </div>\n            </span>\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <strong>Qualification and background</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={\n                  storedProfile ? storedProfile.qualification_background : ''\n                }\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setQualification(data);\n                }}\n                className=\"vf-form__input\"\n              />\n            </span>\n\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <strong>Activities of current role</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile ? storedProfile.current_role : ''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setCurrentRole(data);\n                }}\n                className=\"vf-form__input\"\n              />\n            </span>\n\n            <div className=\"vf-u-margin__bottom--600\" />\n            <span>\n              <strong>Additional information</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile ? storedProfile.additional_information : ''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setAdditionalInfo(data);\n                }}\n                className=\"vf-form__input\"\n              />\n            </span>\n          </div>\n        </div>\n        <ButtonLabel />\n      </form>\n    </div>\n  );\n};\n\nexport const Path = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/create/guest\"\n      component={ProfileCreateGuest}\n    />\n  </Switch>\n);\n\nexport default Path;\n","import React, { useState, useEffect } from 'react';\nimport ReactModal from 'react-modal';\n\nconst customStyles = {\n  content: {\n    position: 'absolute',\n    top: '40px',\n    left: '40px',\n    right: '40px',\n    bottom: '40px',\n    border: '1px solid #ccc',\n    background: '#fff',\n    overflow: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    borderRadius: '4px',\n    outline: 'none',\n    padding: '20px',\n    width: '500px',\n    height: '250px',\n    margin: 'auto'\n  },\n  overlay: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(255, 255, 255, 0.75)'\n  }\n};\n\nexport const ProfileComparisonModal = props => {\n  const includeGuestProfile = props.includeGuestProfile;\n  const [showModal, setShowModal] = useState(false);\n  const currentProfile = props.profile;\n  const profiles = props.profiles;\n\n  return (\n    <div>\n      {props.linkVariant ? (\n        <button\n          className=\"vf-button vf-button--link\"\n          onClick={() => {\n            setShowModal(true);\n          }}\n        >\n          Compare another profile\n        </button>\n      ) : (\n        <button\n          className=\"vf-button vf-button--primary vf-button--sm\"\n          onClick={() => {\n            setShowModal(true);\n          }}\n        >\n          Compare profile\n        </button>\n      )}\n      {currentProfile ? (\n        <>\n          <div>\n            <ReactModal\n              isOpen={showModal}\n              contentLabel=\"Example Modal\"\n              className=\"Modal\"\n              overlayClassName=\"Overlay\"\n              style={customStyles}\n              onRequestClose={() => {\n                setShowModal(false);\n              }}\n            >\n              <h2>\n                Compare profile{' '}\n                <span\n                  style={{\n                    float: 'right',\n                    cursor: 'pointer',\n                    fontWeight: 'normal'\n                  }}\n                  onClick={() => {\n                    setShowModal(false);\n                  }}\n                >\n                  X\n                </span>\n              </h2>\n\n              <p>\n                Select a profile to compare{' '}\n                <strong>{currentProfile.job_title} with:</strong>\n              </p>\n\n              <form>\n                <select\n                  className=\"vf-form__select\"\n                  id=\"vf-form__select\"\n                  onChange={e => {\n                    props.setSelectedProfileId(e.target.value);\n                  }}\n                >\n                  <option value=\"0\">Select role</option>\n                  {localStorage.getItem('guestProfile') &&\n                  includeGuestProfile ? (\n                    <option value={'guest'}>\n                      {\n                        JSON.parse(localStorage.getItem('guestProfile'))\n                          .job_title\n                      }\n                    </option>\n                  ) : (\n                    ''\n                  )}\n                  {profiles\n                    ? profiles.map((profile, index) => {\n                        return (\n                          <>\n                            <option value={profile.id}>\n                              {profile.job_title}\n                            </option>\n                          </>\n                        );\n                      })\n                    : ''}\n                </select>\n                <span style={{ color: 'red' }}>{props.comparisonError}</span>\n              </form>\n              <div className=\"vf-u-margin__top--200\" />\n              <button\n                className=\"vf-button vf-button--primary vf-button--sm\"\n                onClick={e => {\n                  setShowModal(false);\n                  props.redirectToCompare(e);\n                }}\n              >\n                Compare\n              </button>\n            </ReactModal>\n          </div>\n        </>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport Parser from 'html-react-parser';\nimport { apiUrl } from '../services/http/http';\nimport { Link } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactTooltip from 'react-tooltip';\nimport { ProfileComparisonModal } from '../../shared/components/ProfileComparisonModal';\n\nexport const ProfileView = props => {\n  let history = useHistory();\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  const [profile, setProfile] = useState();\n  const [profiles, setProfiles] = useState();\n  const [selectedProfileId, setSelectedProfileId] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const [showModal, setShowModal] = useState(false);\n  const [comparisonError, setComparisonError] = useState(null);\n  const [userFrameworks, setUserFrameworks] = useState([]);\n\n  const redirectToCompare = e => {\n    if (selectedProfileId) {\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n          profile.id\n        }/${selectedProfileId}`\n      );\n    } else {\n      setComparisonError('Select a role to compare');\n    }\n  };\n\n  const checkUser = localStorage.getItem('userid');\n  const needTimeStamp = checkUser ? '&timestamp=' + Date.now() : '';\n\n  var competencyView = '';\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var mapping = [];\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n  var userName = localStorage.getItem('user')\n    ? localStorage.getItem('user')\n    : '';\n\n  let width2 = '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles/?_format=json&source=competencyhub&timestamp=${needTimeStamp}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          const profilesExcludingCurrentProfile = findresponse.filter(\n            p =>\n              p.id !== props.match.params.id && p.publishing_status === 'Live'\n          );\n          setProfiles(profilesExcludingCurrentProfile);\n        });\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&source=competencyhub&timestamp=${needTimeStamp}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/version_manager?_format=json&source=competencyhub&${needTimeStamp}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&source=competencyhub&timestamp=${needTimeStamp}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n\n      if (userName) {\n        await fetch(`${apiUrl}/api/authorisation/${userName}?_format=json`, {\n          method: 'GET',\n          credentials: 'include'\n        })\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setUserFrameworks(findresponse);\n          });\n      }\n    };\n    fetchData();\n  }, [profileId, frameworkVersion, frameworkName, userName, showModal]);\n\n  const getExpertise = competency => {\n    if (mapping) {\n      let obj = mapping.find(o => o.competency === competency);\n      if (obj) {\n        if (frameworkInfo) {\n          let expertise = frameworkInfo\n            .find(info => info.title.toLowerCase() === frameworkName)\n            .expertise_levels.find(level => level.id === obj.expertise);\n          return expertise;\n        }\n      } else {\n        return '';\n      }\n    }\n  };\n\n  const getAttributeStatus = aid => {\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a === aid)\n      );\n      return attribute_check_status;\n    }\n  };\n\n  const getBarWidth = data => {\n    let totalLevels = frameworkInfo.find(\n      info => info.title.toLowerCase() === frameworkName\n    ).expertise_levels.length;\n    width2 = data ? 100 / ((totalLevels - 1) / data.rating_level) : 0;\n    return width2;\n  };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map((info, infoIndex) => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          info.expertise_levels.map((level, levelIndex) =>\n            expertise_levels_legend.push(\n              <li\n                key={levelIndex}\n                className=\"vf-list__item\"\n                style={{ textAlign: 'center' }}\n              >\n                <div\n                  data-tip={level.description ? level.description : 'NA'}\n                  data-html={true}\n                  data-type=\"info\"\n                  data-multiline={true}\n                >\n                  <span className=\"vf-badge vf-badge--tertiary\">\n                    {' '}\n                    {level.rating_level}{' '}\n                  </span>{' '}\n                  <span> {level.title}</span>\n                </div>\n                <ReactTooltip\n                  className=\"tooltip-custom\"\n                  style={{ color: 'fff' }}\n                />\n              </li>\n            )\n          );\n        }\n        return null;\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    if (profile) {\n      mapping = profile.profile_mapping;\n    }\n\n    if (framework) {\n      competencyView = framework.map((item, itemIndex) =>\n        item.domains.map((domain, domainIndex) => (\n          <React.Fragment key={itemIndex + domainIndex}>\n            <div key={domainIndex}>\n              <div>\n                <div class=\"vf-u-padding__top--800\" />\n                <h4>{domain.title}</h4>{' '}\n              </div>\n            </div>\n            <div>\n              <div>\n                {domain.competencies.map((competency, compIndex) => (\n                  <React.Fragment key={compIndex}>\n                    <div className=\"vf-grid vf-grid__col-4\">\n                      <div className=\"vf-grid__col--span-3\">\n                        <details className=\"vf-details\" close>\n                          <summary className=\"vf-details--summary\">\n                            {/* {competency.title.length > 150\n                              ? competency.title\n                                  .split(' ')\n                                  .splice(0, 18)\n                                  .join(' ') + ' ..'\n                              : competency.title} */}\n                            {competency.title}\n                          </summary>\n                          {attribute_types.map((attribute_type, typeIndex) => {\n                            return (\n                              <div key={typeIndex}>\n                                <div />\n                                <ul className=\"vf-list\">\n                                  <div>\n                                    <strong> {attribute_type} </strong>\n                                  </div>\n                                  {competency.attributes\n                                    .filter(\n                                      attribute =>\n                                        attribute.type === attribute_type\n                                    )\n                                    .map((attribute, attrIndex) => {\n                                      return (\n                                        <li\n                                          key={attrIndex}\n                                          className=\"vf-list__item\"\n                                        >\n                                          <span style={{ marginRight: '20px' }}>\n                                            {getAttributeStatus(\n                                              attribute.id,\n                                              'profile1'\n                                            ) ? (\n                                              <i className=\"icon icon-common icon-check\" />\n                                            ) : (\n                                              '-'\n                                            )}\n                                          </span>\n                                          <span>{attribute.title}</span>\n                                        </li>\n                                      );\n                                    })}\n                                </ul>\n                              </div>\n                            );\n                          })}\n                        </details>\n                      </div>\n                      <div className=\"vf-grid__col--span-1\">\n                        <div className=\"fillerbg\">\n                          <div\n                            className=\"fillerRight\"\n                            style={{\n                              width:\n                                getBarWidth(getExpertise(competency.id)) + '%',\n                              display: 'flow-root'\n                            }}\n                          >\n                            <span\n                              style={{\n                                float:\n                                  getBarWidth(getExpertise(competency.id)) === 0\n                                    ? 'none'\n                                    : 'right'\n                              }}\n                              className=\"rating_level_number\"\n                            >\n                              {getExpertise(competency.id)\n                                ? getExpertise(competency.id).rating_level\n                                : 0}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    {/* <div className=\"profile_collapsible\">\n                      <Collapsible\n                        trigger={\n                          <div className=\"open-close-title\">\n                            <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                          </div>\n                        }\n                        triggerWhenOpen={\n                          <div className=\"open-close-title\">\n                            <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                          </div>\n                        }\n                      >\n                        {attribute_types.map((attribute_type, typeIndex) => {\n                          return (\n                            <div\n                              key={typeIndex}\n                              className=\"accordion-item is-active\"\n                              data-accordion-item\n                            >\n                              <div className=\"embl-grid\">\n                                <div />\n                                <ul className=\"vf-list\">\n                                  <div>\n                                    <strong> {attribute_type} </strong>\n                                  </div>\n                                  {competency.attributes\n                                    .filter(\n                                      attribute =>\n                                        attribute.type === attribute_type\n                                    )\n                                    .map((attribute, attrIndex) => {\n                                      return (\n                                        <li\n                                          key={attrIndex}\n                                          className=\"vf-list__item\"\n                                        >\n                                          <span style={{ marginRight: '20px' }}>\n                                            {getAttributeStatus(\n                                              attribute.id,\n                                              'profile1'\n                                            ) ? (\n                                              <i className=\"icon icon-common icon-check\" />\n                                            ) : (\n                                              '-'\n                                            )}\n                                          </span>\n                                          <span>{attribute.title}</span>\n                                        </li>\n                                      );\n                                    })}\n                                </ul>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </Collapsible>\n                    </div> */}\n                  </React.Fragment>\n                ))}\n              </div>\n            </div>\n          </React.Fragment>\n        ))\n      );\n    }\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div key={'unique'}>\n      {generateProfileView()}\n      {profile ? (\n        <>\n          <div key={profileId} id=\"profile\">\n            <div style={{ float: 'right' }}>\n              {user_roles.search('framework_manager') !== -1 &&\n              userFrameworks.length > 0 &&\n              userFrameworks.includes(frameworkFullName) ? (\n                <ul>\n                  <li className=\"profile_navigation\">\n                    <Link\n                      className=\"vf-button vf-button--primary vf-button--sm\"\n                      to={`/framework/${frameworkName}/${frameworkVersion}/profile/edit/${profileId}`}\n                    >\n                      Edit overview\n                      <i className=\"icon icon-common icon-pencil-alt\" />\n                    </Link>\n                  </li>\n                  <li className=\"profile_navigation\">\n                    <Link\n                      className=\"vf-button vf-button--primary vf-button--sm\"\n                      to={`/framework/${frameworkName}/${frameworkVersion}/profile/map/${profileId}`}\n                    >\n                      Map competencies{' '}\n                      <i className=\"icon icon-common icon-cog\" />{' '}\n                    </Link>\n                  </li>\n                </ul>\n              ) : (\n                <ProfileComparisonModal\n                  profiles={profiles}\n                  profile={profile}\n                  includeGuestProfile={true}\n                  comparisonError={comparisonError}\n                  setSelectedProfileId={id => {\n                    setSelectedProfileId(id);\n                  }}\n                  redirectToCompare={() => {\n                    redirectToCompare();\n                  }}\n                />\n              )}\n            </div>\n            <h1 style={{ marginTop: '1em', marginBottom: '1em' }}>\n              {profile.title} - {profile.job_title}\n            </h1>\n\n            <div className={profile.publishing_status + ' embl-grid'}>\n              <div>\n                <center>\n                  <img\n                    alt=\"\"\n                    style={{ display: 'block', maxWidth: '200px' }}\n                    src={profile.image[0] ? profile.image[0].url : ''}\n                  />\n                </center>\n                <p />\n                <p style={{ textAlign: 'center' }}>\n                  {profile.gender !== 'None' ? (\n                    <div>\n                      <p>\n                        {profile.gender &&\n                        profile.gender === 'Prefernottosay' ? (\n                          <p> Gender: Prefer not to say </p>\n                        ) : (\n                          ''\n                        )}\n                      </p>\n                      <p>\n                        {profile.gender &&\n                        profile.gender !== 'Prefernottosay' ? (\n                          <p> Gender: {profile.gender} </p>\n                        ) : (\n                          ''\n                        )}\n                      </p>\n                    </div>\n                  ) : (\n                    ''\n                  )}\n                  {profile.age ? profile.age + ' years' : ''}\n                </p>\n              </div>\n              <div>\n                <h2>Qualification and background</h2>\n                <div>\n                  {profile.qualification_background\n                    ? Parser(profile.qualification_background)\n                    : ''}\n                </div>\n\n                <h2>Activities of current role</h2>\n                <div>\n                  {profile.current_role ? Parser(profile.current_role) : ''}\n                </div>\n\n                <div>\n                  {profile.additional_information\n                    ? Parser(profile.additional_information)\n                    : ''}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"column medium-3\">\n                {' '}\n                <h3 style={{ marginTop: '25px' }}>\n                  {frameworkFullName} {frameworkVersion} / Competencies\n                </h3>\n              </div>\n              <div className=\"column medium-9 \" />\n            </div>\n            <div className=\"row\">\n              <div className=\"column medium-12\">\n                <ul\n                  className=\"vf-list legend-inline\"\n                  style={{ float: 'right' }}\n                >\n                  {expertise_levels_legend}\n                </ul>\n              </div>\n            </div>\n            <hr />\n            {competencyView}\n          </div>\n        </>\n      ) : (\n        'Loading profile'\n      )}\n\n      <form onSubmit={e => handlePrint(e)}>\n        <div className=\"submit_fixed\">\n          <button className=\"vf-button vf-button--secondary\" type=\"submit\">\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n          <p style={{ paddingTop: '30px' }}>\n            [Please enable background graphics in the print preview in order to\n            get better print output]\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const ViewProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/view/:id/:alias\"\n      component={ProfileView}\n    />\n  </Switch>\n);\n\nexport default ViewProfile;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\n//import { apiUrl } from '../services/http/http';\n//import ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\n//import { Link, Redirect } from 'react-router-dom';\n//import RadarChart from 'react-svg-radar-chart';\nimport 'react-svg-radar-chart/build/css/index.css';\n//import user_icon from './user_icon.png';\nimport Collapsible from 'react-collapsible';\n\nexport const ProfilesCompareButterfly = props => {\n  let history = useHistory();\n  const frameworkName = props.frameworkName;\n  const frameworkVersion = props.frameworkVersion;\n  //const profile1Id = props.profile1Id;\n  //const profile2Id = props.profile2Id;\n  const isGuestProfile = props.isGuestProfile;\n\n  const profile1 = props.profile1;\n  const profile2 = props.profile2;\n  const framework = props.framework;\n  const frameworkInfo = props.frameworkInfo;\n\n  var competencyView = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  //var frameworkLogo = '';\n  //var frameworkDesc = '';\n  var mapping1 = [];\n  var mapping2 = [];\n  // var user_roles = localStorage.getItem('roles')\n  //   ? localStorage.getItem('roles')\n  //   : '';\n  // var competencies_array = [];\n  var expertise_array = [];\n  //var profile1_expertise_obj = new Object();\n  //var profile2_expertise_obj = new Object();\n  var chart_props = [];\n  //var leftData = [];\n  //var rightData = [];\n  var totalLevels = '';\n\n  var includeSummary = [];\n\n  const getExpertise = (competency, profileid) => {\n    let mapping = [];\n    if (profileid === 'profile1') {\n      mapping = mapping1;\n    } else {\n      mapping = mapping2;\n    }\n\n    let obj = mapping.find(o => o.competency === competency);\n    if (obj) {\n      if (frameworkInfo) {\n        // let expertise = frameworkInfo[0].expertise_levels.find(\n        //   level => level.id == obj.expertise\n        // );\n\n        let frm = frameworkInfo.find(\n          info => info.title.toLowerCase() === frameworkName\n        );\n\n        let expertise = frm.expertise_levels.find(\n          level => level.id === obj.expertise\n        );\n        totalLevels = frm.expertise_levels.length;\n        return expertise;\n      }\n    } else {\n      return null;\n    }\n  };\n\n  const getAttributeStatus = (attribute, profile) => {\n    let mapping = '';\n    if (profile === 'profile1') {\n      mapping = profile1.profile_mapping;\n    } else {\n      mapping = profile2.profile_mapping;\n    }\n    //console.log(mapping)\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a === attribute)\n      );\n      //console.log(attribute_check_status)\n      return attribute_check_status ? true : false;\n    }\n  };\n\n  // const getAttributeRows = competency => {\n  //   console.log('hi ' + competency);\n  // };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.expertise_levels.map(\n            (level, key) => (expertise_array[key] = level.id) //(expertise_levels[level.id] = level.title)\n          );\n        }\n        return null;\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        \"<li class='legend'>  <div class='legend_number'> \" +\n          index +\n          '</div>' +\n          level +\n          '</li>'\n      );\n      index++;\n      return null;\n    });\n\n    if (profile1) {\n      mapping1 = profile1.profile_mapping;\n    }\n\n    if (profile2) {\n      mapping2 = profile2.profile_mapping;\n    }\n\n    if (frameworkInfo) {\n      frameworkInfo.map(framework => {\n        if (framework.title === frameworkName) {\n          framework.expertise_levels.map((level, key) => {\n            expertise_array[key] = level.id;\n            return null;\n          });\n          totalLevels = framework.expertise_levels.length;\n        }\n        return null;\n      });\n    }\n\n    if (framework) {\n      competencyView = framework.map((item, frmIndex) =>\n        item.domains.map((domain, domainIndex) =>\n          domain.competencies.map((competency, compIndex) => {\n            let profile1Expertise = getExpertise(competency.id, 'profile1');\n            let profile2Expertise = getExpertise(competency.id, 'profile2');\n\n            if (profile1Expertise && profile2Expertise) {\n              includeSummary.push(\n                profile1Expertise.rating_level < profile2Expertise.rating_level\n                  ? competency.id\n                  : null\n              );\n            } else if (!profile1Expertise && !profile2Expertise) {\n              includeSummary.push(null);\n            } else if (!profile1Expertise && profile2Expertise) {\n              includeSummary.push(competency.id);\n            }\n\n            console.log(totalLevels);\n            let width1 = profile1Expertise\n              ? 100 / ((totalLevels - 1) / profile1Expertise.rating_level)\n              : 0;\n            let margin1 = 100 - width1;\n            margin1 = margin1 === 100 ? 88 : margin1;\n\n            let width2 = profile2Expertise\n              ? 100 / ((totalLevels - 1) / profile2Expertise.rating_level)\n              : 0;\n            let floatRight = width2 === 0 ? 'none' : 'right';\n\n            return (\n              <div key={compIndex}>\n                <div className=\"vf-grid vf-grid__col-5\">\n                  <div className=\"vf-grid__col--span-3\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"vf-grid__col--span-1\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerLeft\"\n                        style={{\n                          width: width1 + '%',\n                          marginLeft: margin1 + '%'\n                        }}\n                      >\n                        <span\n                          style={{ position: 'relative' }}\n                          className=\"rating_level_number\"\n                        >\n                          {profile1Expertise\n                            ? profile1Expertise.rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"vf-grid__col--span-1\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{ width: width2 + '%', display: 'flow-root' }}\n                      >\n                        <span\n                          style={{ float: floatRight }}\n                          className=\"rating_level_number\"\n                        >\n                          {profile2Expertise\n                            ? profile2Expertise.rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <span className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <span className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map((attribute_type, typeIndex) => {\n                      return (\n                        <React.Fragment key={typeIndex}>\n                          <p style={{ paddingLeft: '20px', marginTop: '10px' }}>\n                            <strong> {attribute_type} </strong>\n                          </p>\n                          <div className=\"vf-grid vf-grid__col-5\">\n                            {competency.attributes\n                              .filter(\n                                attribute => attribute.type === attribute_type\n                              )\n                              .map((attribute, attrIndex) => {\n                                return (\n                                  <React.Fragment key={attrIndex}>\n                                    <span\n                                      className=\"vf-grid__col--span-3\"\n                                      style={{ paddingLeft: '20px' }}\n                                    >\n                                      {attribute.title}\n                                    </span>\n\n                                    <div className=\"vf-grid__col--span-1\">\n                                      {getAttributeStatus(\n                                        attribute.id,\n                                        'profile1'\n                                      ) ? (\n                                        <i className=\"icon icon-common icon-check\" />\n                                      ) : (\n                                        '-'\n                                      )}\n                                    </div>\n                                    <div className=\"vf-grid__col--span-1\">\n                                      {getAttributeStatus(\n                                        attribute.id,\n                                        'profile2'\n                                      ) ? (\n                                        <i className=\"icon icon-common icon-check\" />\n                                      ) : (\n                                        '-'\n                                      )}\n                                    </div>\n                                  </React.Fragment>\n                                );\n                              })}\n                          </div>\n                        </React.Fragment>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            );\n          })\n        )\n      );\n    }\n  };\n  if (profile1) {\n    chart_props[0] = {\n      key: profile1.id,\n      label: profile1.title\n    };\n  }\n\n  if (profile2) {\n    chart_props[1] = {\n      key: profile2.id,\n      label: profile2.title\n    };\n  }\n\n  const handlePrint = e => {\n    e.preventDefault();\n    window.print();\n  };\n\n  const handleSummary = e => {\n    e.preventDefault();\n    history.push({\n      pathname: `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/guest/summary`,\n      state: {\n        profileJobTitle: profile1.job_title,\n        includeSummary: includeSummary\n      }\n    });\n  };\n\n  return (\n    <div id=\"\">\n      {generateProfileView()}\n\n      <p>&nbsp; </p>\n      <div className=\"vf-grid vf-grid__col-5\">\n        <div className=\"vf-grid__col--span-3\">\n          <h3>\n            {frameworkFullName} {frameworkVersion} / Competencies\n          </h3>\n        </div>\n        <div className=\"vf-grid__col--span-1\">\n          <h3>{profile1.job_title}</h3>\n        </div>\n        <div className=\"vf-grid__col--span-1\">\n          <h3>{profile2.job_title}</h3>\n        </div>\n      </div>\n\n      <hr />\n      <div className=\"vf-grid vf-grid__col-5\">\n        <div className=\"vf-grid__col--span-3\" />\n        <div className=\"vf-grid__col--span-1\">\n          <span>High</span> <span style={{ float: 'right' }}> Low</span>\n        </div>\n        <div className=\"vf-grid__col--span-1\">\n          <span>Low</span> <span style={{ float: 'right' }}> High</span>\n        </div>\n      </div>\n\n      <div>{competencyView}</div>\n      <div className=\"vf-grid\">\n        <div />\n        <div style={{ textAling: 'center' }}>\n          {isGuestProfile ? (\n            <button\n              to={'#'}\n              className=\"vf-button\"\n              onClick={e => handleSummary(e)}\n            >\n              Summary <i className=\"icon-common icon-list\" />\n            </button>\n          ) : (\n            ''\n          )}\n        </div>\n        <div style={{ textAling: 'center' }} className=\"submit_fixed\">\n          <button\n            href=\"#\"\n            className=\"vf-button vf-button--secondary\"\n            onClick={e => handlePrint(e)}\n          >\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n          <p style={{ paddingTop: '30px' }}>\n            [Please enable background graphics in the print preview in order to\n            get better print output]\n          </p>\n        </div>\n        <div />\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilesCompareButterfly;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\n\nimport { Link } from 'react-router-dom';\nimport 'react-tabs/style/react-tabs.css';\nimport ProfilesCompareButterfly from './ProfilesCompareButterfly';\nimport user_icon from './user_icon.png';\nimport ReactTooltip from 'react-tooltip';\nimport { ProfileComparisonModal } from '../../shared/components/ProfileComparisonModal';\n\nexport const ProfilesCompare = props => {\n  let history = useHistory();\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profile1Id = props.location.pathname.split('/')[6];\n  const profile2Id = props.location.pathname.split('/')[7];\n  //var expertise_levels = [];\n  var expertise_levels_legend = [];\n\n  const [profile1, setProfile1] = useState();\n  const [profile2, setProfile2] = useState();\n  const [profiles, setProfiles] = useState();\n  const [selectedProfileId, setSelectedProfileId] = useState();\n  const [comparisonError, setComparisonError] = useState(null);\n  const [framework, setFramework] = useState();\n  const [isGuestProfile, setIsGuestProfile] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const [link1, setLink1] = useState();\n  const [link2, setLink2] = useState();\n\n  const redirectToCompare = e => {\n    if (selectedProfileId) {\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n          profile1.id\n        }/${selectedProfileId}`\n      );\n    } else {\n      setComparisonError('Select a role to compare');\n    }\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        if (profile1Id === 'guest') {\n          await setProfile1(JSON.parse(localStorage.getItem('guestProfile')));\n          setIsGuestProfile(1);\n          setLink1(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n          );\n        } else {\n          setLink1(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profile1Id}/alias`\n          );\n          await fetch(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profile1Id}&source=competencyhub`\n          )\n            .then(Response => Response.json())\n            .then(findresponse => {\n              setProfile1(findresponse);\n            });\n        }\n\n        if (profile2Id === 'guest') {\n          await setProfile2(JSON.parse(localStorage.getItem('guestProfile')));\n          setIsGuestProfile(1);\n          setLink2(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n          );\n        } else {\n          setLink2(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profile2Id}/alias`\n          );\n          await fetch(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profile2Id}&source=competencyhub`\n          )\n            .then(Response => Response.json())\n            .then(findresponse => {\n              setProfile2(findresponse);\n            });\n        }\n\n        await fetch(\n          `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles/?_format=json&source=competencyhub`\n        )\n          .then(Response => Response.json())\n          .then(findresponse => {\n            const profilesExcludingCurrentProfile = findresponse.filter(\n              p =>\n                p.id !== props.match.params.profile1 &&\n                p.publishing_status === 'Live'\n            );\n            setProfiles(profilesExcludingCurrentProfile);\n          });\n\n        await fetch(\n          `${apiUrl}/api/version_manager?_format=json&source=competencyhub`\n        )\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setFrameworkInfo(findresponse);\n          });\n\n        await fetch(\n          `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&source=competencyhub`\n        )\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setFramework(findresponse);\n          });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [frameworkName, frameworkVersion, profile1Id, profile2Id]);\n\n  if (frameworkInfo) {\n    frameworkInfo.forEach((info, index) => {\n      if (info.title.toLowerCase() === frameworkName) {\n        info.expertise_levels.map((level, levelIndex) =>\n          expertise_levels_legend.push(\n            <li\n              key={levelIndex}\n              className=\"vf-list__item\"\n              style={{ textAlign: 'center' }}\n            >\n              <div\n                data-tip={level.description ? level.description : 'NA'}\n                data-html={true}\n                data-type=\"info\"\n                data-multiline={true}\n              >\n                <span className=\"vf-badge vf-badge--tertiary\">\n                  {' '}\n                  {level.rating_level}{' '}\n                </span>{' '}\n                <span> {level.title}</span>\n              </div>\n              <ReactTooltip className=\"tooltip-custom\" />\n            </li>\n          )\n        );\n      }\n    });\n  }\n\n  return (\n    <div>\n      <h1>Compare career profiles</h1>\n      <span className=\"lead\">\n        Compare profile with other reference profiles to help you make career\n        choices based on your competency\n      </span>\n\n      <div className=\"vf-grid\">\n        <div />\n        <div>\n          <div className=\"vf-u-margin__bottom--1200\" />\n          {profile1 ? (\n            <div className=\"vf-profile\">\n              <img\n                alt=\"profile1\"\n                src={profile1.image[0] ? profile1.image[0].url : user_icon}\n                width=\"120px\"\n                className=\"vf-profile__image\"\n              />\n              <Link to={link1 ? link1 : '#'}>\n                <h2>{profile1.job_title}</h2>\n              </Link>\n            </div>\n          ) : (\n            'loading profiles'\n          )}\n        </div>\n\n        <div>\n          <div className=\"vf-u-margin__bottom--1200\" />\n          {profile2 ? (\n            <div className=\"vf-profile\">\n              <img\n                alt=\"profile2\"\n                src={profile2.image[0] ? profile2.image[0].url : user_icon}\n                width=\"120px\"\n                className=\"vf-profile__image\"\n              />\n              <Link to={link2}>\n                <h2>{profile2.job_title}</h2>\n              </Link>\n\n              {/*<a*/}\n              {/*  href=\"JavaScript:Void(0);\"*/}\n              {/*  className=\"vf-button vf-button--link\"*/}\n              {/*>*/}\n              {/*  Compare another profile*/}\n              {/*</a>*/}\n              <ProfileComparisonModal\n                profiles={profiles}\n                profile={profile1}\n                comparisonError={comparisonError}\n                linkVariant={true}\n                setSelectedProfileId={id => {\n                  setSelectedProfileId(id);\n                }}\n                redirectToCompare={() => {\n                  redirectToCompare();\n                }}\n              />\n            </div>\n          ) : (\n            'loading profiles'\n          )}\n        </div>\n        <div />\n      </div>\n\n      <div>\n        <div className=\"vf-u-margin__bottom--600\" />\n        <div className=\"legend-inline-wrapper\">\n          <strong>Rating levels </strong>{' '}\n          <ul className=\"vf-list legend-inline\">{expertise_levels_legend}</ul>\n        </div>\n      </div>\n      <p />\n\n      {profile1 && profile2 ? (\n        <ProfilesCompareButterfly\n          frameworkName={frameworkName}\n          frameworkVersion={frameworkVersion}\n          profile1Id={profile1Id}\n          profile2Id={profile2Id}\n          profile1={profile1}\n          profile2={profile2}\n          framework={framework}\n          frameworkInfo={frameworkInfo}\n          isGuestProfile={isGuestProfile}\n        />\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\nexport const sendRoute = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profiles/compare/:profile1/:profile2\"\n      component={ProfilesCompare}\n    />\n  </Switch>\n);\n\nexport default sendRoute;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport HttpService from '../services/http/http';\n// import ProfileService from '../services/profile/profile';\n// import ActiveRequestsService from '../services/active-requests/active-requests';\n// import { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\n//import Parser from 'html-react-parser';\n\nimport jsPDF from 'jspdf';\n//import moment from 'moment';\n\nconst $ = window.$;\n\nexport const ProfileMapDownload = props => {\n  // const activeRequests = new ActiveRequestsService();\n  // const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [expertiseLevels, setExpertiseLevels] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  // const [ksa, setKsa] = useState();\n  //const [profileAttributes, setProfileAttributes] = useState([]);\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  //var frameworkDesc = '';\n  //var frameworkLogo = '';\n\n  var mapping = [];\n  let mappingAttributes = [];\n  var expertise_levels_legend = [];\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n\n    if (storedProfile) {\n      // Get Profile from Session\n      setProfile(storedProfile);\n\n      const fetchData = async () => {\n        try {\n          // Get Framework\n          const promiseFramework = http\n            .get(`${apiUrl}/api/version_manager?_format=json`)\n            .then(responseFramework => responseFramework.data);\n\n          // Get Framework version\n          const promiseVersion = http\n            .get(\n              `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n            )\n            .then(responseVersion => responseVersion.data);\n\n          const [dataFramework, dataVersion] = await Promise.all([\n            promiseFramework,\n            promiseVersion\n          ]);\n\n          getExpertiseLevels(dataFramework, dataVersion[0].nid);\n          setFrameworkInfo(dataFramework);\n          setFramework(dataVersion);\n          // return false;\n        } catch (err) {\n          console.log(err);\n        }\n      };\n\n      fetchData();\n    }\n  }, [frameworkVersion, frameworkName, http]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Download Profile\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    downloadProfileFromHtml(storedProfile);\n  };\n\n  const handleMapping = event => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let expertise = event.target[event.target.selectedIndex].text;\n\n    if (expertise_id === expertise_not_applicable) {\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'checked',\n        false\n      );\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'disabled',\n        true\n      );\n\n      removeCompetencyAttributes(competency_id);\n    } else {\n      // Create temp mapping\n      let tempMap = storedProfile['mapping'];\n\n      if (tempMap.find(o => o.competency_id === competency_id)) {\n        // Update stored Competencies only if existing levels of expertise is updated\n        if (tempMap.expertise_id !== expertise_id) {\n          var index = tempMap.findIndex(\n            item => item.competency_id === competency_id\n          );\n          // replace current stored values with incoming ones\n          tempMap.splice(index, 1, {\n            competency_id: competency_id,\n            expertise_id: expertise_id,\n            expertise: expertise\n          });\n        }\n        // Update local Storage mapping\n        storedProfile['mapping'] = tempMap;\n        localStorage.setItem(\n          'ProfileDownloadData',\n          JSON.stringify(storedProfile)\n        );\n      } else {\n        // Add competency that has been selected\n        let tempMap = storedProfile['mapping'];\n        tempMap.push({\n          competency_id: competency_id,\n          expertise_id: expertise_id,\n          expertise: expertise\n        });\n        storedProfile['mapping'] = tempMap;\n        localStorage.setItem(\n          'ProfileDownloadData',\n          JSON.stringify(storedProfile)\n        );\n      }\n\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'checked',\n        true\n      );\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'disabled',\n        false\n      );\n\n      // Add Competency's selected attributes to LocalStorage\n      addCompetencyAttributes(competency_id);\n    }\n  };\n\n  // Add all attributes to LocalStorage if Competency is selected\n  const addCompetencyAttributes = competency => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    // let selectedAttributes = new Array();\n\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    // let attributes = $(\n    //   'input:checkbox[data-competency=' + competency + ']'\n    // ).each(function() {\n    //   if (\n    //     mappingAttributes.find(attr => attr.attribute_id === $(this).attr('id'))\n    //   ) {\n    //     // Do nothing if attributes are in LocalStorage already\n    //   } else {\n    //     mappingAttributes.push({\n    //       attribute_id: $(this).attr('id'),\n    //       competency_id: competency\n    //     });\n    //   }\n    // }, mappingAttributes);\n\n    storedProfile['mappingAttributes'] = mappingAttributes;\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(storedProfile));\n    //setProfileAttributes(storedProfile);\n  };\n\n  // Remove current attributes if Competency is deselected\n  const removeCompetencyAttributes = competency => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    // let attributes = $(\n    //   'input:checkbox[data-competency=' + competency + ']'\n    // ).each(function() {\n    //   let index = mappingAttributes.findIndex(\n    //     item => item.attribute_id === $(this).attr('id')\n    //   );\n    //   // Remove current attributes if Competency is deselected\n    //   mappingAttributes.splice(index, 1);\n    // }, mappingAttributes);\n\n    // localStorage.setItem('mappingAttributes', JSON.stringify(mappingAttributes));\n    storedProfile['mappingAttributes'] = mappingAttributes;\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(storedProfile));\n    //setProfileAttributes(storedProfile);\n  };\n\n  // Manage single Attributes check/uncheck event\n  const handleCheckboxMapping = event => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let competency_id = event.target.getAttribute('data-competency');\n    let attribute_id = event.target.getAttribute('id');\n\n    // let mappingAttributes = JSON.parse(localStorage.getItem('mappingAttributes'));\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = mappingAttributes;\n\n    if (mappingAttributes.find(attr => attr.attribute_id === attribute_id)) {\n      // Remove current attribute if deselected\n      var index = mappingAttributes.findIndex(\n        item => item.attribute_id === attribute_id\n      );\n      mappingAttributes.splice(index, 1);\n      // localStorage.setItem('mappingAttributes', JSON.stringify(mappingAttributes));\n      storedProfile['mappingAttributes'] = mappingAttributes;\n      localStorage.setItem(\n        'ProfileDownloadData',\n        JSON.stringify(storedProfile)\n      );\n    } else {\n      // Add attribute to LocalStorage\n      attributes.push({\n        attribute_id: attribute_id,\n        competency_id: competency_id\n      });\n      // localStorage.setItem('mappingAttributes', JSON.stringify(attributes));\n      storedProfile['mappingAttributes'] = attributes;\n      $('input:checkbox[id=' + attribute_id + ']').prop('checked', true);\n      localStorage.setItem(\n        'ProfileDownloadData',\n        JSON.stringify(storedProfile)\n      );\n    }\n    //setProfileAttributes(storedProfile);\n  };\n\n  // Set Expertise Level.\n  // const expertiseLevelsSelect= [\n  //   {id: 1, title: 'Not applicable', data_expertise: '6816'},\n  //   {id: 2, title: 'Awareness', data_expertise: '6817'},\n  //   {id: 3, title: 'Working knowledge', data_expertise: '6818'},\n  //   {id: 4, title: 'Specialist knowledge', data_expertise: '6819'}\n  // ];\n\n  // Get Expertise Level from API.\n  if (frameworkInfo) {\n    frameworkInfo.map(info => {\n      if (info.title.toLowerCase() === frameworkName) {\n        frameworkFullName = info.title;\n        //frameworkLogo = info.logo[0].url;\n        //frameworkDesc = info.description;\n        info.expertise_levels.map(\n          level => (expertise_levels[level.rating_level] = level.title)\n        );\n      }\n      return null;\n    });\n\n    //let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        <li style={{ textAlign: 'center' }}>\n          <span className=\"badge secondary\"> {key} </span> <span> {level}</span>\n        </li>\n      );\n      //index++;\n      return null;\n    });\n  }\n\n  const getExpertiseLevels = (frameworkInfo, fId) => {\n    let fw = frameworkInfo.filter(item => {\n      return item.nid === fId;\n    });\n\n    let levels = fw[0].expertise_levels;\n\n    // Set Expertise Level\n    setExpertiseLevels(levels);\n  };\n\n  const downloadProfileFromHtml = options => {\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    //const margin = 0.5;\n\n    //let currentDate = moment().format('MMMM D, Y');\n    //let currentTime = moment().format('hh:mm:ss');\n\n    //let pdfWidth = doc.internal.pageSize.getWidth();\n    //let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    //const pdfProfileImgWidth = 180;\n    //const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    //let col = pdfWidth * 0.07383;\n    //let gutter = pdfWidth * 0.01036727272;\n    //let fourthCol = col * 4 + gutter * 3;\n    //let fifthCol = col * 5 + gutter * 4;\n\n    //const profileBody = pdfWidth - fifthCol - 20;\n\n    // let selectedFileWidth = options.selectedFile\n    //   ? options.selectedFileData[0].width\n    //   : 180;\n    // let selectedFileHeight = options.selectedFile\n    //   ? options.selectedFileData[0].height\n    //   : 150;\n    //let ratio = selectedFileWidth / selectedFileHeight;\n    //let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    var specialElementHandlers = {\n      '#editor': function(element, renderer) {\n        return true;\n      }\n    };\n\n    let margins = {\n      top: startHeight,\n      bottom: 60,\n      left: marginleft,\n      right: marginright,\n      width: 490\n    };\n\n    var source = document.getElementById('profile');\n\n    // source = doc.splitTextToSize(\n    //   source,\n    //   profileBody\n    // );\n\n    let profileTitle = options.jobTitle.split(' ').join('_');\n    doc.fromHTML(\n      source,\n      marginleft,\n      currentYAxis,\n      {\n        // y coord\n        width: margins.width, // max width of content on PDF\n        elementHandlers: specialElementHandlers\n      },\n      function(dispose) {\n        // dispose: object with X, Y of the last line add to the PDF\n        //          this allow the insertion of new lines after html\n        doc.save(profileTitle.toLowerCase() + '.pdf');\n      }\n      // margins\n    );\n\n    // doc.output(\"/framework/bioexcel/2.0/profile/map/download/myprofile\");\n  };\n\n  // Set fielc HTML content + Heading if not empty\n  const setFieldContent = (heading, field) => {\n    let fieldContent = field ? '<h3>' + heading + '</h3>' + field : '';\n    return { __html: fieldContent };\n  };\n\n  const generateForm = () => {\n    // console.log('frameworkInfo')\n    // console.log(frameworkInfo)\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title === 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : ''\n            )\n          );\n        }\n        return null;\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    if (profile) {\n      mapping = profile.mapping;\n\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n      mappingAttributes = storedProfile['mappingAttributes'];\n    }\n\n    if (framework) {\n      competencyForm = framework.map((item, index) =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li key={index} className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h4 className=\"domain_title\"> {domain.title}</h4>\n                </div>\n                <div className=\"column medium-3\">\n                  <h4>Levels of expertise</h4>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li key={cid} className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <h5>\n                                <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                  <p className=\"show-for-sr\">show more</p>\n                                </span>\n                                {competency.title}\n                              </h5>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <h5>\n                                <span className=\"icon icon-common icon-angle-up icon-custom\">\n                                  <p className=\"show-for-sr\">show less</p>\n                                </span>\n                                {competency.title}\n                              </h5>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map((attribute_type, index) => {\n                              return (\n                                <li key={index} className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type === attribute_type\n                                      )\n                                      .map((attribute, jIndex) => (\n                                        <li\n                                          key={jIndex}\n                                          className=\"attribute_title\"\n                                        >\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                onChange={e =>\n                                                  handleCheckboxMapping(e)\n                                                }\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                data-competency={competency.id}\n                                                checked={\n                                                  mappingAttributes.find(\n                                                    attr =>\n                                                      attr.attribute_id ===\n                                                      attribute.id\n                                                  )\n                                                    ? true\n                                                    : false\n                                                }\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className={\n                                                  mappingAttributes.find(\n                                                    attr =>\n                                                      attr.attribute_id ===\n                                                      attribute.id\n                                                  )\n                                                    ? 'attribute_label checked'\n                                                    : 'attribute_label'\n                                                }\n                                                htmlFor={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleMapping(e)}\n                          defaultValue={\n                            mapping.find(o => o.competency_id === competency.id)\n                              ? mapping.find(\n                                  o => o.competency_id === competency.id\n                                ).expertise_id\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertiseLevels.map((level, key) => (\n                            <option\n                              key={key}\n                              value={level.id}\n                              data-expertise={level.id}\n                              data-competency={competency.id}\n                            >\n                              {level.title}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  // const handlePrint = () => {\n  //   window.print();\n  // };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>Add competencies to your profile </h2>\n\n            <div id=\"profile\" className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <h3>\n                    {profile.title.charAt(0).toUpperCase() +\n                      profile.title.slice(1)}{' '}\n                    - {profile.jobTitle}\n                  </h3>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3 text-center\">\n                  {profile.selectedFileData[0] ? (\n                    <img\n                      src={\n                        profile.selectedFileData[0].src\n                          ? profile.selectedFileData[0].src\n                          : user_icon\n                      }\n                      width=\"250px\"\n                      alt=\"\"\n                    />\n                  ) : (\n                    ''\n                  )}\n                  <div className=\"text-center\">\n                    <br />\n                    {profile.gender}, {profile.age} years\n                  </div>\n                </div>\n                <div className=\"column medium-9\">\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Qualifications and background',\n                      profile.qualification\n                    )}\n                  />\n                  {/* <div className=\"form_intro\"\n                    dangerouslySetInnerHTML={{ __html: profile.qualification }}\n                  /> */}\n\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Activities and current role',\n                      profile.currentRole\n                    )}\n                  />\n\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Additional information',\n                      profile.additionalInfo\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <br />\n                  <h3>Your competencies</h3>\n                  <p>\n                    The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                  <p>\n                    You may assign a level expertise against each competency.\n                    The levels of expertise are:\n                  </p>\n                  <div className=\"legend-inline-wrapper\">\n                    <strong>Rating levels </strong>{' '}\n                    <ul className=\"legend-inline\">{expertise_levels_legend}</ul>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <div className=\"competency_section\">\n                    {\n                      <form onSubmit={e => handleSubmit(e)}>\n                        {competencyForm}\n                        <div className=\"submit_fixed\">\n                          <button className=\"button\" type=\"submit\">\n                            Print <i className=\"icon icon-common icon-print\" />\n                          </button>\n                        </div>\n                      </form>\n                    }\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {/* <div>{profile.qualification}</div> */}\n\n                  {/* <div>{profile.currentRole}</div> */}\n                  {/* <h5>{profile.title}</h5> */}\n                  {/* <Link\n                    to={`/framework/bioexcel/2.0/profile/view/${profileId}/alias`}\n                  >\n                    {' '}\n                    <i className=\"icon icon-common icon-angle-left\" /> Profile\n                    overview{' '}\n                  </Link> */}\n                </div>\n                <div className=\"column medium-6 form_intro\" />\n                <div className=\"column medium-3\">\n                  {/* <img src={frameworkLogo} />\n                  <br /> */}\n                </div>\n              </div>\n\n              {/* <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Download{' '}\n                        <i className=\"icon icon-common icon-download\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div> */}\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const MapProfileDownload = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/download\"\n      component={ProfileMapDownload}\n    />\n  </Switch>\n);\n\nexport default MapProfileDownload;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport Parser from 'html-react-parser';\n\nimport { apiUrl } from '../services/http/http';\n//import ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactTooltip from 'react-tooltip';\nimport user_icon from './user_icon.png';\nimport { ProfileComparisonModal } from '../../shared/components/ProfileComparisonModal';\n//const $ = window.$;\n\nexport const ProfileViewGuest = props => {\n  let history = useHistory();\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n  const [profiles, setProfiles] = useState();\n  const [selectedProfileId, setSelectedProfileId] = useState();\n  const [comparisonError, setComparisonError] = useState(null);\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  var competencyView = '';\n  //var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  //var frameworkLogo = '';\n  //var frameworkDesc = '';\n  var mapping = [];\n\n  //let profile2Expertise = '';\n  let width2 = '';\n  //let floatRight = '';\n\n  const redirectToCompare = e => {\n    if (selectedProfileId) {\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${'guest'}/${selectedProfileId}`\n      );\n    } else {\n      setComparisonError('Select a role to compare');\n    }\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await setProfile(JSON.parse(localStorage.getItem('guestProfile')));\n\n      await fetch(\n        `${apiUrl}/api/version_manager?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles/?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfiles(findresponse);\n        });\n    };\n    fetchData();\n  }, [frameworkName, frameworkVersion]);\n\n  const getExpertise = competency => {\n    if (mapping) {\n      let obj = mapping.find(o => o.competency === competency);\n      if (obj) {\n        if (frameworkInfo) {\n          // let expertise = frameworkInfo[0].expertise_levels.find(\n          //   level => level.id == obj.expertise\n          // );\n          let expertise = frameworkInfo\n            .find(info => info.title.toLowerCase() === frameworkName)\n            .expertise_levels.find(level => level.id === obj.expertise);\n          return expertise;\n        }\n      } else {\n        return '';\n      }\n    }\n  };\n\n  const getAttributeStatus = aid => {\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a === aid)\n      );\n      return attribute_check_status;\n    }\n  };\n\n  const getBarWidth = data => {\n    let totalLevels = frameworkInfo.find(\n      info => info.title.toLowerCase() === frameworkName\n    ).expertise_levels.length;\n\n    width2 = data ? 100 / ((totalLevels - 1) / data.rating_level) : 0;\n    console.log(data);\n    return width2;\n  };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.expertise_levels.map((level, index) =>\n            expertise_levels_legend.push(\n              <li\n                key={level.rating_level}\n                className=\"vf-list__item\"\n                style={{ textAlign: 'center' }}\n              >\n                <div\n                  data-tip={level.description ? level.description : 'NA'}\n                  data-html={true}\n                  data-type=\"info\"\n                  data-multiline={true}\n                >\n                  <span className=\"vf-badge vf-badge--tertiary\">\n                    {' '}\n                    {level.rating_level}{' '}\n                  </span>{' '}\n                  <span> {level.title}</span>\n                </div>\n                <ReactTooltip className=\"tooltip-custom\" />\n              </li>\n            )\n          );\n        }\n        return null;\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    if (profile) {\n      mapping = profile.profile_mapping;\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map((domain, domainIndex) => (\n          <div key={domainIndex}>\n            <div className=\"row callout\">\n              <div className=\"column medium-12 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n            </div>\n            {domain.competencies.map((competency, compIndex) => (\n              <div key={compIndex}>\n                <div className=\"vf-grid vf-grid__col-4\">\n                  <div className=\"vf-grid__col--span-3\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"vf-grid__col--span-1\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{\n                          width: getBarWidth(getExpertise(competency.id)) + '%',\n                          display: 'flow-root'\n                        }}\n                      >\n                        <span\n                          style={{\n                            float:\n                              getBarWidth(getExpertise(competency.id)) === 0\n                                ? 'none'\n                                : 'right'\n                          }}\n                          className=\"rating_level_number\"\n                        >\n                          {getExpertise(competency.id)\n                            ? getExpertise(competency.id).rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map((attribute_type, typeIndex) => {\n                      return (\n                        <div\n                          key={typeIndex}\n                          className=\"accordion-item is-active\"\n                          data-accordion-item\n                        >\n                          <div className=\"vf-grid vf-grid__col-4 attribute_align_type\">\n                            <div className=\"vf-grid__col--span-3\">\n                              <strong> {attribute_type} </strong>\n                            </div>\n                            <div className=\"vf-grid__col--span-1\" />\n                          </div>\n                          {competency.attributes\n                            .filter(\n                              attribute => attribute.type === attribute_type\n                            )\n                            .map((attribute, attrIndex) => {\n                              return (\n                                <div\n                                  key={attrIndex}\n                                  className=\"vf-grid vf-grid__col-4 attribute_align\"\n                                >\n                                  <div className=\"vf-grid__col--span-3\">\n                                    {attribute.title}\n                                  </div>\n                                  <div className=\"vf-grid__col--span-1\">\n                                    {getAttributeStatus(\n                                      attribute.id,\n                                      'profile1'\n                                    ) ? (\n                                      <i className=\"icon icon-common icon-check\" />\n                                    ) : (\n                                      '-'\n                                    )}\n                                  </div>\n                                </div>\n                              );\n                            })}\n                        </div>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))\n      );\n    }\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateProfileView()}\n      {profile ? (\n        <div id=\"profile\">\n          <h2 style={{ marginTop: '1em', marginBottom: '1em' }}>\n            {profile.title} - {profile.job_title}\n          </h2>\n\n          <div style={{ float: 'right' }}>\n            <ProfileComparisonModal\n              profiles={profiles}\n              profile={profile}\n              comparisonError={comparisonError}\n              setSelectedProfileId={id => {\n                setSelectedProfileId(id);\n              }}\n              redirectToCompare={() => {\n                redirectToCompare();\n              }}\n            />\n            <ul>\n              <li className=\"profile_navigation\">\n                <Link\n                  className=\"vf-link\"\n                  to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/guest`}\n                >\n                  Edit profile{' '}\n                  <i className=\"icon icon-common icon-pencil-alt\" />\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          <div\n            className={profile.publishing_status + ' vf-grid vf-grid__col-4'}\n          >\n            <div className=\"vf-grid__col--span-1\">\n              <center>\n                <img\n                  alt=\"\"\n                  style={{ display: 'block', maxWidth: '150px' }}\n                  src={profile.image[0] ? profile.image[0].url : user_icon}\n                  //src='#'\n                />\n              </center>\n              <p />\n              <div style={{ textAlign: 'center' }}>\n                {profile.gender !== 'None' ? (\n                  <div>\n                    {profile.gender && profile.gender === 'Prefernottosay' ? (\n                      <p> Gender: Prefer not to say </p>\n                    ) : (\n                      ''\n                    )}\n\n                    {profile.gender && profile.gender !== 'Prefernottosay' ? (\n                      <span> Gender: {profile.gender} </span>\n                    ) : (\n                      ''\n                    )}\n                  </div>\n                ) : (\n                  ''\n                )}\n\n                {profile.age ? <p> Age: {profile.age + ' years'} </p> : ''}\n              </div>\n            </div>\n            <div className=\"vf-grid__col--span-3\">\n              <h3>Qualification and background</h3>\n\n              {profile.qualification_background\n                ? Parser(profile.qualification_background)\n                : ''}\n\n              <h3>Activities of current role</h3>\n              {profile.current_role ? Parser(profile.current_role) : ''}\n\n              {profile.additional_information\n                ? Parser(profile.additional_information)\n                : ''}\n            </div>\n            <p />\n          </div>\n          <p>&nbsp;</p>\n\n          <div className=\"vf-grid vf-grid__col-4\">\n            <div className=\"vf-grid__col--span-1\">\n              {' '}\n              <h5 style={{ marginTop: '25px' }}>\n                {frameworkFullName} {frameworkVersion} / Competencies\n              </h5>\n            </div>\n            <div className=\"vf-grid__col--span-3\">\n              <ul className=\"vf-list legend-inline\" style={{ float: 'right' }}>\n                {expertise_levels_legend}\n              </ul>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"column medium-12\" />\n          </div>\n          <hr />\n          {competencyView}\n        </div>\n      ) : (\n        'Loading profile'\n      )}\n\n      <form onSubmit={e => handlePrint(e)}>\n        <div className=\"submit_fixed\">\n          <button className=\"vf-button vf-button--secondary\" type=\"submit\">\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n          <p style={{ paddingTop: '30px' }}>\n            [Please enable background graphics in the print preview in order to\n            get better print output]\n          </p>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const ViewGuestProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/view/guest\"\n      component={ProfileViewGuest}\n    />\n  </Switch>\n);\n\nexport default ViewGuestProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\n\nimport { Link } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\n\nimport ReactTooltip from 'react-tooltip';\nimport jsonData from './masterList.json';\n\nconst $ = window.$;\n\nexport const ProfileMapGuest = props => {\n  const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const [mapping, setMapping] = useState();\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const storedProfile = JSON.parse(localStorage.getItem('guestProfile'));\n      if (storedProfile) {\n        setProfile(storedProfile);\n        setMapping(\n          storedProfile.profile_mapping ? storedProfile.profile_mapping : []\n        );\n      }\n\n      await fetch(\n        `${apiUrl}/api/version_manager?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n      console.log(apiUrl);\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    // fetchData();\n\n    if (!mapping) {\n      fetchData();\n    }\n\n    // if (mapping) {\n    //   let checkBoxes = $('input:checkbox');\n    //   checkBoxes.each(function(index, item, arr) {\n    //     console.log('test ' + item.dataset);\n    //   });\n    // }\n  }, [frameworkName, frameworkVersion, mapping]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    let response = await profileService.mapProfileGuest(mapping);\n    console.log(response);\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n    );\n  };\n\n  const handleSelect = event => {\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let tempMapping = mapping;\n\n    let attributesList = [];\n    let checkBoxes = $('input:checkbox[data-competency=' + competency_id + ']');\n\n    if (expertise_id === expertise_not_applicable) {\n      checkBoxes.each(function(index, item, arr) {\n        item.checked = false;\n        item.disabled = true;\n      });\n      //console.log(tempMapping.find(o => o.competency == competency_id))\n      // tempMapping.splice(\n      //   tempMapping.find(o => o.competency == competency_id),\n      //   1\n      // );\n      console.log(tempMapping);\n      // Remove the NA competency from the temp array\n      tempMapping = tempMapping.filter(o => o.competency !== competency_id);\n      console.log(tempMapping);\n    } else if (tempMapping) {\n      if (tempMapping.find(o => o.competency === competency_id)) {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.expertise = expertise_id;\n\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        o.attributes = attributesList;\n      } else {\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        tempMapping.push({\n          competency: competency_id,\n          expertise: expertise_id,\n          attributes: attributesList\n        });\n      }\n    }\n    setMapping(tempMapping);\n  };\n\n  const handleCheckBox = e => {\n    let checkboxStatus = e.target.checked;\n    let competency_id = e.target.dataset.competency;\n    let tempMapping = mapping;\n    if (tempMapping) {\n      if (checkboxStatus === true) {\n        e.target.checked = true;\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.attributes.push(e.target.id);\n      } else {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.attributes.splice(o.attributes.indexOf(e.target.id), 1);\n      }\n      setMapping(tempMapping);\n    }\n    console.log(mapping);\n  };\n\n  const generateForm = () => {\n    if (frameworkInfo) {\n      frameworkInfo.forEach(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.expertise_levels.map(\n            (level, levelIndex) => (\n              (expertise_levels[level.id] = level.title),\n              level.title === 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : '',\n              expertise_levels_legend.push(\n                <li\n                  key={levelIndex}\n                  className=\"vf-list__item\"\n                  style={{ textAlign: 'center' }}\n                >\n                  <div\n                    data-tip={level.description ? level.description : 'NA'}\n                    data-html={true}\n                    data-type=\"info\"\n                    data-multiline={true}\n                  >\n                    <span className=\"vf-badge vf-badge--tertiary\">\n                      {' '}\n                      {level.rating_level}{' '}\n                    </span>{' '}\n                    <span> {level.title}</span>\n                  </div>\n                  <ReactTooltip className=\"tooltip-custom\" />\n                </li>\n              )\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    if (framework) {\n      competencyForm = framework.map(item =>\n        item.domains.map((domain, did) => (\n          <ul key={`ul${did}`}>\n            <li key={did} className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h5 className=\"domain_title\"> {domain.title}</h5>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li key={cid} className=\"competency_list\">\n                    <div className=\"vf-grid vf-grid__col-4\">\n                      <div className=\"vf-grid__col--span-3\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-right icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map(\n                              (attribute_type, typeIndex) => {\n                                return (\n                                  <li\n                                    key={typeIndex}\n                                    className=\"attribute_type\"\n                                  >\n                                    {attribute_type}\n                                    <ul>\n                                      {competency.attributes\n                                        .filter(\n                                          attribute =>\n                                            attribute.type === attribute_type\n                                        )\n                                        .map((attribute, attrIndex) => (\n                                          <li\n                                            key={attrIndex}\n                                            className=\"attribute_title\"\n                                          >\n                                            <div className=\"vf-grid vf-grid__col-4\">\n                                              <div className=\"vf-grid__col--span-1\">\n                                                <input\n                                                  type=\"checkbox\"\n                                                  id={attribute.id}\n                                                  onChange={e =>\n                                                    handleCheckBox(e)\n                                                  }\n                                                  defaultChecked={\n                                                    mapping\n                                                      ? mapping.find(o =>\n                                                          o.attributes.find(\n                                                            a =>\n                                                              a === attribute.id\n                                                          )\n                                                        )\n                                                        ? true\n                                                        : false\n                                                      : false\n                                                  }\n                                                  disabled={\n                                                    mapping\n                                                      ? mapping.find(\n                                                          o =>\n                                                            o.competency ===\n                                                            competency.id\n                                                        )\n                                                        ? false\n                                                        : true\n                                                      : true\n                                                  }\n                                                  data-competency={\n                                                    competency.id\n                                                  }\n                                                />\n                                              </div>\n                                              <div className=\"vf-grid__col--span-3\">\n                                                <label\n                                                  className=\"attribute_label\"\n                                                  htmlFor={attribute.id}\n                                                >\n                                                  {' '}\n                                                  {attribute.title}\n                                                </label>\n                                              </div>\n                                            </div>\n                                          </li>\n                                        ))}\n                                    </ul>\n                                  </li>\n                                );\n                              }\n                            )}\n                          </ul>\n                        </Collapsible>\n                      </div>\n                      <div className=\"vf-grid__col--span-1\">\n                        <select\n                          onChange={e => handleSelect(e)}\n                          defaultValue={\n                            mapping\n                              ? mapping.find(\n                                  o => o.competency === competency.id\n                                )\n                                ? mapping.find(\n                                    o => o.competency === competency.id\n                                  ).expertise\n                                : expertise_not_applicable\n                              : expertise_not_applicable\n                          }\n                          className=\"vf-form__select\"\n                        >\n                          {expertise_levels.map((key, value) => (\n                            <option\n                              key={value}\n                              value={value}\n                              data-expertise={value}\n                              data-competency={competency.id}\n                            >\n                              {key}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div key={'div123'}>\n          <div key={'div567'} className=\"row\">\n            <div className=\"vf-u-margin__top--400\" />\n            <h2> Competency mapping</h2>\n            <h3>\n              {jsonData.filter(item => item.title === frameworkName)[0].desc} (\n              {frameworkFullName} {frameworkVersion}) - {profile.job_title}{' '}\n            </h3>\n\n            <div key={'div350'} className=\"column medium-12\">\n              <div className=\"vf-grid vf-grid__col-5\">\n                <div className=\"vf-grid__col--span-4\" />\n                <div className=\"vf-grid__col--span-1\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`}\n                  >\n                    <i className=\"icon icon-common icon-angle-left\" /> Profile\n                    overview\n                  </Link>\n                  <p />\n                </div>\n              </div>\n\n              <div className=\"vf-grid vf-grid__col-4\">\n                <div className=\"vf-grid__col--span-1\">\n                  <img\n                    src={profile.image[0] ? profile.image[0].url : user_icon}\n                    width=\"150px\"\n                    alt=\"\"\n                  />\n                </div>\n                <div className=\"vf-grid__col--span-3 form_intro\">\n                  <p>\n                    Select your level of expertise in each competency from the\n                    dropdown menu. Choose the knowledge, skills and attitudes\n                    that are applicable to you by clicking on each competency to\n                    view them.\n                  </p>\n                </div>\n              </div>\n              <div className=\"vf-grid vf-grid__col-4\">\n                <div className=\"vf-grid__col--span-1\">\n                  {' '}\n                  <h5 style={{ marginTop: '25px' }}>\n                    {frameworkFullName} {frameworkVersion} / Competencies\n                  </h5>\n                </div>\n                <div className=\"vf-grid__col--span-3\">\n                  <ul\n                    className=\"vf-list legend-inline\"\n                    style={{ float: 'right' }}\n                  >\n                    {expertise_levels_legend}\n                  </ul>\n                </div>\n              </div>\n              <hr />\n\n              <div className=\"competency_section\">\n                {\n                  <form key={profile.id} onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button\n                        className=\"vf-button vf-button--primary vf-button--sm\"\n                        type=\"submit\"\n                      >\n                        Save <i className=\"icon icon-common icon-save\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const path = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/guest\"\n      component={ProfileMapGuest}\n    />\n  </Switch>\n);\n\nexport default path;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n//import FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link } from 'react-router-dom';\n\nexport const ProfileEdit = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  //const [profile, setProfile] = useState();\n\n  //const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState();\n  const [age, setAge] = useState();\n  const [currentRole, setCurrentRole] = useState();\n  const [gender, setGender] = useState();\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState();\n  const [qualification, setQualification] = useState();\n  const [additionalInfo, setAdditionalInfo] = useState();\n  const [publishStatus, setPublishStatus] = useState();\n  const [userFrameworks, setUserFrameworks] = useState([]);\n  // const [framework, setFramework] = useState();\n\n  var userName = localStorage.getItem('user')\n    ? localStorage.getItem('user')\n    : '';\n\n  //var user_roles = localStorage.getItem('roles')\n  //  ? localStorage.getItem('roles')\n  //  : '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/node/${profileId}?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          //setProfile(findresponse);\n          setTitle(findresponse.title[0].value);\n          setImgpreview(\n            findresponse.field_image[0] ? findresponse.field_image[0].url : ''\n          );\n          setFid(\n            findresponse.field_image[0]\n              ? findresponse.field_image[0].target_id\n              : ''\n          );\n          setJobTitle(\n            findresponse.field_job_title[0]\n              ? findresponse.field_job_title[0].value\n              : ''\n          );\n          setAge(\n            findresponse.field_age[0] ? findresponse.field_age[0].value : ''\n          );\n          setGender(\n            findresponse.field_gender[0]\n              ? findresponse.field_gender[0].value\n              : 'None'\n          );\n          setCurrentRole(\n            findresponse.field_current_role[0]\n              ? findresponse.field_current_role[0].value\n              : ''\n          );\n          setQualification(\n            findresponse.field_qualification_background[0]\n              ? findresponse.field_qualification_background[0].value\n              : ''\n          );\n          setAdditionalInfo(\n            findresponse.field_additional_information[0]\n              ? findresponse.field_additional_information[0].value\n              : ''\n          );\n          setPublishStatus(\n            findresponse.field_publishing_status[0]\n              ? findresponse.field_publishing_status[0].value\n              : ''\n          );\n        });\n\n      await fetch(`${apiUrl}/api/authorisation/${userName}?_format=json`, {\n        method: 'GET',\n        credentials: 'include'\n      })\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setUserFrameworks(findresponse);\n        });\n    };\n    fetchData();\n  }, [profileId, userName]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n    } else {\n      let token = localStorage.getItem('csrf_token');\n      var fileid = fid;\n      if (selectedFile) {\n        console.log(selectedFile);\n        await fetch(\n          apiUrl + '/file/upload/node/profile/field_image?_format=json',\n          {\n            credentials: 'include',\n            method: 'POST',\n            cookies: 'x-access-token',\n            headers: {\n              accept: 'application/octet-stream',\n              'Content-Type': 'application/octet-stream',\n              'X-CSRF-Token': token,\n              'Content-Disposition': 'file; filename=\"persona_picture.png\"'\n            },\n            body: selectedFile\n          }\n        )\n          .then(resp => resp.json())\n          .then(function(data) {\n            console.log(data);\n            fileid = data.fid[0].value;\n          });\n      }\n\n      let response = await profileService.editProfile(\n        profileId,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        publishStatus,\n        fileid\n      );\n\n      if (response.nid[0].value) {\n        props.history.push(\n          `/framework/${frameworkName}/${frameworkVersion}/profile/map/${\n            response.nid[0].value\n          }`\n        );\n      }\n    }\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Map competencies';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Download';\n    }\n\n    return (\n      <input\n        type=\"submit\"\n        className=\"vf-button vf-button--primary vf-button--sm\"\n        value={submitButtonLabel}\n      />\n    );\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  // const setPreview = () => {\n  //   props.history.push(\n  //     `/framework/${frameworkName}/${frameworkVersion}/profile/preview`,\n  //     {\n  //       title: title\n  //     }\n  //   );\n  // };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type !== 'image/jpeg' &&\n        e.target.files[0].type !== 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      console.log(e.target.files[0]);\n\n      setImgpreview(objectUrl);\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setImgpreview(undefined);\n    setFid(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  const checkFMAccess = () => {\n    var temp = [];\n    userFrameworks.map(item => {\n      temp.push(item.toLowerCase());\n      return null;\n    });\n    if (temp.includes(frameworkName)) {\n      return true;\n    }\n    return false;\n  };\n\n  return (\n    <div>\n      {checkFMAccess() ? (\n        <div>\n          <Link\n            to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`}\n          >\n            {' '}\n            View{' '}\n          </Link>\n          <h2>Create {placeholder} profile</h2>\n\n          <form\n            className=\"form\"\n            id=\"profile_create_form\"\n            onSubmit={handleSubmit}\n          >\n            <div className=\"vf-grid vf-grid__col-4\">\n              <div className=\"vf-grid__col--span-1\">\n                <span>\n                  <strong>Name</strong>\n                  <input\n                    type=\"text\"\n                    id=\"title\"\n                    placeholder=\"Name\"\n                    value={title}\n                    onChange={e => setTitle(e.target.value)}\n                    className=\"vf-form__input\"\n                  />\n                  <div className={titleCalloutClass}>\n                    <i>{nameHelp}</i>\n                  </div>\n                </span>\n                <span>\n                  <strong>Image</strong>\n                  <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n                </span>\n\n                <span>\n                  <img\n                    alt=\"\"\n                    id=\"imgpreview_image\"\n                    width=\"100px\"\n                    src={imgpreview}\n                    height=\"100px\"\n                    style={{\n                      border: '1px solid #ccc',\n                      padding: '5px',\n                      width: '30%'\n                    }}\n                  />\n                  {imgpreview ? (\n                    <div>\n                      <button onClick={e => clearimgpreview(e)}>\n                        Clear image x\n                      </button>\n                    </div>\n                  ) : (\n                    ''\n                  )}\n\n                  {fileSizeError ? (\n                    <div className=\"small callout alert\">\n                      <em> Image size should not be more than 2 MB </em>{' '}\n                    </div>\n                  ) : (\n                    ''\n                  )}\n\n                  {fileTypeError ? (\n                    <div className=\"small callout alert\">\n                      <em> Only JPG or PNG images are allowed </em>{' '}\n                    </div>\n                  ) : (\n                    ''\n                  )}\n                </span>\n                <span>\n                  <strong>Age (in years)</strong>\n                  <input\n                    type=\"number\"\n                    id=\"age\"\n                    placeholder=\"Age\"\n                    width={4}\n                    value={age}\n                    onChange={e => setAge(e.target.value)}\n                    className=\"vf-form__input\"\n                  />\n                </span>\n                <span>\n                  <strong>Gender</strong>\n                  <select\n                    value={gender}\n                    defaultValue=\"-None-\"\n                    onChange={e => setGender(e.target.value)}\n                    className=\"vf-form__select\"\n                  >\n                    <option value={'None'}>None</option>\n                    <option value={'Male'}>Male</option>\n                    <option value={'Female'}>Female</option>\n                    <option value={'Nonbinary'}>Nonbinary</option>\n                    <option value={'Prefernottosay'}>Prefer not to say</option>\n                  </select>\n                </span>\n              </div>\n              <div className=\"vf-grid__col--span-3\">\n                <span>\n                  <strong>Job title</strong>\n                  <input\n                    type=\"text\"\n                    id=\"jobTitle\"\n                    placeholder=\"Job title\"\n                    value={jobTitle}\n                    onChange={e => setJobTitle(e.target.value)}\n                    className=\"vf-form__input\"\n                  />\n                  <div className={jobTitleCalloutClass}>\n                    <i>{jobTitleHelp}</i>\n                  </div>\n                </span>\n                <span>\n                  <strong>Qualification and background</strong>\n                  <CKEditor\n                    editor={ClassicEditor}\n                    data={qualification}\n                    onInit={editor => {}}\n                    onChange={(event, editor) => {\n                      const data = editor.getData();\n                      setQualification(data);\n                    }}\n                    className=\"vf-form__input\"\n                  />\n                </span>\n\n                <br />\n                <span>\n                  <strong>Activities of current role</strong>\n                  <CKEditor\n                    editor={ClassicEditor}\n                    data={currentRole}\n                    onInit={editor => {}}\n                    onChange={(event, editor) => {\n                      const data = editor.getData();\n                      setCurrentRole(data);\n                    }}\n                    className=\"vf-form__input\"\n                  />\n                </span>\n\n                <br />\n                <span>\n                  <strong>Additional information</strong>\n                  <CKEditor\n                    editor={ClassicEditor}\n                    data={additionalInfo}\n                    onInit={editor => {}}\n                    onChange={(event, editor) => {\n                      const data = editor.getData();\n                      setAdditionalInfo(data);\n                    }}\n                    className=\"vf-form__input\"\n                  />\n                </span>\n\n                <span>\n                  <strong>Publishing status</strong>\n                  <select\n                    value={publishStatus}\n                    defaultValue=\"-None-\"\n                    onChange={e => setPublishStatus(e.target.value)}\n                    className=\"vf-form__select\"\n                  >\n                    <option value={'Draft'}>Draft</option>\n                    <option value={'Live'}>Live</option>\n                  </select>\n                </span>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"column large-4\">\n                <br />\n                <br />\n              </div>\n              <div className=\"column large-8\" />\n            </div>\n\n            <p />\n            <div className=\"row\">\n              <div className=\"column medium-2\" />\n              <div className=\"column medium-3\">\n                <ButtonLabel />\n              </div>\n              <div className=\"column medium-7\" />\n            </div>\n          </form>\n        </div>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\nexport const EditProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/edit/:id\"\n      component={ProfileEdit}\n    />\n  </Switch>\n);\n\nexport default EditProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\n\nimport ReactTooltip from 'react-tooltip';\nimport jsonData from './masterList.json';\n\nconst $ = window.$;\n\nexport const ProfileMap = props => {\n  //const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  //const [ksa, setKsa] = useState();\n  const [mapping, setMapping] = useState();\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  //var frameworkLogo = '';\n  //var frameworkDesc = '';\n  //var mapping = [];\n  //var checkboxes = [];\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/version_manager?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json&source=competencyhub`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n\n    if (mapping) {\n      let checkBoxes = $('input:checkbox');\n      checkBoxes.each(function(index, item, arr) {\n        console.log('test ' + item.dataset);\n      });\n    }\n  }, [profileId, frameworkName, frameworkVersion, mapping]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    let response = await profileService.mapProfile(profileId, mapping);\n    console.log(response);\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`\n    );\n  };\n\n  const handleSelect = event => {\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let tempMapping = mapping;\n\n    let attributesList = [];\n    let checkBoxes = $('input:checkbox[data-competency=' + competency_id + ']');\n\n    if (expertise_id === expertise_not_applicable) {\n      checkBoxes.each(function(index, item, arr) {\n        item.checked = false;\n        item.disabled = true;\n      });\n\n      console.log(tempMapping);\n      // Remove the NA competency from the temp array\n      tempMapping = tempMapping.filter(o => o.competency !== competency_id);\n      console.log(tempMapping);\n    } else if (tempMapping) {\n      if (tempMapping.find(o => o.competency === competency_id)) {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.expertise = expertise_id;\n\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        o.attributes = attributesList;\n      } else {\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        tempMapping.push({\n          competency: competency_id,\n          expertise: expertise_id,\n          attributes: attributesList\n        });\n      }\n    }\n    setMapping(tempMapping);\n  };\n\n  const handleCheckBox = e => {\n    let checkboxStatus = e.target.checked;\n    let competency_id = e.target.dataset.competency;\n    let tempMapping = mapping;\n    if (tempMapping) {\n      if (checkboxStatus === true) {\n        e.target.checked = true;\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.attributes.push(e.target.id);\n      } else {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.attributes.splice(o.attributes.indexOf(e.target.id), 1);\n      }\n      setMapping(tempMapping);\n    }\n    console.log(mapping);\n  };\n\n  const generateForm = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title === 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : '',\n              expertise_levels_legend.push(\n                <li className=\"vf-list__item\" style={{ textAlign: 'center' }}>\n                  <div\n                    data-tip={level.description ? level.description : 'NA'}\n                    data-html={true}\n                    data-type=\"info\"\n                    data-multiline={true}\n                  >\n                    <span className=\"vf-badge vf-badge--tertiary\">\n                      {' '}\n                      {level.rating_level}{' '}\n                    </span>{' '}\n                    <span> {level.title}</span>\n                  </div>\n                  <ReactTooltip className=\"tooltip-custom\" />\n                </li>\n              )\n            )\n          );\n        }\n        return null;\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    if (profile) {\n      if (!mapping) {\n        setMapping(profile.profile_mapping);\n      }\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyForm = framework.map(item =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h5 className=\"domain_title\"> {domain.title}</h5>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li className=\"competency_list\">\n                    <div className=\"vf-grid vf-grid__col-4\">\n                      <div className=\"vf-grid__col--span-3\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-right icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <li className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type === attribute_type\n                                      )\n                                      .map(attribute => (\n                                        <li className=\"attribute_title\">\n                                          <div className=\"vf-grid vf-grid__col-4\">\n                                            <div className=\"vf-grid__col--span-1\">\n                                              <input\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                onChange={e =>\n                                                  handleCheckBox(e)\n                                                }\n                                                defaultChecked={\n                                                  mapping.find(o =>\n                                                    o.attributes.find(\n                                                      a => a === attribute.id\n                                                    )\n                                                  )\n                                                    ? true\n                                                    : false\n                                                }\n                                                disabled={\n                                                  mapping.find(\n                                                    o =>\n                                                      o.competency ===\n                                                      competency.id\n                                                  )\n                                                    ? false\n                                                    : true\n                                                }\n                                                data-competency={competency.id}\n                                              />\n                                            </div>\n                                            <div className=\"vf-grid__col--span-3\">\n                                              <label\n                                                className=\"attribute_label\"\n                                                for={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n                      <div className=\"vf-grid__col--span-1\">\n                        <select\n                          className=\"vf-form__select\"\n                          onChange={e => handleSelect(e)}\n                          defaultValue={\n                            mapping.find(o => o.competency === competency.id)\n                              ? mapping.find(\n                                  o => o.competency === competency.id\n                                ).expertise\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertise_levels.map((key, value) => (\n                            <option\n                              value={value}\n                              data-expertise={value}\n                              data-competency={competency.id}\n                            >\n                              {key}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <div className=\"vf-u-margin__top--400\" />\n            <h2> Competency mapping</h2>\n            <h3>\n              {jsonData.filter(item => item.title === frameworkName)[0].desc} (\n              {frameworkFullName} {frameworkVersion}) - {profile.job_title}{' '}\n            </h3>\n\n            <div className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-10\" />\n                <div className=\"column medium-2\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`}\n                  >\n                    <i className=\"icon icon-common icon-angle-left\" /> Profile\n                    overview\n                  </Link>\n                  <p />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  <img\n                    alt=\"\"\n                    src={profile.image[0] ? profile.image[0].url : user_icon}\n                    width=\"150px\"\n                  />\n                </div>\n                <div className=\"column medium-9 form_intro\">\n                  <p>\n                    Select the level of expertise in each competency from the\n                    dropdown menu. Choose the knowledge, skills and attitudes\n                    that are applicable to you by clicking on each competency to\n                    view them\n                  </p>\n                </div>\n              </div>\n              <div className=\"vf-grid vf-grid__col-4\">\n                <div className=\"vf-grid__col--span-1\">\n                  {' '}\n                  <h5 style={{ marginTop: '25px' }}>\n                    {frameworkFullName} {frameworkVersion} / Competencies\n                  </h5>\n                </div>\n                <div className=\"vf-grid__col--span-3\">\n                  <ul\n                    className=\"vf-list legend-inline\"\n                    style={{ float: 'right' }}\n                  >\n                    {expertise_levels_legend}\n                  </ul>\n                </div>\n              </div>\n              <hr />\n\n              <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button\n                        className=\"vf-button vf-button--primary vf-button--sm\"\n                        type=\"submit\"\n                      >\n                        Save <i className=\"icon icon-common icon-save\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const MapProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/:id\"\n      component={ProfileMap}\n    />\n  </Switch>\n);\n\nexport default MapProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\n//import { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\n//import summary from './bioexcel_2_profiles_compare_summary.json';\n\nexport const ProfilesCompareSummary = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const location = useLocation();\n  const [summary, setSummary] = useState();\n\n  let profileJobTitle = location.state.profileJobTitle;\n  let includeSummary = location.state.includeSummary;\n  var competencyView = '';\n  var attribute_types = [];\n  // var frameworkFullName = '';\n  // var frameworkLogo = '';\n  // var frameworkDesc = '';\n  // var user_roles = localStorage.getItem('roles')\n  //   ? localStorage.getItem('roles')\n  //   : '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/profile_summary/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setSummary(findresponse);\n        });\n    };\n    fetchData();\n  }, [profileId, frameworkVersion, frameworkName]);\n\n  if (summary) {\n    console.log(summary);\n  }\n\n  const findResources = competency_id => {\n    if (summary) {\n      let test = summary.map(item => {\n        if (item.id === competency_id) {\n          return item.resources.map(resource => {\n            return (\n              <li>\n                <a\n                  href={resource.resourceLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                >\n                  {' '}\n                  {resource.resourceName}{' '}\n                </a>\n              </li>\n            );\n          });\n        }\n        return null;\n      });\n      return test;\n    }\n  };\n\n  const generateSummary = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          //frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n        return null;\n      });\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <div>\n            <div className=\"row callout\">\n              <div className=\"column medium-8 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n              <div className=\"column medium-4 \">\n                <h5>Learning Resources</h5>\n              </div>\n            </div>\n            {domain.competencies.map(competency =>\n              includeSummary.indexOf(competency.id) !== -1 ? (\n                <div>\n                  <div id={competency.id} className=\"row\">\n                    <div className=\"column medium-8\">\n                      <span className=\"competency_title\">\n                        <div>\n                          <Collapsible\n                            trigger={\n                              <div className=\"open-close-title\">\n                                <i className=\"icon icon-common icon-angle-right icon-custom\" />{' '}\n                                {competency.title}\n                              </div>\n                            }\n                            triggerWhenOpen={\n                              <div className=\"open-close-title\">\n                                <i className=\"icon icon-common icon-angle-down icon-custom\" />{' '}\n                                {competency.title}\n                              </div>\n                            }\n                          >\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <div\n                                  className=\"accordion-item is-active\"\n                                  data-accordion-item\n                                >\n                                  <div className=\"row attribute_align_type\">\n                                    <div className=\"column medium-8\">\n                                      <strong> {attribute_type} </strong>\n                                    </div>\n                                    <div className=\"column medium-4\" />\n                                  </div>\n                                  {competency.attributes\n                                    .filter(\n                                      attribute =>\n                                        attribute.type === attribute_type\n                                    )\n                                    .map(attribute => {\n                                      return (\n                                        <div className=\"row attribute_align\">\n                                          <div className=\"column medium-8\">\n                                            {attribute.title}\n                                          </div>\n                                        </div>\n                                      );\n                                    })}\n                                </div>\n                              );\n                            })}\n                          </Collapsible>\n                        </div>\n                      </span>\n                    </div>\n                    <div className=\"column medium-4\">\n                      <ul>{findResources(competency.id)}</ul>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                ''\n              )\n            )}\n          </div>\n        ))\n      );\n    }\n  };\n\n  // const handlePrint = () => {\n  //   window.print();\n  // };\n\n  return (\n    <div>\n      {generateSummary()}\n      <h2>Summary of learning resources</h2>\n      <p className=\"lead\">\n        Based on the comparison of your profile, the following are the suggested\n        learning resources to help develop your career, if you want to become{' '}\n        {profileJobTitle}\n      </p>\n      {competencyView}\n    </div>\n  );\n};\n\nexport const SummaryPath = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profiles/compare/guest/summary\"\n      component={ProfilesCompareSummary}\n    />\n  </Switch>\n);\n\nexport default SummaryPath;\n","import React, { useEffect } from 'react';\nimport SwaggerUI from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\nimport data from './CompetencyHubAPIs.json';\n\nconst Documentation = () => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    console.log('scrolled');\n  }, []);\n\n  return (\n    <>\n      <h1 style={{ color: '#000' }}>API Documentation</h1>\n      <h3>Our API documenation is based on Open API specifications 2.0.</h3>\n      <SwaggerUI spec={data} />\n    </>\n  );\n};\n\nexport default Documentation;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport LoginForm from './login-form/LoginForm';\nimport { login, logout } from '../services/auth/auth';\n\nclass Login extends Component {\n  static propTypes = {\n    user: PropTypes.string.isRequired,\n    roles: PropTypes.string.isRequired,\n    onLogin: PropTypes.func.isRequired,\n    onLogout: PropTypes.func.isRequired\n  };\n\n  onLogin = (username, password) => {\n    login(username, password);\n  };\n\n  onLogout = () => {\n    logout();\n  };\n\n  render() {\n    //const { roles, user, isActive } = this.props;\n    const { roles, user } = this.props;\n\n    return (\n      <div>\n        {user && roles ? (\n          <h2>You are logged in</h2>\n        ) : (\n          <LoginForm onSubmit={this.onLogin} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React, { useEffect, useState } from 'react';\nimport { Switch, Route, Link } from 'react-router-dom';\nimport { apiUrl } from '../../services/http/http';\n\nconst ManageFrameworks = props => {\n  const [frameworks, setFrameworks] = useState();\n  let user = localStorage.getItem('user');\n  let token = localStorage.getItem('csrf_token');\n\n  useEffect(() => {\n    const fetchData = () => {\n      fetch(`${apiUrl}/api/authorisation/${user}?_format=json`, {\n        method: 'GET',\n        credentials: 'include'\n      })\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworks(findresponse);\n        });\n    };\n    fetchData();\n  }, [user, token]);\n\n  return (\n    <div className=\"vf-activity\">\n      <h2>Manage frameworks</h2>\n      <ul className=\"vf-activity__list | vf-list\">\n        {frameworks ? (\n          frameworks.map(framework => {\n            return (\n              <li className=\"vf-activity__item\" key={framework}>\n                <Link\n                  to={`/framework/${framework\n                    .toLowerCase()\n                    .replace(/\\s+/g, '')}/manage/data`}\n                >\n                  {framework}\n                </Link>\n              </li>\n            );\n          })\n        ) : (\n          <li style={{ color: '#000' }}>No Framework assigned to this user.</li>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nconst exportURL = () => (\n  <Switch>\n    <Route exact path=\"/manage-frameworks\" component={ManageFrameworks} />\n  </Switch>\n);\n\nexport default exportURL;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst Breadcrumbs = () => {\n  let location = useLocation();\n  let pathname = location.pathname;\n  let URL = pathname.split('/');\n  let frameworkName = URL[2];\n  let frameworkVersion = URL[3];\n\n  const convertFrameworkName = name => {\n    if (name === 'bioexcel') {\n      return 'BioExcel';\n    }\n\n    if (name === 'corbel') {\n      return 'CORBEL';\n    }\n\n    if (name === 'iscb') {\n      return 'ISCB';\n    }\n\n    if (name === 'ritrain') {\n      return 'RItrain';\n    }\n\n    if (name === 'cineca') {\n      return 'CINECA';\n    }\n\n    if (name === 'nhs') {\n      return 'NHS';\n    }\n\n    if (name === 'datasteward') {\n      return 'Data steward';\n    }\n  };\n\n  const getBreadcrumbs = () => {\n    if (pathname.includes('compare')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\">\n            <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n              {convertFrameworkName(frameworkName)} {frameworkVersion}\n            </Link>\n          </li>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            Compare career profiles\n          </li>\n        </>\n      );\n    } else if (pathname.includes('profile')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\">\n            <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n              {convertFrameworkName(frameworkName)} {frameworkVersion}\n            </Link>\n          </li>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            View career profile\n          </li>\n        </>\n      );\n    } else if (pathname.includes('competency')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\">\n            <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n              {convertFrameworkName(frameworkName)} {frameworkVersion}\n            </Link>\n          </li>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            Competency details\n          </li>\n        </>\n      );\n    } else if (pathname.includes('framework')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            {convertFrameworkName(frameworkName)} {frameworkVersion}\n          </li>\n        </>\n      );\n    } else if (pathname.includes('all-training-resources')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            Manage training resources\n          </li>\n        </>\n      );\n    } else if (pathname.includes('resource')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            Training resource\n          </li>\n        </>\n      );\n    } else if (pathname.includes('documentation')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            API documentation\n          </li>\n        </>\n      );\n    } else if (pathname.includes('about')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            About\n          </li>\n        </>\n      );\n    } else if (pathname.includes('design-your-training')) {\n      return (\n        <>\n          <li className=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            Design your training\n          </li>\n        </>\n      );\n    }\n  };\n\n  return URL[0] === '' && URL[1] === '' ? (\n    <span />\n  ) : (\n    <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\n      <ul className=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\n        <li className=\"vf-breadcrumbs__item\">\n          <Link to={`/`}>Competency Hub</Link>\n        </li>\n        {getBreadcrumbs()}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Breadcrumbs;\n","import React, { useEffect } from 'react';\n\nconst DevelopYourCourses = () => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    console.log('scrolled');\n  }, []);\n\n  return (\n    <>\n      <h2>Develop your courses</h2>\n      <p>\n        Competencies can be used to develop training or other learning\n        interventions, by asking what competencies the learners need to gain.{' '}\n      </p>\n      <p>\n        The Competency Hub can help you at different stages of the process of\n        designing your training:{' '}\n      </p>\n\n      <h3>Define your audience:</h3>\n      <ul>\n        <li>\n          Find the competency framework appropriate for your audience on our\n          home page\n        </li>\n        <li>\n          If career profiles are available, check the roles of your audience and\n          the levels at which competencies are expected for those roles\n        </li>\n      </ul>\n\n      <h3>Define the competencies to cover:</h3>\n      <ul>\n        <li>Find the competencies that you need to focus on</li>\n        <li>\n          Find knowledge, skills or attitudes within the competencies that your\n          learners need to achieve\n        </li>\n        <li>\n          Use career profiles to decide the level of competence to be achieved\n          in the course, depending on the audience and their goal\n        </li>\n      </ul>\n\n      <h3>Develop content to cover the selected competencies</h3>\n      <h3>Assessment:</h3>\n      <ul>\n        <li>\n          Check that the target competencies at the specified level have been\n          achieved{' '}\n        </li>\n      </ul>\n      <div className=\"vf-u-padding__top--400\">\n        <p>\n          EMBL-EBI provides{' '}\n          <a href=\"https://www.ebi.ac.uk/training/trainer-support\">\n            additional support for trainers\n          </a>{' '}\n          with openly accessible resources and opportunities for skills\n          development.\n        </p>\n        <p>\n          The{' '}\n          <a href=\"https://zenodo.org/record/5418103#.YhiW3ZPP30o\">\n            ISCB guidelines\n          </a>{' '}\n          provide information on how the ISCB competency framework can be used\n          to develop courses and courses programmes\n        </p>\n      </div>\n    </>\n  );\n};\n\nexport default DevelopYourCourses;\n","import React, { Component } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Masthead from '../containers/masthead/Masthead';\r\nimport ManageAttributes from './ManageAttributes';\r\nimport ManageCompetencies from './ManageCompetencies';\r\nimport ManageData from './ManageData';\r\nimport CompetencyDetails from './CompetencyDetails';\r\nimport CompetencyList from './CompetencyList';\r\nimport VFTabsCompetencyList from './VFTabsCompetencyList';\r\nimport ResourceEdit from './ResourceEdit';\r\nimport ResourceCreate from './ResourceCreate';\r\nimport ResourceDetails from './ResourceDetails';\r\nimport ResourcesList from './ResourcesList';\r\nimport ResourcesHome from './ResourcesHome';\r\nimport ChangePassword from './ChangePassword';\r\nimport UserView from './UserView';\r\nimport About from '../components/about/About';\r\nimport Frameworks from './Frameworks';\r\n//import ArticleCreate from './ArticleCreate';\r\nimport AttributeMap from './AttributeMap';\r\nimport CompetencySettings from './CompetencySettings';\r\nimport AttributeSettings from './AttributeSettings';\r\nimport AttributeDemap from './AttributeDemap';\r\nimport ProfileCreate from './ProfileCreate';\r\nimport ProfileCreateGuest from './ProfileCreateGuest';\r\nimport ProfileView from './ProfileView';\r\nimport ProfilesCompare from './ProfilesCompare';\r\nimport ProfileMapDownload from './ProfileMapDownload';\r\nimport ProfileViewGuest from './ProfileViewGuest';\r\nimport ProfileMapGuest from './ProfileMapGuest';\r\nimport ProfileEdit from './ProfileEdit';\r\nimport ProfileMap from './ProfileMap';\r\nimport ProfilesCompareSummary from './ProfilesCompareSummary';\r\nimport Documentation from './Documentation';\r\nimport Login from './Login';\r\nimport ManageFrameworks from '../containers/navigation/ManageFrameworks';\r\n//import Navigation from '../containers/navigation/Navigation';\r\n// import Footer from '../components/Footer';\r\nimport Breadcrumbs from '../containers/Breadcrumbs';\r\nimport DevelopYourCourses from '../containers/DevelopYourCourses';\r\n\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { login, logout } from '../services/auth/auth';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\n//const $ = window.$;\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    isActive: false,\r\n    roles: localStorage.getItem('roles') || '',\r\n    user: localStorage.getItem('user') || ''\r\n  };\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  componentDidMount() {\r\n    // $(document).foundation();\r\n    // $(document).foundationExtendEBI();\r\n\r\n    this.setState({ isActive: this.activeRequests.isActive });\r\n    this.subcription = this.activeRequests.addEventListener(\r\n      this.handleActiveRequests\r\n    );\r\n\r\n    window.addEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subcription) {\r\n      this.activeRequests.removeEventListener(this.subcription);\r\n    }\r\n    window.removeEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  handleActiveRequests = hasPendingRequests => {\r\n    this.setState({ isActive: hasPendingRequests });\r\n  };\r\n\r\n  detectUserChangesFromOtherTabs = ({ key, newValue }) => {\r\n    if (key === 'user') {\r\n      if (newValue) {\r\n        this.setState({\r\n          user: localStorage.getItem('user'),\r\n          roles: localStorage.getItem('roles')\r\n        });\r\n      } else {\r\n        this.setState({ user: '', roles: '' });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n      document.location.reload();\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({ user: '', roles: '' });\r\n    logout();\r\n    document.location.reload();\r\n  };\r\n\r\n  render() {\r\n    const { isActive, roles, user } = this.state;\r\n    return (\r\n      <>\r\n        <SnackbarProvider\r\n          maxSnack={1}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          preventDuplicate\r\n        >\r\n          <Breadcrumbs />\r\n          {/* <div className=\"vf-u-margin__top--200\" /> */}\r\n          <Switch>\r\n            <Masthead\r\n              roles={roles}\r\n              user={user}\r\n              isActive={isActive}\r\n              onLogin={this.handleLogin}\r\n              onLogout={this.handleLogout}\r\n            />\r\n          </Switch>\r\n\r\n          <section id=\"main-content-area\" className=\"row\" role=\"main\">\r\n            <main className=\"column\">\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/edit/:nid\"\r\n                  component={ResourceEdit}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/create\"\r\n                  component={ResourceCreate}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\r\n                  component={AttributeSettings}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:cid/manage-attributes\"\r\n                  component={ManageAttributes}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:domainId?\"\r\n                  component={ManageCompetencies}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/data/:domainId?\"\r\n                  component={ManageData}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/competency/details/:cid\"\r\n                  component={CompetencyDetails}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:id/settings\"\r\n                  component={CompetencySettings}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/create/guest\"\r\n                  component={ProfileCreateGuest}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/create\"\r\n                  component={ProfileCreate}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/view/guest\"\r\n                  component={ProfileViewGuest}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/map/guest\"\r\n                  component={ProfileMapGuest}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/view/:id/:alias\"\r\n                  component={ProfileView}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profiles/compare/guest/summary\"\r\n                  component={ProfilesCompareSummary}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profiles/compare/:profile1/:profile2\"\r\n                  component={ProfilesCompare}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/map/download\"\r\n                  component={ProfileMapDownload}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/edit/:id\"\r\n                  component={ProfileEdit}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/map/:id\"\r\n                  component={ProfileMap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version\"\r\n                  component={CompetencyList}\r\n                />\r\n\r\n                {/*<Route*/}\r\n                {/*  path=\"/framework/:framework/:version\"*/}\r\n                {/*  component={VFTabsCompetencyList}*/}\r\n                {/*/>*/}\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:id/map/:framework\"\r\n                  component={AttributeMap}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:resource/demap/:attribute\"\r\n                  component={AttributeDemap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/training-resources/:slug\"\r\n                  component={ResourceDetails}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/all-training-resources\"\r\n                  component={ResourcesList}\r\n                />\r\n                <Route\r\n                  path=\"/training-resources-home\"\r\n                  component={ResourcesHome}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user}\r\n                  path=\"/user/change/password\"\r\n                  component={ChangePassword}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user}\r\n                  path=\"/user/view\"\r\n                  component={UserView}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user}\r\n                  path=\"/manage-frameworks\"\r\n                  component={ManageFrameworks}\r\n                />\r\n\r\n                <Route path=\"/documentation\" component={Documentation} />\r\n                <Route\r\n                  path=\"/develop-your-courses\"\r\n                  component={DevelopYourCourses}\r\n                />\r\n                <Route path=\"/about\" component={About} />\r\n                <Route path=\"/login\" component={Login} />\r\n                <Route path=\"/\" component={Frameworks} />\r\n              </Switch>\r\n            </main>\r\n          </section>\r\n          {/* <Footer /> */}\r\n        </SnackbarProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n\r\nclass ProtectedRoute extends Component {\r\n  render() {\r\n    const { component: Component, condition, ...props } = this.props;\r\n    return (\r\n      <Route\r\n        {...props}\r\n        render={props =>\r\n          condition ? <Component {...props} /> : <Redirect to=\"/\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport Root from './app/containers/Root';\r\nimport Modal from 'react-modal';\r\n\r\nconst root = document.getElementById('root');\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Root />\r\n  </BrowserRouter>,\r\n  root\r\n);\r\n\r\nModal.setAppElement(root);\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IB2cksfwAAAW5QTFRF////////////////7+/v39/f1tXV09bS0tXS0tXR0dTR0dTQ0NTQ0NPPz9PPztLOztHNzdHNzdHMz8/PzdDMzNDMzNDLzM/Ly8/Ly8/Ky87Kys3Jyc3Jyc3IyMzIyMzHx8vHxsrGxsrFxcnFxcnExMnExMjDw8jDxMfDw8fCwsfCwcXAwMXAwMW/wMS/v8S+v8O+vsO+vsK9vcK9vcK8v7+/vMG8vMG7vMC8u8C7u8C6ur+6ur+5ub65ub64uL23t7y2tru1tbq0tLqztLmzs7iysrixsrexsbewsbawsLavsLWvr7Wur7SusLOvrrStrrOtr7KvrbOsrLKrr6+vq7Gqn6OenqCdn5+flpmWk5iTkZSRkZORj4+PiYyJhIaEhIWEgoWCgICAfX98fH98eXx5cHJvcHBwYGBgXV5dUFFQUFBQQ0RDQEBAPj8+NTY1MjMxMDAwKSkpKCkoICAgGxsbEBAQDg4ODQ4NAAAAlzoSDQAAAAN0Uk5TAAoO5yEBUwAAAvhJREFUeNq1lutX2kAQxWmXFDVGYy1EIjQ2VZDiu1CsRQQURYvV+qSKj6II8rANYOT+9z0JqIASo9Y5ydkP2f2d2Ts7d2N4jRcJgwEIBwO+SbdTFGw8ZzZz1n5BdLgnfLPBcCT6fW1jY3P78QEYEA76PWMu0W5lGbrNZGrrYNg+u+ga9fgVcmxtY/NJZAOCfs+IY4Bn6eN8RdlEJX9Ed1uFIfdnfzC8uBJbv5tyqqhMLKa0wQHPiEOwMInLW4Eu9xmzfdDtmQ0uLK3cSXmvBBTS6QJQ2tMC+8YcgpnOApAzSa83mZEBZIff2odGfYFQJNqc8s4VchQhhFA5XO1pgCddAxaFKyeNpBpxGSgNmwXXxMxcWE25fkkJGUIIoExESQPsFnkmC0gUuQmjBGQZq+j2BEKR5dUGLVLIvbkGkxxSrcHO92wCkIyENJL3u+2O8Zng/FJsvR5cRF0GFIqtwaKVvoTcSxrCKOOS7hPdXwLhxUYtUFC+Z6AKQgpoDRZ6joEkaYo4cMQKril/KLLcCE4TVYmqFmkNsK0rD9lIiDdXKCSrwwEhREae6Ve0WIiuPg3M0xVlW171BBe21CGjbLbSYR0c/To3H409TQquHTggREKZ8pbjEiRqqxxXtWjjRLdvLrzUAK4Vr5qwZvEsJsCrzExWF9Tk9gIm84e74BRyRN9xeyS4vkHSmg1yK4Wxt5yUIClDayn0t3SteLWq3RQvjQrN31O87e2dEiBl0tJDJmTrykImN8dtq6AOpIw8Y3OMf2s+bvptU+hJqFrc1yCfpmZDkWYX0mv0H9WWpvS2tH6w8z27e58JJVi7c2ImuNBkQvrBOOWZc0CqsyFKtU3+97OuaQBnXGe90RuTMvCHtpziuWCcmDvPm64m+t2vlmuq/YHqqwnGCcfs1l+mCcbSmgtSe8iDGQNnPEsnrq//fZrltXS4tk3oAOPvT2tPF91uMrXTDNv340JrjQ4hbsHAxeE0z1ksHD99eKFdl0dl/P//Cl+9EPcfS+yBAoqk3eUAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/european-union.0ae78626.png\";","module.exports = __webpack_public_path__ + \"static/media/PerMedCoE.2b28bd09.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Bioexcel.9e7ef4d7.png\";"],"sourceRoot":""}