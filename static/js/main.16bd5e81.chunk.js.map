{"version":3,"sources":["shared/components/progress-bar/progress-bar.jsx","app/services/http/headers.js","app/services/http/http.js","app/containers/navigation/Navigation.jsx","app/containers/login-form/LoginForm.jsx","app/containers/masthead/Masthead.jsx","shared/components/edit-inline/EditInline.tsx","app/containers/simple-form/SimpleForm.tsx","app/components/error-loading/ErrorLoading.tsx","app/containers/framework-versions/FrameworkVersions.tsx","app/services/competency/body.js","app/services/competency/competency.js","app/services/active-requests/active-requests.js","app/services/util/util.js","app/containers/ManageAttributes.jsx","app/containers/version-controls/VersionControls.tsx","app/containers/ManageCompetencies.jsx","app/containers/ManageAttribute.jsx","app/containers/ManageCompetency.jsx","app/containers/ManageDomains.jsx","app/containers/ManageData.jsx","app/services/courses/courses.js","app/containers/CompetencyDetails.jsx","app/components/competency-list/CompetencyList.jsx","app/components/domain-list/DomainList.jsx","app/containers/courses/Courses.jsx","app/containers/ProfileList.jsx","app/components/FAIRDownload.jsx","app/containers/CompetencyList.jsx","app/containers/ResourceEdit.jsx","app/containers/ResourceCreate.jsx","app/containers/FileUpload.jsx","app/containers/AttributeMap.jsx","app/containers/framework-versions/VersionNotice.jsx","app/containers/ResourceDetails.jsx","app/containers/ResourcesList.jsx","app/containers/ResourcesHome.jsx","app/containers/ChangePassword.jsx","app/containers/List.jsx","app/containers/UserView.jsx","app/components/about/About.js","app/components/framework-button/FrameworkButton.jsx","app/components/framework-buttons/FrameworkButtons.jsx","app/containers/Frameworks.jsx","app/containers/CompetencySettings.jsx","app/containers/ArticleCreate.jsx","app/containers/AttributeSettings.jsx","app/containers/AttributeDemap.jsx","app/services/profile/body.js","app/services/profile/profile.js","app/containers/ProfileCreate.jsx","app/containers/GuestHelp.jsx","app/containers/ProfileCreateGuest.jsx","app/containers/ProfileView.jsx","app/containers/ProfilesCompareButterfly.jsx","app/containers/ProfilesCompare.jsx","app/containers/ProfileMapDownload.jsx","app/containers/ProfileViewGuest.jsx","app/containers/ProfileMapGuest.jsx","app/containers/ProfileEdit.jsx","app/containers/ProfileMap.jsx","app/containers/ProfilesCompareSummary.jsx","app/containers/Documentation.jsx","app/services/auth/auth.js","app/containers/Login.jsx","app/containers/navigation/ManageFrameworks.jsx","app/components/Footer.jsx","app/containers/Root.jsx","index.jsx","shared/components/progress-bar/progress-bar.module.css","app/components/assets/european-union.png","app/components/assets/PerMedCoE.jpg","app/containers/user_icon.png","app/components/assets/Bioexcel.png"],"names":["ProgressBar","_ref","isActive","react_default","a","createElement","Fragment","className","concat","styles","progress","role","meter","defaultProps","HeadersService","Object","classCallCheck","this","instance","type","arguments","length","undefined","csfrToken","window","localStorage","getItem","Accept","Content-Type","X-CSRF-Token","Authorization","apiUrl","process","axios","defaults","baseURL","HttpService","headers","Headers","url","credentialType","get","withCredentials","body","option","post","patch","Navigation","$","props","_this","possibleConstructorReturn","getPrototypeOf","call","navRef","React","createRef","logout","onLogout","state","user","frameworks","_this2","fetch","method","credentials","then","Response","json","findresponse","setState","_this$props","roles","frameworkResources","key","react_router_dom","to","tabIndex","style","padding","trainingResources","userDropdown","href","onClick","includes","Component","LoginForm","username","password","onChange","event","defineProperty","currentTarget","name","value","submit","onSubmit","_this$state","showModal","e","preventDefault","document","location","reload","_this$state2","float","color","id","OpenModal","aria-hidden","dist","open","onClose","CloseModal","center","classNames","overlay","modal","autoComplete","placeholder","Masthead","onLogin","bgStyle","backgroundImage","JSON","stringify","data-vf-google-analytics-region","class","navigation_Navigation","login_form_LoginForm","defaultState","oriValue","active","EditInline","selfRef","inputRef","toggleActive","current","contains","target","reset","change","render","staticElement","editable","ref","aria-label","text","addEventListener","removeEventListener","prevProps","prevState","setTimeout","focus","newValue","description","uuid","mapping","SimpleForm","onCreate","trim","setDefaultOption","options","title","showMappingField","selectOptions","map","required","ErrorLoading","message","customStyles","content","top","left","right","bottom","marginRight","transform","width","height","border","FrameworkVersion","versions","framework","_useState","useState","_useState2","slicedToArray","showNotes","setShowNotes","_useState3","_useState4","notes","setNotes","versionItems","filter","version","number","release_notes","lib_default","isOpen","Parser","BodyService","_links","_embedded","domainId","domainUuid","_ref$mapping","draftId","draftUuid","target_id","field_map_other_competency","self","lang","_links2","_embedded2","_ref2","attributeTypeId","attributeTypeUuid","competencyId","competencyUuid","mutate","_ref3","releaseNotes","field_parent","field_release_notes","field_item","nodeId","vid","attribuiteId","_links4","_embedded4","resourceID","dates","dates2","target_audience","learning_outcomes","keywords","organisers","trainers","parentID","versionID","newData","addtional","field_type","field_additional_information","items","CompetencyService","http","response","data","Date","now","Body","createAttribute","createCompetency","mutateCompetency","mutateDomain","mutateCompetencyPosition","toggleArchivingVersionedNode","attributeId","mutateAttribute","publishFramework","createDraftFramework","versionId","updateReleaseNotes","changeDomain","editResource","attribiuteId","changeAttributeSettings","resource","attributes","createBulkData","saveSorting","ActiveRequestsService","counter","callbacks","fn","push","index","forEach","safeFlat","array","Array","prototype","flat","reduce","acc","cur","toConsumableArray","tagsReg","RegExp","nbspReg","removeHtmlTags","htmlString","replaceBy","replace","ManageAttributes","activeRequests","competencyService","match","params","frameworkName","frameworkVersion","frameworStatus","attributeTypes","domainName","cid","competencyName","competencyData","path","pathname","split","loadingError","_callee","draftVersion","regenerator_default","wrap","_context","prev","next","startRequest","find","attribute","fetchFramework","t0","enqueueSnackbar","variant","finishRequest","finish","stop","scroll","loadData","fetchVersions","getAllVersionedFrameworks","allFrameworks","currentFramework","fw","toLowerCase","attribute_types","reverse","liveVersion","status","frameworkData","getVersionedDraftFramework","getVersionedFramework","competencyMatch","filterByCompetencyId","frameworkStatus","domainTitle","item","domains","domain","competencies","competency","nid","patchAttribute","position","patchAttributePosition","isArchived","attributeType","_this$state3","archived","EditInline_EditInline","editAttribute","field_number","editAttributePosition","toggleArchive","_this3","_this$state4","getAttributeRows","_this$state5","error_loading_ErrorLoading","SimpleForm_SimpleForm","getAttributeList","FrameworkVersions","withSnackbar","VersionControls","release","updateNotes","createDraft","curr","originalNotes","setVersion","_useState5","_useState6","pressedRelease","setPressedRelease","_useState7","_useState8","pressedNotes","setPressedNotes","react_ckeditor_component_lib_default","events","editor","getData","cleanNotes","ManageCompetencies","frameworkVersionId","competencyTypes","allowedFrms","releaseNewVersion","_callee2","_context2","_callee3","_context3","_callee4","_context4","refs","scrollIntoView","patchCompetency","patchCompetencyPosition","getCompetencyRows","_this4","editCompetency","editCompetencyPosition","bind","_this$state6","version_controls_VersionControls","getCompetencyList","ManageAttribute","asyncToGenerator","mark","sorting","d","closeModalPosition","_x","apply","parentTitle","showAttributeModal","attributeTypeTitle","newAttributes","typetitle","handleOpenAttributeModal","assertThisInitialized","handleCloseAttributeModal","OpenModalPosition","showModalPosition","dataset","console","log","competencyid","competencytitle","attributetype","aid","version_id","dragged","dataTransfer","effectAllowed","setData","display","parentNode","removeChild","from","Number","over","splice","insertBefore","frameworkDef","editableFrm","def","data-competencyid","data-competencytitle","data-typetitle","data-attributetype","attr","archiveAttribute","_this$props5","getAttributes","rows","setAttributes","saveAttributes","onDragOver","dragOver","i","listStyleType","data-position","draggable","onDragEnd","dragEnd","onDragStart","dragStart","ManageCompetency","comp","OpenModalMapping","CloseModalMapping","showModalMapping","mapped_other_competency","_this$props2","archiveCompetency","Collapsible_default","trigger","triggerWhenOpen","containers_ManageAttribute","_this$props3","getCompetencies","editMapping","activeClass","config","toolbarGroups","groups","ManageDomains","newDomains","showModalCompetency","newCompetencies","archiveDomain","OpenModalCompetency","closeModalCompetency","handleRemoveCompetencies","setCompetencies","domainid","domaintitle","patchDomain","editDomain","data-domainid","data-domaintitle","containers_ManageCompetency","count","saveCompetencies","paddingTop","handleAddMoreCompetencies","ManageData","_x2","_x3","parent","handleOpenModal","handleCloseModal","saveDomains","alert","_context7","containers_ManageDomains","setDomains","CoursesService","CompetencyDetails","coursesService","attributeDefs","resources","Promise","all","getFramework","getResources","getAllFrameworks","frameworkMatch","getCourses","allResources","competency_profile","profile","competency_id","objectSpread","competencyDetails","resourceBlock","aria-current","CompetencyList","disable","attributesGrouped","groupBy","paddingLeft","parentIndex","DomainList","childIndex","components_competency_list_CompetencyList","Courses","courses","filteredCourses","onFilter","term","course","test","allCourses","filterCourses","filteredProfiles","framework_label","modifiedCourse","findIndex","c","competency_label","action","for","ProfileList","history","useHistory","guestProfile","setGuestProfile","profiles","setProfiles","userFrameworks","setUserFrameworks","profilesToCompare","userName","useEffect","parse","fetchData","setProfilesToCompare","checked","getAttribute","arr","redirectToCompare","temp","checkFMAccess","alt","src","image","user_icon","job_title","versionNumber","confirmAlert","customUI","removeItem","handleDelete","data-profileid","publishing_status","url_alias","FAIRDownload","setHeaders","filters","setFilters","facets","setFacets","sent","facetClick","indexOf","join","identifiers","columnCount","react_csv","filename","xmlns","header","frameworkDescription","filteredDomains","profileCount","filteredCompetencies","fetchProfiles","findResponse","versionStatus","vr","attrTypes","domainList","domain_list_DomainList","esm","containers_ProfileList","components_FAIRDownload","courses_Courses","_props$match$params","ResourceEdit","csrf","updateFlag","redirectTo","evt","newContent","csrfURL","findresponse2","fetchResource","checkUser","field_dates","field_end_date","field_description","field_location","field_url","field_target_audience","field_learning_outcomes","field_keywords","field_organisers","field_trainers","ResourceEdit_EditForm","EditForm","setRedirect","redirect","handleTitle","handleDates","handleDates2","handleType","handleDesc","handleLocation","handleURL","handleTargetAudience","handleLearningOutcomes","handleKeywords","handleOrganisers","handleTrainers","d1","d2","dateValidate","cookies","format","_this5","handleSubmit","contextTypes","router","PropTypes","object","EditResources","react_router","exact","component","ResourceCreate","changeDescription","changeTargetAudience","changeLearningOutcomes","changeOrganisers","changeTrainers","token","CreateResources","AttributeMap","frameworkdetails","frameworkUUID","selectedAttributes","resourceDetails","resourcePath","handleSelect","checkedAttributes","attributeIDs","attrmap","childItems","getElementsByName","getElementById","is","lists","each","fetchFrameworkDetails","findresponse1","latest_version","detail","fetchCompetencyList","nextProps","nextState","frameworkDetails","frameworkDefs","domainsOptions","attributeTypeOptions","resDetails","selectedAttributesArray","selectedCompetenciesArray","ikey","attribute_type","data-id","ListOfCompetencies","did","defaultChecked","data-test","handleAllCheck","marginLeft","marginBottom","data-uuid","handleAttributeClick","AttrMap","Modal","setAppElement","ItemVersions","modalIsOpen","openModal","closeModal","onAfterOpen","afterOpenModal","onRequestClose","contentLabel","ResourceDetails","selectedFramework","resourcesURL","findresponse3","margin","start","end","months","start_dt","end_date","start_day","getDate","start_month","getMonth","start_year","getFullYear","end_day","end_month","end_year","frameworkLiveVersion","check_array","isArray","Resource","formatDates","VersionNotice","mappingBlock","overflow","overlayClassName","text-align","toUpperCase","data-close","containers_AttributeMap","selectedCompetencies","ResDetails","ResourcesList","filterType","filterMapping","userid","archiveHandle","author_id","rid","archivedStatus","field_archived","toLocaleLowerCase","some","attribute_archived","competency_archived","ListOfResources","checkAuthor","author","filterTypeHandle","filterMappingHandle","Resources","ResourcesHome","ResourcesHomepage","ChangePassword","handlePasswordChange","old","new1","uid","pass","existing","resp","UserView","setUser","setFrameworks","frm","setFrm","field_frameworks","mail","About","FrameworkButton","slice","prevVersion","newVersion","logo","objectFit","el","data-equalizer-watch","desc","FrameworkButtons","data-equalizer","framework_button_FrameworkButton","Frameworks","error","framework_buttons_FrameworkButtons","CompetencySettings","competencyUUID","competencyTitle","frameworkList","domainID","handleChange","onTextChange","competencyID","result","setMappingText","versoinManagerURL","selectedDomainID","selectedDomainUUID","field_domain","target_uuid","selectedIndex","competency_title","domain_id","domain_title","domainOptions","domainArray","colSpan","CompetencySettingsRoot","AttributeSettings","attributeID","attributeTypeID","attributeTypeUUID","changeSettings","handleCompetencyChange","handleTypeChange","selectedCompetencyID","field_competency","selectedCompetencyUUID","selectedAttributeTypeID","field_attribute_type","selectedAttributeTypeUUID","attribute_title","attribute_type_id","attribute_type_title","competencyOptions","competencyArray","attributeTypeArray","rowSpan","AttributeSettingsRoot","AttributeDemap","demap","AttributeDemapRoot","frameworkId","frameworkUuid","age","currentRole","gender","jobTitle","qualification","additionalInfo","fileid","field_versions","field_age","field_current_role","field_gender","field_job_title","field_qualification_background","field_image","field_publishing_status","profileId","publishStatus","mappingBody","expertise","field_profile_mapping","ProfileService","createProfile","editProfile","mapProfile","current_role","qualification_background","additional_information","existingGuestProfile","profile_mapping","setItem","doc","jsPDF","setFont","qDim","currentDate","moment","currentTime","pdfWidth","internal","pageSize","getWidth","pdfHeight","getHeight","marginright","col","gutter","fifthCol","profileBody","pdfProfileImgHeight","selectedFile","selectedFileData","currentYAxis","setFontType","setFontSize","frameworkLogoData","pdfLogoHeight","logoData","addImage","imgData","splitTextToSize","getTextDimensions","fromHTML","h","jobTitleUnderscored","save","ProfileCreate","profileService","setTitle","setAge","setCurrentRole","setGender","_useState9","_useState10","setSelectedFile","_useState11","_useState12","setSelectedFileData","_useState13","_useState14","_useState15","_useState16","imgpreview","setImgpreview","_useState17","_useState18","fileSizeError","setFileSizeError","_useState19","_useState20","fileTypeError","setFileTypeError","_useState21","_useState22","setJobTitle","_useState23","_useState24","setQualification","_useState25","_useState26","setAdditionalInfo","_useState27","_useState28","setFramework","_useState29","_useState30","_useState31","_useState32","setProfile","_useState33","_useState34","setErrorMsgTitle","_useState35","_useState36","setErrorMsgJobTitle","_useState37","_useState38","frameworkMoreData","setFrameworkMoreData","promise1","promise2","data1","data2","response1","response2","storedProfile","bootstrap","_ref4","ver","mapDownloadProfile","mappingAttributes","accept","Content-Disposition","fid","alias","getWhoCreateProfile","titleCalloutClass","jobTitleCalloutClass","nameHelp","jobTitleHelp","defaultValue","files","URL","createObjectURL","size","reader","FileReader","img","Image","readAsDataURL","clearimgpreview","ckeditor_default","ClassicEditor","onInit","submitButtonLabel","CreateProfile","GuestHelp","modalOpen","backgroundColor","ProfileCreateGuest","_useState39","_useState40","setModelOpen","parseInt","_ref5","abrupt","createGuestProfile","containers_GuestHelp","Path","ProfileView","frameworkInfo","setFrameworkInfo","competencyView","expertise_levels_legend","frameworkFullName","user_roles","getExpertise","obj","o","info","expertise_levels","level","getBarWidth","totalLevels","rating_level","textAlign","data-tip","data-html","data-type","data-multiline","index_es","data-accordion-item","getAttributeStatus","search","marginTop","maxWidth","print","ViewProfile","ProfilesCompareButterfly","isGuestProfile","profile1","profile2","mapping1","mapping2","expertise_array","chart_props","includeSummary","profileid","label","profile1Expertise","profile2Expertise","width1","margin1","width2","floatRight","generateProfileView","textAling","profileJobTitle","handleSummary","handlePrint","ProfilesCompare","profile1Id","profile2Id","setProfile1","setProfile2","setIsGuestProfile","link1","setLink1","link2","setLink2","containers_ProfilesCompareButterfly","sendRoute","ProfileMapDownload","expertiseLevels","setExpertiseLevels","setProfileAttributes","competencyForm","expertise_not_applicable","promiseFramework","promiseVersion","dataFramework","dataVersion","responseFramework","responseVersion","getExpertiseLevels","downloadProfileFromHtml","addCompetencyAttributes","attribute_id","removeCompetencyAttributes","fId","levels","margins","source","profileTitle","elementHandlers","#editor","element","renderer","dispose","setFieldContent","heading","field","__html","jIndex","prop","handleCheckboxMapping","data-competency","htmlFor","expertise_id","tempMap","handleMapping","data-expertise","generateForm","charAt","dangerouslySetInnerHTML","MapProfileDownload","ProfileViewGuest","ViewGuestProfile","ProfileMapGuest","setMapping","mapProfileGuest","checkboxStatus","tempMapping","handleCheckBox","disabled","attributesList","checkBoxes","ProfileEdit","setFid","setPublishStatus","objectUrl","EditProfile","ProfileMap","MapProfile","ProfilesCompareSummary","useLocation","summary","setSummary","resourceLink","resourceName","findResources","SummaryPath","Documentation","swagger_ui_react","spec","loginUrl","logoutUrl","login","_login","current_user","csrf_token","logout_token","Login","ManageFrameworks","exportURL","Footer","classNAME","EU","loading","PerMed","BioExcel","Root","handleActiveRequests","hasPendingRequests","detectUserChangesFromOtherTabs","handleLogin","t1","handleLogout","subcription","build","maxSnack","anchorOrigin","vertical","horizontal","preventDuplicate","masthead_Masthead","Root_ProtectedRoute","condition","components_Footer","ProtectedRoute","objectWithoutProperties","assign","root","ReactDOM","basename","containers_Root","module","exports","__webpack_require__","p"],"mappings":"iSAIA,SAASA,EAATC,GAAmC,IAAZC,EAAYD,EAAZC,SACrB,OACEC,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACGJ,GACCC,EAAAC,EAAAC,cAAA,OACEE,UAAS,oBAAAC,OAAsBC,IAAOC,UACtCC,KAAK,eAELR,EAAAC,EAAAC,cAAA,OAAKE,UAAS,kBAAAC,OAAoBC,IAAOG,WAOnDZ,EAAYa,aAAe,CACzBX,UAAU,GAOGF,ICIAc,aA5Bb,SAAAA,IACE,GADaC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GACTA,EAAeI,SACjB,OAAOD,KAAKC,SAGdJ,EAAeI,SAAWD,uDAGL,IAAnBE,EAAmBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,WACHG,EAAYC,OAAOC,aAAaC,QAAQ,cAC9C,MAAa,SAATP,EACK,CACLQ,OAAQ,mBACRC,eAAgB,mBAChBC,eAAgBN,EAChBO,cAAe,SAIZ,CACLH,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgBN,EAChBO,cAAe,oCCvBRC,EAASC,gDAEtBC,IAAMC,SAASC,QAAUJ,MAuCVK,aAjCb,SAAAA,IACE,GADarB,OAAAC,EAAA,EAAAD,CAAAE,KAAAmB,GAAAnB,KAFfoB,QAAU,IAAIC,EAGRF,EAAYlB,SACd,OAAOkB,EAAYlB,SAGrBkB,EAAYlB,SAAWD,qDAGrBsB,GAA0B,IAArBC,EAAqBpB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACxB,OAAIoB,EACKP,IAAMQ,IAAIF,EAAK,CACpBF,QAASpB,KAAKoB,QAAQI,IAAID,GAC1BE,iBAAiB,IAGdT,IAAMQ,IAAIF,gCAGdA,EAAKI,GAA2B,IAArBC,EAAqBxB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,WACvB,OAAOa,IAAMY,KAAKN,EAAKI,EAAM,CAC3BN,QAASpB,KAAKoB,QAAQI,IAAIG,GAC1BF,iBAAiB,kCAIfH,EAAKI,GAA2B,IAArBC,EAAqBxB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZ,WACxB,OAAOa,IAAMa,MAAMP,EAAKI,EAAM,CAC5BN,QAASpB,KAAKoB,QAAQI,IAAIG,GAC1BF,iBAAiB,aC4ERK,GA7GF,IAAIX,EAEPZ,OAAOwB,cAKf,SAAAD,EAAYE,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8B,IACjBG,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAgC,GAAAM,KAAApC,KAAMgC,KAHRK,OAASC,IAAMC,YAEIN,EAsBnBO,OAAS,YAEPC,EADqBR,EAAKD,MAAlBS,aArBRR,EAAKS,MAAQ,CACXC,KAAMV,EAAKD,MAAMW,KACjBC,WAAY,IAJGX,mFAQC,IAAAY,EAAA7C,KAElB8C,MAAK,GAAAvD,OAAIuB,EAAJ,uBAAAvB,OAAgCS,KAAK0C,MAAMC,KAA3C,iBAAgE,CACnEI,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CACZT,WAAYQ,uCAUX,IAAAE,EACiBtD,KAAKgC,MAArBuB,EADDD,EACCC,MACFC,GAFCF,EACQX,KAEbzD,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBmE,IAAI,cAChCvE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAU,UACVqE,GAAG,qBACHC,SAAS,KAHX,sBAQF1E,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAEC,QAAS,QAAhD,OAIEC,EACJ7E,EAAAC,EAAAC,cAAA,MAAIE,UAAU,UAAUmE,IAAI,aAC1BvE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAG,0BAAT,8BAIEK,EACJ9E,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,MACEE,UAAU,gBACVmE,IAAI,YACJI,MAAO,CAAEC,QAAS,QAElB5E,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMpE,UAAU,UAAUqE,GAAI,cAA9B,eAIFzE,EAAAC,EAAAC,cAAA,MACEE,UAAU,gBACVmE,IAAI,YACJI,MAAO,CAAEC,QAAS,QAElB5E,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMpE,UAAU,UAAUqE,GAAI,yBAA9B,oBAIFzE,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAEC,QAAS,QAC9C5E,EAAAC,EAAAC,cAAA,KACEE,UAAU,UACV2E,KAAK,IACLC,QAASlE,KAAKwC,QAHhB,YAWN,OACEtD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,2BACXiE,EAAMY,SAAS,sBAAwBX,EACvCD,EAAMY,SAAS,oBAAsBJ,EACrCC,YA9FYI,uCCyGVC,cAxGb,SAAAA,EAAYrC,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqE,IACjBpC,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAuE,GAAAjC,KAAApC,KAAMgC,KAMRU,MAAQ,CACN4B,SAAU,GACVC,SAAU,IATOtC,EAYnBuC,SAAW,SAAAC,GACTxC,EAAKoB,SAALvD,OAAA4E,EAAA,EAAA5E,CAAA,GAAiB2E,EAAME,cAAcC,KAAOH,EAAME,cAAcE,SAb/C5C,EA4BnB6C,OAAS,WAAM,IACLC,EAAa9C,EAAKD,MAAlB+C,SADKC,EAEkB/C,EAAKS,MAA5B4B,EAFKU,EAELV,SAAUC,EAFLS,EAEKT,SACdD,GAAYC,GACdQ,EAAST,EAAUC,IA9BrBtC,EAAKS,MAAQ,CACXuC,WAAW,GAHIhD,yEAgBTiD,GACRA,EAAEC,iBACFnF,KAAKqD,SAAS,CAAE4B,WAAW,yCAI3BjF,KAAKqD,SAAS,CAAE4B,WAAW,IAC3BG,SAASC,SAASC,0CAaX,IAAAzC,EAAA7C,KAAAuF,EACwBvF,KAAK0C,MAA5B4B,EADDiB,EACCjB,SAAUC,EADXgB,EACWhB,SAClB,OACErF,EAAAC,EAAAC,cAAA,WAEEF,EAAAC,EAAAC,cAAA,UACEyE,MAAO,CAAE2B,MAAO,QAASC,MAAO,QAChCxB,KAAM,IACNyB,GAAG,cACHxB,QAAS,SAAAgB,GAAC,OAAIrC,EAAK8C,UAAUT,KAJ/B,eAMchG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,YAAYsG,cAAY,UAEnD1G,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAMuC,UACjBc,QAAS,SAAAb,GAAC,OAAIrC,EAAKmD,cACnBC,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,MAAIsG,GAAG,YAAYpG,UAAU,4BAC3BJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gCACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wDACbJ,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,yFAKFF,EAAAC,EAAAC,cAAA,SAAOE,UAAU,wDACfJ,EAAAC,EAAAC,cAAA,SACEyF,MAAOP,EACPM,KAAK,WACLJ,SAAU,SAAAC,GAAK,OAAI5B,EAAK2B,SAASC,IACjCvE,KAAK,OACLmG,aAAa,WACbC,YAAY,cAGhBpH,EAAAC,EAAAC,cAAA,SAAOE,UAAU,wDACfJ,EAAAC,EAAAC,cAAA,SACEyF,MAAON,EACPK,KAAK,WACLJ,SAAU,SAAAC,GAAK,OAAI5B,EAAK2B,SAASC,IACjCvE,KAAK,WACLmG,aAAa,mBACbC,YAAY,cAGhBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wDACbJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACVY,KAAK,SACLgE,QAAS,kBAAMrB,EAAKiC,WAEpB5F,EAAAC,EAAAC,cAAA,KAAGE,UAAU,YAAYsG,cAAY,SALvC,sBA7FQxB,aC8ETmC,6MApEbC,QAAU,SAAClC,EAAUC,GACnBtC,EAAKD,MAAMwE,QAAQlC,EAAUC,MAG/B9B,SAAW,WACTR,EAAKD,MAAMS,oFAGJ,IAAAa,EAC2BtD,KAAKgC,MAA/BuB,EADDD,EACCC,MAAOZ,EADRW,EACQX,KACT8D,GAFCnD,EACcrE,SACL,CACdyH,gBACE,OACAC,KAAKC,UACH,+EAEF,MAGJ,OAyBE1H,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,WACEE,UAAU,6EACVuE,MAAO4C,EACPI,kCAAgC,YAEhC3H,EAAAC,EAAAC,cAAA,OAAKE,UAAU,6CACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,oBAAd,kBACAJ,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,uBAAV,wEAGJ5H,EAAAC,EAAAC,cAAA,WACGuD,GAAQY,EACPrE,EAAAC,EAAAC,cAAC2H,EAAD,CAAYxD,MAAOA,EAAOZ,KAAMA,EAAMF,SAAUzC,KAAKyC,WAErDvD,EAAAC,EAAAC,cAAC4H,EAAD,CAAWjC,SAAU/E,KAAKwG,mBAnEfpC,aCMjB6C,UAAe,CACnBC,SAAU,GACVrC,MAAO,GACPsC,QAAQ,IAKWC,6MAEV1E,MAAeuE,IACxBI,QAAU/E,IAAMC,cAChB+E,SAAWhF,IAAMC,cA0BjBgF,aAAe,SAAC9C,GAEZxC,EAAKoF,QAAQG,SACbvF,EAAKoF,QAAQG,QAAQC,SAAShD,EAAMiD,QAEpCzF,EAAKoB,SAAS,CAAE8D,QAAQ,IAG1BlF,EAAK0F,WAOPA,MAAQ,WAAM,IAAA3C,EACiB/C,EAAKS,MAA1BwE,EADIlC,EACJkC,SADIlC,EACMmC,QAEhBlF,EAAKoB,SAAS,CAAE8D,QAAQ,EAAOtC,MAAOqC,OAI1CpC,OAAS,WAAM,IACL8C,EAAW3F,EAAKD,MAAhB4F,OACA/C,EAAU5C,EAAKS,MAAfmC,MACR+C,EAAQ/C,GACR5C,EAAKoB,SAAS,CAAE8D,QAAQ,EAAOD,SAAUrC,OAG3CgD,OAAS,WAAM,IAAAvE,EAC8BrB,EAAKD,MAAxC6B,EADKP,EACLO,MAAOiE,EADFxE,EACEwE,cAAeC,EADjBzE,EACiByE,SADjBxC,EAEatD,EAAKS,MAAvBmC,EAFKU,EAELV,MAAOsC,EAFF5B,EAEE4B,OAEf,OAAKY,EAIAZ,EAeHjI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBAAwB0I,IAAK/F,EAAKoF,SAC/CnI,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLZ,UAAU,cACVuF,MAAOA,EACPL,SAAU,SAAAC,GAAK,OAAIxC,EAAKuC,SAASC,EAAMiD,OAAO7C,QAC9CmD,IAAK/F,EAAKqF,WAGZpI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,4BACVY,KAAK,SACLgE,QAASjC,EAAK6C,QAEd5F,EAAAC,EAAAC,cAAA,KACEE,UAAU,8BACV2I,aAAW,oBAGf/I,EAAAC,EAAAC,cAAA,UACEE,UAAU,4BACVY,KAAK,SACLgE,QAASjC,EAAK0F,OAEdzI,EAAAC,EAAAC,cAAA,KACEE,UAAU,6BACV2I,aAAW,oBAzCZ3F,IAAMlD,cAAc0I,EAAgB,CAAEjE,QAAOmE,IAAK/F,EAAKoF,SAAW,CACvExC,EACA3F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,KACEqE,IAAI,QACJnE,UAAU,oEACV2I,aAAW,SAEb/I,EAAAC,EAAAC,cAAA,QAAME,UAAU,yBAAhB,WAZGgD,IAAMlD,cAAc0I,EAAgB,CAAEjE,SAASgB,uFA1DtC,IACVqD,EAASlI,KAAKgC,MAAdkG,KACRlI,KAAKqD,SAAS,CAAEwB,MAAOqD,EAAOhB,SAAUgB,IACxC9C,SAAS+C,iBAAiB,YAAanI,KAAKuH,6DAI5CnC,SAASgD,oBAAoB,YAAapI,KAAKuH,yDAG9Bc,EAAkBC,GAAkB,IAAAzF,EAAA7C,KAClCA,KAAK0C,MAAhByE,SACOmB,EAAUnB,QAKvBoB,WACE,kBAAM1F,EAAKyE,SAASE,SAAW3E,EAAKyE,SAASE,QAAQgB,SACrD,oCAgBG3D,GACP7E,KAAKqD,SAAS,CAAEwB,iBA1CoBT,aAAnBgD,EACZxH,aAnBY,CACnBiE,MAAO,GACPqE,KAAM,GACNN,OAAQ,SAACa,KACTX,cAAe,MACfC,UAAU,GCPZ,IAWMd,EAAe,CACnByB,YAAa,GACbC,KAAM,GACNC,QAAS,IAKUC,6MAEVnG,MAAQuE,IAmBjBzC,SAAW,SAACC,GACVA,EAAMU,iBADqE,IAEnEN,EAAUJ,EAAME,cAAhBE,MACFD,EAAOH,EAAME,cAAcC,KAEpB,SAATA,GACF3C,EAAKoB,SAALvD,OAAA4E,EAAA,EAAA5E,CAAA,GAAiB8E,EAAOC,IAEb,gBAATD,GACF3C,EAAKoB,SAALvD,OAAA4E,EAAA,EAAA5E,CAAA,GAAiB8E,EAAOC,IAEb,YAATD,GACF3C,EAAKoB,SAALvD,OAAA4E,EAAA,EAAA5E,CAAA,GAAiB8E,EAAOC,OAI5BE,SAAW,SAACN,GACVA,EAAMU,iBADgD,IAE9C2D,EAAa7G,EAAKD,MAAlB8G,SAF8C9D,EAGf/C,EAAKS,MAApCgG,EAH8C1D,EAG9C0D,YAAaC,EAHiC3D,EAGjC2D,KAAMC,EAH2B5D,EAG3B4D,QAEvBF,EAAYK,QAAUJ,IACxBG,EAASJ,EAAaC,EAAMC,GAC5B3G,EAAK0F,6FAvCP3H,KAAKgJ,8DAGY,IACTC,EAAYjJ,KAAKgC,MAAjBiH,QACR,GAAIA,EAAQ7I,OAAQ,KACVuI,EAASM,EAAQ,GAAjBN,KACR3I,KAAKqD,SAAS,CAAEsF,0CAKlB3I,KAAKqD,SAAS4D,GACdjH,KAAKgJ,oDA8BE,IAAA1F,EACmDtD,KAAKgC,MAAvDkH,EADD5F,EACC4F,MAAO5C,EADRhD,EACQgD,YAAa2C,EADrB3F,EACqB2F,QAASE,EAD9B7F,EAC8B6F,iBAD9B5D,EAEgCvF,KAAK0C,MAApCgG,EAFDnD,EAECmD,YAAaC,EAFdpD,EAEcoD,KAAMC,EAFpBrD,EAEoBqD,QAErBQ,EAAgBH,EAAQI,IAAI,SAAArK,GAAA,IAAG0J,EAAH1J,EAAG0J,YAAaC,EAAhB3J,EAAgB2J,KAAhB,OAChCzJ,EAAAC,EAAAC,cAAA,UAAQqE,IAAKkF,EAAM9D,MAAO8D,GACvBD,KAIL,OACExJ,EAAAC,EAAAC,cAAA,QAAM2F,SAAU/E,KAAK+E,SAAUzF,UAAU,WACvCJ,EAAAC,EAAAC,cAAA,UAAK8J,GACLhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLoG,YAAaA,EACb1B,KAAK,cACLC,MAAO6D,EACPY,UAAQ,EACR9E,SAAUxE,KAAKwE,YAGnBtF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,UAAQwF,KAAK,OAAOC,MAAO8D,EAAMW,UAAQ,EAAC9E,SAAUxE,KAAKwE,UACtD4E,IAGLlK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,YAE/CsE,EACCjK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,iEAEEF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLoG,YAAY,+CACZ1B,KAAK,UACLC,MAAO+D,EACPpE,SAAUxE,KAAKwE,aAInB,cA7F0BJ,aAAnByE,EACZjJ,aApBY,CACnBuJ,kBAAkB,GCDpB,IAOaI,EAAgC,SAAAvK,GAAwB,IAArBwK,EAAqBxK,EAArBwK,QAAS3F,EAAY7E,EAAZ6E,MACvD,OACE3E,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iCAAiCuE,MAAOA,GACpD2F,IAKPD,EAAa3J,aAfQ,CACnB4J,QAAS,qDACT3F,MAAO,IAeM0F,iDCLTE,EAAe,CACnBC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,UAAW,wBACXC,MAAO,MACPC,OAAQ,MACRC,OAAQ,mBAsEGC,EAlEkC,SAAApL,GAA6B,IAA1BqL,EAA0BrL,EAA1BqL,SAAUC,EAAgBtL,EAAhBsL,UAAgBC,EAC1CC,oBAAS,GADiCC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GACrEI,EADqEF,EAAA,GAC1DG,EAD0DH,EAAA,GAAAI,EAElDL,mBAAS,IAFyCM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAErEE,EAFqED,EAAA,GAE9DE,EAF8DF,EAAA,GAMtEG,EAAeZ,EAClBa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQC,SAC1B/B,IAAI,SAAA8B,GAAO,OACVjM,EAAAC,EAAAC,cAAA,MAAIqE,IAAK0H,EAAQzF,IACfxG,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgB+K,EAAhB,KAAA/K,OAA6B4L,EAAQC,SAC1CD,EAAQC,QACH,IACRlM,EAAAC,EAAAC,cAAA,UACEE,UAAU,cACV4E,QAAS,WACP8G,EAAS,YAAcG,EAAQC,OAASD,EAAQE,eAChDT,GAAa,KAJjB,sBAYN,OACE1L,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAACkM,EAAAnM,EAAD,CAAOoM,OAAQZ,EAAW9G,MAAO4F,GAC/BvK,EAAAC,EAAAC,cAAA,+BAAuBkL,EAAvB,KACApL,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAC2B,MAAM,UACjBtG,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,WACP8G,EAAS,IACTJ,GAAa,KAJjB,MAUDY,IAAOT,GACPE,EACD/L,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,WACP8G,EAAS,IACTJ,GAAa,KAJjB,WAWJ1L,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,gCACqB,IAApBiL,EAASjK,OACR,uBAEAlB,EAAAC,EAAAC,cAAA,UAAK6L,cC6ZAQ,mHA1eV,IAAAC,EAAAC,EANDjD,EAMC1J,EAND0J,YACAkD,EAKC5M,EALD4M,SACAC,EAIC7M,EAJD6M,WAICC,EAAA9M,EAHD4J,eAGC,IAAAkD,EAHS,GAGTA,EAFDC,EAEC/M,EAFD+M,QACAC,EACChN,EADDgN,UAEA,MAAO,CACLN,QAAMA,EAAA,CACJxL,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,gCAFFhB,OAAA4E,EAAA,EAAA5E,CAAA4L,EAAA,GAAAnM,OAIAuB,EAJA,+CAIsD,CACxDmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBqM,EAApB,uBALF9L,OAAA4E,EAAA,EAAA5E,CAAA4L,EAAA,GAAAnM,OAOAuB,EAPA,iDAOwD,CAC1D,CACEmD,KAAI,gDAAA1E,OAAkDwM,EAAlD,wBATJL,GAaNxC,MAAO,CACL,CACErE,MAAO6D,IAGXxI,KAAM,CACJ,CACE+L,UAAW,eAGfC,2BAA4B,CAC1B,CACErH,MAAO+D,IAGX+C,WAASA,EAAA,GAAA7L,OAAA4E,EAAA,EAAA5E,CAAA6L,EAAA,GAAApM,OACHuB,EADG,iDACqD,CAC1D,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,mBAAAvB,OAA6BwM,EAA7B,sBAEN7L,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,sCAGR6H,KAAM,CACJ,CACE9D,MAAOmH,OAbRlM,OAAA4E,EAAA,EAAA5E,CAAA6L,EAAA,GAAApM,OAkBHuB,EAlBG,+CAkBmD,CACxD,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBqM,EAApB,sBAEN1L,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,4BAGR6H,KAAM,CACJ,CACE9D,MAAOgH,IAGXO,KAAM,QAjCHT,+CAgDV,IAAAU,EAAAC,EAPD5D,EAOC6D,EAPD7D,YACA8D,EAMCD,EANDC,gBACAC,EAKCF,EALDE,kBACAC,EAICH,EAJDG,aACAC,EAGCJ,EAHDI,eACAZ,EAECQ,EAFDR,QACAC,EACCO,EADDP,UAEA,MAAO,CACLN,QAAMW,EAAA,CACJnM,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,+BAFFhB,OAAA4E,EAAA,EAAA5E,CAAAuM,EAAA,GAAA9M,OAIAuB,EAJA,kDAIyD,CAC3DmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBmN,EAApB,uBALF5M,OAAA4E,EAAA,EAAA5E,CAAAuM,EAAA,GAAA9M,OAOAuB,EAPA,sDAO6D,CAC/DmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBiN,EAApB,uBARF1M,OAAA4E,EAAA,EAAA5E,CAAAuM,EAAA,GAAA9M,OAUAuB,EAVA,iDAUwD,CAC1D,CACEmD,KAAI,gDAAA1E,OAAkDwM,EAAlD,wBAZJM,GAgBNnD,MAAO,CACL,CACErE,MAAO6D,IAGXxI,KAAM,CACJ,CACE+L,UAAW,cAIfN,WAASW,EAAA,GAAAxM,OAAA4E,EAAA,EAAA5E,CAAAwM,EAAA,GAAA/M,OACHuB,EADG,iDACqD,CAC1D,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,mBAAAvB,OAA6BwM,EAA7B,sBAEN7L,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,sCAGR6H,KAAM,CACJ,CACE9D,MAAOmH,OAbRlM,OAAA4E,EAAA,EAAA5E,CAAAwM,EAAA,GAAA/M,OAkBHuB,EAlBG,kDAkBsD,CAC3D,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBmN,EAApB,sBAENxM,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,gCAGR6H,KAAM,CACJ,CACE9D,MAAO8H,IAGXP,KAAM,QAjCHtM,OAAA4E,EAAA,EAAA5E,CAAAwM,EAAA,GAAA/M,OAoCHuB,EApCG,sDAoC0D,CAC/D,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBiN,EAApB,sBAENtM,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,oCAGR6H,KAAM,CACJ,CACE9D,MAAO4H,IAGXL,KAAM,QAnDHE,6CA0DW7I,EAAKoB,GAC3B,OAAO4G,EAAYmB,OAAOnJ,EAAKoB,EAAO,+DAGRpB,EAAKoB,GACnC,OAAO4G,EAAYmB,OAAOnJ,EAAKoB,EAAO,sDAGjBpB,EAAKoB,GAC1B,OAAO4G,EAAYmB,OAAOnJ,EAAKoB,EAAO,kDAGpBpB,EAAKoB,GACvB,OAAO4G,EAAYmB,OAAOnJ,EAAKoB,EAAO,yCAG1BpB,EAAKoB,EAAO6C,GAAQ,IAAAmF,EAChC,OAAAA,EAAA,CACEnB,OAAQ,CACNxL,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,oBAAAvB,OAA8BmI,MAHxC5H,OAAA4E,EAAA,EAAA5E,CAAA+M,EAMGpJ,EAAM,CACL,CACEoB,MAAOA,KARb/E,OAAA4E,EAAA,EAAA5E,CAAA+M,EAAA,OAWQ,CACJ,CACEZ,UAAWvE,KAbjBmF,2CAmBsBvC,EAAWa,EAAS2B,GAC1C,MAAO,CACL5M,KAAM,CACJ,CACE+L,UAAW,YAGf/C,MAAO,CACL,CACErE,MAAOyF,IAGXyC,aAAc,CACZ,CACElI,MAAOyF,IAGX0C,oBAAqB,CACnB,CACEnI,MAAOiI,IAGXG,WAAY,CACV,CACEpI,MAAOsG,kDAMab,GAC1B,MAAO,CACLpK,KAAM,CACJ,CACE+L,UAAW,YAGf/C,MAAO,CACL,CACErE,MAAO,UAGXkI,aAAc,CACZ,CACElI,MAAOyF,0DAMqBA,EAAW4C,GAC7C,MAAO,CACLhN,KAAM,CACJ,CACE+L,UAAW,YAGfc,aAAc,CACZ,CACElI,MAAOyF,IAGX2C,WAAY,CACV,CACEpI,MAAOqI,gDAMWnC,GACxB,MAAO,CACLW,OAAQ,CACNxL,KAAM,CACJ+D,KAAI,GAAA1E,OAECuB,EAFD,sCAKRqM,IAAK,CACH,CACElB,UAAW,YAGfe,oBAAqB,CACnB,CACEnI,MAAOkG,0CAQK2B,EAAcd,EAAUC,EAAYjD,GACtD,MAAO,CACL8C,OAAO5L,OAAA4E,EAAA,EAAA5E,CAAA,CACLqM,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBmN,EAApB,sBAENxM,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,gCALF,GAAAvB,OAOAuB,EAPA,+CAOsD,CACxDmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBqM,EAApB,uBAGRM,2BAA4B,CAC1B,CACErH,MAAO+D,IAGX1I,KAAM,CACJ+L,UAAW,cAEbN,UAAU7L,OAAA4E,EAAA,EAAA5E,CAAA,MAAAP,OACJuB,EADG,+CACmD,CACxD,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBqM,EAApB,sBAEN1L,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,4BAGR6H,KAAM,CACJ,CACE9D,MAAOgH,wDAYnBuB,EACAV,EACAC,EACAH,EACAC,GACA,IAAAY,EAAAC,EACA,MAAO,CACL5B,QAAM2B,EAAA,CACJlB,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoB6N,EAApB,sBAENlN,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,+BALFhB,OAAA4E,EAAA,EAAA5E,CAAAuN,EAAA,GAAA9N,OAOAuB,EAPA,kDAOyD,CAC3DmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBmN,EAApB,uBARF5M,OAAA4E,EAAA,EAAA5E,CAAAuN,EAAA,GAAA9N,OAUAuB,EAVA,sDAU6D,CAC/DmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBiN,EAApB,uBAXFa,GAcNnN,KAAM,CACJ+L,UAAW,aAEbN,WAAS2B,EAAA,GAAAxN,OAAA4E,EAAA,EAAA5E,CAAAwN,EAAA,GAAA/N,OACHuB,EADG,kDACsD,CAC3D,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBmN,EAApB,sBAENxM,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,gCAGR6H,KAAM,CACJ,CACE9D,MAAO8H,OAbR7M,OAAA4E,EAAA,EAAA5E,CAAAwN,EAAA,GAAA/N,OAkBHuB,EAlBG,sDAkB0D,CAC/D,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBiN,EAApB,sBAENtM,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,oCAGR6H,KAAM,CACJ,CACE9D,MAAO4H,OA9BRa,yCAwCXC,EACArE,EACAsE,EACAC,EACAvN,EACAwI,EACArD,EACA/D,EACAoM,EACAC,EACAC,EACAC,EACAC,GAEA,MAAO,CACLpC,OAAQ,CACNxL,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,uCAGRoI,MAAO,CACL,CACErE,MAAOqE,IAIXhJ,KAAM,CACJ,CACE+L,UAAW,8DAMG8B,EAAUC,EAAWC,EAAS/N,EAAMgO,GACxD,MAAO,CACLhO,KAAM,CACJ,CACE+L,UAAW,YAGfvK,KAAM,CACJ,CACEmD,MAAOoJ,IAGXlB,aAAc,CACZ,CACElI,MAAOkJ,IAGXd,WAAY,CACV,CACEpI,MAAOmJ,IAGXG,WAAY,CACV,CACEtJ,MAAO3E,IAGXkO,6BAA8B,CAC5B,CACEvJ,MAAOqJ,yCAMIG,GACjB,MAAO,CACLnO,KAAM,CACJ,CACE+L,UAAW,YAGfvK,KAAM,CACJ,CACEmD,MAAOwJ,cC5OFC,aA1Pb,SAAAA,IACE,GADaxO,OAAAC,EAAA,EAAAD,CAAAE,KAAAsO,GAAAtO,KAFfuO,KAAO,IAAIpN,EAGLmN,EAAkBrO,SACpB,OAAOD,KAAKC,SAGdqO,EAAkBrO,SAAWD,sGAGZsK,yFACMtK,KAAKuO,KAAK/M,IAAV,qBAAAjC,OACA+K,EADA,gCAAjBkE,2BAGCA,EAASC,oMAIenE,EAAWa,yFACnBnL,KAAKuO,KAAK/M,IAAV,QAAAjC,OACb+K,EADa,iCAAA/K,OAC4BmP,KAAKC,OACtD,sBAFIH,2BAICA,EAASC,iMAIUnE,EAAWa,yFACdnL,KAAKuO,KAAK/M,IAAV,QAAAjC,OACb+K,EADa,KAAA/K,OACA4L,EADA,4BAAA5L,OACkCmP,KAAKC,sBADxDH,2BAGCA,EAASC,oRAIOzO,KAAKuO,KAAK/M,IAAV,gDAAjBgN,2BACCA,EAASC,0RAKOzO,KAAKuO,KAAK/M,IAAV,+CAAAjC,OAC0BmP,KAAKC,sBADhDH,2BAGCA,EAASC,wLAGIxF,yFACGjJ,KAAKuO,KAAK3M,KAAV,yBAErBgN,EAAKC,gBAAgB5F,kBAFjBuF,2BAKCA,EAASC,0LAGKxF,yFACEjJ,KAAKuO,KAAK3M,KAAV,yBAErBgN,EAAKE,iBAAiB7F,kBAFlBuF,2BAKCA,EAASC,yLAGI/B,EAAcjJ,EAAKoB,yFAChB7E,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZmN,EADY,qBAErBkC,EAAKG,iBAAiBtL,EAAKoB,kBAFvB2J,2BAKCA,EAASC,yLAGA7C,EAAUnI,EAAKoB,yFACR7E,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZqM,EADY,qBAErBgD,EAAKI,aAAavL,EAAKoB,kBAFnB2J,2BAKCA,EAASC,qMAGY/B,EAAcjJ,EAAKoB,yFACxB7E,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZmN,EADY,qBAErBkC,EAAKK,yBAAyBxL,EAAKoB,kBAF/B2J,2BAKCA,EAASC,0MAIiBnE,EAAW4C,yFACrBlN,KAAKuO,KAAK1M,MAAV,QAAAtC,OACb+K,EADa,sBAErBsE,EAAKM,6BAA6B5E,EAAW4C,GAC7C,sBAHIsB,2BAMCA,EAASC,0LAGGU,EAAa1L,EAAKoB,yFACd7E,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZ4P,EADY,qBAErBP,EAAKQ,gBAAgB3L,EAAKoB,kBAFtB2J,2BAKCA,EAASC,oMAGWU,EAAa1L,EAAKoB,yFACtB7E,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZ4P,EADY,qBAErBP,EAAKQ,gBAAgB3L,EAAKoB,kBAFtB2J,2BAKCA,EAASC,8LAGKnE,EAAWa,EAAS2B,yFAClB9M,KAAKuO,KAAK1M,MAC/B,oCACA+M,EAAKS,iBAAiB/E,EAAWa,EAAS2B,GAC1C,sBAHI0B,2BAKCA,EAASC,kMAGSnE,yFACFtK,KAAKuO,KAAK3M,KAC/B,oCACAgN,EAAKU,qBAAqBhF,GAC1B,sBAHIkE,2BAKCA,EAASC,4LAGO1D,EAAOwE,yFACPvP,KAAKuO,KAAK1M,MAAV,kBAAAtC,OACHgQ,EADG,qBAErBX,EAAKY,mBAAmBzE,kBAFpByD,2BAICA,EAASC,wLAGC/B,EAAcd,EAAUC,EAAYjD,yFAC9B5I,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZmN,EADY,qBAErBkC,EAAKa,aAAa/C,EAAcd,EAAUC,EAAYjD,kBAFlD4F,2BAICA,EAASC,4LAIhBlB,EACArE,EACAsE,EACAC,EACAvN,EACAwI,EACArD,EACA/D,EACAoM,EACAC,EACAC,EACAC,EACAC,yFAEuB9N,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZgO,EADY,qBAErBqB,EAAKc,aACHnC,EACArE,EACAsE,EACAC,EACAvN,EACAwI,EACArD,EACA/D,EACAoM,EACAC,EACAC,EACAC,EACAC,kBAfEU,2BAkBCA,EAASC,yNAIhBkB,EACAjD,EACAC,EACAH,EACAC,yFAEuBzM,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZoQ,EADY,qBAErBf,EAAKgB,wBACHD,EACAjD,EACAC,EACAH,EACAC,kBAPE+B,2BAUCA,EAASC,uLAGNoB,EAAUxB,yFACGrO,KAAKuO,KAAK/M,IAC/B,0CACEqO,EADF,UAGExB,EAHF,cAAA9O,OAIgBmP,KAAKC,sBALjBH,2BAOCA,EAASC,mLAGJoB,EAAUC,yFACC9P,KAAKuO,KAAK/M,IAC/B,0CACEqO,EADF,eAGEC,EAHF,cAAAvQ,OAIgBmP,KAAKC,sBALjBH,2BAOCA,EAASC,0LAGGV,EAAUC,EAAWC,EAAS/N,EAAMgO,yFAChClO,KAAKuO,KAAK3M,KAC/B,iCACAgN,EAAKmB,eAAehC,EAAUC,EAAWC,EAAS/N,EAAMgO,GACxD,sBAHIM,2BAKCA,EAASC,6LAGAJ,yFACOrO,KAAKuO,KAAK1M,MAC/B,iCACA+M,EAAKoB,YAAY3B,GACjB,sBAHIG,2BAKCA,EAASC,kHClNLwB,aAlCb,SAAAA,IACE,GADanQ,OAAAC,EAAA,EAAAD,CAAAE,KAAAiQ,GAAAjQ,KAPfkQ,QAAU,EAOIlQ,KANdmQ,UAAY,GAONF,EAAsBhQ,SACxB,OAAOgQ,EAAsBhQ,SAG/BgQ,EAAsBhQ,SAAWD,0DARjC,QAASA,KAAKkQ,kEAWCE,GACf,OAAOpQ,KAAKmQ,UAAUE,KAAKD,+CAGTE,GAClB,cAActQ,KAAKmQ,UAAUG,EAAQ,0CAIhB,IAAjBtQ,KAAKkQ,SACPlQ,KAAKmQ,UAAUI,QAAQ,SAAAH,GAAE,OAAIA,GAAMA,GAAG,OAEtCpQ,KAAKkQ,gDAIc,IAAjBlQ,KAAKkQ,SACPlQ,KAAKmQ,UAAUI,QAAQ,SAAAH,GAAE,OAAIA,GAAMA,GAAG,KAGpCpQ,KAAKkQ,QAAU,KACflQ,KAAKkQ,yBCrCAM,EAAW,SAAAC,GAAK,OAC3BC,MAAMC,UAAUC,KACZH,EAAMG,OACNH,EAAMI,OAAO,SAACC,EAAKC,GAAN,SAAAxR,OAAAO,OAAAkR,EAAA,EAAAlR,CAAkBgR,GAAlBhR,OAAAkR,EAAA,EAAAlR,CAA0BiR,KAAM,KAE7CE,EAAU,IAAIC,OAAO,YAAa,KAClCC,EAAU,UAEHC,EAAiB,SAACC,GAAD,IAAaC,EAAbnR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAyB,GAAzB,OAC5BkR,EAAWE,QAAQN,EAASK,GAAWC,QAAQJ,EAAS,MCGpDK,6MACJC,eAAiB,IAAIxB,IACrByB,kBAAoB,IAAIpD,IAExB5L,MAAQ,CAEN4H,UAAWrI,EAAKD,MAAM2P,MAAMC,OAAOtH,UACnCuH,cAAe,GACfC,iBAAkB,GAClBC,eAAgB,GAChBC,eAAgB,GAChB3H,SAAU,GAGVuB,SAAU,GACVqG,WAAY,GAGZvF,aAAczK,EAAKD,MAAM2P,MAAMC,OAAOM,IACtCvF,eAAgB,GAChBwF,eAAgB,GAChBC,eAAgB,GAEhBC,KAAMpQ,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAEzCC,cAAc,EACdzK,UAAU,KAgGZ8G,sDAAkB,SAAA4D,EAAO/J,EAAa+D,EAAmB7D,GAAvC,IAAA5D,EAAA0H,EAAAC,EAAAqF,EAAA3H,EAAAqI,EAAAlG,EAAAT,EAAAC,EAAA,OAAA2G,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAA/N,EAMZ/C,EAAKS,MAJPgK,EAFc1H,EAEd0H,aACAC,EAHc3H,EAGd2H,eACAqF,EAJchN,EAIdgN,eACA3H,EALcrF,EAKdqF,SAEIqI,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQC,SAPxCyH,EAAAC,KAAA,EAUd7Q,EAAKwP,eAAeuB,eACdxG,EAAkBwF,EAAeiB,KACrC,SAAAC,GAAS,OAAIA,EAAUvK,OAAS8D,IAChC/G,GACIqG,EAAU2G,EAAa,GAAGhN,GAC1BsG,EAAY0G,EAAa,GAAG/J,KAfpBkK,EAAAE,KAAA,EAgBR9Q,EAAKyP,kBAAkB7C,gBAAgB,CAC3CnG,cACAgE,eACAC,iBACAH,kBACAC,oBACAV,UACAC,cAvBY,cAAA6G,EAAAE,KAAA,GA0BR9Q,EAAKkR,iBA1BG,QAAAN,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SA4Bd5Q,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UA7BG,eAAAT,EAAAC,KAAA,GAgCd7Q,EAAKwP,eAAe8B,gBAhCNV,EAAAW,OAAA,6BAAAX,EAAAY,SAAAhB,EAAA,qKA5FhBlS,OAAOmT,OAAO,EAAG,GACjB1T,KAAK2T,oFAGQrJ,mFAEXtK,KAAKyR,eAAeuB,wBACdhT,KAAK4T,cAActJ,0BACnBtK,KAAKmT,eAAe7I,0DAE1BtK,KAAKqD,SAAS,CAAEmP,cAAc,6BAE9BxS,KAAKyR,eAAe8B,kTAKdjJ,EAActK,KAAK0C,MAAnB4H,mBACoBtK,KAAK0R,kBAAkBmC,mCAA7CC,UACAC,EAAmBD,EAAc5I,OACrC,SAAA8I,GAAE,OAAIA,EAAG9K,MAAM+K,gBAAkB3J,KAEdlK,OAAS,IACtB4R,EAAiB+B,EAAiB,GAAGG,gBAAgB7K,IACzD,SAAA6J,GAAS,MAAK,CAAExK,YAAawK,EAAUhK,MAAOP,KAAMuK,EAAUvK,QAEhE3I,KAAKqD,SAAS,CACZgH,SAAU0J,EAAiB,GAAG1J,SAAS8J,UACvCnC,kSAM0ChS,KAAK0C,MAA3C4H,cAAWD,aAAUqC,iBACvB0H,EAAc/J,EAASa,OAAO,SAAAC,GAAO,MAAuB,SAAnBA,EAAQkJ,SACjD3B,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQkJ,SACpDC,EAAgB,GAChBvM,GAAW,GAEX2K,EAAatS,wCACOJ,KAAK0R,kBAAkB6C,2BAC3CjK,UADFgK,SAGAvM,GAAW,8BAEPqM,EAAYhU,yCACQJ,KAAK0R,kBAAkB8C,sBAC3ClK,EACA8J,EAAY,GAAGhJ,gBAFjBkJ,kBAOEG,EAAkBzU,KAAK0U,qBAC3BJ,EACA5H,IAGkBtM,QAClBJ,KAAKqD,SAAS,CACZwO,cAAeyC,EAAc,GAAGpL,MAChC4I,iBAAkBwC,EAAc,GAAGnJ,QACnCwJ,gBAAiBL,EAAc,GAAGD,OAClCpC,WAAYwC,EAAgB,GAAGG,YAC/BhJ,SAAU6I,EAAgB,GAAG7I,SAC7Be,eAAgB8H,EAAgB,GAAG9L,KACnCwJ,eAAgBsC,EAAgB,GAAGvL,MACnCkJ,eAAgBqC,EAAgB,GAChC1M,6JAKe0G,EAAM/I,GACzB,OAAO8K,EACL/B,EAAKpF,IAAI,SAAAwL,GAAI,OACXrE,EACEqE,EAAKC,QAAQzL,IAAI,SAAA0L,GAAM,OACrBA,EAAOC,aACJ9J,OAAO,SAAA+J,GAAU,OAAIA,EAAWvP,KAAOA,IACvC2D,IAAI,SAAA4L,GAGH,OAFAA,EAAWL,YAAcG,EAAO7L,MAChC+L,EAAWrJ,SAAWmJ,EAAOG,IACtBD,wFA4CD9F,EAAajG,mFAE7BlJ,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkByD,eAAehG,EAAa,QAASjG,0BAC5DlJ,KAAKmT,wEAEXnT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,uOAIIpE,EAAaiG,mFAErCpV,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkB2D,uBAC3BlG,EACA,eACAiG,0BAEIpV,KAAKmT,wEAEXnT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,+NAIJpE,EAAamG,mFAE7BtV,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkByD,eAC3BhG,EACA,iBACe,MAAfmG,0BAEItV,KAAKmT,wEAEXnT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,0LAIPgC,GAAe,IAAA1S,EAAA7C,KAAAwV,EACOxV,KAAK0C,MAAlC0P,EADsBoD,EACtBpD,eAAgBrK,EADMyN,EACNzN,SAExB,OAAOqK,EAAetC,WACnB5E,OAAO,SAAAgI,GAAS,OAAIA,EAAUhT,OAASqV,EAAc7M,cACrDW,IAAI,SAAA6J,GACH,OAAInL,EAEA7I,EAAAC,EAAAC,cAAA,MAAIqE,IAAKyP,EAAUvK,MACjBzJ,EAAAC,EAAAC,cAAA,MAAIE,UAAkC,MAAvB4T,EAAUuC,SAAmB,YAAc,IACxDvW,EAAAC,EAAAC,cAACsW,EAAD,CACExN,KAAMgL,EAAUhK,MAChBtB,OAAQ,SAAAa,GAAQ,OACd5F,EAAK8S,cAAczC,EAAUxN,GAAI+C,IAEnCV,SAAiC,MAAvBmL,EAAUuC,YAIxBvW,EAAAC,EAAAC,cAAA,MAAIE,UAAkC,MAAvB4T,EAAUuC,SAAmB,YAAc,IACxDvW,EAAAC,EAAAC,cAACsW,EAAD,CACExN,KAAMgL,EAAU0C,aAChBhO,OAAQ,SAAAa,GAAQ,OACd5F,EAAKgT,sBAAsB3C,EAAUxN,GAAI+C,IAE3CV,SAAiC,MAAvBmL,EAAUuC,YAIxBvW,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,kBACPrB,EAAKiT,cAAc5C,EAAUxN,GAAIwN,EAAUuC,YAGrB,MAAvBvC,EAAUuC,SACTvW,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBACdJ,EAAAC,EAAAC,cAAA,yBAGFF,EAAAC,EAAAC,cAAA,QAAME,UAAU,wBAItBJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsD,EAAKH,MAAM4H,UAA3B,gBAAA/K,OACAsD,EAAKH,MAAMgK,aADX,eAAAnN,OAEY2T,EAAUxN,GAFtB,cAIFxG,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,kBAOQ,MAAvBoM,EAAUuC,SACL,KAGPvW,EAAAC,EAAAC,cAAA,MAAIqE,IAAKyP,EAAUvK,MACjBzJ,EAAAC,EAAAC,cAAA,MAAIE,UAAkC,MAAvB4T,EAAUuC,SAAmB,YAAc,IACxDvW,EAAAC,EAAAC,cAACsW,EAAD,CACExN,KAAMgL,EAAUhK,MAChBtB,OAAQ,SAAAa,GAAQ,OAAI5F,EAAK8S,cAAczC,EAAUxN,GAAI+C,IACrDV,SAAUA,mDAQL,IAAAgO,EAAA/V,KAAAgW,EACoBhW,KAAK0C,MAAlCsP,EADSgE,EACThE,eAAgBjK,EADPiO,EACOjO,SACxB,OAAOiK,EAAe3I,IAAI,SAAAkM,GAAa,OACrCrW,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBoE,IAAK8R,EAAc5M,MACjCzJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,8CACZJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,UAAKmW,EAAc7M,eAGtBX,GAAY7I,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WAAd,YACZyI,GAAY7I,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WAAd,WACZyI,GAAY7I,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WAAd,aAEdyW,EAAKE,iBAAiBV,uCAKpB,IAAAW,EAcHlW,KAAK0C,MAZP4H,EAFK4L,EAEL5L,UACAuH,EAHKqE,EAGLrE,cACAC,EAJKoE,EAILpE,iBACA6C,EALKuB,EAKLvB,gBACA3C,EANKkE,EAMLlE,eACA3H,EAPK6L,EAOL7L,SACAuB,EARKsK,EAQLtK,SACAqG,EATKiE,EASLjE,WACAE,EAVK+D,EAUL/D,eACAC,EAXK8D,EAWL9D,eACAI,EAZK0D,EAYL1D,aACAzK,EAbKmO,EAaLnO,SAGF,OAAIyK,EACKtT,EAAAC,EAAAC,cAAC+W,EAAD,MAGqB,IAA1B/D,EAAehS,OACV,KAIPlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgB+K,EAAhB,yBACLuH,GAEF,MACD3S,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgB+K,EAAhB,yBAAA/K,OAAiDqM,IACtDqG,GAEF,MACAE,GAGHjT,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOwS,GACvB5S,EAAAC,EAAAC,cAAA,QAAME,UAAU,4BACO,KAApBqV,EAAyB,QAAUA,IAIvC5M,GACC7I,EAAAC,EAAAC,cAACgX,EAAD,CACElN,MAAM,uBACN5C,YAAY,wBACZ2C,QAAS+I,EACTlJ,SAAU9I,KAAK6O,kBAInB3P,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aAAQY,KAAKqW,qBAGfnX,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,YAzW5B/H,IAAM8B,WA+WtBmS,0BAAa/E,uBCtObgF,GAvIiC,SAAAxX,GAM1C,IALJyX,EAKIzX,EALJyX,QACAC,EAII1X,EAJJ0X,YACAC,EAGI3X,EAHJ2X,YACAtM,EAEIrL,EAFJqL,SACAtC,EACI/I,EADJ+I,SAEMqM,EAAc/J,EAASwG,OAAO,SAACiC,EAAM8D,GACzC,MAAoB,SAAhBA,EAAKvC,OACAuC,EAAKxL,OAEP0H,GACN,IAEG+D,EAAgBxM,EAASwG,OAAO,SAACiC,EAAM8D,GAC3C,MAAoB,UAAhBA,EAAKxL,OACAwL,EAAKvL,cAEPyH,GACN,IAbCvI,EAe0BC,mBAAS,IAfnCC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAeGY,EAfHV,EAAA,GAeYqM,EAfZrM,EAAA,GAAAI,EAgBsBL,mBAASqM,GAhB/B/L,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAgBGE,EAhBHD,EAAA,GAgBUE,EAhBVF,EAAA,GAAAiM,EAiBwCvM,oBAAS,GAjBjDwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAiBGE,EAjBHD,EAAA,GAiBmBE,EAjBnBF,EAAA,GAAAG,EAkBoC3M,oBAAS,GAlB7C4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAkBGE,EAlBHD,EAAA,GAkBiBE,EAlBjBF,EAAA,GAoBEzP,EAAQ,WACZmP,EAAW,IACXI,GAAkB,IAYpB,OAAInP,EAEA7I,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACkM,EAAAnM,EAAD,CAAOoM,OAAQ8L,GACbnY,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAASqB,EACTyM,OAAQ,CACN5P,OAAQ,SAACnD,GAAD,OAAgBuG,EAASvG,EAAMgT,OAAOC,eAGlDxY,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBACdJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,WACP8G,EAAS6L,GACTS,GAAgB,KAJpB,UAUFpY,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,WACPwS,EAAY3L,GACZuM,GAAgB,KAJpB,UAWJpY,EAAAC,EAAAC,cAACkM,EAAAnM,EAAD,CAAOoM,OAAQ0L,GACb/X,EAAAC,EAAAC,cAAA,QAAM2F,SA3CE,SAACN,GACfA,EAAMU,iBACN,IAAMwS,EAAa5M,EAAMhC,OACrBkO,GAAkB9L,GAAWwM,IAC/BlB,EAAQtL,EAASwM,GACjBhQ,OAuCMzI,EAAAC,EAAAC,cAAA,uBACU,IACPgV,EAAW,iBAAA7U,OACS6U,EADT,KAER,oBACJlV,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLoG,YAAY,QACZzB,MAAOsG,EACP7B,UAAQ,EACR9E,SAAU,SAAAC,GAAK,OAAIqS,EAAWrS,EAAME,cAAcE,MAAMkE,YAG5D7J,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAASqB,EACTyM,OAAQ,CACN5P,OAAQ,SAACnD,GAAD,OAAgBuG,EAASvG,EAAMgT,OAAOC,eAGlDxY,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBACdJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAAS4E,QAASyD,GAApC,WAIFzI,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAASY,KAAK,UAAhC,cAMNhB,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBACdJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,mBACV4E,QAAS,kBAAMgT,GAAkB,KAFnC,uBAIsBhY,EAAAC,EAAAC,cAAA,KAAGE,UAAU,iCAGrCJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,mBACV4E,QAAS,kBAAMoT,GAAgB,KAFjC,wBAIuBpY,EAAAC,EAAAC,cAAA,KAAGE,UAAU,iCAOxCJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBACdJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAAS4E,QAAS,kBAAMyS,MAA1C,mBCjIFiB,8MACJnG,eAAiB,IAAIxB,IACrByB,kBAAoB,IAAIpD,IAExB5L,MAAQ,CACN4H,UAAW,GACXuH,cAAe,GACfyC,cAAe,GACfxC,iBAAkB,GAClB+F,mBAAoB,GACpBlD,gBAAiB,GACjBmD,gBAAiB,GACjBzN,SAAU,GACVmI,cAAc,EACdzK,UAAU,EACVgQ,YAAa,MA4GfjJ,uDAAmB,SAAA2D,EAAO/J,EAAamD,EAAYjD,GAAhC,IAAA5D,EAAAsF,EAAAgK,EAAAjK,EAAAqI,EAAA9G,EAAAG,EAAAC,EAAA,OAAA2G,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAA/N,EAC8B/C,EAAKS,MAA5C4H,EADStF,EACTsF,UAAWgK,EADFtP,EACEsP,cAAejK,EADjBrF,EACiBqF,SAC5BqI,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQC,SAFvCyH,EAAAC,KAAA,EAIf7Q,EAAKwP,eAAeuB,eACdpH,EAAW0I,EAAc,GAAGQ,QAAQ7B,KACxC,SAAA8B,GAAM,OAAIA,EAAOpM,OAASkD,IAC1BqJ,IACInJ,EAAU2G,EAAa,GAAGhN,GAC1BsG,EAAY0G,EAAa,GAAG/J,KATnBkK,EAAAE,KAAA,EAUT9Q,EAAKyP,kBAAkB5C,iBAAiB,CAC5CpG,cACAkD,WACAC,aACAjD,UACAmD,UACAC,cAhBa,cAAA6G,EAAAE,KAAA,GAkBT9Q,EAAKkR,eAAe7I,GAlBX,QAAAuI,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAoBf5Q,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UArBI,eAAAT,EAAAC,KAAA,GAwBf7Q,EAAKwP,eAAe8B,gBAxBLV,EAAAW,OAAA,6BAAAX,EAAAY,SAAAhB,EAAA,oFA6EnBuF,wDAAoB,SAAAC,EAAO9M,EAASJ,GAAhB,IAAAT,EAAA,OAAAqI,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,cACVzI,EAAcrI,EAAKS,MAAnB4H,UADU4N,EAAApF,KAAA,EAGhB7Q,EAAKwP,eAAeuB,eAHJkF,EAAAnF,KAAA,EAIV9Q,EAAKyP,kBAAkBrC,iBAAiB/E,EAAWa,EAASJ,GAJlD,OAKhB9I,EAAK0R,SAASrJ,GALE4N,EAAAnF,KAAA,gBAAAmF,EAAApF,KAAA,EAAAoF,EAAA9E,GAAA8E,EAAA,SAOhBjW,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UARK,eAAA4E,EAAApF,KAAA,GAWhB7Q,EAAKwP,eAAe8B,gBAXJ2E,EAAA1E,OAAA,6BAAA0E,EAAAzE,SAAAwE,EAAA,iFAepBvB,kDAAc,SAAAyB,EAAMpN,GAAN,IAAAxF,EAAA+E,EAAAuN,EAAA,OAAAlF,EAAAxT,EAAAyT,KAAA,SAAAwF,GAAA,cAAAA,EAAAtF,KAAAsF,EAAArF,MAAA,cAAAxN,EAC8BtD,EAAKS,MAAvC4H,EADI/E,EACJ+E,UAAWuN,EADPtS,EACOsS,mBADPO,EAAAtF,KAAA,EAGV7Q,EAAKwP,eAAeuB,eAHVoF,EAAArF,KAAA,EAIJ9Q,EAAKyP,kBAAkBlC,mBAC3BzE,EACA8M,GANQ,OAQV5V,EAAK0R,SAASrJ,GARJ8N,EAAArF,KAAA,gBAAAqF,EAAAtF,KAAA,EAAAsF,EAAAhF,GAAAgF,EAAA,SAUVnW,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAXD,eAAA8E,EAAAtF,KAAA,GAcV7Q,EAAKwP,eAAe8B,gBAdV6E,EAAA5E,OAAA,6BAAA4E,EAAA3E,SAAA0E,EAAA,+EAkBdxB,iCAAc,SAAA0B,IAAA,IAAA/N,EAAA,OAAAqI,EAAAxT,EAAAyT,KAAA,SAAA0F,GAAA,cAAAA,EAAAxF,KAAAwF,EAAAvF,MAAA,cACJzI,EAAcrI,EAAKS,MAAnB4H,UADIgO,EAAAxF,KAAA,EAGV7Q,EAAKwP,eAAeuB,eAHVsF,EAAAvF,KAAA,EAIJ9Q,EAAKyP,kBAAkBpC,qBAAqBhF,GAJxC,OAKVrI,EAAK0R,SAASrJ,GALJgO,EAAAvF,KAAA,gBAAAuF,EAAAxF,KAAA,EAAAwF,EAAAlF,GAAAkF,EAAA,SAOVrW,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UARD,eAAAgF,EAAAxF,KAAA,GAWV7Q,EAAKwP,eAAe8B,gBAXV+E,EAAA9E,OAAA,6BAAA8E,EAAA7E,SAAA4E,EAAA,4OAxMoBrY,KAAKgC,MAAM2P,MAAMC,OAAzCtH,cAAWsB,sBACb5L,KAAK2T,SAASrJ,UAEhBsB,GACFrD,WAAW,WACT,IAAMP,EAAMnF,EAAK0V,KAAK3M,GAClB5D,GACFA,EAAIwQ,kBAEL,0LAakBnQ,EAAWC,iFACiBtI,KAAK0C,MAAhD4H,cAAWgK,kBAAe9B,iBAC9BlI,IAAchC,EAAUgC,YACG,IAAzBgK,EAAclU,QAAiBoS,GACjCxS,KAAK2T,SAASrJ,kLAKLA,mFAEXtK,KAAKyR,eAAeuB,wBACdhT,KAAK4T,cAActJ,0BACnBtK,KAAKmT,eAAe7I,0DAE1BtK,KAAKqD,SAAS,CAAEmP,cAAc,6BAE9BxS,KAAKyR,eAAe8B,6NAIJjJ,2FACUtK,KAAK0R,kBAAkBmC,mCAA7CC,UACAC,EAAmBD,EAAc5I,OACrC,SAAA8I,GAAE,OAAIA,EAAG9K,MAAM+K,gBAAkB3J,KAEdlK,OAAS,GAC5BJ,KAAKqD,SAAS,CAAEgH,SAAU0J,EAAiB,GAAG1J,SAAS8J,8LAItC7J,sFACXD,EAAarK,KAAK0C,MAAlB2H,SACF+J,EAAc/J,EAASa,OAAO,SAAAC,GAAO,MAAuB,SAAnBA,EAAQkJ,SACjD3B,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQkJ,SACpDC,EAAgB,GAChBvM,GAAW,GACX2K,EAAatS,wCACOJ,KAAK0R,kBAAkB6C,2BAC3CjK,UADFgK,SAGAtU,KAAKqD,SAAS,CAAEwU,mBAAoBnF,EAAa,GAAGhN,KACpDqC,GAAW,8BAEPqM,EAAYhU,yCACQJ,KAAK0R,kBAAkB8C,sBAC3ClK,EACA8J,EAAY,GAAGhJ,gBAFjBkJ,iBAOAA,EAAclU,SACV0X,EAAkBxD,EAAc,GAAGQ,QAAQzL,IAAI,SAAA0L,GAAM,MAAK,CAC9DrM,YAAaqM,EAAO7L,MACpBP,KAAMoM,EAAOpM,QAEf3I,KAAKqD,SAAS,CACZwO,cAAeyC,EAAc,GAAGpL,MAChCoL,gBACAxC,iBAAkBwC,EAAc,GAAGnJ,QACnCwJ,gBAAiBL,EAAc,GAAGD,OAClCyD,kBACA/P,iMAiCemK,EAAKhJ,gFAChBoB,EAActK,KAAK0C,MAAnB4H,mBAENtK,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkB+G,gBAAgBvG,EAAK,QAAShJ,0BACrDlJ,KAAKmT,eAAe7I,0DAE1BtK,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,wOAIKrB,EAAKkD,gFACxB9K,EAActK,KAAK0C,MAAnB4H,mBAENtK,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkBgH,wBAC3BxG,EACA,eACAkD,0BAEIpV,KAAKmT,eAAe7I,0DAE1BtK,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,+NAIJrB,EAAKoD,gFACfhL,EAActK,KAAK0C,MAAnB4H,mBAENtK,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkBxC,6BAA6B5E,EAAW4H,0BAC/DlS,KAAKmT,eAAe7I,0DAE1BtK,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,6LAoDJ,IAAAwC,EAAA/V,KAAAgW,EACkBhW,KAAK0C,MAAjC4R,EADU0B,EACV1B,cAAevM,EADLiO,EACKjO,SACvB,OAAOuM,EAAc,GAAGQ,QAAQzL,IAAI,SAAA0L,GAAM,OACxC7V,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,CAAgBoE,IAAKsR,EAAOG,KAC1BhW,EAAAC,EAAAC,cAAA,MACEE,UAAU,6CACV0I,IAAK+M,EAAOG,KAEZhW,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAK2V,EAAO7L,QAEbnB,GAAY7I,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WAAd,YACZyI,GAAY7I,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WAAd,WACbJ,EAAAC,EAAAC,cAAA,wBACC2I,GAAY7I,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WAAd,aAEdyW,EAAK4C,kBAAkB5D,EAAOC,2DAKnBA,GAAc,IAAA4D,EAAA5Y,KAAAkW,EACElW,KAAK0C,MAA7B4H,EADsB4L,EACtB5L,UAAWvC,EADWmO,EACXnO,SACnB,OAAOiN,EAAa3L,IAAI,SAAA4L,GACtB,OAAIlN,EAEA7I,EAAAC,EAAAC,cAAA,MAAIqE,IAAKwR,EAAWvP,IAClBxG,EAAAC,EAAAC,cAAA,MAAIE,UAAmC,MAAxB2V,EAAWQ,SAAmB,YAAc,IACzDvW,EAAAC,EAAAC,cAACsW,EAAD,CACExN,KAAM+M,EAAW/L,MACjBtB,OAAQ,SAAAa,GAAQ,OACdmQ,EAAKC,eAAe5D,EAAWvP,GAAI+C,IAErCV,SAAkC,MAAxBkN,EAAWQ,YAGzBvW,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsW,EAAD,CACExN,KAAM+M,EAAWG,SACjBxN,OAAQ,SAAAa,GAAQ,OACdmQ,EAAKE,uBAAuB7D,EAAWvP,GAAI+C,IAE7CV,SAAkC,MAAxBkN,EAAWQ,YAIzBvW,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS0U,EAAK9C,cAAciD,KAC1BH,EACA3D,EAAWvP,GACXuP,EAAWQ,WAGY,MAAxBR,EAAWQ,SACVvW,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBACdJ,EAAAC,EAAAC,cAAA,yBAGFF,EAAAC,EAAAC,cAAA,QAAME,UAAU,wBAItBJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+K,EAAhB,yBAAA/K,OACA0V,EAAWvP,GADX,uBAIFxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qBAIjBJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+K,EAAhB,gBAAA/K,OACA0V,EAAWvP,GADX,cAIFxG,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,kBAOS,MAAxBmO,EAAWQ,SACN,KAIPvW,EAAAC,EAAAC,cAAA,MAAIqE,IAAKwR,EAAWvP,IAClBxG,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsW,EAAD,CACExN,KAAM+M,EAAW/L,MACjBtB,OAAQ,SAAAa,GAAQ,OAAImQ,EAAKC,eAAe5D,EAAWvP,GAAI+C,IACvDV,SAAUA,KAGd7I,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+K,EAAhB,yBAAA/K,OACA0V,EAAWvP,GADX,uBAIFxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,yDAQhB,IAAA0Z,EAiBHhZ,KAAK0C,MATP4H,EARK0O,EAQL1O,UACAuH,EATKmH,EASLnH,cACAyC,EAVK0E,EAUL1E,cACAxC,EAXKkH,EAWLlH,iBACA6C,EAZKqE,EAYLrE,gBACAmD,EAbKkB,EAaLlB,gBACAzN,EAdK2O,EAcL3O,SACAmI,EAfKwG,EAeLxG,aACAzK,EAhBKiR,EAgBLjR,SAGF,OAAIyK,EACKtT,EAAAC,EAAAC,cAAC+W,EAAD,MAGoB,IAAzB7B,EAAclU,OACT,KAIPlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,UAAKyS,GAEL3S,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOwS,GACvB5S,EAAAC,EAAAC,cAAA,QAAME,UAAU,4BACO,KAApBqV,EAAyB,QAAUA,IAIxCzV,EAAAC,EAAAC,cAAC6Z,GAAD,CACElR,SAAUA,EACV4O,YAAa3W,KAAK2W,YAClBtM,SAAUA,EACVoM,QAASzW,KAAKgY,kBACdtB,YAAa1W,KAAK0W,cAGnB3O,GACC7I,EAAAC,EAAAC,cAACgX,EAAD,CACElN,MAAM,wBACN5C,YAAY,yBACZ2C,QAAS6O,EACThP,SAAU9I,KAAK8O,iBACf3F,kBAAkB,IAItBjK,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aAAQY,KAAKkZ,sBAGfha,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,wDArZzBrI,EAAOU,GAAO,IACpC4H,EAActI,EAAM2P,MAAMC,OAA1BtH,UACR,OAAIA,IAAc5H,EAAM4H,UACf,CACLA,YACAgK,cAAe,GACf9B,cAAc,GAKX,YA7BsBlQ,IAAM8B,WA6axBmS,0BAAaqB,YC7axBtR,GAAclB,SAAShG,cAAc,MACzCkH,GAAYhH,UAAY,kBAElB6Z,eAGJ,SAAAA,EAAYnX,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmZ,IACjBlX,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAqZ,GAAA/W,KAAApC,KAAMgC,KAHRyP,eAAiB,IAAIxB,EAEFhO,EADnByP,kBAAoB,IAAIpD,EACLrM,EAyJnB+N,YAzJmB,eAAAhR,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAyJL,SAAA5G,EAAMhE,GAAN,IAAAnL,EAAAgH,EAAAgP,EAAAjL,EAAA,OAAAsE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAzP,EACyBrB,EAAKD,MAAlCsI,EADIhH,EACJgH,UADIhH,EACOgR,cACXgF,EAAYrX,EAAKS,MAAjB4W,QACJjL,EAAQiL,EAAQjQ,IAAI,SAAAkQ,GAAC,OAAIA,EAAE7T,KAHnBmN,EAAAC,KAAA,EAKV7Q,EAAKwP,eAAeuB,eALVH,EAAAE,KAAA,EAMJ9Q,EAAKyP,kBAAkB1B,YAAY3B,GAN/B,cAAAwE,EAAAE,KAAA,EAOJ9Q,EAAKD,MAAM2R,SAASrJ,GAPhB,OAQVrI,EAAKD,MAAMqR,gBAAgB,gBAAiB,CAC1CC,QAAS,YATDT,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAYV5Q,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAbD,eAAAT,EAAAC,KAAA,GAgBV7Q,EAAKoB,SAAS,CAAEiW,aAASjZ,IACzB4B,EAAKuX,qBAELvX,EAAKwP,eAAe8B,gBAnBVV,EAAAW,OAAA,6BAAAX,EAAAY,SAAAhB,EAAA,wBAzJK,gBAAAgH,GAAA,OAAAza,EAAA0a,MAAA1Z,KAAAG,YAAA,GAEjB8B,EAAKS,MAAQ,CACX8P,cAAc,EACdzK,UAAU,EACV9C,WAAW,EACX8I,SAAU,GACV4L,YAAa,GACbC,mBAAoB,GACpBrE,cAAe,GACfsE,mBAAoB,GACpBC,cAAe,GACf7E,WAAY,GACZ8E,UAAW,IAEb9X,EAAK+X,yBAA2B/X,EAAK+X,yBAAyBjB,KAA9BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAChCA,EAAKiY,0BAA4BjY,EAAKiY,0BAA0BnB,KAA/BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACjCA,EAAKkY,kBAAoBlY,EAAKkY,kBAAkBpB,KAAvBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACzBA,EAAKuX,mBAAqBvX,EAAKuX,mBAAmBT,KAAxBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAlBTA,iFAsBDiD,EAAG+P,GACnBjV,KAAKqD,SAAS,CAAE+W,mBAAmB,IACnCpa,KAAKqD,SAAS,CAAE4R,WAAYA,IAC5BjV,KAAKqD,SAAS,CAAE0W,UAAW7U,EAAEwC,OAAO2S,QAAQN,YAC5CO,QAAQC,IAAIrV,EAAEwC,OAAO2S,QAAQN,wDAI7B/Z,KAAKqD,SAAS,CAAE+W,mBAAmB,qDAGZlV,GACvBlF,KAAKqD,SAAS,CAAEuW,oBAAoB,IACpC5Z,KAAKqD,SAAS,CAAE0K,SAAU7I,EAAEwC,OAAO2S,QAAQG,eAC3Cxa,KAAKqD,SAAS,CAAEsW,YAAazU,EAAEwC,OAAO2S,QAAQI,kBAC9Cza,KAAKqD,SAAS,CAAEkS,cAAerQ,EAAEwC,OAAO2S,QAAQK,gBAChD1a,KAAKqD,SAAS,CAAEwW,mBAAoB3U,EAAEwC,OAAO2S,QAAQN,YAErD7U,EAAEC,qEAIFnF,KAAKqD,SAAS,CAAEuW,oBAAoB,kFAGlBe,EAAKzR,sFACSlJ,KAAKgC,MAA7BsI,cAAWqJ,sBAEjB3T,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkB+G,gBAAgBkC,EAAK,QAASzR,0BACrDyK,EAASrJ,UACftK,KAAKgC,MAAMqR,gBAAgB,oBAAqB,CAC9CC,QAAS,8DAGXtT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,wLAIVrO,GACZlF,KAAKqD,SAAS,CAAEyW,cAAe5U,EAAEwC,OAAO7C,QACxCyV,QAAQC,IAAIrV,EAAEwC,OAAO7C,sFAGFK,iGAC4BlF,KAAKgC,MAA5CsS,kBAAehK,cAAWqJ,eACiB3T,KAAK0C,MAAhDoX,kBAAevE,kBAAexH,aAElCC,EAAYsG,EAAc,GAAGsG,WAC7B3M,EAAU6L,EACH,YACP5L,EAAYqH,EACZ/G,EAAW,GACf,IAEEA,EAAWxO,KAAK0R,kBAAkB3B,eAChChC,EACAC,EACAC,EARO,YAUPC,GAEFoM,QAAQC,IAAI/L,GACZmF,EAASrJ,GACTtK,KAAKgC,MAAMqR,gBAAgB,qBAAsB,CAC/CC,QAAS,YAEX,MAAOpO,GACPlF,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAKbpO,EAAEC,iBACFnF,KAAKka,iNAGgBhH,EAAWoC,sFACAtV,KAAKgC,MAA7BsI,cAAWqJ,+BAIX3T,KAAK0R,kBAAkBxC,6BAC3B5E,EACA4I,UAEFS,EAASrJ,GACTtK,KAAKgC,MAAMqR,gBAAgB,2BAA4B,CACrDC,QAAS,4DAGXtT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,sMAOLpO,GACRlF,KAAK6a,QAAU3V,EAAEP,cACjBO,EAAE4V,aAAaC,cAAgB,OAC/B7V,EAAE4V,aAAaE,QAAQ,YAAahb,KAAK6a,yCAEnC3V,GACNlF,KAAK6a,QAAQhX,MAAMoX,QAAU,QAC7Bjb,KAAK6a,QAAQK,WAAWC,YAAY7U,IACpCgU,QAAQC,IAAIva,KAAK6a,QAAQK,YAGzB,IAAIzM,EAAOzO,KAAK0C,MAAMuS,WAAWnF,WAC7BsL,EAAOC,OAAOrb,KAAK6a,QAAQR,QAAQjF,UACnCzR,EAAK0X,OAAOrb,KAAKsb,KAAKjB,QAAQjF,UAC9BgG,EAAOzX,GAAIA,IACf8K,EAAK8M,OAAO5X,EAAI,EAAG8K,EAAK8M,OAAOH,EAAM,GAAG,IACxCpb,KAAKqD,SAAS,CAAEiW,QAAS7K,IACzB6L,QAAQC,IAAI9L,EAAKpF,IAAI,SAAAkQ,GAAC,OAAIA,EAAE7T,uCAErBR,GACPA,EAAEC,iBACFnF,KAAK6a,QAAQhX,MAAMoX,QAAU,OACF,gBAAvB/V,EAAEwC,OAAOpI,YACbU,KAAKsb,KAAOpW,EAAEwC,OACdxC,EAAEwC,OAAOwT,WAAWM,aAAalV,GAAapB,EAAEwC,+CA0BpC+T,EAAcnH,EAAeW,EAAYF,EAAQ2G,GAAa,IAAA7Y,EAAA7C,KAC1E,OAAOyb,EAAapS,IAAI,SAAAsS,GAAG,OACzBzc,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,kBACZJ,EAAAC,EAAAC,cAAA,UAAKuc,EAAIzS,OACThK,EAAAC,EAAAC,cAAA,QAAMyE,MAAO,CAAEoX,QAAS,UACL,IAAhBS,EACCxc,EAAAC,EAAAC,cAAA,UACEE,UAAU,2DACVsc,oBAAmB3G,EAAWvP,GAC9BmW,uBAAsB5G,EAAW/L,MACjC4S,iBAAgBH,EAAIzS,MACpB6S,qBAAoBJ,EAAIjW,GACxBwD,MAAM,iBACNhF,QAAS,SAAAgB,GAAC,OAAIrC,EAAKmX,yBAAyB9U,KAP9C,OASOyW,EAAIzS,MAAO,KAGlB,IAIJhK,EAAAC,EAAAC,cAAA,UACG6V,EAAWnF,WAAWzG,IAAI,SAAA2S,GACzB,GAAIA,EAAK9b,OAASyb,EAAIzS,MACpB,OACEhK,EAAAC,EAAAC,cAAA,MACEqE,IAAKuY,EAAKtW,GACVpG,UAA6B,MAAlB0c,EAAKvG,SAAmB,YAAc,IAEjDvW,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAACsW,EAAD,CACE7R,MAAO,CAAEoX,QAAS,UAClB/S,KAAM8T,EAAK9S,MACXtB,OAAQ,SAAAa,GAAQ,OACd5F,EAAK8S,cAAcqG,EAAKtW,GAAI+C,IAE9BV,SACoB,MAAlBiU,EAAKvG,WAAoC,IAAhBiG,KAKZ,IAAhBA,EACCxc,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACdJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,kBACPrB,EAAKoZ,iBAAiBD,EAAKtW,GAAIsW,EAAKvG,YAGnB,MAAlBuG,EAAKvG,SACJvW,EAAAC,EAAAC,cAAA,QAAME,UAAU,qCACdJ,EAAAC,EAAAC,cAAA,yBAGFF,EAAAC,EAAAC,cAAA,QAAME,UAAU,sCACb,IACDJ,EAAAC,EAAAC,cAAA,2BAKRF,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACdJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,uCACV4J,MAAM,eACN4S,iBAAgBH,EAAIzS,MACpBhF,QAAS,SAAAgB,GAAC,OACRrC,EAAKsX,kBAAkBjV,EAAG+P,KAL9B,eAQe,OAKnB,QAQd/V,EAAAC,EAAAC,cAAA,iDA4BD,IAAA2W,EAAA/V,KAAAkc,EAOHlc,KAAKgC,MALPyZ,EAFKS,EAELT,aACAnH,EAHK4H,EAGL5H,cACAW,EAJKiH,EAILjH,WACAF,EALKmH,EAKLnH,OACA2G,EANKQ,EAMLR,YANKnW,EAaHvF,KAAK0C,MAHPiX,GAVKpU,EASLwI,SATKxI,EAULoU,aAEAE,GAZKtU,EAWLgQ,cAXKhQ,EAYLsU,oBAEF,OACE3a,EAAAC,EAAAC,cAAA,WACGY,KAAKmc,cACJV,EACAnH,EACAW,EACAF,EACA2G,GAGFxc,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAMkX,mBACjB7T,QAAS/F,KAAKka,0BACdjU,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,iBAASya,EAAT,eACA3a,EAAAC,EAAAC,cAAA,UAAKua,EAAL,KACAza,EAAAC,EAAAC,cAAA,8BAAsBya,EAAtB,uBACA3a,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,YACEsG,GAAG,gBACH0W,KAAK,IACL5X,SAAU,SAAAU,GAAC,OAAI6Q,EAAKsG,cAAcnX,IAClCoE,UAAQ,IAEVpK,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAAS4E,QAAS,SAAAgB,GAAC,OAAI6Q,EAAKuG,eAAepX,KAA7D,UAQJhG,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAM0X,kBACjBrU,QAAS/F,KAAKwZ,mBACdvT,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,uDACCY,KAAK0C,MAAMuS,WAAWvP,GACrBxG,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACGib,QAAQC,IAAItF,GACb/V,EAAAC,EAAAC,cAAA,UAAKY,KAAK0C,MAAMuS,WAAW/L,OAC3BhK,EAAAC,EAAAC,cAAA,MAAImd,WAAYvc,KAAKwc,SAASzD,KAAK/Y,OAChCA,KAAK0C,MAAMuS,WAAWnF,WAAWzG,IAAI,SAAC6J,EAAWuJ,GAChD,GAAIvJ,EAAUhT,OAAS6V,EAAKrT,MAAMqX,UAChC,OACE7a,EAAAC,EAAAC,cAAA,MACEyE,MAAO,CAAE6Y,cAAe,QACxBC,gBAAeF,EACfhZ,IAAKyP,EAAUkC,SACfwH,UAAU,OACVC,UAAW9G,EAAK+G,QAAQ/D,KAAKhD,GAC7BgH,YAAahH,EAAKiH,UAAUjE,KAAKhD,IAEjC7W,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,+BAAgC,IACxCoM,EAAUhK,WAQvB,GAGFhK,EAAAC,EAAAC,cAAA,UAAQE,UAAU,iBAAiB4E,QAASlE,KAAKgQ,aAAjD,iBAjYoB1N,IAAM8B,WA0YrBmS,0BAAa4C,wBC3YxB7S,GAAclB,SAAShG,cAAc,MACzCkH,GAAYhH,UAAY,kBAElB2d,eAGJ,SAAAA,EAAYjb,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAid,IACjBhb,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAmd,GAAA7a,KAAApC,KAAMgC,KAHRyP,eAAiB,IAAIxB,EAEFhO,EADnByP,kBAAoB,IAAIpD,EACLrM,EA6HnB+N,YA7HmB,eAAAhR,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KA6HL,SAAA5G,EAAMhE,GAAN,IAAAnE,EAAAgP,EAAAjL,EAAA,OAAAsE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACJzI,EAAcrI,EAAKD,MAAnBsI,UACAgP,EAAYrX,EAAKS,MAAjB4W,QACJjL,EAAQiL,EAAQjQ,IAAI,SAAAkQ,GAAC,OAAIA,EAAE7T,KAHnBmN,EAAAC,KAAA,EAKV7Q,EAAKwP,eAAeuB,eALVH,EAAAE,KAAA,EAMJ9Q,EAAKyP,kBAAkB1B,YAAY3B,GAN/B,cAAAwE,EAAAE,KAAA,EAOJ9Q,EAAKD,MAAM2R,SAASrJ,GAPhB,OAQVrI,EAAKD,MAAMqR,gBAAgB,gBAAiB,CAC1CC,QAAS,YATDT,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAYV5Q,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAbD,eAAAT,EAAAC,KAAA,GAgBV7Q,EAAKoB,SAAS,CAAEiW,aAASjZ,IACzB4B,EAAKuX,qBAELvX,EAAKwP,eAAe8B,gBAnBVV,EAAAW,OAAA,6BAAAX,EAAAY,SAAAhB,EAAA,wBA7HK,gBAAAgH,GAAA,OAAAza,EAAA0a,MAAA1Z,KAAAG,YAAA,GAEjB8B,EAAKS,MAAQ,CACX8P,cAAc,EACdzK,UAAU,EACVgN,OAAQ,GACRmI,KAAM,GACNtU,QAAS,IAEX3G,EAAKkY,kBAAoBlY,EAAKkY,kBAAkBpB,KAAvBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACzBA,EAAKuX,mBAAqBvX,EAAKuX,mBAAmBT,KAAxBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAC1BA,EAAKkb,iBAAmBlb,EAAKkb,iBAAiBpE,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACxBA,EAAKmb,kBAAoBnb,EAAKmb,kBAAkBrE,KAAvBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAZRA,iFAeDiD,EAAG6P,GACnB/U,KAAKqD,SAAS,CAAE+W,mBAAmB,IACnCpa,KAAKqD,SAAS,CAAE0R,OAAQA,iDAIxB/U,KAAKqD,SAAS,CAAE+W,mBAAmB,6CAGpBlV,EAAG+P,GAClBjV,KAAKqD,SAAS,CAAEga,kBAAkB,IAClCrd,KAAKqD,SAAS,CAAE6Z,KAAMjI,IACtBjV,KAAKqD,SAAS,CAAEuF,QAASqM,EAAWqI,sEAIpCtd,KAAKqD,SAAS,CAAEga,kBAAkB,mFAGfpI,EAAY/L,gFACvBoB,EAActK,KAAKgC,MAAnBsI,mBAENtK,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkB+G,gBAAgBxD,EAAY,QAAS/L,0BAC5DlJ,KAAKgC,MAAM2R,SAASrJ,0DAE1BtK,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,gBACpBvT,KAAKgC,MAAMqR,gBAAgB,qBAAsB,CAC/CC,QAAS,yNAKGpO,EAAG+P,EAAYrM,gFAC/B0R,QAAQC,IAAItF,GACZ/P,EAAEC,iBACMmF,EAActK,KAAKgC,MAAnBsI,mBAENtK,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkB+G,gBAC3BxD,EACA,6BACArM,0BAEI5I,KAAKgC,MAAM2R,SAASrJ,UAC1BtK,KAAKod,sEAELpd,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,gBACpBvT,KAAKgC,MAAMqR,gBAAgB,iBAAkB,CAC3CC,QAAS,kOAKS2B,EAAYK,sFACFtV,KAAKgC,MAA7BsI,cAAWqJ,sBAEjB3T,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkBxC,6BAC3B5E,EACA2K,UAEFtB,EAASrJ,GACTtK,KAAKgC,MAAMqR,gBAAgB,4BAA6B,CACtDC,QAAS,4DAGXtT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAEXgH,QAAQC,IAARjC,EAAAlF,6BAEApT,KAAKyR,eAAe8B,mLAIdrO,GACRlF,KAAK6a,QAAU3V,EAAEP,cACjBO,EAAE4V,aAAaC,cAAgB,OAC/B7V,EAAE4V,aAAaE,QAAQ,YAAahb,KAAK6a,yCAEnC3V,GACNlF,KAAK6a,QAAQhX,MAAMoX,QAAU,QAC7Bjb,KAAK6a,QAAQK,WAAWC,YAAY7U,IAIpC,IAAImI,EAAOzO,KAAK0C,MAAMqS,OAAOC,aACzBoG,EAAOC,OAAOrb,KAAK6a,QAAQR,QAAQjF,UACnCzR,EAAK0X,OAAOrb,KAAKsb,KAAKjB,QAAQjF,UAC9BgG,EAAOzX,GAAIA,IACf8K,EAAK8M,OAAO5X,EAAI,EAAG8K,EAAK8M,OAAOH,EAAM,GAAG,IACxCpb,KAAKqD,SAAS,CAAEiW,QAAS7K,qCAElBvJ,GACPA,EAAEC,iBACFnF,KAAK6a,QAAQhX,MAAMoX,QAAU,OACF,gBAAvB/V,EAAEwC,OAAOpI,YACbU,KAAKsb,KAAOpW,EAAEwC,OACdxC,EAAEwC,OAAOwT,WAAWM,aAAalV,GAAapB,EAAEwC,iDA0BlCsN,GAAc,IAAAnS,EAAA7C,KAAAud,EAQxBvd,KAAKgC,MANPsS,EAF0BiJ,EAE1BjJ,cACAS,EAH0BwI,EAG1BxI,OACA0G,EAJ0B8B,EAI1B9B,aACAnR,EAL0BiT,EAK1BjT,UACAqJ,EAN0B4J,EAM1B5J,SACA+H,EAP0B6B,EAO1B7B,YAEF,OAAO1G,EAAa3L,IAAI,SAAA4L,GAAU,OAChC/V,EAAAC,EAAAC,cAAA,MACEsG,GAAIuP,EAAWvP,GACfjC,IAAKwR,EAAWvP,GAChB7B,MAAO,CAAE6Y,cAAe,SAExBxd,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAmC,MAAxB2V,EAAWQ,SAAmB,YAAc,IACzDvW,EAAAC,EAAAC,cAACsW,EAAD,CACE7R,MAAO,CAAEoX,QAAS,UAClB/S,KAAM+M,EAAW/L,MACjBtB,OAAQ,SAAAa,GAAQ,OAAI5F,EAAKgW,eAAe5D,EAAWvP,GAAI+C,IACvDV,SAC0B,MAAxBkN,EAAWQ,WAAoC,IAAhBiG,KAKlB,IAAhBA,EACCxc,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACdJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,kBACPrB,EAAK2a,kBAAkBvI,EAAWvP,GAAIuP,EAAWQ,YAG1B,MAAxBR,EAAWQ,SACVvW,EAAAC,EAAAC,cAAA,QAAME,UAAU,qCACdJ,EAAAC,EAAAC,cAAA,yBAGFF,EAAAC,EAAAC,cAAA,QAAME,UAAU,sCACb,IACDJ,EAAAC,EAAAC,cAAA,2BAMRF,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACdJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,SAAAgB,GAAC,OAAIrC,EAAKsX,kBAAkBjV,EAAG6P,KAExC7V,EAAAC,EAAAC,cAAA,QAAME,UAAU,gCACdJ,EAAAC,EAAAC,cAAA,gCAMR,KAKNF,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uCACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,mDAGpBqe,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uCACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,mDAIpBJ,EAAAC,EAAAC,cAAA,UACG6V,EAAWqI,wBACVpe,EAAAC,EAAAC,cAAA,uCAQGoM,IAAOyJ,EAAWqI,yBACnBpe,EAAAC,EAAAC,cAAA,UACEE,UAAU,SACV4E,QAAS,SAAAgB,GAAC,OAAIrC,EAAKsa,iBAAiBjY,EAAG+P,KAEvC/V,EAAAC,EAAAC,cAAA,QAAME,UAAU,mCAIpB,IAGJJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACwe,GAAD,CACEtT,UAAWA,EACXgK,cAAeA,EACfS,OAAQA,EACRE,WAAYA,EACZwG,aAAcA,EACd9H,SAAUA,EACV+H,YAAaA,0CAQhB,IAAA3F,EAAA/V,KAAA6d,EAC2B7d,KAAKgC,MAA/BsS,EADDuJ,EACCvJ,cAAeS,EADhB8I,EACgB9I,OACjBC,EAAeV,EAAcjL,IAAI,SAAAwL,GAAI,OACzCA,EAAKC,QAAQzL,IAAI,SAAAwL,GACf,GAAIA,EAAKK,KAAOH,EAAOG,IACrB,OAAOhW,EAAAC,EAAAC,cAAA,UAAK2W,EAAK+H,gBAAgBjJ,EAAKG,mBAG5C,OACE9V,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,OAAKqE,IAAK,cACPuR,GAEG,yDAEN9V,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAM2a,iBACjBtX,QAAS/F,KAAKod,kBACdnX,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,QACE2F,SAAU,SAAAG,GAAC,OACT6Q,EAAKgI,YAAY7Y,EAAG6Q,EAAKrT,MAAMwa,KAAKxX,GAAIqQ,EAAKrT,MAAMkG,WAGrD1J,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,UAAKY,KAAK0C,MAAMwa,KAAKhU,OACrBhK,EAAAC,EAAAC,cAAA,sCACCkb,QAAQC,IAAIva,KAAK0C,MAAMwa,KAAKxX,IAC7BxG,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEsE,IAAK,UACLiG,QAAS1J,KAAK0C,MAAMkG,QACpB4O,OAAQ,CACN5P,OAAQ,SAAA1C,GAAC,OAAI6Q,EAAK1S,SAAS,CAAEuF,QAAS1D,EAAEuS,OAAOC,cAEjDsG,YAAY,MACZC,OAAQ,CACNC,cAAe,CACb,CACEtZ,KAAM,WACNuZ,OAAQ,CAAC,OAAQ,WAAY,aAE/B,CACEvZ,KAAM,YACNuZ,OAAQ,CACN,OACA,SACA,SACA,QACA,OACA,cAGJ,CAAEvZ,KAAM,QAASuZ,OAAQ,CAAC,cAIhCjf,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,YAOpD3F,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAM0X,kBACjBrU,QAAS/F,KAAKwZ,mBACdvT,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,uDACCY,KAAK0C,MAAMqS,OAAOG,IAAMhW,EAAAC,EAAAC,cAAA,UAAKY,KAAK0C,MAAMqS,OAAO7L,OAAc,GAE9DhK,EAAAC,EAAAC,cAAA,MAAImd,WAAYvc,KAAKwc,SAASzD,KAAK/Y,OAChCsU,EAAcjL,IAAI,SAAAwL,GAAI,OACrBA,EAAKC,QAAQzL,IAAI,SAAA0L,GACf,GAAIA,EAAOG,MAAQa,EAAKrT,MAAMqS,OAAOG,IACnC,OAAOH,EAAOC,aAAa3L,IAAI,SAAC4L,EAAYwH,GAC1C,OACEvd,EAAAC,EAAAC,cAAA,MACEyE,MAAO,CAAE6Y,cAAe,QACxBC,gBAAeF,EACfhZ,IAAKwR,EAAWG,SAChBwH,UAAU,OACVC,UAAW9G,EAAK+G,QAAQ/D,KAAKhD,GAC7BgH,YAAahH,EAAKiH,UAAUjE,KAAKhD,IAEjC7W,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,+BAAgC,IACxCmO,EAAW/L,cAQ1BhK,EAAAC,EAAAC,cAAA,UAAQE,UAAU,iBAAiB4E,QAASlE,KAAKgQ,aAAjD,iBAnXqB1N,IAAM8B,WA4XtBmS,0BAAa0G,ICnYxB3W,GAAclB,SAAShG,cAAc,MACzCkH,GAAYhH,UAAY,kBAElB8e,eAGJ,SAAAA,EAAYpc,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAoe,IACjBnc,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAse,GAAAhc,KAAApC,KAAMgC,KAHRyP,eAAiB,IAAIxB,EAEFhO,EADnByP,kBAAoB,IAAIpD,EACLrM,EAiMnB+N,YAjMmB,eAAAhR,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAiML,SAAA5G,EAAMhE,GAAN,IAAAnE,EAAAgP,EAAAjL,EAAA,OAAAsE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACJzI,EAAcrI,EAAKD,MAAnBsI,UACAgP,EAAYrX,EAAKS,MAAjB4W,QACJjL,EAAQiL,EAAQjQ,IAAI,SAAAkQ,GAAC,OAAIA,EAAErE,MAHnBrC,EAAAC,KAAA,EAKV7Q,EAAKwP,eAAeuB,eALVH,EAAAE,KAAA,EAMJ9Q,EAAKyP,kBAAkB1B,YAAY3B,GAN/B,cAAAwE,EAAAE,KAAA,EAOJ9Q,EAAKD,MAAM2R,SAASrJ,GAPhB,OAQVrI,EAAKD,MAAMqR,gBAAgB,gBAAiB,CAC1CC,QAAS,YATDT,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAYV5Q,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAbD,eAAAT,EAAAC,KAAA,GAgBV7Q,EAAKoB,SAAS,CAAEiW,aAASjZ,IACzB4B,EAAKuX,qBAELvX,EAAKwP,eAAe8B,gBAnBVV,EAAAW,OAAA,6BAAAX,EAAAY,SAAAhB,EAAA,wBAjMK,gBAAAgH,GAAA,OAAAza,EAAA0a,MAAA1Z,KAAAG,YAAA,GAEjB8B,EAAKS,MAAQ,CACX8P,cAAc,EACdzK,UAAU,EACV9C,WAAW,EACXoZ,WAAY,GACZC,qBAAqB,EACrBjB,kBAAkB,EAClBkB,gBAAiB,CAAC,CAAEtJ,WAAY,GAAIrM,QAAS,KAC7CmF,SAAU,GACV4L,YAAa,GACbL,QAAS,IAGXrX,EAAKuc,cAAgBvc,EAAKuc,cAAczF,KAAnBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACrBA,EAAKwc,oBAAsBxc,EAAKwc,oBAAoB1F,KAAzBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAC3BA,EAAKyc,qBAAuBzc,EAAKyc,qBAAqB3F,KAA1BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAE5BA,EAAKkb,iBAAmBlb,EAAKkb,iBAAiBpE,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACxBA,EAAKmb,kBAAoBnb,EAAKmb,kBAAkBrE,KAAvBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAEzBA,EAAK0c,yBAA2B1c,EAAK0c,yBAAyB5F,KAA9BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAChCA,EAAK2c,gBAAkB3c,EAAK2c,gBAAgB7F,KAArBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAEvBA,EAAKkY,kBAAoBlY,EAAKkY,kBAAkBpB,KAAvBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACzBA,EAAKuX,mBAAqBvX,EAAKuX,mBAAmBT,KAAxBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IA1BTA,gFA6BFiD,EAAG6P,GAClB/U,KAAKqD,SAAS,CAAEga,kBAAkB,gDAKlCrd,KAAKqD,SAAS,CAAEga,kBAAkB,8CAIlCrd,KAAKqD,SAAS,CAAE4B,WAAW,+CAI3BjF,KAAKqD,SAAS,CAAE4B,WAAW,8CAGXC,GAChBlF,KAAKqD,SAAS,CAAE+W,mBAAmB,IACnCE,QAAQC,IAAI,iEAIZva,KAAKqD,SAAS,CAAE+W,mBAAmB,gDAGjBlV,GAClBlF,KAAKqD,SAAS,CAAE0K,SAAU7I,EAAEwC,OAAO2S,QAAQwE,WAC3C7e,KAAKqD,SAAS,CAAEsW,YAAazU,EAAEwC,OAAO2S,QAAQyE,cAC9C9e,KAAKqD,SAAS,CAAEib,qBAAqB,mDAIrCte,KAAKqD,SAAS,CAAEib,qBAAqB,sDAGbpZ,GACxBlF,KAAKqD,SAAS,CACZkb,gBAAe,GAAAhf,OAAAO,OAAAkR,EAAA,EAAAlR,CACVE,KAAK0C,MAAM6b,iBADD,CAEb,CAAEtJ,WAAY,GAAIrM,QAAS,QAG/B1D,EAAEC,kEAGqBD,EAAGoL,GAC1BtQ,KAAK0C,MAAM6b,gBAAgBhD,OAAOjL,EAAO,GACzCtQ,KAAKqD,SAAS,CAAEkb,gBAAiBve,KAAK0C,MAAM6b,kBAC5CrZ,EAAEC,yDAGYD,EAAGoL,EAAOpQ,GACxB,IAAI+N,EAAUjO,KAAK0C,MAAM6b,gBACZ,eAATre,EACF+N,EAAQqC,GAAO2E,WAAa/P,EAAEwC,OAAO7C,MAErCoJ,EAAQqC,GAAO1H,QAAU1D,EAAEuS,OAAOC,UAEpC1X,KAAKqD,SAAS,CAAEkb,gBAAiBtQ,qFAGZ/I,gGACgBlF,KAAKgC,MAAlCsI,cAAWgK,oBACmBtU,KAAK0C,MAAnC6b,oBAAiBxQ,aAErBC,EAAYsG,EAAc,GAAGsG,WAC7B3M,EAAUsQ,EACH,aACK,GAChBrZ,EAAEC,iBAEFmV,QAAQC,IAAIva,KAAK0C,MAAM6b,0BAGrBve,KAAKyR,eAAeuB,yBACdhT,KAAK0R,kBAAkB3B,eAC3BhC,EACAC,EACAC,EAXO,aACK,6BAcRjO,KAAKgC,MAAM2R,SAASrJ,6DAE1BtK,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,gBACpBvT,KAAKgC,MAAMqR,gBAAgB,kCAAmC,CAC5DC,QAAS,iCAGbtT,KAAKqD,SAAS,CAAEkb,gBAAiB,CAAC,CAAEtJ,WAAY,GAAIrM,QAAS,OAC7D5I,KAAK0e,qNAGU3J,EAAQ7L,gFACfoB,EAActK,KAAKgC,MAAnBsI,mBAENtK,KAAKyR,eAAeuB,wBACdhT,KAAK0R,kBAAkBqN,YAAYhK,EAAQ,QAAS7L,0BACpDlJ,KAAKgC,MAAM2R,SAASrJ,0DAE1BtK,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,gBACpBvT,KAAKgC,MAAMqR,gBAAgB,iBAAkB,CAC3CC,QAAS,2NAKKyB,EAAQO,gFAClBhL,EAActK,KAAKgC,MAAnBsI,4BAGAtK,KAAK0R,kBAAkBxC,6BAC3B5E,EACAyK,UAEF/U,KAAKgC,MAAM2R,SAASrJ,GACpBgQ,QAAQC,IAAI,+DAEZva,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAIXtT,KAAKgC,MAAMqR,gBAAgB,iBAAkB,CAC3CC,QAAS,+KAKLpO,GACRlF,KAAK6a,QAAU3V,EAAEP,cACjBO,EAAE4V,aAAaC,cAAgB,OAC/B7V,EAAE4V,aAAaE,QAAQ,YAAahb,KAAK6a,yCAEnC3V,GACNlF,KAAK6a,QAAQhX,MAAMoX,QAAU,QAC7Bjb,KAAK6a,QAAQK,WAAWC,YAAY7U,IACpCgU,QAAQC,IAAIva,KAAK6a,QAAQK,YAEzB,IAAIzM,EAAOzO,KAAKgC,MAAMsS,cAAc,GAAGQ,QACnCsG,EAAOC,OAAOrb,KAAK6a,QAAQR,QAAQjF,UACnCzR,EAAK0X,OAAOrb,KAAKsb,KAAKjB,QAAQjF,UAC9BgG,EAAOzX,GAAIA,IACf8K,EAAK8M,OAAO5X,EAAI,EAAG8K,EAAK8M,OAAOH,EAAM,GAAG,IACxCpb,KAAKqD,SAAS,CAAEiW,QAAS7K,IACzB6L,QAAQC,IAAI9L,EAAKpF,IAAI,SAAAkQ,GAAC,OAAIA,EAAErE,wCAErBhQ,GACPA,EAAEC,iBACFnF,KAAK6a,QAAQhX,MAAMoX,QAAU,OACF,gBAAvB/V,EAAEwC,OAAOpI,YACbU,KAAKsb,KAAOpW,EAAEwC,OACdxC,EAAEwC,OAAOwT,WAAWM,aAAalV,GAAapB,EAAEwC,0CA0BzC,IAAA7E,EAAA7C,KAAAud,EAOHvd,KAAKgC,MALPsI,EAFKiT,EAELjT,UACAgK,EAHKiJ,EAGLjJ,cACAmH,EAJK8B,EAIL9B,aACA9H,EALK4J,EAKL5J,SACA+H,EANK6B,EAML7B,YAEI5G,EAAUR,EAAcjL,IAAI,SAAAwL,GAAI,OACpCA,EAAKC,QAAQzL,IAAI,SAAC0L,EAAQzE,GAAT,OACfpR,EAAAC,EAAAC,cAAA,MACEqE,IAAK,MAAQ6M,EACb5K,GAAIqP,EAAOG,IACX5V,UAA+B,MAApByV,EAAOU,SAAmB,YAAc,GACnD5R,MAAO,CAAE6Y,cAAe,SAExBxd,EAAAC,EAAAC,cAAA,OAAKqE,IAAK,QAAUsR,EAAOG,IAAK5V,UAAU,oBACxCJ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKqE,IAAK,QAAUsR,EAAOG,IAAK5V,UAAU,oBACxCJ,EAAAC,EAAAC,cAAA,MAAIqE,IAAK,MAAQsR,EAAOG,KACtBhW,EAAAC,EAAAC,cAACsW,EAAD,CACE7R,MAAO,CAAEoX,QAAS,UAClB/S,KAAM6M,EAAO7L,MACbtB,OAAQ,SAAAa,GAAQ,OAAI5F,EAAKmc,WAAWjK,EAAOG,IAAKzM,IAChDV,SACsB,MAApBgN,EAAOU,WAAoC,IAAhBiG,EAI7BjY,IAAK,eAAiBsR,EAAOG,OAEd,IAAhBwG,EACCxc,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,QAAMqE,IAAK,QAAUsR,EAAOG,IAAK5V,UAAU,kBACzCJ,EAAAC,EAAAC,cAAA,UACEqE,IAAKsR,EAAOG,IACZ5V,UAAU,SACV4E,QAAS,kBACPrB,EAAK2b,cAAczJ,EAAOG,IAAKH,EAAOU,YAGnB,MAApBV,EAAOU,SACNvW,EAAAC,EAAAC,cAAA,QAAME,UAAU,qCACdJ,EAAAC,EAAAC,cAAA,yBAGFF,EAAAC,EAAAC,cAAA,QAAME,UAAU,sCACb,IACDJ,EAAAC,EAAAC,cAAA,2BAKRF,EAAAC,EAAAC,cAAA,QAAMqE,IAAK,QAAUsR,EAAOG,IAAK5V,UAAU,kBACzCJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,YACV4E,QAASrB,EAAKsX,mBAEb,IACDjb,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gDAAiD,IALhE,eAMe,MAGI,MAApByV,EAAOU,SACNvW,EAAAC,EAAAC,cAAA,QACEqE,IAAK,QAAUsR,EAAOG,IACtB5V,UAAU,kBAEVJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,+DACV2E,KAAK,IACLgb,gBAAelK,EAAOG,IACtBgK,mBAAkBnK,EAAO7L,MACzBhF,QAAS,SAAAgB,GAAC,OAAIrC,EAAK4b,oBAAoBvZ,KALzC,qBAWF,IAIJ,MAKRhG,EAAAC,EAAAC,cAAA,OAAKqE,IAAK,KAAOsR,EAAOG,KACtBhW,EAAAC,EAAAC,cAAC+f,GAAD,CACE7U,UAAWA,EACXgK,cAAeA,EACfmH,aAAcA,EACd9H,SAAUA,EACVoB,OAAQA,EACR2G,YAAaA,UAOvB,OACExc,EAAAC,EAAAC,cAAA,OAAKqE,IAAK,gBACPqR,EAAQ,GAAG1U,OAAS,EACnBlB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,MAAIqE,IAAK,MAAQqR,EAAQsK,OAAQtK,GAAc,IAC9CwF,QAAQC,IAAIzF,GAAU,KAGzB5V,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,KAAGE,UAAU,WAAb,mDAEK,IACJgb,QAAQC,IAAIzF,IAgDjB5V,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAM4b,oBACjBvY,QAAS/F,KAAK0e,qBACdzY,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,UAAKY,KAAK0C,MAAMiX,aAChBza,EAAAC,EAAAC,cAAA,kCAEAF,EAAAC,EAAAC,cAAA,QAAM2F,SAAU,SAAAG,GAAC,OAAIrC,EAAKwc,iBAAiBna,KACxClF,KAAK0C,MAAM6b,gBAAgBlV,IAAI,SAACwL,EAAMvE,GAAP,OAC9BpR,EAAAC,EAAAC,cAAA,OAAKqE,IAAK,cAAgB6M,EAAOhR,UAAU,eACzCJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAf,aAEEJ,EAAAC,EAAAC,cAAA,SACEqE,IAAK6M,EACLpQ,KAAK,OACLsE,SAAU,SAAAU,GAAC,OAAIrC,EAAK+b,gBAAgB1Z,EAAGoL,EAAO,eAC9CzL,MAAOgQ,EAAKI,WACZ3L,UAAQ,IAPZ,2BAiBEpK,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEsE,IAAK,UAAY6M,EACjB5G,QAASmL,EAAKjM,QACd4O,OAAQ,CACN5P,OAAQ,SAAA1C,GAAC,OAAIrC,EAAK+b,gBAAgB1Z,EAAGoL,EAAO,aAE9C0N,YAAY,MACZC,OAAQ,CACNC,cAAe,CACb,CACEtZ,KAAM,WACNuZ,OAAQ,CAAC,OAAQ,WAAY,aAE/B,CACEvZ,KAAM,YACNuZ,OAAQ,CACN,OACA,SACA,SACA,QACA,OACA,cAGJ,CAAEvZ,KAAM,QAASuZ,OAAQ,CAAC,eAKlCjf,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBAAkBuE,MAAO,CAAEyb,WAAY,OACnDhP,EAAQ,EACPpR,EAAAC,EAAAC,cAAA,UACEE,UAAU,eACV4E,QAAS,SAAAgB,GAAC,OAAIrC,EAAK8b,yBAAyBzZ,EAAGoL,KAE/CpR,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gCAAiC,KAGhD,OAMRJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,UACEE,UAAU,eACV4E,QAAS,SAAAgB,GAAC,OAAIrC,EAAK0c,0BAA0Bra,KAE7ChG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,sCAJf,eAQJJ,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,WAMlD3F,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAM0X,kBACjBrU,QAAS/F,KAAKwZ,mBACdvT,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,uDAEAF,EAAAC,EAAAC,cAAA,MAAImd,WAAYvc,KAAKwc,SAASzD,KAAK/Y,OAChCsU,EAAcjL,IAAI,SAAAwL,GAAI,OACrBA,EAAKC,QAAQzL,IAAI,SAAC0L,EAAQ0H,GACxB,OACEvd,EAAAC,EAAAC,cAAA,MACEyE,MAAO,CAAE6Y,cAAe,QACxBC,gBAAeF,EACfhZ,IAAKoR,EAAKO,SACVwH,UAAU,OACVC,UAAWha,EAAKia,QAAQ/D,KAAKlW,GAC7Bka,YAAala,EAAKma,UAAUjE,KAAKlW,IAEjC3D,EAAAC,EAAAC,cAAA,KAAGE,UAAU,+BARf,IAQgDyV,EAAO7L,YAM/DhK,EAAAC,EAAAC,cAAA,UAAQE,UAAU,iBAAiB4E,QAASlE,KAAKgQ,aAAjD,iBAvfkB1N,IAAM8B,WAggBnBmS,0BAAa6H,ICjgBtBoB,eAGJ,SAAAA,EAAYxd,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAwf,IACjBvd,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAA0f,GAAApd,KAAApC,KAAMgC,KAHRyP,eAAiB,IAAIxB,EAEFhO,EADnByP,kBAAoB,IAAIpD,EACLrM,EAmLnB+V,kBAnLmB,eAAAhZ,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAmLC,SAAA5G,EAAOtH,EAASJ,GAAhB,IAAAT,EAAA,OAAAqI,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACVzI,EAAcrI,EAAKS,MAAnB4H,UADUuI,EAAAC,KAAA,EAGhB7Q,EAAKwP,eAAeuB,eAHJH,EAAAE,KAAA,EAIV9Q,EAAKyP,kBAAkBrC,iBAAiB/E,EAAWa,EAASJ,GAJlD,OAKhB9I,EAAK0R,SAASrJ,GALEuI,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAO,GAAAP,EAAA,SAOhB5Q,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UARK,eAAAT,EAAAC,KAAA,GAWhB7Q,EAAKwP,eAAe8B,gBAXJV,EAAAW,OAAA,6BAAAX,EAAAY,SAAAhB,EAAA,uBAnLD,gBAAAgH,EAAAgG,GAAA,OAAAzgB,EAAA0a,MAAA1Z,KAAAG,YAAA,GAAA8B,EAkMnByU,YAlMmB,eAAAnK,EAAAzM,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAkML,SAAApB,EAAMlN,GAAN,IAAA/F,EAAAsF,EAAAuN,EAAA,OAAAlF,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,cAAA/N,EAC8B/C,EAAKS,MAAvC4H,EADItF,EACJsF,UAAWuN,EADP7S,EACO6S,mBADPK,EAAApF,KAAA,EAGV7Q,EAAKwP,eAAeuB,eAHVkF,EAAAnF,KAAA,EAIJ9Q,EAAKyP,kBAAkBlC,mBAC3BzE,EACA8M,GANQ,OAQV5V,EAAK0R,SAASrJ,GARJ4N,EAAAnF,KAAA,gBAAAmF,EAAApF,KAAA,EAAAoF,EAAA9E,GAAA8E,EAAA,SAUVjW,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UAXD,eAAA4E,EAAApF,KAAA,GAcV7Q,EAAKwP,eAAe8B,gBAdV2E,EAAA1E,OAAA,6BAAA0E,EAAAzE,SAAAwE,EAAA,uBAlMK,gBAAAyH,GAAA,OAAAnT,EAAAmN,MAAA1Z,KAAAG,YAAA,GAAA8B,EAoNnB0U,YApNmB7W,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAoNL,SAAAlB,IAAA,IAAA7N,EAAA,OAAAqI,EAAAxT,EAAAyT,KAAA,SAAAwF,GAAA,cAAAA,EAAAtF,KAAAsF,EAAArF,MAAA,cACJzI,EAAcrI,EAAKS,MAAnB4H,UADI8N,EAAAtF,KAAA,EAGV7Q,EAAKwP,eAAeuB,eAHVoF,EAAArF,KAAA,EAIJ9Q,EAAKyP,kBAAkBpC,qBAAqBhF,GAJxC,OAKVrI,EAAK0R,SAASrJ,GALJ8N,EAAArF,KAAA,gBAAAqF,EAAAtF,KAAA,EAAAsF,EAAAhF,GAAAgF,EAAA,SAOVnW,EAAKD,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,UARD,eAAA8E,EAAAtF,KAAA,GAWV7Q,EAAKwP,eAAe8B,gBAXV6E,EAAA5E,OAAA,6BAAA4E,EAAA3E,SAAA0E,EAAA,uBAlNZlW,EAAKS,MAAQ,CACX4H,UAAW,GACXuH,cAAe,GACfyC,cAAe,GACfxC,iBAAkB,GAClB+F,mBAAoB,GACpBlD,gBAAiB,GACjB8G,aAAc,GACdpR,SAAU,GACVmI,cAAc,EACdzK,UAAU,EACV9C,WAAW,EACXmV,mBAAmB,EACnBiE,WAAY,GACZsB,OAAQ,IAGV1d,EAAK2d,gBAAkB3d,EAAK2d,gBAAgB7G,KAArBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACvBA,EAAK4d,iBAAmB5d,EAAK4d,iBAAiB9G,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACxBA,EAAK6d,YAAc7d,EAAK6d,YAAY/G,KAAjBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACnBA,EAAK0R,SAAW1R,EAAK0R,SAASoF,KAAdjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAtBCA,iFA0BjBjC,KAAKqD,SAAS,CAAE4B,WAAW,+CAI3BjF,KAAKqD,SAAS,CAAE4B,WAAW,8CAGXC,GAChBlF,KAAKqD,SAAS,CAAE+W,mBAAmB,iDAInCpa,KAAKqD,SAAS,CAAE+W,mBAAmB,uCAG1BlV,GACTlF,KAAKqD,SAAS,CAAEgb,WAAYnZ,EAAEwC,OAAO7C,oFAGrBK,8FACiClF,KAAK0C,MAA9C4H,cAAWgK,kBAAe+J,eAE9BtQ,EAAWuG,EAAc,GAAGY,IAC5BlH,EAAYsG,EAAc,GAAGsG,WAC7B3M,EAAUoQ,EACH,SACK,GAChBnZ,EAAEC,0BAGAnF,KAAKyR,eAAeuB,yBACdhT,KAAK0R,kBAAkB3B,eAC3BhC,EACAC,EACAC,EATO,SACK,6BAYRjO,KAAK2T,SAASrJ,WACpBtK,KAAKgC,MAAMqR,gBAAgB,kBAAmB,CAC5CC,QAAS,8DAGXtT,KAAKgC,MAAMqR,gBAAgB,gCAAiC,CAC1DC,QAAS,mCAGXtT,KAAKyR,eAAe8B,qCAGtBvT,KAAK6f,oTAkB2B7f,KAAKgC,MAAM2P,MAAMC,OAAzCtH,cAAWsB,sBACb5L,KAAK2T,SAASrJ,UAEhBsB,GACFrD,WAAW,WACT,IAAMP,EAAMnF,EAAK0V,KAAK3M,GAClB5D,GACFA,EAAIwQ,kBAEL,0LAIkBnQ,EAAWC,iFACiBtI,KAAK0C,MAAhD4H,cAAWgK,kBAAe9B,iBAC9BlI,IAAchC,EAAUgC,YACG,IAAzBgK,EAAclU,QAAiBoS,GACjCxS,KAAK2T,SAASrJ,kLAKLA,mFAEXtK,KAAKyR,eAAeuB,wBACdhT,KAAK4T,cAActJ,0BACnBtK,KAAKmT,eAAe7I,0DAE1BtK,KAAKqD,SAAS,CAAEmP,cAAc,IAC9BuN,MAAK,UAAAxgB,OAAAygB,EAAA5M,8BAELpT,KAAKyR,eAAe8B,6NAIJjJ,2FACUtK,KAAK0R,kBAAkBmC,mCAA7CC,UACAC,EAAmBD,EAAc5I,OACrC,SAAA8I,GAAE,OAAIA,EAAG9K,MAAM+K,cAAc1C,QAAQ,OAAQ,MAAQjH,KAElClK,OAAS,IAC5BJ,KAAKqD,SAAS,CAAEgH,SAAU0J,EAAiB,GAAG1J,SAAS8J,YACvDnU,KAAKqD,SAAS,CAAEoY,aAAc1H,EAAiB,GAAGG,qMAIjC5J,sFACXD,EAAarK,KAAK0C,MAAlB2H,SACF+J,EAAc/J,EAASa,OAAO,SAAAC,GAAO,MAAuB,SAAnBA,EAAQkJ,SACjD3B,EAAerI,EAASa,OAAO,SAAAC,GAAO,MAAuB,UAAnBA,EAAQkJ,SACpDC,EAAgB,GAChBvM,GAAW,GAEX2K,EAAatS,wCACOJ,KAAK0R,kBAAkB6C,2BAC3CjK,UADFgK,SAGAtU,KAAKqD,SAAS,CAAEwU,mBAAoBnF,EAAa,GAAGhN,KACpDqC,GAAW,EACXuS,QAAQC,IAAIjG,+BAERF,EAAYhU,yCACQJ,KAAK0R,kBAAkB8C,sBAC3ClK,EACA8J,EAAY,GAAGhJ,gBAFjBkJ,iBAOAA,EAAclU,SACV0X,EAAkBxD,EAAc,GAAGQ,QAAQzL,IAAI,SAAA0L,GAAM,MAAK,CAC9DrM,YAAaqM,EAAO7L,MACpBP,KAAMoM,EAAOpM,QAEf3I,KAAKqD,SAAS,CACZwO,cAAeyC,EAAc,GAAGpL,MAChCoL,cAAeA,EACfxC,iBAAkBwC,EAAc,GAAGnJ,QACnCwJ,gBAAiBL,EAAc,GAAGD,OAClCyD,kBACA/P,mJAqDG,IAAAgO,EAAA/V,KAAAgW,EAYHhW,KAAK0C,MAVP4H,EAFK0L,EAEL1L,UACAuH,EAHKmE,EAGLnE,cACAyC,EAJK0B,EAIL1B,cACAxC,EALKkE,EAKLlE,iBACA6C,EANKqB,EAMLrB,gBACA8G,EAPKzF,EAOLyF,aAEApR,EATK2L,EASL3L,SACAmI,EAVKwD,EAULxD,aACAzK,EAXKiO,EAWLjO,SAGF,OAAIyK,EACKtT,EAAAC,EAAAC,cAAC+W,EAAD,MAGoB,IAAzB7B,EAAclU,OACT,KAIPlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,UAAKyS,GACL3S,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOwS,GACvB5S,EAAAC,EAAAC,cAAA,QAAME,UAAU,4BACO,KAApBqV,EAAyB,QAAUA,IAGxCzV,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAC6Z,GAAD,CACElR,SAAUA,EACV4O,YAAa3W,KAAK2W,YAClBtM,SAAUA,EACVoM,QAASzW,KAAKgY,kBACdtB,YAAa1W,KAAK0W,eAGtBxX,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACC,IAAbyI,EACC7I,EAAAC,EAAAC,cAAA,UACE6E,KAAK,IACL3E,UAAU,YACV4E,QAASlE,KAAK4f,iBAEb,IACD1gB,EAAAC,EAAAC,cAAA,KAAGE,UAAU,sCANf,eAMkE,KAGlE,KAKNJ,EAAAC,EAAAC,cAAC6gB,GAAD,CACEvE,YAAa3T,EACbuC,UAAWA,EACXgK,cAAeA,EACfmH,aAAcA,EACd9H,SAAU3T,KAAK2T,WAGjBzU,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,IAInDnL,EAAAC,EAAAC,cAACyG,EAAA,MAAD,CACEC,KAAM9F,KAAK0C,MAAMuC,UACjBc,QAAS/F,KAAK6f,iBACd5Z,QAAM,EACNC,WAAY,CACVC,QAAS,gBACTC,MAAO,gBAGTlH,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,YACEsG,GAAG,kBACH0W,KAAK,IACL5X,SAAU,SAAAU,GAAC,OAAI6Q,EAAKmK,WAAWhb,IAC/BoE,UAAQ,IAEVpK,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAAS4E,QAAS,SAAAgB,GAAC,OAAI6Q,EAAK+J,YAAY5a,KAA1D,8DA5OsBlD,EAAOU,GAAO,IACpC4H,EAActI,EAAM2P,MAAMC,OAA1BtH,UACR,OAAIA,IAAc5H,EAAM4H,UACf,CACLA,YACAgK,cAAe,GACf9B,cAAc,GAKX,YA7FclQ,IAAM8B,WAwUhBmS,0BAAaiJ,aC5TbW,cAjBb,SAAAA,IACE,GADargB,OAAAC,EAAA,EAAAD,CAAAE,KAAAmgB,GAAAngB,KAFfuO,KAAO,IAAIpN,EAGLgf,EAAelgB,SACjB,OAAOD,KAAKC,SAGdkgB,EAAelgB,SAAWD,4LAIHA,KAAKuO,KAAK/M,IAAV,GAAAjC,OAfLwB,gDAeK,0CAAAxB,OAE6BmP,KAAKC,sBAFnDH,2BAICA,EAASC,iHCbd2R,8MACJ3O,eAAiB,IAAIxB,IACrByB,kBAAoB,IAAIpD,IACxB+R,eAAiB,IAAIF,KAErBzd,MAAQ,CACN4H,UAAWrI,EAAKD,MAAM2P,MAAMC,OAAOtH,UACnCa,QAASlJ,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAC5C+B,cAAe,GACf5H,aAAczK,EAAKD,MAAM2P,MAAMC,OAAOM,IACtCoO,cAAe,GACfC,UAAW,+MAKTvgB,KAAKyR,eAAeuB,wBACdwN,QAAQC,IAAI,CAChBzgB,KAAK0gB,eACL1gB,KAAKmc,gBACLnc,KAAK2gB,wCAGP3gB,KAAKyR,eAAe8B,ySAKdjJ,EAActK,KAAK0C,MAAnB4H,UACAa,EAAYnL,KAAK0C,MAAjByI,iBACoBnL,KAAK0R,kBAAkB8C,sBACjDlK,EACAa,EAAQ,WAFJmJ,SAKNtU,KAAKqD,SAAS,CACZiR,gSAK0BtU,KAAK0R,kBAAkBkP,0BAA7C9M,SACExJ,EAActK,KAAK0C,MAAnB4H,WACFuW,EAAiB/M,EAAc5I,OACnC,SAAA2J,GAAI,OAAIA,EAAKjQ,KAAKqP,gBAAkB3J,KAEnBlK,SACXkgB,EAAgBO,EAAe,GAAG3M,gBAAgB7K,IACtD,SAAA6J,GAAS,OAAIA,EAAUhK,QAEzBlJ,KAAKqD,SAAS,CAAEid,4SAMWtgB,KAAKqgB,eAAeS,oBAAzCC,SACAR,EAAYQ,EAAa7V,OAC7B,SAAA2E,GAAQ,QACJA,EAASmR,mBAAmB/N,KAC5B,SAAAgO,GAAO,OAQLA,EAAQC,gBAAkBre,EAAKH,MAAMgK,iBAI7C1M,KAAKqD,SAAS,CAAEkd,cAEhBvgB,KAAKqD,SAAS,CAAEkd,8DAEhBvgB,KAAKgC,MAAMqR,gBAAgB,wCAAyC,CAClEC,QAAS,6JAOb,OADsBtT,KAAK0C,MAAnB6d,UACSlX,IAAI,SAAAwG,GAAQ,OAC3B3Q,EAAAC,EAAAC,cAAA,MAAIqE,IAAKoM,EAASnK,IAChBxG,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,uBAAApE,OAAyBsQ,EAASnK,KAAOmK,EAAS3G,2CAKvD,IAAA6M,EAAA/V,KAAAgF,EAMHhF,KAAK0C,MAJPgK,EAFK1H,EAEL0H,aACA4H,EAHKtP,EAGLsP,cACAgM,EAJKtb,EAILsb,cACAC,EALKvb,EAKLub,UAGIvL,EAAe,GACrBsF,QAAQC,IAAIjG,GACZA,EAAc/D,QAAQ,SAAAsE,GAAI,OACxBA,EAAKC,QAAQvE,QAAQ,SAAAwE,GAAM,OACzBA,EAAOC,aAAazE,QAAQ,SAAA0E,GACtBA,EAAWvP,KAAOgH,GACpBsI,EAAa3E,KAAbvQ,OAAAqhB,GAAA,EAAArhB,CAAA,GACKmV,EADL,CAEE3K,UAAWuK,EAAK3L,MAChB6L,OAAQA,EAAO7L,eAOzB,IAAMkY,EAAoBpM,EAAa3L,IAAI,SAAA4L,GAAU,OACnD/V,EAAAC,EAAAC,cAAA,OAAKqE,IAAKwR,EAAWvP,IACnBxG,EAAAC,EAAAC,cAAA,UACG,IACA6V,EAAW3K,UAFd,MAE4B2K,EAAWF,QAGvC7V,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAK6V,EAAW/L,OAChBhK,EAAAC,EAAAC,cAAA,UACGkhB,EAAcjX,IAAI,SAAAsS,GACjB,OACEzc,EAAAC,EAAAC,cAAA,OAAKqE,IAAKkY,GACRzc,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACZ,IACDJ,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,UAAKuc,KAGR1G,EAAWnF,WAAWzG,IAAI,SAAA6J,GACzB,OAAIA,EAAUhT,OAASyb,EACdzc,EAAAC,EAAAC,cAAA,MAAIqE,IAAKyP,EAAUxN,IAAKwN,EAAUhK,MAAlC,KAEF,YAQnBhK,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,SACG,IACA6V,EAAWqI,wBACR9R,IAAOyJ,EAAWqI,yBAClB,oBAAqB,KAGL,IAArBiD,EAAUngB,OAAe,KACxBlB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,0DACAF,EAAAC,EAAAC,cAAA,UAAK2W,EAAKsL,uBAQtB,OACEniB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZgV,EAAclU,OAAS,EAEpBlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiB2I,aAAW,cACzC/I,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,kDACR5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAG,IAAImD,MAAM,wBAAnB,SAIF5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+U,EAAc,GAAGpL,MAAM+K,cAAvC,KAAA1U,OACA+U,EAAc,GAAGnJ,UAGlBmJ,EAAc,GAAGpL,MALpB,IAK4BoL,EAAc,GAAGnJ,SACrC,KAEVjM,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,uBAAuBwa,eAAa,YAA9C,wBAON,GAGFpiB,EAAAC,EAAAC,cAAA,gCAECgiB,WAxMqB9e,IAAM8B,WA+MvBmS,0BAAa6J,wCC9M5B,SAASmB,GAATviB,GAOGA,EANDsR,MAMC,IALDhG,EAKCtL,EALDsL,UACA2K,EAICjW,EAJDiW,WAEA9J,GAECnM,EAHDwiB,QAGCxiB,EAFDmM,SACA6G,EACChT,EADDgT,eAEMyP,EAAoBC,aAAQzM,EAAWnF,WAAY,QAInDA,EAFYkC,EAEW3I,IAAI,SAAAnJ,GAC/B,IAAM4P,EAAa2R,EAAkBvhB,GACjCuhB,EAAkBvhB,GAAMmJ,IAAI,SAAA6J,GAAS,OACnChU,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBmE,IAAKyP,EAAUxN,IAAKwN,EAAUhK,SAE9D,GACJ,OAAO4G,EACL5Q,EAAAC,EAAAC,cAAA,OAAKqE,IAAKvD,EAAMZ,UAAU,kBACxBJ,EAAAC,EAAAC,cAAA,UAAKc,GACLhB,EAAAC,EAAAC,cAAA,MAAIE,UAAU,qBAAqBuE,MAAO,CAAC8d,YAAa,SAAW7R,IAGrE,KAIJ,MAA4B,MAAxBmF,EAAWQ,SACN,KAIPvW,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,6DAGhBJ,EAAAC,EAAAC,cAAA,YAAO6V,EAAW/L,QAGtByU,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,4DAGhBJ,EAAAC,EAAAC,cAAA,YAAO6V,EAAW/L,SAItBhK,EAAAC,EAAAC,cAAA,WACG0Q,EACD5Q,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+K,EAAhB,KAAA/K,OAA6B4L,EAA7B,wBAAA5L,OACA0V,EAAWvP,KAGbxG,EAAAC,EAAAC,cAAA,QAAMyE,MAAO,CAAC2B,MAAM,UAClBtG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,2CADf,qBAYdiiB,GAAe3hB,aAAe,CAC5BgiB,YAAa,EACbtR,MAAO,EACPkR,SAAS,GAaID,UC5Ff,SAASM,GAAT7iB,GAOGA,EANDsR,MAMC,IALDhG,EAKCtL,EALDsL,UACAyK,EAIC/V,EAJD+V,OACAyM,EAGCxiB,EAHDwiB,QACArW,EAECnM,EAFDmM,QACA6G,EACChT,EADDgT,eAEMgD,EAAeD,EAAOC,aAAa3L,IAAI,SAAC4L,EAAY6M,GAAb,OAC3C5iB,EAAAC,EAAAC,cAAC2iB,GAAD,CACEte,IAAKwR,EAAWvP,GAChB4K,MAAOwR,EACPxX,UAAWA,EACX2K,WAAYA,EACZuM,QAASA,EACTrW,QAASA,EACT6G,eAAgBA,MAIpB,OACE9S,EAAAC,EAAAC,cAAA,SAAOyE,MAAO,CAAEsG,OAAQ,SACtBjL,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,cAAM2V,EAAO7L,SAGhB8L,GAKP6M,GAAWjiB,aAAe,CACxBmV,OAAQ,CAAE7L,MAAO,GAAI8L,aAAc,IACnCwM,SAAS,GAYIK,UC0IAG,eAtKb,SAAAA,EAAYhgB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAgiB,IACjB/f,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAkiB,GAAA5f,KAAApC,KAAMgC,KARRU,MAAQ,CACNuf,QAAS,GACTC,gBAAiB,GACjBhX,OAAQ,GACRsH,cAAc,GAGGvQ,EAMnBoe,eAAiB,IAAIF,GANFle,EAOnBwP,eAAiB,IAAIxB,EAPFhO,EAgEnBkgB,SAAW,SAAAjX,GAAU,IAEfkX,EADIH,EAAYhgB,EAAKS,MAAjBuf,QAER,IACEG,EAAO,IAAIlR,OAAOhG,EAAQ,KAC1B,MAAOhG,GACPkd,EAAO,IAET,IAAMF,EAAkBD,EAAQ/W,OAAO,SAAAmX,GAAM,OAAID,EAAKE,KAAKD,EAAOnZ,SAClEjH,EAAKoB,SAAS,CAAE6e,kBAAiBhX,YAvEjCjJ,EAAKS,MAAM4H,UAAYtI,EAAMsI,UAC7BrI,EAAKS,MAAMyI,QAAUnJ,EAAMmJ,QAHVlJ,mNAWfjC,KAAKyR,eAAeuB,wBACKhT,KAAKqgB,eAAeS,oBAAvCyB,SACAN,EAAUjiB,KAAKwiB,cAAcD,GACnCviB,KAAKqD,SAAS,CAAE4e,UAASC,gBAAiBD,oDAE1CjiB,KAAKqD,SAAS,CAAEmP,cAAc,6BAE9BxS,KAAKyR,eAAe8B,oLAIVgP,GAAY,IAChBjY,EAActK,KAAK0C,MAAnB4H,UAEF4X,GADcliB,KAAK0C,MAAjByI,QACgB,IAoCxB,OAnCAoX,EAAWhS,QAAQ,SAAA8R,GACjB,GAAwB,MAApBA,EAAO5M,SAAX,CAIA,IAAMgN,EAAmBJ,EAAOrB,mBAAmB9V,OAEjD,SAAA+V,GAAO,OAAKA,EAAQyB,iBAAmB,IAAIzO,gBAAkB3J,IAG/D,GAAgC,IAA5BmY,EAAiBriB,OAArB,CAIA,IAAMuiB,EAAc7iB,OAAAqhB,GAAA,EAAArhB,CAAA,GACfuiB,EADe,CAElBrN,aAAcxE,EACZiS,EAAiBpZ,IACf,SAAA4X,GAAO,OACL,OAaRiB,EAAgB7R,KAAKsS,OAGhBT,mCAeA,IAAArf,EAAA7C,KAAAgF,EAOHhF,KAAK0C,MALPwf,EAFKld,EAELkd,gBACA5X,EAHKtF,EAGLsF,UACAY,EAJKlG,EAILkG,OACAsH,EALKxN,EAKLwN,aACArH,EANKnG,EAMLmG,QAGF,GAAIqH,EACF,OAAOtT,EAAAC,EAAAC,cAAC+W,EAAD,MAKT,IAqBMoK,EAAY2B,EAAgB7Y,IAAI,SAAAgZ,GAAM,OAC1CnjB,EAAAC,EAAAC,cAAA,MAAIqE,IAAK4e,EAAO3c,IACdxG,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,uBAAApE,OAAyB8iB,EAAO3c,KAAO2c,EAAOnZ,QAExDhK,EAAAC,EAAAC,cAAA,UAAKijB,EAAOniB,MACZhB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAoBijB,EAAOrN,aAxB5B9J,OACC,SAAC+J,EAAY3E,EAAOmQ,GAApB,OACEA,EAAImC,UAAU,SAAAC,GAAC,OAAIA,EAAE3B,gBAAkBjM,EAAWiM,kBAClD5Q,IAEHjH,IAAI,SAAA4L,GAAU,OACb/V,EAAAC,EAAAC,cAAA,MAAIqE,IAAKwR,EAAWvP,IAClBxG,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+K,EAAhB,KAAA/K,OAA6B4L,EAA7B,wBAAA5L,OACA0V,EAAWiM,gBAGZjM,EAAW6N,qBAYhB,SAKN,OACE5jB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KAQEH,EAAAC,EAAAC,cAAA,QAAM2jB,OAAO,IAAIjc,MAAM,yCACjB5H,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCACbJ,EAAAC,EAAAC,cAAA,SACEE,UAAU,iDACV0jB,IAAI,oBAFN,iBAMA9jB,EAAAC,EAAAC,cAAA,SACEc,KAAK,SACLoG,YAAY,4BACZZ,GAAG,mBACHpG,UAAU,oCACVkF,SAAU,SAAAC,GAAK,OAAI5B,EAAKsf,SAAS1d,EAAMiD,OAAO7C,QAC9CA,MAAOqG,MAIjBhM,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,4BAGJF,EAAAC,EAAAC,cAAA,aAAQmhB,YA5KInc,oDCwZP6e,WAtZK,SAAAjhB,GAClB,IAAIkhB,EAAUC,cAERtR,EAAgB7P,EAAMsI,UACtBwH,EAAmB9P,EAAMmJ,QAJJZ,EAKaC,qBALbC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAKpB6Y,EALoB3Y,EAAA,GAKN4Y,EALM5Y,EAAA,GAAAI,EAMKL,qBANLM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAMpByY,EANoBxY,EAAA,GAMVyY,EANUzY,EAAA,GAAAiM,EAOOvM,qBAPPwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAOpBzM,EAPoB0M,EAAA,GAAAG,GAAAH,EAAA,GAQiBxM,mBAAS,KAR1B4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAQpBqM,EARoBpM,EAAA,GAQJqM,EARIrM,EAAA,GAWvBsM,EAAoB,GAKpBC,GAHanjB,aAAaC,QAAQ,UAClCD,aAAaC,QAAQ,SAEVD,aAAaC,QAAQ,QAChCD,aAAaC,QAAQ,QACrB,IAEJmjB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVsQ,EAAgB1c,KAAKkd,MAAMrjB,aAAaC,QAAQ,kBADtC,cAAAoS,EAAAE,KAAA,EAGVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,sCAAAvS,OAC8EmP,KAAKC,QAE3F1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJmgB,EAAYngB,KARA,cAAAyP,EAAAE,KAAA,EAWVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,uBAAAvB,OAAgCokB,EAAhC,iBAAyD,CAClE5gB,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJqgB,EAAkBrgB,KAjBN,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,EAqBf2jB,IACC,CAACxZ,EAAWwH,EAAkBD,EAAe8R,IAEhD,IAQMI,EAAuB,SAAA7e,GACvBwe,EAAkBtjB,OAAS,EAC7B2f,MAAM,+CAIJ7a,EAAEwC,OAAOsc,QACXN,EAAkBrT,KAAKnL,EAAEwC,OAAOuc,aAAa,mBAE7CP,EAAoBA,EAAkBxY,OAAO,SAASrG,EAAOyL,EAAO4T,GAClE,OAAOrf,IAAUK,EAAEwC,OAAOuc,aAAa,qBAKvCE,EAAoB,SAAAjf,GACxBA,EAAEC,iBAC+B,IAA7Bue,EAAkBtjB,OAIpB8iB,EAAQ7S,KAAR,cAAA9Q,OACgBsS,EADhB,KAAAtS,OACiCuS,EADjC,sBAAAvS,OAEImkB,EAAkB,GAFtB,KAAAnkB,OAGMmkB,EAAkB,KANxB3D,MAAM,gDAmEV,OACE7gB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,0CADX,wBAEU,KAEV5H,EAAAC,EAAAC,cAAA,sEAEFF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,oCADX,4BAIA5H,EAAAC,EAAAC,cAAA,kFAMFF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,kCADX,qBAGA5H,EAAAC,EAAAC,cAAA,yIAKFF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,mCADX,mCAIA5H,EAAAC,EAAAC,cAAA,kEAINF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,8BAEFF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QAAMyE,MAAO,CAAE2B,MAAO,UACnBhF,aAAaC,QAAQ,UA3DZ,WACpB,IAAI2jB,EAAO,GACX,GAAIZ,EAAepjB,OAAS,EAI1B,OAHAojB,EAAena,IAAI,SAAAwL,GACjBuP,EAAK/T,KAAKwE,EAAKZ,mBAEbmQ,EAAKjgB,SAAS0N,GAqDwBwS,GAChCnlB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAU,wCACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,qBAED,IAJH,2BAK2B,IACzB5S,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qCAEfJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEQ,QAAS,SAAAgB,GAAC,OAAIif,EAAkBjf,IAChC5F,UAAU,8CACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,sBAAAvS,OACAmkB,EAAkB,GADlB,KAAAnkB,OAEEmkB,EAAkB,KAErB,IAPH,4BAQ4B,IAC1BxkB,EAAAC,EAAAC,cAAA,KAAGE,UAAU,oCAIjBJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEQ,QAAS,SAAAgB,GAAC,OAAIif,EAAkBjf,IAChC5F,UAAU,8CACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,sBAAAvS,OACAmkB,EAAkB,GADlB,KAAAnkB,OAEEmkB,EAAkB,KAErB,IAPH,4BAQ4B,IAC1BxkB,EAAAC,EAAAC,cAAA,KAAGE,UAAU,uCAOzBJ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACZ8jB,EACClkB,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,wEACT5H,EAAAC,EAAAC,cAAA,OACEklB,IAAI,UACJC,IACEnB,EAAaoB,MAAM,GAAKpB,EAAaoB,MAAM,GAAGljB,IAAMmjB,KAEtD3d,MAAM,sBAER5H,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,0CACT5H,EAAAC,EAAAC,cAAA,UAAKgkB,EAAasB,WAClBxlB,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEG,MAAO,CAAEkG,YAAa,QACtBpG,GAAE,cAAApE,OAAgB6jB,EAAavR,cAA7B,KAAAtS,OACA6jB,EAAauB,cADb,wBAFJ,gBAMezlB,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,uCAGxB5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMQ,QAAS,SAAAgB,GAAC,OArKT,SAAAA,GACnBA,EAAEC,iBACFyf,wBAAa,CAeXC,SAAU,SAAAtY,GAAiB,IAAdxG,EAAcwG,EAAdxG,QACX,OACE7G,EAAAC,EAAAC,cAAA,OAAKE,UAAU,4BACbJ,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,yFAIAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oCACbJ,EAAAC,EAAAC,cAAA,UAAQ8E,QAAS6B,GAAjB,MACA7G,EAAAC,EAAAC,cAAA,UACE8E,QAAS,WACP1D,aAAaskB,WAAW,gBACxB/E,MAAM,mBACNxf,OAAO8E,SAASC,QAAO,GACvBS,MALJ,wBA0IsBgf,CAAa7f,IAAIvB,GAAE,KAAvC,kBACiBzE,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,qCAG1B5H,EAAAC,EAAAC,cAAA,QAAM0H,MAAM,oBACV5H,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLgE,QAAS,SAAAgB,GAAC,OAAI6e,EAAqB7e,IACnC8f,iBAAe,UAJnB,oBAQA9lB,EAAAC,EAAAC,cAAA,QAAME,UAAU,YAAhB,iBAGFJ,EAAAC,EAAAC,cAAA,KACEyE,MAAO,CACL4B,MAAO,OACPqE,OAAQ,QACRsL,SAAU,aAGXgO,EAAavR,cAPhB,MAOkCuR,EAAauB,iBAKnDzlB,EAAAC,EAAAC,cAAA,WAAS0H,MAAM,wEACb5H,EAAAC,EAAAC,cAAA,OAAKklB,IAAI,UAAUC,IAAKE,KAAW3d,MAAM,sBAGzC5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMpE,UAAU,6CACdqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,0BADJ,sBAGsB,IACpB5S,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,sCAKdwc,EACGA,EAASja,IAAI,SAAC4X,EAAS3Q,GACrB,OApPR9P,aAAaC,QAAQ,SA8STvB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLgE,QAAS,SAAAgB,GAAC,OAAI6e,EAAqB7e,IACnC8f,iBAAgB/D,EAAQvb,KAJ5B,qBASFxG,EAAAC,EAAAC,cAAA,KAAGE,UAAW2hB,EAAQgE,mBACnBhE,EAAQuD,MAAM,GACbtlB,EAAAC,EAAAC,cAAA,OACEklB,IAAI,UACJC,IAAKtD,EAAQuD,MAAM,GAAGljB,IACtBhC,UAAU,gBAGZJ,EAAAC,EAAAC,cAAA,OACEklB,IAAI,UACJC,IAAKE,KACLnlB,UAAU,iBAKhBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0CACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UACG6hB,EAAQyD,UACLzD,EAAQyD,UACR,aAENxlB,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,kBAAAvS,OACA0hB,EAAQvb,IADRnG,OAEC0hB,EAAQiE,YAHb,eAKe,IACbhmB,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,uCAEX5H,EAAAC,EAAAC,cAAA,qBApGwB,SAA9B6hB,EAAQgE,kBAER/lB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WAAS0H,MAAM,wEACZma,EAAQuD,MAAM,GACbtlB,EAAAC,EAAAC,cAAA,OAAKE,UAAW2hB,EAAQgE,mBACtB/lB,EAAAC,EAAAC,cAAA,OACEklB,IAAI,UACJC,IAAKtD,EAAQuD,MAAM,GAAGljB,IACtBhC,UAAU,uBAIdJ,EAAAC,EAAAC,cAAA,OACEklB,IAAI,UACJC,IAAKE,KACLnlB,UAAU,sBAGZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,qBACb2hB,EAAQyD,UACJxlB,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACHpE,UAAU,mBACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,kBAAAvS,OACA0hB,EAAQvb,IADRnG,OAEC0hB,EAAQiE,YAEVjE,EAAQyD,WAEP,aAWNxlB,EAAAC,EAAAC,cAAA,YACG,IACDF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLgE,QAAS,SAAAgB,GAAC,OAAI6e,EAAqB7e,IACnC8f,iBAAgB/D,EAAQvb,KAJ5B,4BA1CV,IA4GJ,kBCvOCyf,GA9KM,WACnB,IAAI5W,EAAO,IAAIpN,EADUoJ,EAEDC,qBAFCC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAElBkE,EAFkBhE,EAAA,GAEZuQ,EAFYvQ,EAAA,GAAAI,EAIKL,qBAJLM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAIlBzJ,EAJkB0J,EAAA,GAITsa,EAJSta,EAAA,GAAAiM,EAKKvM,qBALLwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAKlBsO,EALkBrO,EAAA,GAKTsO,EALStO,EAAA,GAAAG,EAMG3M,mBAAS,IANZ4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAMlBoO,EANkBnO,EAAA,GAMVoO,EANUpO,EAAA,GAQrB/R,EADU8d,cACS9d,SACjBwM,EAAgBxM,EAASiN,SAASC,MAAM,KAAK,GAC7CT,EAAmBzM,EAASiN,SAASC,MAAM,KAAK,GAEtDqR,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,IAAAjE,EAAA,OAAAmE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACOxE,EACpB/M,IADoB,GAAAjC,OAEhBuB,EAFgB,gBAAAvB,OAEKsS,EAFL,KAAAtS,OAEsBuS,EAFtB,0BAAAvS,OAE+DgmB,EAF/D,eAAAhmB,OAEmFmP,KAAKC,QAE5G1L,KAAK,SAAAuL,GAAQ,OAAIA,EAASC,OALb,OACVD,EADUqE,EAAA4S,KAMhBzK,EAAQxM,EAASC,MACjB2W,EAAW5W,EAASpN,SACpBkkB,EAAW9W,EAAS6W,SARJ,wBAAAxS,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,EAUf2jB,IACC,CAACyB,EAAQ1T,EAAeC,EAAkBvD,IAE7C,IAAMmX,EAAa,SAAAxgB,GACjB,IAAIwC,EAASxC,EAAEwC,OACX0c,EAAOmB,EAAOhT,MAAM,KAExB,GAAI7K,EAAOsc,QAAS,CAClB,IAAI1T,EAAQ8T,EAAKuB,QAAQzgB,EAAEwC,OAAO9C,MAClCwf,EAAK7I,OAAOjL,EAAO,GACnBgK,QAAQC,IAAIjK,QAEZ8T,EAAK/T,KAALqJ,MAAA0K,EAAItkB,OAAAkR,EAAA,EAAAlR,CAASylB,GAAThmB,OAAA,CAAiB2F,EAAEwC,OAAO9C,QAEhC4gB,EAAUpB,EAAKwB,SAGjB,OACE1mB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,0BACX5H,EAAAC,EAAAC,cAAA,6BAEFF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,0BACX5H,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,QAAM2jB,OAAO,IAAIjc,MAAM,uBACpBue,EACGA,EAAQQ,YAAYxc,IAAI,SAAA6B,GACtB,OACEhM,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,yCACT5H,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLwF,GAAIwF,EACJtG,KAAMsG,EACNpE,MAAM,oBACNkd,SAAUuB,EAAOphB,SAAS+G,GAC1BhH,QAAS,SAAAgB,GAAC,OAAIwgB,EAAWxgB,MAE3BhG,EAAAC,EAAAC,cAAA,SAAO4jB,IAAK9X,EAAQpE,MAAM,kBACvBoE,MAKT,KAGRhM,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,0BACX5H,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,QAAM2jB,OAAO,IAAIjc,MAAM,uBACrB5H,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,gBAAgBjD,MAAO,CAAEiiB,YAAa,MAC9CT,EACGA,EAAQ/B,SAASja,IAAI,SAAA6B,GACnB,OACEhM,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,yCACT5H,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLwF,GAAIwF,EACJtG,KAAMsG,EACNpE,MAAM,oBACNkd,SAAUuB,EAAOphB,SAAS+G,GAC1BhH,QAAS,SAAAgB,GAAC,OAAIwgB,EAAWxgB,MAE3BhG,EAAAC,EAAAC,cAAA,SAAO4jB,IAAK9X,EAAQpE,MAAM,kBACvBoE,MAKT,MAIVhM,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,2BACX5H,EAAAC,EAAAC,cAAC2mB,GAAA,QAAD,CACEzmB,UAAU,6CACV0mB,SAAUnU,EAAc,IAAIC,EAAiB,OAC7CrD,KAAMA,GAAc,IAHtB,YASJvP,EAAAC,EAAAC,cAAA,OAAK0H,MAAM,0BACX5H,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wCAAwC2b,QAAQ,QAC7D/b,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,KAAGsG,GAAG,yBACJxG,EAAAC,EAAAC,cAAA,QACE6mB,MAAM,6BACN1M,EAAE,qMAGNra,EAAAC,EAAAC,cAAA,KAAGsG,GAAG,2BACJxG,EAAAC,EAAAC,cAAA,QACE6mB,MAAM,6BACN1M,EAAE,gNAGNra,EAAAC,EAAAC,cAAA,KAAGsG,GAAG,qBACJxG,EAAAC,EAAAC,cAAA,QACE6mB,MAAM,6BACN1M,EAAE,oPAKVra,EAAAC,EAAAC,cAAA,SAAOE,UAAU,8BACfJ,EAAAC,EAAAC,cAAA,SAAOE,UAAU,oBACfJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBACX8B,EACGA,EAAQiI,IAAI,SAAA6c,GACV,OACEhnB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,MAAIE,UAAU,qBAAqB4mB,MAIzC,KAGRhnB,EAAAC,EAAAC,cAAA,SAAOE,UAAU,kBACdmP,EACCA,EAAKpF,IAAI,SAAAoF,GACP,OACEvP,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBACX8B,EACGA,EAAQiI,IAAI,SAAA6c,GAAM,OAChBhnB,EAAAC,EAAAC,cAAA,MAAIE,UAAU,kBAAkBmP,EAAKyX,MAEvC,MAKVhnB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKklB,IAAI,WAAWC,IAAI,oBACxBrlB,EAAAC,EAAAC,cAAA,mCC2HDmiB,8MA3Qb7P,kBAAoB,IAAIpD,IACxBmD,eAAiB,IAAIxB,IAErBvN,MAAQ,CACN4H,UAAW,GACXwH,iBAAkB,GAClBD,cAAe,GACf8C,gBAAiB,GACjBwR,qBAAsB,GACtB9b,SAAU,GACVyK,QAAS,GACT5J,OAAQ,GACRkb,gBAAiB,GACjB5T,cAAc,EACd6T,aAAc,EACdrU,eAAgB,MAoHlBmQ,SAAW,SAAAjX,GAAU,IAEfkX,EADItN,EAAY7S,EAAKS,MAAjBoS,QAER,IACEsN,EAAO,IAAIlR,OAAOhG,EAAQ,KAC1B,MAAOhG,GACPkd,EAAO,IAET,IAAMgE,EAAkBtR,EAAQzL,IAAI,SAAA0L,GAClC,IAAMuR,EAAuBvR,EAAOC,aAAa9J,OAAO,SAAA+J,GAAU,OAChEmN,EAAKE,KAAKrN,EAAW/L,SAEvB,OAAoC,IAAhCod,EAAqBlmB,OAChB,KAEFN,OAAAqhB,GAAA,EAAArhB,CAAA,GAAKiV,EAAZ,CAAoBC,aAAcsR,MAEpCrkB,EAAKoB,SAAS,CAAE6H,SAAQkb,mOA/GyBpmB,KAAKgC,MAAM2P,MAAMC,OAA1DtH,cAAoBwH,IAAT3G,iBAEjBnL,KAAKyR,eAAeuB,wBACdwN,QAAQC,IAAI,CAChBzgB,KAAKmT,eAAe7I,EAAWwH,GAC/B9R,KAAK4T,cAActJ,YAGrBtK,KAAKumB,gEAELvmB,KAAKqD,SAAS,CAAEmP,cAAc,6BAE9BxS,KAAKyR,eAAe8B,iOAIClL,EAAWC,sFAC6BtI,KAAK0C,MAA5D4H,cAAWwH,qBAAkBgD,YAAStC,iBAE5ClI,IAAchC,EAAUgC,WACxBwH,IAAqBxJ,EAAUwJ,qCAER,IAAnBgD,EAAQ1U,QAAiBoS,mCAEzBxS,KAAKyR,eAAeuB,wBACdhT,KAAKmT,eAAe7I,EAAWwH,0DAErC9R,KAAKqD,SAAS,CAAEmP,cAAc,6BAE9BxS,KAAKyR,eAAe8B,qCAGxBvT,KAAKumB,4KAIO,IAAA1jB,EAAA7C,KAAAuF,EAC0BvF,KAAK0C,MAArC4H,EADM/E,EACN+E,UAAWwH,EADLvM,EACKuM,iBACnBhP,MAAK,GAAAvD,OACAuB,EADA,SAAAvB,OACc+K,EADd,KAAA/K,OAC2BuS,EAD3B,qCAAAvS,OAC+EmP,KAAKC,QAEtF1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAujB,GACJ3jB,EAAKQ,SAAS,CACZgjB,aAAcG,EAAatb,OACzB,SAAA2J,GAAI,MAA+B,SAA3BA,EAAKoQ,oBACb7kB,0FAKWkK,EAAWwH,4FAC9BvR,OAAOmT,OAAO,EAAG,YACW1T,KAAK0R,kBAAkB8C,sBACjDlK,EACAwH,iBAFIwC,SAIAQ,EAAUtE,EAAS8D,EAAcjL,IAAI,SAAAwL,GAAI,OAAIA,EAAKC,WAClDqR,EAAuB/U,EAAekD,EAAc,GAAG5L,aAE7D1I,KAAKqD,SAAS,CACZwO,cAAeyC,EAAc,GAAGpL,MAEhCid,uBACArR,UACAsR,gBAAiBtR,aAGS9U,KAAK0R,kBAAkBmC,mCAA7CC,UACAC,EAAmBD,EAAc5I,OACrC,SAAA8I,GAAE,OAAIA,EAAG9K,MAAM+K,cAAc1C,QAAQ,KAAM,MAAQjH,KAEhClK,OAAS,IACtBqmB,EAAgB1S,EAAiB,GAAG1J,SAASa,OACjD,SAAAwb,GAAE,OAAIA,EAAGtb,SAAW0G,IAEtB9R,KAAKqD,SAAS,CAAEsR,gBAAiB8R,EAAc,GAAGpS,SAC9CsS,EAAY5S,EAAiB,GAAGG,gBAAgB7K,IAClD,SAAAnJ,GAAI,OAAIA,EAAKgJ,QAEflJ,KAAKqD,SAAS,CAAE2O,eAAgB2U,yLAIhBrc,2FACUtK,KAAK0R,kBAAkBmC,mCAA7CC,UACAC,EAAmBD,EAAc5I,OACrC,SAAA8I,GAAE,OAAIA,EAAG9K,MAAM+K,cAAc1C,QAAQ,KAAM,MAAQjH,KAEhClK,OAAS,GAC5BJ,KAAKqD,SAAS,CAAEgH,SAAU0J,EAAiB,GAAG1J,SAAS8J,gJAwBlD,IAAA4B,EAAA/V,KAAAwV,EAYHxV,KAAK0C,MAVP4H,EAFKkL,EAELlL,UACAwH,EAHK0D,EAGL1D,iBACAD,EAJK2D,EAIL3D,cACA8C,EALKa,EAKLb,gBACAwR,EANK3Q,EAML2Q,qBACAC,EAPK5Q,EAOL4Q,gBACA/b,EARKmL,EAQLnL,SACAa,EATKsK,EASLtK,OACAsH,EAVKgD,EAULhD,aACAR,EAXKwD,EAWLxD,eAGF,GAAIQ,EACF,OAAOtT,EAAAC,EAAAC,cAAC+W,EAAD,MAGT,IAAMyQ,EAAaR,EAAgB/c,IAAI,SAAA0L,GAAM,OAChC,OAAXA,EAAkB,KAChB7V,EAAAC,EAAAC,cAACynB,GAAD,CACEpjB,IAAKsR,EAAOG,IACZ5K,UAAWA,EACXyK,OAAQA,EACRyM,SAAS,EACTrW,QAAS2G,EACTE,eAAgBA,MAKtB,OACE9S,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiB2I,aAAW,cACzC/I,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,kDACR5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAG,IAAImD,MAAM,wBAAnB,SAIF5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,uBAAuBwa,eAAa,YAC7CzP,EADD,MACmBC,KAIvB5S,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE4B,MAAO,YAAcoM,GAClC3S,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,YAAYwS,GAC5B5S,EAAAC,EAAAC,cAAA,QAAME,UAAU,8BAAhB,IAA+CqV,IAEjDzV,EAAAC,EAAAC,cAAA,SAAI+mB,GAEJjnB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACE5nB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACGtmB,aAAaC,QAAQ,SACpBvB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,wBACE9mB,KAAK0C,MAAM2jB,aAAe,EAC5BnnB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,wBAEA,GAGF5nB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,qBACA5nB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,eACA5nB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,4BAGDtmB,aAAaC,QAAQ,SACpBvB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACE5nB,EAAAC,EAAAC,cAAC2nB,GAAD,CAAazc,UAAWA,EAAWa,QAAS2G,IAC5C5S,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,KAEnDrK,KAAK0C,MAAM2jB,aAAe,EAC5BnnB,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACE5nB,EAAAC,EAAAC,cAAC2nB,GAAD,CAAazc,UAAWA,EAAWa,QAAS2G,IAC5C5S,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,KAGrD,GAGFnL,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACE5nB,EAAAC,EAAAC,cAAA,QAAM2jB,OAAO,IAAIjc,MAAM,yCACrB5H,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCACbJ,EAAAC,EAAAC,cAAA,SACEE,UAAU,iDACV0jB,IAAI,oBAFN,iBAMA9jB,EAAAC,EAAAC,cAAA,SACEc,KAAK,SACLoG,YAAY,sBACZZ,GAAG,mBACHpG,UAAU,oCACVkF,SAAU,SAAAC,GAAK,OAAIsR,EAAKoM,SAAS1d,EAAMiD,OAAO7C,QAC9CA,MAAOqG,MAIbhM,EAAAC,EAAAC,cAAA,aAAQwnB,GACR1nB,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,KAErDnL,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACE5nB,EAAAC,EAAAC,cAAC4nB,GAAD,MACA9nB,EAAAC,EAAAC,cAACkX,EAAD,CAAmBhM,UAAWA,EAAWD,SAAUA,KAErDnL,EAAAC,EAAAC,cAAC0nB,GAAA,EAAD,KACE5nB,EAAAC,EAAAC,cAAC6nB,GAAD,CAAS3c,UAAWA,EAAWa,QAAS2G,0DAjPlB9P,EAAOU,GAAO,IAAAwkB,EACKllB,EAAM2P,MAAMC,OAArDtH,EADoC4c,EACpC5c,UAAoBwH,EADgBoV,EACzB/b,QACnB,OACEb,IAAc5H,EAAM4H,WACpBwH,IAAqBpP,EAAMoP,iBAEpB,CACLxH,YACAwH,mBACAgD,QAAS,GACTtC,cAAc,GAKX,YAxCkBpO,gCCXvB+iB,eACJ,SAAAA,EAAYnlB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmnB,IACjBllB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAqnB,GAAA/kB,KAAApC,KAAMgC,KAEDU,MAAQ,CACX+L,KAAM,GACN2Y,KAAM,GACNC,YAAY,EACZhV,KAAMpQ,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KACzC2C,IAAK,GACLhM,MAAO,GACPsE,MAAO,GACPC,OAAQ,GACRvN,KAAM,GACNwI,YAAa,GACbrD,SAAU,GACV/D,IAAK,GACLoM,gBAAiB,GACjBC,kBAAmB,GACnBC,SAAU,GACVC,WAAY,GACZC,SAAU,IAEZ7L,EAAKqlB,WAAarlB,EAAKqlB,WAAWvO,KAAhBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAtBDA,iFAyBDslB,GAChB,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEqF,YAAa8e,iDAGVD,GACnB,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEqK,gBAAiB8Z,mDAGZD,GACrB,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEsK,kBAAmB6Z,6CAGpBD,GACf,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEwK,WAAY2Z,2CAGfD,GACb,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEyK,SAAU0Z,gDAGR,IAAA3kB,EAAA7C,KAClBA,KAAKqD,SAAS,CAAE6R,IAAKlV,KAAK0C,MAAM2P,KAAK,KAErC,IAAIoV,EAAO,GAAAloB,OAAMuB,EAAN,uBACXgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ7kB,EAAKQ,SAAS,CAAE+jB,KAAMM,MAG1B,IAAIC,EAAa,GAAApoB,OAAMuB,EAAN,UAAAvB,OAAqBS,KAAK0C,MAAM2P,KAAK,GAArC,iBAGjBvP,MAAM6kB,GACH1kB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CACZoL,KAAMrL,0CAKP5C,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS0D,SAAS,qBACjD4b,MACE,yEAEF/f,KAAKgC,MAAMkhB,QAAQ7S,KAAK,MALxBrQ,KAAKgC,MAAMkhB,QAAQ7S,KAAK,wCAUjB5L,GACTzE,KAAKgC,MAAMkhB,QAAQ7S,KAAK,uBAAyBrQ,KAAK0C,MAAMwS,sCAI5DlV,KAAK4nB,YACL,IAAI1S,EAAM,GACNhM,EAAQ,GACRsE,EAAQ,GACRC,EAAS,GACTvN,EAAO,GACPwI,EAAc,GACdrD,EAAW,GACX/D,EAAM,GACNoM,EAAkB,GAClBC,EAAoB,GACpBC,EAAW,GACXC,EAAa,GACbC,EAAW,GAIf,GAAI9N,KAAK0C,MAAM+L,KAAKyG,IAAK,CACvB,IAAIL,EAAO7U,KAAK0C,MAAM+L,KACtByG,EAAML,EAAKK,IAAI,GAAGrQ,MAClBqE,EAAQ2L,EAAK3L,MAAM,GAAGrE,MACtB2I,EAAQqH,EAAKgT,YAAY,GAAKhT,EAAKgT,YAAY,GAAGhjB,MAAQ,KAC1D4I,EAASoH,EAAKiT,eAAe,GAAKjT,EAAKiT,eAAe,GAAGjjB,MAAQ,KACjE3E,EAAO2U,EAAK1G,WAAW,GAAGtJ,MAC1B6D,EAAcmM,EAAKkT,kBAAkB,GACjClT,EAAKkT,kBAAkB,GAAGljB,MAC1B,KACJQ,EAAWwP,EAAKmT,eAAe,GAAKnT,EAAKmT,eAAe,GAAGnjB,MAAQ,KACnEvD,EAAMuT,EAAKoT,UAAU,GAAKpT,EAAKoT,UAAU,GAAGpjB,MAAQ,KACpD6I,EAAkBmH,EAAKqT,sBAAsB,GACzCrT,EAAKqT,sBAAsB,GAAGrjB,MAC9B,KACJ8I,EAAoBkH,EAAKsT,wBAAwB,GAC7CtT,EAAKsT,wBAAwB,GAAGtjB,MAChC,KACJ+I,EAAWiH,EAAKuT,eAAe,GAAKvT,EAAKuT,eAAe,GAAGvjB,MAAQ,KACnEgJ,EAAagH,EAAKwT,iBAAiB,GAC/BxT,EAAKwT,iBAAiB,GAAGxjB,MACzB,KACJiJ,EAAW+G,EAAKyT,eAAe,GAAKzT,EAAKyT,eAAe,GAAGzjB,MAAQ,KAMrE,OAAI7E,KAAK0C,MAAM+L,KAAKyG,KAClBoF,QAAQC,IAAI/M,GAEVtO,EAAAC,EAAAC,cAACmpB,GAAD,CACErT,IAAKA,EACLhM,MAAOA,EACPsE,MAAOA,EACPC,OAAQA,EACRvN,KAAMA,EACNwI,YAAaA,EACbrD,SAAUA,EACV/D,IAAKA,EACLoM,gBAAiBA,EACjBC,kBAAmBA,EACnBC,SAAUA,EACVC,WAAYA,EACZC,SAAUA,EACVwZ,WAAYtnB,KAAKsnB,cAId,YA3JchlB,IAAM8B,WAgK3BokB,eAGJ,SAAAA,EAAYxmB,GAAO,IAAA+T,EAAA,OAAAjW,OAAAC,EAAA,EAAAD,CAAAE,KAAAwoB,IACjBzS,EAAAjW,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAA0oB,GAAApmB,KAAApC,KAAMgC,KAHRyP,eAAiB,IAAIxB,EAEF8F,EADnBrE,kBAAoB,IAAIpD,EACLyH,EAoGnB0S,YAAc,WACZ1S,EAAK/T,MAAMkhB,QAAQ7S,KAAK,2BAnGxB0F,EAAKrT,MAAQ,CACXwS,IAAKa,EAAK/T,MAAMkT,IAChBhM,MAAO6M,EAAK/T,MAAMkH,MAClBsE,MAAOuI,EAAK/T,MAAMwL,MAClBC,OAAQsI,EAAK/T,MAAMyL,OACnBvN,KAAM6V,EAAK/T,MAAM9B,KACjBwI,YAAaqN,EAAK/T,MAAM0G,YACxBrD,SAAU0Q,EAAK/T,MAAMqD,SACrB/D,IAAKyU,EAAK/T,MAAMV,IAChBoM,gBAAiBqI,EAAK/T,MAAM0L,gBAC5BC,kBAAmBoI,EAAK/T,MAAM2L,kBAC9BC,SAAUmI,EAAK/T,MAAM4L,SACrBC,WAAYkI,EAAK/T,MAAM6L,WACvBC,SAAUiI,EAAK/T,MAAM8L,SACrB4a,UAAU,EACVrB,YAAY,EACZD,KAAM,IAERrR,EAAK4S,YAAc5S,EAAK4S,YAAY5P,KAAjBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACnBA,EAAK6S,YAAc7S,EAAK6S,YAAY7P,KAAjBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACnBA,EAAK8S,aAAe9S,EAAK8S,aAAa9P,KAAlBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACpBA,EAAK+S,WAAa/S,EAAK+S,WAAW/P,KAAhBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IAClBA,EAAKgT,WAAahT,EAAKgT,WAAWhQ,KAAhBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IAClBA,EAAKiT,eAAiBjT,EAAKiT,eAAejQ,KAApBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACtBA,EAAKkT,UAAYlT,EAAKkT,UAAUlQ,KAAfjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACjBA,EAAKmT,qBAAuBnT,EAAKmT,qBAAqBnQ,KAA1BjZ,OAAAma,GAAA,EAAAna,CAAAiW,IAC5BA,EAAKoT,uBAAyBpT,EAAKoT,uBAAuBpQ,KAA5BjZ,OAAAma,GAAA,EAAAna,CAAAiW,IAC9BA,EAAKqT,eAAiBrT,EAAKqT,eAAerQ,KAApBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACtBA,EAAKsT,iBAAmBtT,EAAKsT,iBAAiBtQ,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IACxBA,EAAKuT,eAAiBvT,EAAKuT,eAAevQ,KAApBjZ,OAAAma,GAAA,EAAAna,CAAAiW,IA/BLA,mFAmCC,IAAA6C,EAAA5Y,KACdynB,EAAO,GAAAloB,OAAMuB,EAAN,uBACXgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ9O,EAAKvV,SAAS,CAAE+jB,KAAMM,0CAQhBjjB,GACVzE,KAAKqD,SAAS,CAAE6F,MAAOzE,EAAMI,4CAGnBJ,GACVzE,KAAKqD,SAAS,CAAEmK,MAAO/I,EAAMI,6CAGlBJ,GACXzE,KAAKqD,SAAS,CAAEoK,OAAQhJ,EAAMI,2CAGrBJ,GACTzE,KAAKqD,SAAS,CAAEnD,KAAMuE,EAAMI,2CAGnBJ,GACTzE,KAAKqD,SAAS,CAAEqF,YAAajE,EAAMgT,OAAOC,mDAI7BjT,GACbzE,KAAKqD,SAAS,CAAEgC,SAAUZ,EAAMI,0CAExBJ,GACRzE,KAAKqD,SAAS,CAAE/B,IAAKmD,EAAMI,qDAGRJ,GACnBzE,KAAKqD,SAAS,CAAEqK,gBAAiBjJ,EAAMgT,OAAOC,2DAIzBjT,GACrBzE,KAAKqD,SAAS,CAAEsK,kBAAmBlJ,EAAMgT,OAAOC,mDAInCjT,GACbzE,KAAKqD,SAAS,CAAEuK,SAAUnJ,EAAMI,iDAGjBJ,GACfzE,KAAKqD,SAAS,CAAEwK,WAAYpJ,EAAMgT,OAAOC,mDAI5BjT,GACbzE,KAAKqD,SAAS,CAAEyK,SAAUrJ,EAAMgT,OAAOC,uDAQtBrP,EAAWC,GACxBtI,KAAK0C,MAAM2kB,gDASJkC,EAAIC,GAIf,QAHY,IAAI9a,KAAK6a,GACT,IAAI7a,KAAK8a,iFASJ/kB,0GACb8I,EAAavN,KAAK0C,MAAMwS,IACxBhM,EAAQlJ,KAAKuY,KAAKrP,MAAMrE,MACxB2I,EAAQxN,KAAKuY,KAAK/K,MAAM3I,MACxB4I,EAASzN,KAAKuY,KAAK9K,OAAO5I,MAE1B3E,EAAOF,KAAKuY,KAAKrY,KAAK2E,MACtB6D,EAAc1I,KAAK0C,MAAMgG,YACzBrD,EAAWrF,KAAKuY,KAAKlT,SAASR,MAC9BvD,EAAMtB,KAAKuY,KAAKjX,IAAIuD,MACpB6I,EAAkB1N,KAAK0C,MAAMgL,gBAC7BC,EAAoB3N,KAAK0C,MAAMiL,kBAC/BE,EAAa7N,KAAK0C,MAAMmL,WACxBC,EAAW9N,KAAK0C,MAAMoL,SACtBF,EAAW5N,KAAKuY,KAAK3K,SAAS/I,MAC9BuiB,EAAO5mB,aAAaC,QAAQ,cAE5BT,KAAKypB,aAAajc,EAAOC,IAC3B3K,MAAM,GAAAvD,OAAGuB,EAAH,UAAoByM,EAAa,oBAAqB,CAC1DxK,OAAQ,QACRC,YAAa,UACb0mB,QAAS,iBACTtoB,QAAS,CACPV,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgBwmB,GAGlB1lB,KAAMiF,KAAKC,UAAU,CACnB8E,OAAQ,CACNxL,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,uCAGRoI,MAAO,CACL,CACErE,MAAOqE,IAGX2e,YAAa,CACX,CACEhjB,MAAO2I,GAAgB,OAG3Bsa,eAAgB,CACd,CACEjjB,MAAO4I,GAAkB,OAG7BU,WAAY,CACV,CACEtJ,MAAO3E,IAGX6nB,kBAAmB,CACjB,CACEljB,MAAO6D,EACPihB,OAAQ,eAGZ3B,eAAgB,CACd,CACEnjB,MAAOQ,IAGX4iB,UAAW,CACT,CACEpjB,MAAOvD,IAGX4mB,sBAAuB,CACrB,CACErjB,MAAO6I,EACPic,OAAQ,eAGZxB,wBAAyB,CACvB,CACEtjB,MAAO8I,EACPgc,OAAQ,eAGZvB,eAAgB,CACd,CACEvjB,MAAO+I,IAGXya,iBAAkB,CAChB,CACExjB,MAAOgJ,EACP8b,OAAQ,eAGZrB,eAAgB,CACd,CACEzjB,MAAOiJ,EACP6b,OAAQ,eAGZzpB,KAAM,CACJ,CACE+L,UAAW,0BAKnB1D,WAAW,WACTqhB,EAAK5nB,MAAMslB,cACV,MAEHvH,MAAM,mBAERtb,EAAMU,sJAIN,OACEjG,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,KAAR,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,2BAAR,0BAFF,mBAGgB,MAGlBzE,EAAAC,EAAAC,cAAA,qCACAF,EAAAC,EAAAC,cAAA,qCACAF,EAAAC,EAAAC,cAAA,KAAGyE,MAAO,CAAE2B,MAAO,UACjBtG,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,uBAAApE,OAAyBS,KAAK0C,MAAMwS,MACzC,IACDhW,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,eAFX,QAEgC,MAIlC5H,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,2BACbJ,EAAAC,EAAAC,cAAA,QACEE,UAAU,OACVoG,GAAI,qBACJX,SAAU/E,KAAK6pB,aAAa9Q,KAAK/Y,OAEjCd,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACL8H,IAAI,QACJtC,GAAI,QACJb,MAAO7E,KAAK0C,MAAMwG,MAClB1E,SAAUxE,KAAK2oB,YAAY5P,KAAK/Y,MAChCsJ,UAAQ,EACRhD,YAAY,YAKlBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACL8H,IAAI,QACJnD,MAAO7E,KAAK0C,MAAM8K,MAClBhJ,SAAUxE,KAAK4oB,YAAY7P,KAAK/Y,MAChCsG,YAAY,UAGhBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACL8H,IAAI,SACJnD,MAAO7E,KAAK0C,MAAM+K,OAClBjJ,SAAUxE,KAAK6oB,aAAa9P,KAAK/Y,MACjCsG,YAAY,WAKlBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,UACE4I,IAAK,OACLnD,MAAO7E,KAAK0C,MAAMxC,KAClBsE,SAAUxE,KAAK8oB,WAAW/P,KAAK/Y,OAE/Bd,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,UAAf,UACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,gBAAf,gBACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,WAAf,WACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,aAAf,gBAKN3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMgG,YACpB8O,OAAQ,CACN5P,OAAQ5H,KAAK+oB,YAEfvkB,SAAUxE,KAAK+oB,WACf/K,YAAY,MACZ1U,UAAQ,MAMdpK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACL8H,IAAI,WACJnD,MAAO7E,KAAK0C,MAAM2C,SAClBb,SAAUxE,KAAKgpB,eAAejQ,KAAK/Y,MACnCsG,YAAY,eAKlBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACL8H,IAAI,MACJnD,MAAO7E,KAAK0C,MAAMpB,IAClBkD,SAAUxE,KAAKipB,UAAUlQ,KAAK/Y,MAC9BsJ,UAAQ,EACRhD,YAAY,UAKlBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMgL,gBACpB8J,OAAQ,CACN5P,OAAQ5H,KAAKkpB,sBAEflL,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMiL,kBACpB6J,OAAQ,CACN5P,OAAQ5H,KAAKmpB,wBAEfnL,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMmL,WACpB2J,OAAQ,CACN5P,OAAQ5H,KAAKqpB,kBAEfrL,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMoL,SACpB0J,OAAQ,CACN5P,OAAQ5H,KAAKspB,gBAEftL,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACL8H,IAAI,WACJnD,MAAO7E,KAAK0C,MAAMkL,SAClBpJ,SAAUxE,KAAKopB,eAAerQ,KAAK/Y,MACnCsG,YAAY,eAKlBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,wBArbzCvC,IAAM8B,WAAvBokB,GA+CGsB,aAAe,CACpBC,OAAQC,KAAUC,QAgZtB,IAMeC,GANO,kBACpBhrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,+BAA+BgY,UAAWlD,iBCpmB1DmD,ICFmBhoB,IAAM8B,sBDG7B,SAAAkmB,EAAYtoB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsqB,IACjBroB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAwqB,GAAAloB,KAAApC,KAAMgC,KAEDuoB,kBAAoBtoB,EAAKsoB,kBAAkBxR,KAAvBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACzBA,EAAKuoB,qBAAuBvoB,EAAKuoB,qBAAqBzR,KAA1BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAC5BA,EAAKwoB,uBAAyBxoB,EAAKwoB,uBAAuB1R,KAA5BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAC9BA,EAAKyoB,iBAAmBzoB,EAAKyoB,iBAAiB3R,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACxBA,EAAK0oB,eAAiB1oB,EAAK0oB,eAAe5R,KAApBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAEtBA,EAAKS,MAAQ,CACX+L,KAAM,GACN2Y,KAAM,GACNC,YAAY,EACZ3d,QAAS,UACThB,YAAa,GACbgF,gBAAiB,GACjBC,kBAAmB,GACnBE,WAAY,GACZC,SAAU,IAlBK7L,iFAsBDslB,GAChB,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEqF,YAAa8e,iDAGVD,GACnB,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEqK,gBAAiB8Z,mDAGZD,GACrB,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEsK,kBAAmB6Z,6CAGpBD,GACf,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEwK,WAAY2Z,2CAGfD,GACb,IAAIC,EAAaD,EAAI9P,OAAOC,UAC5B1X,KAAKqD,SAAS,CAAEyK,SAAU0Z,+CAGTnf,EAAWC,GAAW,IAAAzF,EAAA7C,KACnCA,KAAK0C,MAAM2kB,aACb9e,WAAW,WACT1F,EAAKb,MAAMkhB,QAAQ7S,KAAK,4BAEvB,KAEHiK,QAAQC,IAAI,2DAKT/Z,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS0D,SAAS,qBACjD4b,MACE,yEAEF/f,KAAKgC,MAAMkhB,QAAQ7S,KAAK,MALxBrQ,KAAKgC,MAAMkhB,QAAQ7S,KAAK,KAO1BiK,QAAQC,IAAI/Z,aAAaC,QAAQ,sDAGf,IAAAsV,EAAA/V,KACdynB,EAAO,GAAAloB,OAAMuB,EAAN,uBACXgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ3R,EAAK1S,SAAS,CAAE+jB,KAAMM,2CAIf6B,EAAIC,GAIf,QAHY,IAAI9a,KAAK6a,GACT,IAAI7a,KAAK8a,yCASV/kB,GAAO,IAAAmU,EAAA5Y,KAClByE,EAAMU,iBACN,IAAI+D,EAAQlJ,KAAKuY,KAAKrP,MAAMrE,MACxB2I,EAAQxN,KAAKuY,KAAK/K,MAAM3I,MACxB4I,EAASzN,KAAKuY,KAAK9K,OAAO5I,MAC1B3E,EAAO,SACPF,KAAKuY,KAAKrY,KAAK2E,QACjB3E,EAAOF,KAAKuY,KAAKrY,KAAK2E,OAGxB,IAAI6D,EAAc1I,KAAK0C,MAAMgG,YACzBrD,EAAWrF,KAAKuY,KAAKlT,SAASR,MAC9BvD,EAAMtB,KAAKuY,KAAKjX,IAAIuD,MACpB6I,EAAkB1N,KAAK0C,MAAMgL,gBAC7BC,EAAoB3N,KAAK0C,MAAMiL,kBAC/BC,EAAW5N,KAAKuY,KAAK3K,SAAS/I,MAC9BgJ,EAAa7N,KAAK0C,MAAMmL,WACxBC,EAAW9N,KAAK0C,MAAMoL,SAEtB8c,EAAQpqB,aAAaC,QAAQ,cAG7BT,KAAKypB,aAAajc,EAAOC,GAC3B3K,MAAK,GAAAvD,OAAIuB,EAAJ,0BAAoC,CACvCkC,YAAa,UACbD,OAAQ,OACR2mB,QAAS,iBACTtoB,QAAS,CACPV,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgBgqB,EAChB/pB,cAAe,SAEjBa,KAAMiF,KAAKC,UAAU,CACnB8E,OAAQ,CACNxL,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,uCAGRoI,MAAO,CACL,CACErE,MAAOqE,IAGX2e,YAAa,CACX,CACEhjB,MAAO2I,GAAgB,OAG3Bsa,eAAgB,CACd,CACEjjB,MAAO4I,GAAkB,OAG7BU,WAAY,CACV,CACEtJ,MAAO3E,IAGX6nB,kBAAmB,CACjB,CACEljB,MAAO6D,EACPihB,OAAQ,eAGZ3B,eAAgB,CACd,CACEnjB,MAAOQ,IAGX4iB,UAAW,CACT,CACEpjB,MAAOvD,IAGX4mB,sBAAuB,CACrB,CACErjB,MAAO6I,EACPic,OAAQ,eAGZxB,wBAAyB,CACvB,CACEtjB,MAAO8I,EACPgc,OAAQ,eAGZvB,eAAgB,CACd,CACEvjB,MAAO+I,IAGXya,iBAAkB,CAChB,CACExjB,MAAOgJ,EACP8b,OAAQ,eAGZrB,eAAgB,CACd,CACEzjB,MAAOiJ,EACP6b,OAAQ,eAIZzpB,KAAM,CACJ,CACE+L,UAAW,0BAKhBhJ,KAAK,SAAAuL,GAAQ,OAAIA,EAASrL,SAC1BF,KAAK,SAAAwL,GAAI,OACRmK,EAAK5W,MAAMkhB,QAAQ7S,KAAnB,uBAAA9Q,OAA+CkP,EAAKyG,IAAI,GAAGrQ,UAG/Dkb,MAAM,oDASR,OADA/f,KAAK4nB,YAEH1oB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,KAAR,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,2BAAR,0BAFF,qBAGkB,MAGpBzE,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,qCAEAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,2BACbJ,EAAAC,EAAAC,cAAA,QACEE,UAAU,OACVoG,GAAI,uBACJX,SAAU/E,KAAK6pB,aAAa9Q,KAAK/Y,OAEjCd,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAO8H,IAAI,QAAQsB,UAAQ,EAAChD,YAAY,YAIxDpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAO8H,IAAI,QAAQ1B,YAAY,UAE7CpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAO8H,IAAI,SAAS1B,YAAY,WAIhDpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,UAAQ4I,IAAK,QACX9I,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,UAAf,UACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,gBAAf,gBACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,WAAf,WACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,aAAf,gBAKN3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMgG,YACpB8O,OAAQ,CACN5P,OAAQ5H,KAAKuqB,mBAEfvM,YAAY,MACZ1U,UAAQ,MAMdpK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAO8H,IAAI,WAAW1B,YAAY,eAIlDpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,MAAM8H,IAAI,MAAMsB,UAAQ,EAAChD,YAAY,UAIrDpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMgL,gBACpB8J,OAAQ,CACN5P,OAAQ5H,KAAKwqB,sBAEfxM,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMiL,kBACpB6J,OAAQ,CACN5P,OAAQ5H,KAAKyqB,wBAEfzM,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMmL,WACpB2J,OAAQ,CACN5P,OAAQ5H,KAAK0qB,kBAEf1M,YAAY,UAOlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAACmY,GAAApY,EAAD,CACEuK,QAAS1J,KAAK0C,MAAMoL,SACpB0J,OAAQ,CACN5P,OAAQ5H,KAAK2qB,gBAEf3M,YAAY,UAMlB9e,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAO8H,IAAI,WAAW1B,YAAY,eAWlDpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,wBAhXnCvC,IAAM8B,YAiYpBymB,GANS,kBACtB3rB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,4BAA4BgY,UAAWC,OE7XvDvoB,GAAIxB,OAAOwB,EAEX+oB,eAGJ,SAAAA,EAAY9oB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8qB,IACjB7oB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAgrB,GAAA1oB,KAAApC,KAAMgC,KAHRyP,eAAiB,IAAIxB,EAEFhO,EADnByP,kBAAoB,IAAIpD,EAGtBrM,EAAKS,MAAQ,CACX+L,KAAM,GAGNnE,UAAWrI,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDhF,WAAYtL,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACpDwY,iBAAkB,GAClB3D,KAAM,GACN4D,cAAe,GACfhW,aAAc,GAGdiW,mBAAoB,GAEpBC,gBAAiB,GACjBC,aAAclpB,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,MAEnDtQ,EAAKmpB,aAAenpB,EAAKmpB,aAAarS,KAAlBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAnBHA,gMA2BjB,IAHIopB,EAAoBrrB,KAAK0C,MAAMuoB,mBAC/BK,EAAe,GACP9qB,aAAaC,QAAQ,cACxBgc,EAAI,EAAGA,EAAI4O,EAAkBjrB,OAAQqc,IAC5C6O,EAAajb,KAAKgb,EAAkB5O,GAAGlK,MAAM,KAAM,oBAInDvS,KAAKyR,eAAeuB,wBACdwN,QAAQC,IAAI,CAChBzgB,KAAK0R,kBAAkB6Z,QAAQvrB,KAAK0C,MAAM6K,WAAY+d,8DAGxDtrB,KAAKqD,SAAS,CAAEmP,cAAc,6BAE9BxS,KAAKyR,eAAe8B,gBACpBvT,KAAKgC,MAAMkhB,QAAQ7S,KAAK,uBAAyBrQ,KAAK0C,MAAM6K,kLAIjD7H,EAAIiD,EAAMzD,GACvB,IAAM+lB,EAAqBjrB,KAAK0C,MAAMuoB,mBAClCO,EAAapmB,SAASqmB,kBAAkB/lB,GAC5C,GAAIR,EAAEwC,OAAOsc,QACX,IAAK,IAAIvH,EAAI,EAAGA,EAAI+O,EAAWprB,OAAQqc,IACrC+O,EAAW/O,GAAGuH,SAAU,EACxBiH,EAAmB5a,KAGjBmb,EAAW/O,GAAGwH,aAAa,YAE7BjkB,KAAKqD,SAAS,CAAE4nB,4BAIlB,IAAK,IAAIxO,EAAI,EAAGA,EAAI+O,EAAWprB,OAAQqc,KACP,IAA1B+O,EAAW/O,GAAGuH,UAChBwH,EAAW/O,GAAGuH,SAAU,EAGxBiH,EAAmB1P,OACjB0P,EAAmBtF,QAAQ6F,EAAW/O,IACtC,GAEFzc,KAAKqD,SAAS,CAAE4nB,qEAOHvlB,EAAIiD,EAAMzD,GAC7B,IAAI+lB,EAAqBjrB,KAAK0C,MAAMuoB,mBAEpB/lB,EAAEwC,OAAOsc,SAGvBiH,EAAmB5a,KAAK3K,GACxB1F,KAAKqD,SAAS,CAAE4nB,uBAChB7lB,SAASsmB,eAAexmB,EAAEwC,OAAO9C,MAAMof,SAAU,EACjD1J,QAAQC,IAAI0Q,KAGZA,EAAmB1P,OAAO0P,EAAmBtF,QAAQjgB,GAAK,GAC1D1F,KAAKqD,SAAS,CAAE4nB,uBACXlpB,GAAE,kBAAoBmD,EAAEwC,OAAO9C,KAAO,KAAK+mB,GAAG,cACjDvmB,SAASsmB,eAAexmB,EAAEwC,OAAO9C,MAAMof,SAAU,iDAMlC9e,GACnB,IAAI0mB,EAAQ,GACZ7pB,GAAE,aAAa8pB,KAAK,WACd9pB,GAAE/B,MAAM2rB,GAAG,aACbC,EAAMvb,KAAKtO,GAAE/B,MAAMgc,KAAK,SAG5B+D,MAAM6L,4LAIA9oB,MACJ,GAAAvD,OAAGuB,GACD,uCACAd,KAAK0C,MAAM6K,WACX,cACAmB,KAAKC,OAEN1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CACZ6nB,gBAAiB9nB,oBAIvBkX,QAAQC,IAAIva,KAAK0C,MAAMwoB,iBAEnBD,EAAqB,GACzBjrB,KAAK0C,MAAMwoB,gBAAgBlK,mBAAmB3X,IAAI,SAAA4X,GAEhDA,EAAQnM,QAAQzL,IAAI,SAAA0L,GAClBA,EAAOC,aAAa3L,IAAI,SAAA4L,GACtBA,EAAWnF,WAAWzG,IAAI,SAAA6J,GACxB+X,EAAmB5a,KAAK6C,EAAUxN,YAO1C1F,KAAKqD,SAAS,CAAE4nB,mBAAoBA,IAGhCxD,YAAa3mB,yBACjBgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ7kB,EAAKQ,SAAS,CAAE+jB,KAAMM,MAGtBoE,YAA2BhrB,yDAAqD4N,KAAKC,iBACnF7L,MAAMgpB,GACT7oB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAA8oB,GACJlpB,EAAKQ,SAAS,CACZ0nB,iBAAkBgB,qBAIpBC,EAAiB,GAErBhsB,KAAK0C,MAAMqoB,iBAAiB1hB,IAAI,SAAA4iB,GAC1BA,EAAO/iB,MAAM+K,eAAiBpR,EAAKH,MAAM4H,WAC3C2hB,EAAO5hB,SAAShB,IAAI,SAAA8B,GACI,QAAlBA,EAAQkJ,SACV2X,EAAiB7gB,EAAQC,YAM7B8gB,EACF,GAAA3sB,OAAGuB,GACH,QACAd,KAAK0C,MAAM4H,UACX,IACA0hB,EACA,gBACF1R,QAAQC,IAAI2R,aACNppB,MAAMopB,GACTjpB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CACZoL,KAAMrL,uJAOQ+oB,EAAWC,GAC/B,OAAOpsB,KAAK0C,MAAMoN,aAAesc,EAAUtc,4CAGpC,IAAAiG,EAAA/V,KAEHqsB,EAAmBrsB,KAAK0C,MAAMqoB,iBAC9Btc,EAAOzO,KAAK0C,MAAM+L,KAClB6d,EAAgB,GAChBC,EAAiB,GACjBC,EAAuB,GACvBC,EAAazsB,KAAK0C,MAAMwoB,gBAExBwB,EAA0B,GAC1BC,EAA4B,GAC5BF,GACFA,EAAWzL,mBAAmB3X,IAAI,SAAA4X,GAChCA,EAAQnM,QAAQzL,IAAI,SAAA0L,GAClBA,EAAOC,aAAa3L,IAAI,SAAA4L,GACtB0X,EAA0Btc,KAAK4E,EAAWvP,IAC1CuP,EAAWnF,WAAWzG,IAAI,SAAA6J,GACxBwZ,EAAwBrc,KAAK6C,EAAUxN,YAUjD2mB,EAAiB9b,QAAQ,SAACsE,EAAM+X,GAC1B/X,EAAK3L,MAAM+K,gBAAkB8B,EAAKrT,MAAM4H,YAE1CuK,EAAKX,gBAAgB3D,QAAQ,SAAAsc,GAC3BP,EAAcjc,KAAKwc,EAAe3jB,OAClCsjB,EAAqBnc,KACnBnR,EAAAC,EAAAC,cAAA,UAAQ0tB,UAASD,EAAennB,GAAIb,MAAOgoB,EAAelkB,MACvDkkB,EAAe3jB,UAItB2L,EAAKC,QAAQvE,QAAQ,SAAAwE,GACnBwX,EAAelc,KACbnR,EAAAC,EAAAC,cAAA,UAAQ0tB,UAAS/X,EAAOrP,GAAIb,MAAOkQ,EAAOpM,MACvCoM,EAAO7L,aASlB,IAAM6jB,EAAqBte,EAAKpF,IAAI,SAAAwL,GAAI,OACtCA,EAAKC,QAAQzL,IAAI,SAAC0L,EAAQiY,GAAT,OACf9tB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,MAAIqE,IAAKsR,EAAOG,KACdhW,EAAAC,EAAAC,cAAA,UAAK4tB,EAAM,GAAQ,IACnB9tB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBAAU2V,EAAO7L,OAAgB,KAC7B,KAEP6L,EAAOC,aAAa3L,IAAI,SAAC4L,EAAY/C,GAAb,OACvBhT,EAAAC,EAAAC,cAAA,MAAIqE,IAAKwR,EAAWvP,IAClBxG,EAAAC,EAAAC,cAAA,UACG4tB,EAAM,EADT,IACa9a,EAAM,GAEnBhT,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,SACEc,KAAM,WACN+sB,gBACG,IAAMN,EAA0BhH,QAAQ1Q,EAAWvP,IAEtDwnB,YAAWjY,EAAWtM,KACtBjD,GAAIuP,EAAWvP,GACflB,SAAUuR,EAAKoX,eAAepU,KAC5BhD,EACAd,EAAWvP,GACXuP,EAAWtM,QAEZ,IACFsM,EAAW/L,MACZhK,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEupB,WAAY,MAAUC,aAAc,QAC9Cf,EAAcjjB,IAAI,SAAAsS,GACjB,OACEzc,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAEupB,WAAY,QACxBluB,EAAAC,EAAAC,cAAA,WACG,IACDF,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,UAAKuc,KAGR1G,EAAWnF,WACT5E,OAAO,SAAAgI,GAAS,OAAIA,EAAUhT,OAASyb,IACvCtS,IAAI,SAAA6J,GACH,OACEhU,EAAAC,EAAAC,cAAA,MACEqE,IAAKyP,EAAUxN,GACf7B,MAAO,CAAEupB,WAAY,QAErBluB,EAAAC,EAAAC,cAAA,SACEc,KAAM,WACN+sB,gBACG,IACDP,EAAwB/G,QAEtBzS,EAAUxN,IAGdd,KAAMqQ,EAAWvP,GACjBonB,UAAS5Z,EAAUxN,GACnB4nB,YAAWpa,EAAUvK,KACrBjD,GAAIwN,EAAUxN,GACdlB,SAAUuR,EAAKwX,qBAAqBxU,KAClChD,EACA7C,EAAUxN,GACVwN,EAAUvK,QAEX,IACHzJ,EAAAC,EAAAC,cAAA,QAAME,UAAW4T,EAAUuC,UACxB,IACAvC,EAAUhK,kBAYnChK,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,kBAOV,OACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAKqtB,EAAWvjB,OAChBhK,EAAAC,EAAAC,cAAA,mBAAWqtB,EAAWvsB,MACtBhB,EAAAC,EAAAC,cAAA,kBAAUqtB,EAAWnrB,KACrBpC,EAAAC,EAAAC,cAAA,SAAOE,UAAW,SAAUytB,GAC5B7tB,EAAAC,EAAAC,cAAA,OAAKsG,GAAI,iBACPxG,EAAAC,EAAAC,cAAA,UAAQE,UAAW,SAAU4E,QAASlE,KAAKorB,aAAarS,KAAK/Y,OAC1D,IADH,iBAnViBsC,IAAM8B,WAuWlBopB,GAVC,kBACdtuB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,yCACLgY,UAAWS,OCrWXrhB,GAAe,CACnBC,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,UAAW,0BAKfyjB,IAAMC,cAAc,aAgELC,eA7Db,SAAAA,EAAY3rB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2tB,IACjB1rB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAA6tB,GAAAvrB,KAAApC,KAAMgC,KAEDU,MAAQ,CACXkrB,aAAa,GAGf3rB,EAAK4rB,UAAY5rB,EAAK4rB,UAAU9U,KAAfjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAEjBA,EAAK6rB,WAAa7rB,EAAK6rB,WAAW/U,KAAhBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IATDA,2EAajBjC,KAAKqD,SAAS,CAAEuqB,aAAa,yCAS7B5tB,KAAKqD,SAAS,CAAEuqB,aAAa,qCAI7B,OACE1uB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,UAAQ8E,QAASlE,KAAK6tB,WACnB,IACD3uB,EAAAC,EAAAC,cAAA,KAAGE,UAAW,0BAA4B,KAE5CJ,EAAAC,EAAAC,cAACkM,EAAAnM,EAAD,CACEoM,OAAQvL,KAAK0C,MAAMkrB,YACnBG,YAAa/tB,KAAKguB,eAClBC,eAAgBjuB,KAAK8tB,WACrBjqB,MAAO4F,GACPykB,aAAa,iBAEbhvB,EAAAC,EAAAC,cAAA,UAAQE,UAAW,cAAe4E,QAASlE,KAAK8tB,YAC9C5uB,EAAAC,EAAAC,cAAA,KAAGE,UAAW,wBAEhBJ,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAW,WAAhB,kFAGEJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBS,KAAKgC,MAAMsI,UAAU2J,cAArC,KAAA1U,OACAS,KAAKgC,MAAMmJ,UAGZ,IALH,2BA/Ce7I,IAAM8B,WCV3B+pB,eACJ,SAAAA,EAAYnsB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmuB,IACjBlsB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAquB,GAAA/rB,KAAApC,KAAMgC,KACDU,MAAQ,CACXmN,SAAU,GACVjN,WAAY,GACZuoB,aAAclpB,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KACjDtN,WAAW,EACXmpB,kBAAmB,GACnB/G,WAAY,IAEdplB,EAAK2d,gBAAkB3d,EAAK2d,gBAAgB7G,KAArBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACvBA,EAAK4d,iBAAmB5d,EAAK4d,iBAAiB9G,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAXPA,+EAcHwC,EAAO2f,GACrBpkB,KAAKqD,SAAS,CAAE4B,WAAW,IAC3BjF,KAAKqD,SAAS,CAAE+qB,kBAAmB3pB,IACnC2f,EAAKjf,4DAKLnF,KAAKqD,SAAS,CAAE4B,WAAW,IAC3BjF,KAAKqD,SAAS,CAAEgkB,YAAY,iDAGT,IAAAxkB,EAAA7C,KACfA,KAAK0C,MAAM2kB,aACbrnB,KAAK8jB,YACLvb,WAAW,WACT1F,EAAKQ,SAAS,CAAEgkB,YAAY,KAC3B,KACH/M,QAAQC,IAAI,2KAKdva,KAAK8jB,kJAGK,IAAA/N,EAAA/V,KACNynB,EAAO,GAAAloB,OAAMuB,EAAN,uBACXgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ3R,EAAK1S,SAAS,CAAE+jB,KAAMM,MAM1B,IAAI2G,EAAY,GAAA9uB,OAAMuB,EAAN,oCAAAvB,OACdS,KAAK0C,MAAMyoB,aAAa,GADV,eAAA5rB,OAEFmP,KAAKC,OACnB2L,QAAQC,IAAI8T,GACZvrB,MAAMurB,GACHprB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAqrB,GACJvY,EAAK1S,SAAS,CAAEwM,SAAUye,MAI9BxrB,MAAK,GAAAvD,OAAIuB,EAAJ,sCACFmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ2S,EAAK1S,SAAS,CACZT,WAAYQ,6CAKL,IAAAwV,EAAA5Y,KACb,GAAIQ,aAAaC,QAAQ,UACnBD,aAAaC,QAAQ,SAAS0D,SAAS,mBACzC,OACEjF,EAAAC,EAAAC,cAAA,OAAKE,UAAW,2CACdJ,EAAAC,EAAAC,cAAA,6CACAF,EAAAC,EAAAC,cAAA,UACGY,KAAK0C,MAAME,WAAWyG,IAAI,SAACwL,EAAMnP,GAChC,OACExG,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEoX,QAAS,SAAUsT,OAAQ,QACtCrvB,EAAAC,EAAAC,cAAA,KACE6E,KACE,uBACA2U,EAAKlW,MAAMyoB,aAAa,GACxB,QACAtW,EAAK3L,MAAM+K,eAGZ,IACD/U,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gBATf,IASiCuV,EAAK3L,MAAO,8CAYnDslB,EAAOC,GACjB,IAAIC,EAAS,CACX,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAGEC,EAAW,IAAIjgB,KAAK8f,GACpBI,EAAW,IAAIlgB,KAAK+f,GAEpBI,EAAYF,EAASG,UACrBC,EAAcJ,EAASK,WACvBC,EAAaN,EAASO,cAE1B,GAAIT,EAAK,CACP,IAAIU,EAAUP,EAASE,UACnBM,EAAYR,EAASI,WACrBK,EAAWT,EAASM,cAExB,OAAID,IAAeI,EACbN,IAAgBK,EACdP,IAAcM,EACTN,EAAY,IAAMH,EAAOK,GAAe,IAAME,EAGnDJ,EACA,MACAM,EACA,IACAT,EAAOK,GACP,IACAE,EAKFJ,EACA,IACAH,EAAOK,GACP,MACAI,EACA,IACAT,EAAOU,GACP,IACAH,EAKFJ,EACA,IACAH,EAAOK,GACP,IACAE,EACA,MACAE,EACA,IACAT,EAAOU,GACP,IACAC,EAIJ,OAAOR,EAAY,IAAMH,EAAOK,GAAe,IAAME,sCAIvD,QAAKzuB,aAAaC,QAAQ,aAEdD,aAAaC,QAAQ,SAAS0D,SAAS,yBAA5C,oCAKA,IAAAylB,EAAA5pB,KAGHkU,EAAkB,GAClBW,EAAO7U,KAAK0C,MAAMmN,SAClByf,EAAuB,GAGvBC,EAAc7e,MAAM8e,QAAQ3a,EAAKmM,oBAC/ByO,EACJvwB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAW,OACdJ,EAAAC,EAAAC,cAAA,UAAKyV,EAAK3L,OACTlJ,KAAK4nB,YACJ1oB,EAAAC,EAAAC,cAAA,QAAME,UAAU,eACb,IACDJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAI,2BAA6B3D,KAAK0C,MAAMyoB,aAAa,IAExD,IACDjsB,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,gBAJX,QAIiC,MAInC,IAIJ5H,EAAAC,EAAAC,cAAA,OAAKE,UAAW,OACdJ,EAAAC,EAAAC,cAAA,OAAKE,UAAW,kBACdJ,EAAAC,EAAAC,cAAA,OAAKE,UAAW,WACbuV,EAAKrH,MACJtO,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,uBAAuB,IACtBY,KAAK0vB,YAAY7a,EAAKrH,MAAOqH,EAAK+Z,WAGrC,GAED/Z,EAAKjH,SACJ1O,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,2BADF,IAC8ByV,EAAKjH,UAGnC,GAEDiH,EAAKxP,SACJnG,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,2BADF,IAC8ByV,EAAKxP,UAGnC,GAEDwP,EAAK3U,KACJhB,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,uBADF,IAC0ByV,EAAK3U,MAG/B,GAED2U,EAAKvT,IACJpC,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,wBAAwB,IACxBF,EAAAC,EAAAC,cAAA,KAAG6E,KAAM4Q,EAAKvT,IAAKoG,OAAQ,UACxBmN,EAAKvT,MAIV,IAGJpC,EAAAC,EAAAC,cAAA,sBACCyV,EAAKnM,YAAc8C,IAAOqJ,EAAKnM,aAAe,GAE9CmM,EAAKnH,gBACFlC,IAAO,2BAA6BqJ,EAAKnH,iBACzC,GACHmH,EAAKlH,kBACFnC,IAAO,6BAA+BqJ,EAAKlH,mBAC3C,GACHkH,EAAKhH,WACFrC,IAAO,sBAAwBqJ,EAAKhH,YACpC,GAEHgH,EAAK/G,SAAWtC,IAAO,oBAAsBqJ,EAAK/G,UAAY,GAC/D5O,EAAAC,EAAAC,cAAA,gCAEAF,EAAAC,EAAAC,cAAA,SAAOE,UAAW,SAChBJ,EAAAC,EAAAC,cAAA,aACGmwB,EACG1a,EAAKmM,mBAAmB3X,IAAI,SAAA4X,GAC1B,OACE/hB,EAAAC,EAAAC,cAAA,UACGwqB,EAAKlnB,MAAME,WAAWyG,IAAI,SAAAiB,GAUzB,OATIA,EAAU4K,MAAQ+L,EAAQvb,KAC5B4E,EAAU4J,gBAAgB7K,IAAI,SAAAnJ,GAAI,OAChCgU,EAAgB7D,KAAKnQ,EAAKgJ,SAE5BomB,EAAuBhlB,EAAUD,SAAS4I,KACxC,SAAA9H,GAAO,MAAuB,SAAnBA,EAAQkJ,UAIhB,OAETnV,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAK6hB,EAAQ/X,QAEfhK,EAAAC,EAAAC,cAAA,UACG6hB,EAAQnM,QAAQzL,IAAI,SAAA0L,GAAM,OACzB7V,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAK2V,EAAO7L,OACZhK,EAAAC,EAAAC,cAAA,UACG2V,EAAOC,aAAa3L,IAAI,SAAA4L,GAAU,OACjC/V,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,QACEE,UAC0B,aAAxB2V,EAAWQ,SACP,WACA,IAGLR,EAAW/L,MAEZ,aADC+L,EAAWQ,SAEVvW,EAAAC,EAAAC,cAACuwB,GAAD,CACErlB,UAAU,WACVD,SAzH/B,kBA4H6B,IAGJnL,EAAAC,EAAAC,cAAA,UACG8U,EAAgB7K,IAAI,SAAAnJ,GAAI,OACvBhB,EAAAC,EAAAC,cAAA,YACG6V,EAAWnF,WAAWzG,IACrB,SAAA6J,GACE,OAAIA,EAAUhT,OAASA,EAEnBhB,EAAAC,EAAAC,cAAA,UACG,IACDF,EAAAC,EAAAC,cAAA,UAAKc,GAFP,KAEoB,IAClBhB,EAAAC,EAAAC,cAAA,QACEE,UAEE,aADA4T,EAAUuC,SAEN,WACA,IAGLvC,EAAUhK,MAEX,aADCgK,EAAUuC,SAETvW,EAAAC,EAAAC,cAACuwB,GAAD,CACErlB,UACE2W,EAAQ/X,MAEViC,QACEmkB,EAAqBlkB,SAIzB,GAGF,aADC8H,EAAUuC,SAETvW,EAAAC,EAAAC,cAAA,KACE6E,KACE,uBACA4Q,EAAKnP,GACL,UACAwN,EAAUxN,IAGZxG,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,yBAGX,KAMH,sBAenC,MAIV5H,EAAAC,EAAAC,cAAA,OACEE,UACE,0DAGFJ,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,kCAOV,OACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAW,OACdJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiB2I,aAAW,cACnC/I,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,kDACR5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAG,IAAImD,MAAM,wBAAnB,SAIF5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,uBAAuBwa,eAAa,YAA9C,uBAKTthB,KAAK4nB,YACJ1oB,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,KAAR,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,2BAAR,4BAIJ,GAGFzE,EAAAC,EAAAC,cAAA,OAAKE,UAAW,mBACbmwB,EACAzvB,KAAK4vB,gBAGR1wB,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAEgsB,SAAU,WACtB3wB,EAAAC,EAAAC,cAACkM,EAAAnM,EAAD,CACEoM,OAAQvL,KAAK0C,MAAMuC,UACnB3F,UAAU,QACVwwB,iBAAiB,UACjB5B,aAAa,yBAEbhvB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEksB,aAAc,WAA3B,gCACgC,IAC7B/vB,KAAK0C,MAAM0rB,kBAAkB4B,cAAe,IAC7C9wB,EAAAC,EAAAC,cAAA,KACEE,UAAU,kCACV2wB,cAAA,EACA/rB,QAASlE,KAAK6f,mBACb,MAGP3gB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAC8wB,GAAD,CACEC,qBAzQe,GA0QflF,mBA3QK,GA4QLmD,kBAAmBpuB,KAAK0C,MAAM0rB,kBAC9B7gB,WAAYvN,KAAK0C,MAAMyoB,aAAa,GACpCtL,iBAAkB7f,KAAK6f,8BAzcTvd,IAAM8B,WAydrBgsB,GANI,kBACjBlxB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,0BAA0BgY,UAAW8D,OCvdrDkC,eACJ,SAAAA,EAAYruB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqwB,IACjBpuB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAuwB,GAAAjuB,KAAApC,KAAMgC,KACDU,MAAQ,CACX6d,UAAW,GACX+P,WAAY,GACZC,cAAe,GACfC,OAAQ,IAEVvuB,EAAKwuB,cAAgBxuB,EAAKwuB,cAAc1X,KAAnBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IARJA,2EAYZzB,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS0D,SAAS,qBACjD4b,MACE,yEAEF/f,KAAKgC,MAAMkhB,QAAQ7S,KAAK,MALxBrQ,KAAKgC,MAAMkhB,QAAQ7S,KAAK,gDAWThI,EAAWC,GAAW,IAAAzF,EAAA7C,KACnCA,KAAK0C,MAAM2kB,aACbrnB,KAAK8jB,YACLvb,WAAW,WACT1F,EAAKQ,SAAS,CAAEgkB,YAAY,KAC3B,KACH/M,QAAQC,IAAI,mEAKdva,KAAK8jB,gDAGK,IAAA/N,EAAA/V,KACNynB,EAAO,GAAAloB,OAAMuB,EAAN,uBACXgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ3R,EAAK1S,SAAS,CAAE+jB,KAAMM,MAI1B,IAAI2G,EAAY,GAAA9uB,OAAMuB,EAAN,0CAAAvB,OAAqDmP,KAAKC,OAC1E7L,MAAMurB,GACHprB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ2S,EAAK1S,SAAS,CACZkd,UAAWnd,0CAKPstB,GAEV,OADalwB,aAAaC,QAAQ,WACpBiwB,iCAQTxrB,GACLlF,KAAKqD,SAAS,CAAE6H,OAAQhG,EAAEwC,OAAO7C,iDAGlBK,GACflF,KAAKqD,SAAS,CAAEitB,WAAYprB,EAAEwC,OAAO7C,oDAGnBK,GACdlF,KAAK0C,MAAM6tB,cACbvwB,KAAKqD,SAAS,CAAEktB,cAAe,IAE/BvwB,KAAKqD,SAAS,CAAEktB,cAAe,0CAIrBI,EAAKtc,EAAQ5P,GAEzB,IAAImsB,EAAiB,GAEnBA,EADa,IAAXvc,EAKJ,IAAIuW,EAAQpqB,aAAaC,QAAQ,cACjCqC,MAAM,GAAAvD,OAAGuB,EAAH,UAAoB6vB,EAAM,oBAAqB,CACnD3tB,YAAa,UACbD,OAAQ,QACR2mB,QAAS,iBACTtoB,QAAS,CACPV,OAAQ,uBACRC,eAAgB,uBAChBC,eAAgBgqB,EAChB/pB,cAAe,SAEjBa,KAAMiF,KAAKC,UAAU,CACnB8E,OAAQ,CACNxL,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,uCAGR+vB,eAAgB,CACd,CACEhsB,MAAO+rB,IAGX1wB,KAAM,CACJ,CACE+L,UAAW,0BAMnBjM,KAAKqD,SAAS,CAAEgkB,YAAY,IAE5B5iB,EAAMU,kDAGC,IAAAyT,EAAA5Y,KACPA,KAAK4nB,YACL,IAAIrH,EAAYvgB,KAAK0C,MAAM6d,UACvBvgB,KAAK0C,MAAMwI,SACbqV,EAAYA,EAAUrV,OACpB,SAAA2J,GAAI,OACFA,EAAK3L,MAAM+K,cAAc9P,SAASyU,EAAKlW,MAAMwI,OAAO+I,gBACpDY,EAAKnM,YACFooB,oBACA3sB,SAASyU,EAAKlW,MAAMwI,OAAO+I,kBAIN,QAA1BjU,KAAK0C,MAAM4tB,aACb/P,EAAYA,EAAUrV,OAAO,SAAA2J,GAAI,OAC/BA,EAAK3U,KACF4wB,oBACA3sB,SAASyU,EAAKlW,MAAM4tB,WAAWrc,kBAIlCjU,KAAK0C,MAAM6tB,gBACbhQ,EAAYA,EAAUrV,OAAO,SAAA2J,GAAI,OAC/BA,EAAKmM,mBAAmB+P,KACtB,SAAA9P,GAAO,MACyB,YAA9BA,EAAQ+P,oBACuB,YAA/B/P,EAAQgQ,qBACU,YAAlBhQ,EAAQlM,WAGduF,QAAQC,IAAI,mBAGd,IAAM2W,EAAkB3Q,EAAUlX,IAAI,SAACwL,EAAMvE,GAAP,OACpCpR,EAAAC,EAAAC,cAAA,MAAIqE,IAAK6M,GACPpR,EAAAC,EAAAC,cAAA,UAAKkR,EAAQ,EAAb,KACApR,EAAAC,EAAAC,cAAA,UACG,IACDF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,uBAAyBkR,EAAKnP,IAAKmP,EAAK3L,MAAlD,MAEFhK,EAAAC,EAAAC,cAAA,UAAKyV,EAAKrH,OACVtO,EAAAC,EAAAC,cAAA,UAAKyV,EAAK3U,MACVhB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAG6E,KAAM4Q,EAAKvT,IAAKoG,OAAQ,UACxBmN,EAAKvT,MAGVpC,EAAAC,EAAAC,cAAA,UACqB,MAAlByV,EAAKY,SACJvW,EAAAC,EAAAC,cAAA,KACE8E,QAAS0U,EAAK6X,cAAc1X,KAAKH,EAAM/D,EAAKnP,GAAI,IAE/C,IACDxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qBAJf,IAIqCJ,EAAAC,EAAAC,cAAA,wBAAsB,KAG3DF,EAAAC,EAAAC,cAAA,KACE8E,QAAS0U,EAAK6X,cAAc1X,KAAKH,EAAM/D,EAAKnP,GAAI,IAE/C,IACDxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,wBAInBJ,EAAAC,EAAAC,cAAA,UACGwZ,EAAKuY,YAAYtc,EAAKuc,QACrBlyB,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,2BAAApE,OAA6BsV,EAAKnP,KACxCxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gBAAiB,KAGhC,OAKR,OACEJ,EAAAC,EAAAC,cAAA,OAAKE,UAAW,OACdJ,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLsE,SAAUxE,KAAKkL,OAAO6N,KAAK/Y,MAC3BsG,YAAY,qBAIlBpH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQ4I,IAAK,OAAQxD,SAAUxE,KAAKqxB,iBAAiBtY,KAAK/Y,OACxDd,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,OAAf,OACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,UAAf,UACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,gBAAf,gBACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,WAAf,WACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,aAAf,gBAIN3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLwF,GAAG,kBACHse,QAAShkB,KAAK0C,MAAM6tB,cACpB/rB,SAAUxE,KAAKsxB,oBAAoBvY,KAAK/Y,QAE1Cd,EAAAC,EAAAC,cAAA,QAAMsG,GAAG,uBAAuBsd,IAAI,mBAApC,kCAIF9jB,EAAAC,EAAAC,cAAA,OAAKE,UAAW,kBACdJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAW,qBACXqE,GAAI,6BAEJzE,EAAAC,EAAAC,cAAA,KAAGE,UAAU,sBAAb,KAJF,WAIkD,OAKtDJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,oBAGHmhB,EAAUngB,OAAS,EAClBlB,EAAAC,EAAAC,cAAA,aAAQ8xB,GAERhyB,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,OAAKklB,IAAI,WAAWC,IAAI,oBACxBrlB,EAAAC,EAAAC,cAAA,0CAxQckD,IAAM8B,WAuRnBmtB,GANG,kBAChBryB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,0BAA0BgY,UAAWgG,OCnRrDmB,eACJ,SAAAA,EAAYxvB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAwxB,IACjBvvB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAA0xB,GAAApvB,KAAApC,KAAMgC,KACDU,MAAQ,CACX6d,UAAW,GACX+P,WAAY,IAJGruB,2EAUZzB,aAAaC,QAAQ,SAEdD,aAAaC,QAAQ,SAAS0D,SAAS,qBACjD4b,MACE,yEAEF/f,KAAKgC,MAAMkhB,QAAQ7S,KAAK,MALxBrQ,KAAKgC,MAAMkhB,QAAQ7S,KAAK,KAO1BiK,QAAQC,IAAI/Z,aAAaC,QAAQ,2CAsJjC,OA9DAT,KAAK4nB,YA+DH1oB,EAAAC,EAAAC,cAAA,OAAKE,UAAW,OACdJ,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAW,qBACXqE,GAAI,2BAEJzE,EAAAC,EAAAC,cAAA,KAAGE,UAAU,eAAb,KAJF,qCAIqE,MAGvEJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMpE,UAAW,qBAAsBqE,GAAI,KACzCzE,EAAAC,EAAAC,cAAA,KAAGE,UAAU,eAAb,KADF,uCAEY,MAGdJ,EAAAC,EAAAC,cAAA,OAAKE,UAAW,0BACdJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMpE,UAAW,qBAAsBqE,GAAI,KACzCzE,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gBAAb,KADF,6BAC8D,eA7L9CgD,IAAM8B,WA4MnBqtB,GANW,kBACxBvyB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,2BAA2BgY,UAAWmH,OCvI7CE,eAnEb,SAAAA,EAAY1vB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0xB,IACjBzvB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAA4xB,GAAAtvB,KAAApC,KAAMgC,KACDU,MAAQ,CACX+L,KAAM,GACNlL,MAAO,GACPZ,KAAM,IAERV,EAAK0vB,qBAAuB1vB,EAAK0vB,qBAAqB5Y,KAA1BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAPXA,oFAUEiD,GACnB,IAAI0sB,EAAM5xB,KAAKuY,KAAKqZ,IAAI/sB,MACpBgtB,EAAO7xB,KAAKuY,KAAKsZ,KAAKhtB,MACtBitB,EAAMtxB,aAAaC,QAAQ,UAC/BqC,MAAM,GAAAvD,OAAGuB,EAAH,UAAoBgxB,EAAM,gBAAiB,CAC/C9uB,YAAa,UACbD,OAAQ,QACR3B,QAAS,CACPT,eAAgB,mBAChBC,eAAgBJ,aAAaC,QAAQ,eAEvCiB,KAAMiF,KAAKC,UAAU,CACnBmrB,KAAM,CACJ,CACEC,SAAUJ,EACV/sB,MAAOgtB,QAKZ5uB,KAAK,SAAAgvB,GAAI,OAAIA,IACbhvB,KAAK,SAAAwL,GAAI,OACRlG,WAAW,WACTwX,MAAM,iCACNxf,OAAO8E,SAASC,UACf,OAEPJ,EAAEC,qDAIG3E,aAAaC,QAAQ,UACxBT,KAAKgC,MAAMkhB,QAAQ7S,KAAK,sCAM1B,OADArQ,KAAK4nB,YAEH1oB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,QAAMsG,GAAI,cACRxG,EAAAC,EAAAC,cAAA,SAAOc,KAAM,WAAY8H,IAAK,MAAO1B,YAAa,iBAClDpH,EAAAC,EAAAC,cAAA,SAAOc,KAAM,WAAY8H,IAAK,OAAQ1B,YAAa,iBACnDpH,EAAAC,EAAAC,cAAA,SAAOc,KAAM,WAAYoG,YAAa,yBACtCpH,EAAAC,EAAAC,cAAA,SACEc,KAAM,SACNZ,UAAW,SACX4E,QAASlE,KAAK2xB,qBAAqB5Y,KAAK/Y,MACxC6E,MAAO,oBA5DUvC,IAAM8B,WCF/BkC,GAAclB,SAAShG,cAAc,MACzCkH,GAAYhH,UAAY,cAELgD,IAAM8B,cCCnB8tB,GAAW,WAAM,IAAA3nB,EACGC,qBADHC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GACd5H,EADc8H,EAAA,GACR0nB,EADQ1nB,EAAA,GAAAI,EAEGL,qBAFHM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAEdyX,EAFcxX,EAAA,GAAAiM,GAAAjM,EAAA,GAGeN,sBAHfwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAGdnU,EAHcoU,EAAA,GAGFob,EAHEpb,EAAA,GAAAG,EAIC3M,qBAJD4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAIdkb,EAJcjb,EAAA,GAITkb,EAJSlb,EAAA,GAajB0a,EAAMtxB,aAAaC,QAAQ,UAuB/B,GApBAmjB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,UAAAvB,OAAmBuyB,EAAnB,iBAAuC,CAChD9uB,YAAa,UACbD,OAAQ,MACR3B,QAAS,CACPT,eAAgB,mBAChBC,eAAgBJ,aAAaC,QAAQ,iBAGtCwC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAujB,GAAY,OAAI2L,EAAQ3L,KAVhB,cAAA3T,EAAAE,KAAA,EAYVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,uCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAujB,GAAY,OAAI4L,EAAc5L,KAdtB,wBAAA3T,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,aAAA,EAgBf2jB,IACC,CAACxB,KAEC+P,GAAO1vB,GAAQC,EAAY,CAC9B,IAAI0f,EAAO,GACX1f,EAAWyG,IAAI,SAAAwL,GACblS,EAAK4vB,iBAAiBlpB,IAAI,SAAAgpB,GACpBA,EAAIpmB,WAAa4I,EAAKK,KAAKoN,EAAKjS,KAAKwE,EAAK3L,WAGlDopB,EAAOhQ,EAAKsD,QAQd,OACE1mB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAAf,QACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZqD,EACCzD,EAAAC,EAAAC,cAAA,SAAOE,UAAU,sCACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,4BAEFF,EAAAC,EAAAC,cAAA,UAAKuD,EAAKiC,KAAK,GAAGC,QAEpB3F,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,yBAEFF,EAAAC,EAAAC,cAAA,UAAKuD,EAAK6vB,KAAK,GAAG3tB,QAEpB3F,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,8BAEFF,EAAAC,EAAAC,cAAA,UAAKizB,GAAY,OAKvB,mBAGJnzB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBAYR+S,GANK,kBAClBnT,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,aAAagY,UAAW6H,OCkH/BO,GAlND,kBACZvzB,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,KAAGE,UAAU,QAAb,0YAQAJ,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,oFAGAF,EAAAC,EAAAC,cAAA,2GAIAF,EAAAC,EAAAC,cAAA,2FAIAF,EAAAC,EAAAC,cAAA,yLAKAF,EAAAC,EAAAC,cAAA,uFAIAF,EAAAC,EAAAC,cAAA,iHAMJF,EAAAC,EAAAC,cAAA,8DACAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,sDACAF,EAAAC,EAAAC,cAAA,gFAEFF,EAAAC,EAAAC,cAAA,6DACAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,+EACAF,EAAAC,EAAAC,cAAA,oEACAF,EAAAC,EAAAC,cAAA,4QAMAF,EAAAC,EAAAC,cAAA,+FAIAF,EAAAC,EAAAC,cAAA,yMAOFF,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,wOAMAF,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,4HAIAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,wWAQAF,EAAAC,EAAAC,cAAA,iSAMAF,EAAAC,EAAAC,cAAA,uMAOFF,EAAAC,EAAAC,cAAA,6CACAF,EAAAC,EAAAC,cAAA,6VAQAF,EAAAC,EAAAC,cAAA,mDACAF,EAAAC,EAAAC,cAAA,wDAC+C,IAC7CF,EAAAC,EAAAC,cAAA,KACE6E,KAAM,qDACNyD,OAAQ,UAEP,IAJH,yBAKyB,KACpB,IARP,WASW,IACTxI,EAAAC,EAAAC,cAAA,KAAG6E,KAAM,uBAAwByD,OAAQ,UACtC,IADH,WAEW,KACN,IAbP,gDAcgD,KAEhDxI,EAAAC,EAAAC,cAAA,mWAOAF,EAAAC,EAAAC,cAAA,+TAOAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,gDACiC,IAC/BF,EAAAC,EAAAC,cAAA,KAAG6E,KAAM,4CAA6CyD,OAAQ,UAC3D,IADH,wDAEwD,KACnD,KAEPxI,EAAAC,EAAAC,cAAA,4LAKAF,EAAAC,EAAAC,cAAA,gBACM,IACJF,EAAAC,EAAAC,cAAA,KACE6E,KACE,oEAEFyD,OAAQ,UAEP,IANH,+BAO+B,KAC1B,IAVP,uDAaAxI,EAAAC,EAAAC,cAAA,gBACM,IACJF,EAAAC,EAAAC,cAAA,KACE6E,KAAM,gDACNyD,OAAQ,UAEP,IAJH,8BAK8B,KACzB,IARP,sDAWAxI,EAAAC,EAAAC,cAAA,gBACM,IACJF,EAAAC,EAAAC,cAAA,KACE6E,KAAM,gDACNyD,OAAQ,UAEP,IAJH,gCAKgC,KAPlC,mEAWAxI,EAAAC,EAAAC,cAAA,4GAIAF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,gtBAUkE,IAChEF,EAAAC,EAAAC,cAAA,KAAG6E,KAAM,+BAAT,gBAXF,QC5DSyuB,OAjIf,SAAA1zB,GAAwC,IAAbsL,EAAatL,EAAbsL,UACrB5B,EAAc0I,EAAe9G,EAAU5B,aACvCA,EAAYtI,OAAS,MACvBsI,EAAW,GAAAnJ,OAAMmJ,EAAYiqB,MAAM,EAAG,KAAK5pB,OAAhC,QAEb,IAAMqL,EAAc9J,EAAUD,SAASwG,OAAO,SAAC+hB,EAAaC,GAC1D,MAA0B,SAAtBA,EAAWxe,OACNwe,EAAWznB,OAEbwnB,GACN,MAEH,OAAoB,OAAhBxe,EACK,KAoFPlV,EAAAC,EAAAC,cAAA,WAASE,UAAU,4BACjBJ,EAAAC,EAAAC,cAAA,OACEklB,IAAI,OACJhlB,UAAU,iBACVilB,IAAG,qCAAAhlB,OAAuC+K,EAAUwoB,KAAK,GAAGxxB,IAAzD,UACHuC,MAzDa,CACjB,CACEqF,MAAO,WACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,WAEZ,CACE7pB,MAAO,SACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,WAEZ,CACE7pB,MAAO,UACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,WAEZ,CACE7pB,MAAO,OACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,WAEZ,CACE7pB,MAAO,MACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,WAEZ,CACE7pB,MAAO,SACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,WAEZ,CACE7pB,MAAO,cACPe,MAAO,QACPL,KAAM,MACNwL,SAAU,WACV2d,UAAU,YASU9f,KAAK,SAAA+f,GAAE,OAAIA,EAAG9pB,QAAUoB,EAAUpB,MAAM+K,cAAc1C,QAAQ,KAAM,QAExFrS,EAAAC,EAAAC,cAAA,OAAKE,UAAU,6CACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAU,gBACV2zB,wBAAA,EACAtvB,GAAE,cAAApE,OAAgB+K,EAAUpB,MACzB+K,cACA1C,QAAQ,KAAM,IAFf,KAAAhS,OAEsB6U,IAEvB9J,EAAUpB,QAIfhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBArGJ,CACf,CACE4J,MAAO,WACPgqB,KAAM,wDAER,CACEhqB,MAAO,SACPgqB,KAAM,8DAER,CAAEhqB,MAAO,UAAWgqB,KAAM,wCAC1B,CACEhqB,MAAO,OACPgqB,KAAM,uDAER,CACEhqB,MAAO,SACPgqB,KAAM,8DAER,CACEhqB,MAAO,MACPgqB,KACE,oFAEJ,CACEhqB,MAAO,cACPgqB,KAAM,4DA6EQ7pB,IAAI,SAAAwL,GAAI,OAChBA,EAAK3L,QAAUoB,EAAUpB,MAAM+K,cAAc1C,QAAQ,KAAM,IACvDsD,EAAKqe,KACL,SC3HN3yB,OAAOwB,EAyBFoxB,OAvBf,SAAAn0B,GAA0C,IAAd4D,EAAc5D,EAAd4D,WACpByE,EAAU,IAAI/E,IAAMC,UAe1B,OAAOK,EAAWxC,OAAS,EAAI,KAC7BlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,MAAM8zB,kBAAA,EAAeprB,IAAKX,GAXvCnI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACZ,IACAsD,EAAWyG,IAAI,SAAAiB,GAAS,OACvBpL,EAAAC,EAAAC,cAACi0B,GAAD,CAAiB5vB,IAAK6G,EAAU4K,IAAK5K,UAAWA,SCNpDgpB,8MACJ7hB,eAAiB,IAAIxB,IACrByB,kBAAoB,IAAIpD,IAExB5L,MAAQ,CACNE,WAAY,qNAKV5C,KAAKyR,eAAeuB,wBACKhT,KAAK0R,kBAAkBmC,mCAA1CjR,SACN5C,KAAKqD,SAAS,CAAET,+DAEhB5C,KAAKgC,MAAMqR,gBAAgB,iCAAkC,CAC3DC,QAAS,UAEXgH,QAAQiZ,MAAR1gB,EAAAO,6BAEApT,KAAKyR,eAAe8B,+KAIf,IACC3Q,EAAe5C,KAAK0C,MAApBE,WAER,OACE1D,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACbJ,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,KAAGE,UAAU,QAAb,qGAEsC,IACpCJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAG,SAASrE,UAAU,YAA5B,YACY,MAIdJ,EAAAC,EAAAC,cAACo0B,GAAD,CAAkB5wB,WAAYA,IAC9B1D,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAEC,QAAS,SACrB5E,EAAAC,EAAAC,cAAA,6GAIAF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAG,iBAAiBrE,UAAU,YAApC,0BAC0B,eA7Cb8E,aAsDVmS,0BAAa+c,ICrDtBG,ICHsBnxB,IAAM8B,sBDOhC,SAAAqvB,EAAYzxB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAyzB,IACjBxxB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAA2zB,GAAArxB,KAAApC,KAAMgC,KAJRyP,eAAiB,IAAIxB,EAGFhO,EAFnByP,kBAAoB,IAAIpD,EAItBrM,EAAKS,MAAQ,CACX+L,KAAM,GACN4D,KAAMpQ,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KACzC0C,WAAY,GACZye,eAAgB,GAChBC,gBAAiB,GACjBC,cAAe,GACfC,SAAU,GACVhoB,WAAY,GACZub,KAAM,GACNxe,QAAS,IAGX3G,EAAK+c,WAAa/c,EAAK+c,WAAWjG,KAAhBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAClBA,EAAK6xB,aAAe7xB,EAAK6xB,aAAa/a,KAAlBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACpBA,EAAK8xB,aAAe9xB,EAAK8xB,aAAahb,KAAlBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAjBHA,oMAqBb+xB,EAAeh0B,KAAK0C,MAAM2P,KAAK,GAC/B/Q,EAAM,GAAA/B,OAAGuB,EAAH,UAAoBkzB,EAApB,iBACVlxB,MAAMxB,GACH2B,KAAK,SAAAgxB,GAAM,OAAIA,EAAO9wB,SACtBF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CAAE4R,WAAY7R,GAAgBP,EAAKqxB,kBAKjDC,YAAuBrzB,0DAAsD4N,KAAKC,OACtF7L,MAAMqxB,GACHlxB,KAAK,SAAAgxB,GAAM,OAAIA,EAAO9wB,SACtBF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CAAEuwB,cAAexwB,gQAO/B6R,EAAajV,KAAK0C,MAAMuS,YACb/I,2BAA2B9L,OAAS,GACjDJ,KAAKqD,SAAS,CACZuF,QAASqM,EAAW/I,2BAA2B,GAAGrH,sJAMtD7E,KAAK8jB,+CAII5e,GACT,IAAI8uB,EAAeh0B,KAAK0C,MAAM2P,KAAK,GAC/B+hB,EAAmBp0B,KAAK0C,MAAMmxB,SAC9BQ,EAAqBr0B,KAAK0C,MAAMmJ,WAChCjD,EAAU5I,KAAK0C,MAAMkG,QACpBwrB,IACHA,EAAmBp0B,KAAK0C,MAAMuS,WAAWqf,aAAa,GAAGroB,UACzDooB,EAAqBr0B,KAAK0C,MAAMuS,WAAWqf,aAAa,GAAGC,aAE7Dv0B,KAAK0R,kBAAkBjC,aACrBukB,EACAI,EACAC,EACAzrB,GAGF5I,KAAKgC,MAAMkhB,QAAQ7S,KACjB,cAAgBrQ,KAAK0C,MAAM2P,KAAK,GAAK,wBAEvCnN,EAAEC,sDAGSV,GACXzE,KAAKqD,SAAS,CAAEuF,QAASnE,EAAMiD,OAAO7C,6CAI3BJ,GACX,IAAI4V,EAAU5V,EAAMiD,OAAOuB,QAAQxE,EAAMiD,OAAO8sB,eAAena,QAC/Dra,KAAKqD,SAAS,CAAEwwB,SAAUxZ,EAAQ3U,GAAImG,WAAYwO,EAAQ1R,wCAInD,IAAAoN,EAAA/V,KACHy0B,EAAmB,GACnBC,EAAY,GAEZC,EAAe,GACf1f,EAAajV,KAAK0C,MAAMuS,WACxB2e,EAAgB5zB,KAAK0C,MAAMkxB,cAC3BgB,EAAgB,GAChBC,EAAc,IAGdjB,EAAcxzB,OAAS,IACzBka,QAAQC,IAAIva,KAAK0C,MAAMkxB,eACvBA,EAAcvqB,IAAI,SAAAiB,GACZA,EAAUpB,MAAM+K,gBAAkB8B,EAAKrT,MAAM2P,KAAK,IACpD/H,EAAUwK,QAAQzL,IAAI,SAAA0L,GACpB6f,EAAcvkB,KACZnR,EAAAC,EAAAC,cAAA,UACEqE,IAAKsR,EAAOrP,GACZonB,UAAS/X,EAAOrP,GAChB4nB,YAAWvY,EAAOpM,KAClB9D,MAAOkQ,EAAOrP,IAEbqP,EAAO7L,QAGZ2rB,EAAYxkB,KAAK,CAAE5M,IAAKsR,EAAOrP,GAAIb,MAAOkQ,EAAO7L,QACjDoR,QAAQC,IAAIqZ,QAMhB3e,KACFwf,EAAmBxf,EAAW/L,MAAM,GAAGrE,MACvC6vB,EAAYzf,EAAWqf,aAAa,GAAGroB,UACzBgJ,EAAWqf,aAAa,GAAGC,YACrCM,EAAYz0B,OAAS,IAEvBu0B,EADUE,EAAY5hB,KAAK,SAAAsG,GAAC,OAAIA,EAAE9V,KAAOixB,IACtB7vB,QAIvB,OACE3F,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,SAAOE,UAAU,qBACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,sBAEFF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAKu1B,KAGTz1B,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,0BAEFF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAKq1B,KAGTv1B,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAI01B,QAAS,GACX51B,EAAAC,EAAAC,cAAA,KAAGE,UAAU,QAAb,wDAGAJ,EAAAC,EAAAC,cAAA,QACEsG,GAAI,mBACJX,SAAU/E,KAAKgf,WAAWjG,KAAK/Y,OAE/Bd,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,UACEyF,MACE7E,KAAK0C,MAAMmxB,SAAW7zB,KAAK0C,MAAMmxB,SAAWa,EAE9ClwB,SAAUxE,KAAK8zB,cAEdc,GAEH11B,EAAAC,EAAAC,cAAA,iEAEEF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLoG,YAAY,+CACZ1B,KAAK,UACLC,MAAO7E,KAAK0C,MAAMkG,QAClBpE,SAAUxE,KAAK+zB,aAAahb,KAAK/Y,SAGrCd,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,UAEhD3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iCA3LFgD,IAAM8B,YAiNxB2wB,GAVgB,kBAC7B71B,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,gDACLgY,UAAWoJ,OE5MXuB,eAIJ,SAAAA,EAAYhzB,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAg1B,IACjB/yB,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAk1B,GAAA5yB,KAAApC,KAAMgC,KAJRyP,eAAiB,IAAIxB,EAGFhO,EAFnByP,kBAAoB,IAAIpD,EAItBrM,EAAKS,MAAQ,CACX+L,KAAM,GACN4D,KAAMpQ,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KACzC0iB,YAAahzB,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACrDV,cAAe5P,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACvDqhB,cAAe,GACfre,cAAe,GACfrC,UAAW,GACX8gB,aAAc/xB,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACtDmhB,eAAgB,GAChBC,gBAAiB,GACjBuB,gBAAiB,GACjBC,kBAAmB,GACnB7gB,cAAe,IAGjBrS,EAAKmzB,eAAiBnzB,EAAKmzB,eAAerc,KAApBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IACtBA,EAAKozB,uBAAyBpzB,EAAKozB,uBAAuBtc,KAA5BjZ,OAAAma,GAAA,EAAAna,CAAAmC,IAC9BA,EAAKqzB,iBAAmBrzB,EAAKqzB,iBAAiBvc,KAAtBjZ,OAAAma,GAAA,EAAAna,CAAAmC,IApBPA,2MA0BbgzB,EAAcj1B,KAAK0C,MAAMuyB,YACzB3zB,EACF,GAAA/B,OAAGuB,EAAH,UACAm0B,EADA,4BAAA11B,OAE4BmP,KAAKC,OACnC7L,MAAMxB,GACH2B,KAAK,SAAAgxB,GAAM,OAAIA,EAAO9wB,SACtBF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CAAE6P,UAAW9P,MAI/BN,MAAK,GAAAvD,OAAIuB,EAAJ,sCACFmC,KAAK,SAAAgxB,GAAM,OAAIA,EAAO9wB,SACtBF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CAAEuwB,cAAexwB,eAGhBpD,KAAK0R,kBAAkB6C,2BACxCvU,KAAK0C,MAAMmP,sBADToiB,SAGJj0B,KAAKqD,SAAS,CAAEiR,cAAe2f,kJAI/Bj0B,KAAK8jB,mDAGQ5e,GACb,IAAI+vB,EAAcj1B,KAAK0C,MAAMuyB,YACzBM,EAAuBv1B,KAAK0C,MAAMsxB,aAClCh0B,KAAK0C,MAAMsxB,aACXh0B,KAAK0C,MAAMwQ,UAAUsiB,iBAAiB,GAAGvpB,UACzCwpB,EAAyBz1B,KAAK0C,MAAMgxB,eACpC1zB,KAAK0C,MAAMgxB,eACX1zB,KAAK0C,MAAMwQ,UAAUsiB,iBAAiB,GAAGjB,YACzCmB,EAA0B11B,KAAK0C,MAAMwyB,gBACrCl1B,KAAK0C,MAAMwyB,gBACXl1B,KAAK0C,MAAMwQ,UAAUyiB,qBAAqB,GAAG1pB,UAC7C2pB,EAA4B51B,KAAK0C,MAAMyyB,kBACvCn1B,KAAK0C,MAAMyyB,kBACXn1B,KAAK0C,MAAMwQ,UAAUyiB,qBAAqB,GAAGpB,YAajDv0B,KAAK0R,kBAAkB9B,wBACrBqlB,EACAM,EACAE,EACAC,EACAE,GAGF51B,KAAKgC,MAAMkhB,QAAQ7S,KACjB,cACErQ,KAAK0C,MAAM2P,KAAK,GAChB,wBACArS,KAAKgC,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACxC,sBAEJrN,EAAEC,gEAGmBV,GACrB,IAAI4V,EAAU5V,EAAMiD,OAAOuB,QAAQxE,EAAMiD,OAAO8sB,eAAena,QAC/Dra,KAAKqD,SAAS,CAAE2wB,aAAc3Z,EAAQ3U,GAAIguB,eAAgBrZ,EAAQ1R,gDAInDlE,GACf,IAAI4V,EAAU5V,EAAMiD,OAAOuB,QAAQxE,EAAMiD,OAAO8sB,eAAena,QAC/Dra,KAAKqD,SAAS,CACZ6xB,gBAAiB7a,EAAQ3U,GACzByvB,kBAAmB9a,EAAQ1R,wCAKtB,IAAAoN,EAAA/V,KACH61B,EAAkB,GAClB3U,EAAgB,GAEhBuT,EAAmB,GACnBqB,EAAoB,GAEpBC,EAAuB,GACvB7iB,EAAYlT,KAAK0C,MAAMwQ,UACvBoB,EAAgBtU,KAAK0C,MAAM4R,cAC3Bsf,EAAgB5zB,KAAK0C,MAAMkxB,cAC3BoC,EAAoB,GACpBC,EAAkB,GAClBzJ,EAAuB,GACvB0J,EAAqB,GAqDzB,GAjDItC,GACFA,EAAcvqB,IAAI,SAAAiB,GACZA,EAAUpB,MAAM+K,eAAiB8B,EAAKrT,MAAMmP,eAC9CvH,EAAU4J,gBAAgB7K,IAAI,SAAAwjB,GAC5BL,EAAqBnc,KACnBnR,EAAAC,EAAAC,cAAA,UACEqE,IAAKopB,EAAennB,GACpBonB,UAASD,EAAennB,GACxB4nB,YAAWT,EAAelkB,KAC1B9D,MAAOgoB,EAAennB,IAErBmnB,EAAe3jB,QAGpBgtB,EAAmB7lB,KAAK,CACtB5M,IAAKopB,EAAennB,GACpBb,MAAOgoB,EAAe3jB,YAQ5BoL,GACFA,EAAcjL,IAAI,SAAAiB,GAChBA,EAAUwK,QAAQzL,IAAI,SAAA0L,GACpBA,EAAOC,aAAa3L,IAAI,SAAA4L,GACK,GAAvBA,EAAWQ,WACbugB,EAAkB3lB,KAChBnR,EAAAC,EAAAC,cAAA,UACEqE,IAAKwR,EAAWvP,GAChBonB,UAAS7X,EAAWvP,GACpB4nB,YAAWrY,EAAWtM,KACtB9D,MAAOoQ,EAAWvP,IAEjBuP,EAAW/L,QAGhB+sB,EAAgB5lB,KAAK,CACnB5M,IAAKwR,EAAWvP,GAChBb,MAAOoQ,EAAW/L,eAQ1BgK,EAAW,CAKb,GAJA2iB,EAAkB3iB,EAAUhK,MAAM,GAAGrE,MACrCqc,EAAgBhO,EAAUsiB,iBAAiB,GAAGvpB,UAC5BiH,EAAUsiB,iBAAiB,GAAGjB,YAChDuB,EAAoB5iB,EAAUyiB,qBAAqB,GAAG1pB,UAClDgqB,EAAgB71B,OAAS,EAE3Bq0B,EADUwB,EAAgBhjB,KAAK,SAAAsG,GAAC,OAAIA,EAAE9V,KAAOyd,IACtBrc,MAIzB,GAAIqxB,EAAmB91B,OAAS,EAE9B21B,EADUG,EAAmBjjB,KAAK,SAAAsG,GAAC,OAAIA,EAAE9V,KAAOqyB,IACrBjxB,MAM/B,OACE3F,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAA,wBAAgBy2B,GAChB32B,EAAAC,EAAAC,cAAA,SAAOE,UAAU,qBACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,UAAKq1B,GACLv1B,EAAAC,EAAAC,cAAA,MAAI+2B,QAAS,GACXj3B,EAAAC,EAAAC,cAAA,QACEsG,GAAI,mBACJX,SAAU/E,KAAKo1B,eAAerc,KAAK/Y,OAEnCd,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,UACEyF,MACE7E,KAAK0C,MAAMsxB,aACPh0B,KAAK0C,MAAMsxB,aACX9S,EAEN1c,SAAUxE,KAAKq1B,wBAEdW,GAEH92B,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAA,UACEyF,MACE7E,KAAK0C,MAAMwyB,gBACPl1B,KAAK0C,MAAMwyB,gBACXY,EAENtxB,SAAUxE,KAAKs1B,kBAEd9I,GAEHttB,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAM,YAKpD3F,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,UAAK22B,cAtPazzB,IAAM8B,WAyQvBgyB,GAVe,kBAC5Bl3B,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,gEACLgY,UAAW2K,OCtQXqB,IAFI91B,OAAOwB,cAMf,SAAAs0B,EAAYr0B,GAAO,IAAAC,EAAA,OAAAnC,OAAAC,EAAA,EAAAD,CAAAE,KAAAq2B,IACjBp0B,EAAAnC,OAAAoC,EAAA,EAAApC,CAAAE,KAAAF,OAAAqC,EAAA,EAAArC,CAAAu2B,GAAAj0B,KAAApC,KAAMgC,KAJRyP,eAAiB,IAAIxB,EAGFhO,EAFnByP,kBAAoB,IAAIpD,EAItBrM,EAAKS,MAAQ,CACX6K,WAAYtL,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACpD0iB,YAAahzB,EAAKD,MAAMqD,SAASiN,SAASC,MAAM,KAAK,GACrD2Y,gBAAiB,GACjB9D,KAAM,IAERnlB,EAAKq0B,MAAQr0B,EAAKq0B,MAAMvd,KAAXjZ,OAAAma,GAAA,EAAAna,CAAAmC,IARIA,6GAWPiD,kFAEK,KACXmJ,EAAQ,CAAC,GAAI,aAEErO,KAAK0R,kBAAkB4kB,MAH3B,KAG2CjoB,UAAtD4lB,SACJ3Z,QAAQC,IAAI0Z,kJAOM,IAAApxB,EAAA7C,KAElB8C,MAAM,GAAAvD,OAAGuB,GAAW,SAAWd,KAAK0C,MAAM6K,WAAa,qBACpDtK,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJP,EAAKQ,SAAS,CACZ6nB,gBAAiB9nB,MAIvB,IAAIqkB,EAAO,GAAAloB,OAAMuB,EAAN,uBACXgC,MAAM2kB,GACHxkB,KAAK,SAAAC,GAAQ,OAAIA,IACjBD,KAAK,SAAAykB,GACJ7kB,EAAKQ,SAAS,CAAE+jB,KAAMM,uCAS1B,OACExoB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,yFAIAF,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAAS4E,QAASlE,KAAKs2B,MAAMvd,KAAK/Y,OAApD,eAzDqBsC,IAAM8B,YA2EpBmyB,GAVY,kBACzBr3B,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,iDACLgY,UAAWgM,+CCqIF5qB,iHApMV,IAXDvC,EAWClK,EAXDkK,MACAstB,EAUCx3B,EAVDw3B,YACAC,EASCz3B,EATDy3B,cACAzoB,EAQChP,EARDgP,UACA0oB,EAOC13B,EAPD03B,IACAC,EAMC33B,EAND23B,YACAC,EAKC53B,EALD43B,OACAC,EAIC73B,EAJD63B,SACAC,EAGC93B,EAHD83B,cACAC,EAEC/3B,EAFD+3B,eACAC,EACCh4B,EADDg4B,OAEA,MAAO,CACLtrB,OAAO5L,OAAA4E,EAAA,EAAA5E,CAAA,CACLI,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,6BAFF,GAAAvB,OAIAuB,EAJA,0DAIiE,CACnEmD,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBi3B,EAApB,uBAGRttB,MAAO,CACL,CACErE,MAAOqE,IAGX+tB,eAAgB,CACd,CACEhrB,UAAW+B,IAGfkpB,UAAW,CACT,CACEryB,MAAO6xB,IAGXS,mBAAoB,CAClB,CACEtyB,MAAO8xB,EACPhN,OAAQ,eAGZyN,aAAc,CACZ,CACEvyB,MAAO+xB,IAGXS,gBAAiB,CACf,CACExyB,MAAOgyB,IAGXS,+BAAgC,CAC9B,CACEzyB,MAAOiyB,IAGX1oB,6BAA8B,CAC5B,CACEvJ,MAAOkyB,IAGXQ,YAAa,CACX,CACEtrB,UAAW+qB,EACXtuB,YAAa,oBAGjB8uB,wBAAyB,CACvB,CACE3yB,MAAO,UAGX3E,KAAM,CACJ,CACE+L,UAAW,YAGfN,UAAU7L,OAAA4E,EAAA,EAAA5E,CAAA,MAAAP,OACJuB,EADG,0DAC8D,CACnE,CACE4K,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBi3B,EAApB,sBAENt2B,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,0CAGR6H,KAAM,CACJ,CACE9D,MAAO4xB,IAGXrqB,KAAM,6CAQdqrB,EACAvuB,EACAwtB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAW,EACAV,GAEA,MAAO,CACLtrB,OAAQ,CACNS,KAAM,CACJlI,KAAI,GAAA1E,OAAKuB,EAAL,UAAAvB,OAAoBk4B,EAApB,sBAENv3B,KAAM,CACJ+D,KAAI,GAAA1E,OAAKuB,EAAL,6BAGRoI,MAAO,CACL,CACErE,MAAOqE,IAGXguB,UAAW,CACT,CACEryB,MAAO6xB,IAGXS,mBAAoB,CAClB,CACEtyB,MAAO8xB,EACPhN,OAAQ,eAGZyN,aAAc,CACZ,CACEvyB,MAAO+xB,IAGXS,gBAAiB,CACf,CACExyB,MAAOgyB,IAGXS,+BAAgC,CAC9B,CACEzyB,MAAOiyB,EACPnN,OAAQ,eAGZvb,6BAA8B,CAC5B,CACEvJ,MAAOkyB,EACPpN,OAAQ,eAGZ4N,YAAa,CACX,CACEtrB,UAAW+qB,GAAkB,OAIjCQ,wBAAyB,CACvB,CACE3yB,MAAO6yB,IAGXx3B,KAAM,CACJ,CACE+L,UAAW,gDAMDwrB,EAAW7uB,GAC3B,IAAI+uB,EAAc,GAWlB,OAVA/uB,EAAQ2H,QAAQ,SAASsE,GACvB8iB,EAAYtnB,KAAK,CACf4E,WAAYJ,EAAKI,WACjB2iB,UAAW/iB,EAAK+iB,UAChB9nB,WAAY+E,EAAK/E,WAAW8V,WAMzB,CACL1lB,KAAM,CACJ,CACE+L,UAAW,YAGfgB,WAAY,CACV,CACEpI,MAAO4yB,IAGXI,sBAAuBF,oDCmFdG,cAvRb,SAAAA,IACE,GADah4B,OAAAC,EAAA,EAAAD,CAAAE,KAAA83B,GAAA93B,KAFfuO,KAAO,IAAIpN,EAGL22B,EAAe73B,SACjB,OAAOD,KAAKC,SAEd63B,EAAe73B,SAAWD,uGAGRiJ,yFACKjJ,KAAKuO,KAAK3M,KAAV,yBAErBgN,GAAKmpB,cAAc9uB,kBAFfuF,2BAICA,EAASC,qLAIhBgpB,EACAvuB,EACAwtB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAW,EACAV,yFAEuBh3B,KAAKuO,KAAK1M,MAAV,SAAAtC,OACZk4B,EADY,qBAErB7oB,GAAKopB,YACHP,EACAvuB,EACAwtB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAW,EACAV,kBAZExoB,2BAgBCA,EAASC,sMAGDgpB,EAAW7uB,yFACH5I,KAAKuO,KAAK1M,MAAV,0CAErB+M,GAAKqpB,WAAWR,EAAW7uB,GAC3B,sBAHI4F,2BAKCA,EAASC,8LAIhBoD,EACA2kB,EACA7R,EACAzb,EACAwtB,EACAwB,EACAtB,EACAlS,EACAyT,EACAC,EACA5T,6EAEI5b,EAAU,IAEVyvB,EAAuB1xB,KAAKkd,MAAMrjB,aAAaC,QAAQ,mBAErD43B,EAAqBC,kBACvB1vB,EAAUyvB,EAAqBC,kBAI/BlV,EAAe,CACjBvR,gBACA2kB,cACA7R,gBACAzb,QACAwtB,MACAwB,eACAtB,SACAlS,YACAyT,2BACAC,yBACA5T,UAGU,gBAAsB5b,EAElCpI,aAAa+3B,QAAQ,eAAgB5xB,KAAKC,UAAUwc,IACpD9I,QAAQC,IAAI,2OAGQ3R,0EAChBwa,EAAezc,KAAKkd,MAAMrjB,aAAaC,QAAQ,kBACvC,gBAAsBmI,EAClCpI,aAAa+3B,QAAQ,eAAgB5xB,KAAKC,UAAUwc,6IAGnCna,GACjBzI,aAAa+3B,QAAQ,sBAAuB5xB,KAAKC,UAAUqC,4CAG7CA,GAId,IAAIuvB,EAAM,IAAIC,KAAM,IAAK,KAAM,MAC/BD,EAAIE,QAAQ,aACZ,IA6GIC,EA3GAC,EAAcC,OAASlP,OAAO,aAC9BmP,EAAcD,OAASlP,OAAO,YAE9BoP,EAAWP,EAAIQ,SAASC,SAASC,WACjCC,EAAYX,EAAIQ,SAASC,SAASG,YAOlCC,EAAcb,EAAIQ,SAASC,SAASC,WAAa,GACjDI,EAAiB,OAAXP,EACNQ,EAAoB,aAAXR,EAETS,EAAiB,EAANF,EAAmB,EAATC,EAEnBE,EAAcV,EAAWS,EAAW,GAStCE,EAlBuB,MAWHzwB,EAAQ0wB,aAC5B1wB,EAAQ2wB,iBAAiB,GAAG3vB,MAC5B,MACqBhB,EAAQ0wB,aAC7B1wB,EAAQ2wB,iBAAiB,GAAG1vB,OAC5B,MAIA2vB,EAtBgB,GA8BpB,GALArB,EAAIsB,YAAY,UAChBtB,EAAIuB,YAAY,IAChBvB,EAAItwB,KA1Be,GADC,GA2Bc,+BAG9Be,EAAQ+wB,kBAAmB,CAC7B,IAOIC,EAnCgB,MA4BKhxB,EAAQ+wB,kBAAkB,GAC/C/wB,EAAQ+wB,kBAAkB,GAAG/vB,MAC7B,MACsBhB,EAAQ+wB,kBAAkB,GAChD/wB,EAAQ+wB,kBAAkB,GAAG9vB,OAC7B,KAIAgwB,EAAWjxB,EAAQ+wB,kBAAkB,GAAGzV,IAE5CiU,EAAI2B,SACFD,EAFa,MAIbb,EAAc,IACd,EA3CkB,IA6ClBY,EACA,GACA,QAeJ,GAXAJ,GAA8B,GAG9BrB,EAAIuB,YAAY,IAChBvB,EAAItwB,KAzDe,GA2DjB2xB,EACA5wB,EAAQC,MAAQ,MAAQD,EAAQ4tB,UAI9B5tB,EAAQ0wB,aAAc,CACxB,IAAIz5B,EAAqC,eAA9B+I,EAAQ0wB,aAAaz5B,KAAwB,OAAS,MAC7Dk6B,EAAUnxB,EAAQ2wB,iBAAiB,GAAGrV,IAC1CiU,EAAI2B,SACFC,EACAl6B,EArEe,GAuEf25B,EAAe,GAtEQ,IAwEvBH,EACA,GACA,QAMJ,GAAIzwB,EAAQ2tB,QAAU3tB,EAAQytB,IAAK,CACjC,IAAIE,EAAS3tB,EAAQ2tB,OACjB3tB,EAAQytB,IACNztB,EAAQ2tB,OAAS,KACjB3tB,EAAQ2tB,OACV,GACAF,EAAMztB,EAAQytB,IAAMztB,EAAQytB,IAAM,SAAW,GAEjD8B,EAAIuB,YAAY,IAChBvB,EAAItwB,KA1Fa,GA4FfwxB,EAAsBG,EAAe,GACrCjD,EAASF,GAQb,GAJAmD,GAA8B,GAI1B5wB,EAAQ6tB,cAAe,CACzB0B,EAAIuB,YAAY,IAChBvB,EAAItwB,KAAKsxB,EAAUK,EAAc,+BACjCA,GAA8B,GAE9BrB,EAAIuB,YAAY,IAChB,IAAIjD,EAAgB0B,EAAI6B,gBACtBpxB,EAAQ6tB,cACR2C,GAGFd,EAAOH,EAAI8B,kBAAkBxD,GAQ7B0B,EAAI+B,SAAStxB,EAAQ6tB,cAAe0C,EAAUK,EAAc,CAE1D5vB,MAAOwvB,IAITI,GAA8B,GAIhC,GAAI5wB,EAAQ0tB,YAAa,CACvB6B,EAAIuB,YAAY,IAChBvB,EAAItwB,KAAKsxB,EAAUb,EAAK6B,EAAIX,EAAc,+BAC1CA,GAA8B,GAE9BrB,EAAIuB,YAAY,IAChB,IAAIpD,EAAc6B,EAAI6B,gBAAgBpxB,EAAQ0tB,YAAa8C,GAEhDjB,EAAI8B,kBAAkB3D,GACjCkD,EAAelB,EAAK6B,EAAIX,EAExBrB,EAAItwB,KAAKsxB,EAAUK,EAAclD,GAGnC6B,EAAIuB,YAAY,GAChBvB,EAAItwB,KAjJe,GAmJjBixB,EAAY,GACZ,sBAAwBP,EAAc,OAASE,GAIjD,IAAI2B,EAAsBxxB,EAAQ4tB,SAAStkB,MAAM,KAAKqT,KAAK,KAC3D4S,EAAIkC,KAAKD,EAAoBxmB,cAAgB,iBClRpC0mB,GAAgB,SAAA34B,GACJ,IAAIiO,EAA3B,IACM2qB,EAAiB,IAAI9C,GAFSvtB,EAGVC,mBAAS,IAHCC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAG7BrB,EAH6BuB,EAAA,GAGtBowB,EAHsBpwB,EAAA,GAAAI,EAIdL,mBAAS,IAJKM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAI7B6rB,EAJ6B5rB,EAAA,GAIxBgwB,EAJwBhwB,EAAA,GAAAiM,EAKEvM,mBAAS,IALXwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAK7B4f,EAL6B3f,EAAA,GAKhB+jB,EALgB/jB,EAAA,GAAAG,EAMR3M,mBAAS,IAND4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAM7Byf,EAN6Bxf,EAAA,GAMrB4jB,EANqB5jB,EAAA,GAAA6jB,EAQIzwB,qBARJ0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GAQ7BtB,EAR6BuB,EAAA,GAQfC,EAReD,EAAA,GAAAE,EASY5wB,mBAAS,IATrB6wB,EAAAv7B,OAAA4K,EAAA,EAAA5K,CAAAs7B,EAAA,GAS7BxB,EAT6ByB,EAAA,GASXC,EATWD,EAAA,GAAAE,EAUd/wB,qBAVcgxB,EAAA17B,OAAA4K,EAAA,EAAA5K,CAAAy7B,EAAA,GAAAE,GAAAD,EAAA,GAAAA,EAAA,GAWAhxB,sBAXAkxB,EAAA57B,OAAA4K,EAAA,EAAA5K,CAAA27B,EAAA,GAW7BE,EAX6BD,EAAA,GAWjBE,EAXiBF,EAAA,GAAAG,EAYMrxB,qBAZNsxB,EAAAh8B,OAAA4K,EAAA,EAAA5K,CAAA+7B,EAAA,GAY7BE,EAZ6BD,EAAA,GAYdE,EAZcF,EAAA,GAAAG,EAaMzxB,qBAbN0xB,EAAAp8B,OAAA4K,EAAA,EAAA5K,CAAAm8B,EAAA,GAa7BE,EAb6BD,EAAA,GAadE,EAbcF,EAAA,GAAAG,EAeJ7xB,mBAAS,IAfL8xB,EAAAx8B,OAAA4K,EAAA,EAAA5K,CAAAu8B,EAAA,GAe7BxF,EAf6ByF,EAAA,GAenBC,EAfmBD,EAAA,GAAAE,EAgBMhyB,mBAAS,IAhBfiyB,EAAA38B,OAAA4K,EAAA,EAAA5K,CAAA08B,EAAA,GAgB7B1F,GAhB6B2F,EAAA,GAgBdC,GAhBcD,EAAA,GAAAE,GAiBQnyB,mBAAS,IAjBjBoyB,GAAA98B,OAAA4K,EAAA,EAAA5K,CAAA68B,GAAA,GAiB7B5F,GAjB6B6F,GAAA,GAiBbC,GAjBaD,GAAA,GAAAE,GAmBFtyB,qBAnBEuyB,GAAAj9B,OAAA4K,EAAA,EAAA5K,CAAAg9B,GAAA,GAmB7BxyB,GAnB6ByyB,GAAA,GAmBlBC,GAnBkBD,GAAA,GAAAE,GAoBczyB,mBAAS,IApBvB0yB,GAAAp9B,OAAA4K,EAAA,EAAA5K,CAAAm9B,GAAA,GAoB7BjD,GApB6BkD,GAAA,GAqB9BrrB,IArB8BqrB,GAAA,GAqBdl7B,EAAMqD,SAASiN,SAASC,MAAM,KAAK,IACnDT,GAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAtBxB4qB,GAwBN3yB,qBAxBM4yB,GAAAt9B,OAAA4K,EAAA,EAAA5K,CAAAq9B,GAAA,GAwB7Blc,GAxB6Bmc,GAAA,GAwBpBC,GAxBoBD,GAAA,GAAAE,GA0BM9yB,qBA1BN+yB,GAAAz9B,OAAA4K,EAAA,EAAA5K,CAAAw9B,GAAA,GA0BdE,IA1BcD,GAAA,GAAAA,GAAA,IAAAE,GA2BYjzB,qBA3BZkzB,GAAA59B,OAAA4K,EAAA,EAAA5K,CAAA29B,GAAA,GA2BXE,IA3BWD,GAAA,GAAAA,GAAA,IAAAE,GA6BcpzB,qBA7BdqzB,GAAA/9B,OAAA4K,EAAA,EAAA5K,CAAA89B,GAAA,GA6B7BE,GA7B6BD,GAAA,GA6BVE,GA7BUF,GAAA,GAiC9BtvB,GAAO,IAAIpN,EAEjByiB,oBAAU,WAER,IAsBME,EAAS,eAAA9kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,IAAAurB,EAAAC,EAAA1xB,EAAAM,EAAAqxB,EAAAC,EAAA,OAAAxrB,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAERkrB,EAAWzvB,GACd/M,IADc,GAAAjC,OAEVuB,EAFU,SAAAvB,OAEIsS,GAFJ,KAAAtS,OAEqBuS,GAFrB,kBAId7O,KAAK,SAAAm7B,GAAS,OAAIA,EAAU3vB,OAEzBwvB,EAAW1vB,GACd/M,IADc,GAAAjC,OACPuB,EADO,sCAEdmC,KAAK,SAAAo7B,GAAS,OAAIA,EAAU5vB,OAVjBoE,EAAAE,KAAA,EAYeyN,QAAQC,IAAI,CAACud,EAAUC,IAZtC,OAAA1xB,EAAAsG,EAAA4S,KAAA5Y,EAAA/M,OAAA4K,EAAA,EAAA5K,CAAAyM,EAAA,GAYP2xB,EAZOrxB,EAAA,GAYAsxB,EAZAtxB,EAAA,GAkCdmwB,GAAakB,GACbH,GACEI,EAAMjzB,OAAO,SAAA2J,GACX,OAAOA,EAAK3L,MAAM+K,gBAAkBpC,MArC1BgB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAyCdyH,QAAQC,IAAR1H,EAAAO,IAzCc,yBAAAP,EAAAY,SAAAhB,EAAA,kBAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,IAtBG,WAChB,IAAIm+B,EAAgB33B,KAAKkd,MACvBrjB,aAAaC,QAAQ,wBAEvB48B,GAAWiB,GAEPA,IACFzD,EAASyD,EAAcp1B,OACvBqzB,EAAY+B,EAAczH,UAC1BiE,EAAOwD,EAAc5H,KACrBsE,EAAUsD,EAAc1H,QACxB8F,GAAiB4B,EAAcxH,eAC/BiE,EAAeuD,EAAc3H,aAC7BkG,GAAkByB,EAAcvH,gBAC5BuH,EAAc1E,iBAAiB,KACjC0B,EAAoBgD,EAAc1E,kBAClCgC,EAAc0C,EAAc1E,iBAAiB,GAAGrV,OAmDtDga,GACAza,KACC,CAAC6V,IAEJ,IAAM9P,GAAY,eAAA2U,EAAA1+B,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAApB,EAAMsP,GAAN,IAAAiP,EAAA3kB,EAAA4kB,EAAAriB,EAAApG,EAAAgpB,EAAAsH,EAAA1T,EAAApc,EAAA,OAAAmE,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,UACnBwU,EAAIpiB,iBACAqxB,EAAclsB,GAAU,GAAG4K,IAC3BrD,EAAgBvH,GAAU,GAAGpB,MAC7ButB,EAAgBnsB,GAAU,GAAG3B,KACjC2R,QAAQC,IAAIujB,IACR1pB,EAAc0pB,GAAkB,GAAGzzB,SAAS4I,KAC9C,SAAAwrB,GAAG,MAAkB,QAAdA,EAAIpqB,SAGTrG,EAAYoG,EAAY1O,GACV,GACdsxB,EAAS,QAIV9tB,IACA2tB,GACD3tB,EAAM9I,OAAS,GACfy2B,EAASz2B,OAAS,GAClB+7B,GACAJ,GArBiB,CAAA7jB,EAAAnF,KAAA,SAAAmF,EAAAnF,KAAA,oBAyBTvS,aAAaC,QAAQ,SAzBZ,CAAAyX,EAAAnF,KAAA,SA0BjByqB,GAAiB,IACjBG,GAAoB,IAGhBW,EAAgB33B,KAAKkd,MACvBrjB,aAAaC,QAAQ,wBAGvBm6B,EAAe8D,mBAAmB,CAChCx1B,QACAstB,cACAwD,qBACAnoB,gBACA4kB,gBACAC,MACAC,cACAC,SACAC,WACAC,iBACAC,kBACA4C,eAEAC,mBACAhxB,QAAS01B,EAAgBA,EAAc11B,QAAU,GACjD+1B,kBAAmBL,EAAgBA,EAAcK,kBAAoB,KAlDtDzmB,EAAAnF,KAAA,qBAqDRvS,aAAaC,QAAQ,SAAS0D,SAAS,qBArD/B,CAAA+T,EAAAnF,KAAA,aAsDb4mB,EAtDa,CAAAzhB,EAAAnF,KAAA,gBAuDX6X,EAAQpqB,aAAaC,QAAQ,cAvDlByX,EAAAnF,KAAA,GAwDTjQ,MACJhC,EAAS,yDACT,CACEkC,YAAa,UACbD,OAAQ,OACR2mB,QAAS,iBACTtoB,QAAS,CACPw9B,OAAQ,2BACRj+B,eAAgB,2BAChBC,eAAgBgqB,EAChBiU,sBAAuB,wCAEzBn9B,KAAMi4B,IAGP12B,KAAK,SAAAgvB,GAAI,OAAIA,EAAK9uB,SAClBF,KAAK,SAASwL,GACbuoB,EAASvoB,EAAKqwB,IAAI,GAAGj6B,QAzEV,eAAAqT,EAAAnF,KAAA,GA6EI6nB,EAAe7C,cAAc,CAChD7uB,QACAstB,cACAC,gBACAzoB,YACA0oB,MACAC,cACAC,SACAC,WACAC,iBACAC,kBACAC,WAxFe,QA6EbxoB,EA7Ea0J,EAAAuN,KA2FjBzjB,EAAMkhB,QAAQ7S,KAAd,cAAA9Q,OACgBsS,EAAcoC,cAD9B,KAAA1U,OAC+CuS,GAD/C,kBAAAvS,OAEIiP,EAAS0G,IAAI,GAAGrQ,MAFpB,KAAAtF,OAGMiP,EAAS6D,KAAK,GAAG0sB,QA9FN,yBAAA7mB,EAAAzE,SAAAwE,MAAH,gBAAAwB,GAAA,OAAA+kB,EAAA9kB,MAAA1Z,KAAAG,YAAA,GAsLlB,IA4CMmG,GA5CsB,WAC1B,IAAIA,EAAc,cAIlB,OAHK9F,aAAaC,QAAQ,WACxB6F,EAAc,QAETA,EAuCW04B,GAGhBC,GAAoB,sBACpBC,GAAuB,sBACvBC,GAAW,0DACXC,GACF,+DAeF,OAdIl2B,GACEA,EAAM9I,OAAS,IACjB++B,GAAW,GACXF,GAAoB,IAIpBpI,GACEA,EAASz2B,OAAS,IACpBg/B,GAAe,GACfF,GAAuB,IAKzBhgC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,oBAAYkH,GAAZ,YACApH,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOoG,GAAG,sBAAsBX,SAAU8kB,IACxD3qB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLwF,GAAG,QACHY,YAAY,OACZ9B,SAAU,SAAAU,GAAC,OAAI21B,EAAS31B,EAAEwC,OAAO7C,QACjCw6B,aAAcpe,GAAUA,GAAQ/X,MAAQA,IAE1ChK,EAAAC,EAAAC,cAAA,OAAKE,UAAW2/B,IACd//B,EAAAC,EAAAC,cAAA,SAAI+/B,OAIVjgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLwF,GAAG,WACHY,YAAY,YACZ9B,SAAU,SAAAU,GAAC,OAAIq3B,EAAYr3B,EAAEwC,OAAO7C,QACpCw6B,aAAcpe,GAAUA,GAAQ4V,SAAWA,IAE7C33B,EAAAC,EAAAC,cAAA,OAAKE,UAAW4/B,IACdhgC,EAAAC,EAAAC,cAAA,SAAIggC,QAMZlgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBAAf,QACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBAGjBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAOwF,GAAG,aAAalB,SA1L1B,SAAAU,GACnB,GAAKA,EAAEwC,OAAO43B,OAAmC,IAA1Bp6B,EAAEwC,OAAO43B,MAAMl/B,OAAtC,CAIoBm/B,IAAIC,gBAAgBt6B,EAAEwC,OAAO43B,MAAM,IAEjDp6B,EAAEwC,OAAO43B,MAAM,GAAGG,KAAO,QAC3BzD,EAAiB,GAEjBA,OAAiB37B,GAIS,cAA1B6E,EAAEwC,OAAO43B,MAAM,GAAGp/B,MACQ,aAA1BgF,EAAEwC,OAAO43B,MAAM,GAAGp/B,KAElBk8B,EAAiB,GAEjBA,OAAiB/7B,GAInB,IAAMq/B,EAAS,IAAIC,WACnBD,EAAOv3B,iBACL,OACA,WAEEyzB,EAAc8D,EAAOzL,QAGrB,IAAI2L,EAAM,IAAIC,MACdD,EAAIrb,IAAMmb,EAAOzL,OACjB2L,EAAIz3B,iBAAiB,OAAQ,WAC3By3B,EAAI31B,MAAQjK,KAAKiK,MACjB21B,EAAI11B,OAASlK,KAAKkK,OAElBoxB,EAAoB,CAClB,CACE/W,IAAKvkB,KAAKukB,IACVta,MAAOjK,KAAKiK,MACZC,OAAQlK,KAAKkK,cAKrB,GAEEhF,EAAEwC,OAAO43B,OACXI,EAAOI,cAAc56B,EAAEwC,OAAO43B,MAAM,IAGtCnE,EAAgBj2B,EAAEwC,OAAO43B,MAAM,SAlD/BnE,OAAgB96B,OA2LVnB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,OACEsG,GAAG,mBACHuE,MAAM,QACNsa,IAAKoX,EACLzxB,OAAO,QACPrG,MAAO,CACLsG,OAAQ,iBACRrG,QAAS,MACTmG,MAAO,SAGV0xB,EACCz8B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,KAAG6E,KAAK,IAAIC,QAAS,SAAAgB,GAAC,OAnJd,SAAAA,GACtBA,EAAEC,iBACFg2B,OAAgB96B,GAChBu7B,OAAcv7B,GACd+7B,OAAiB/7B,GACjB27B,OAAiB37B,GACjB+E,SAASsmB,eAAe,cAAc7mB,MAAQ,GA6INk7B,CAAgB76B,KAA1C,kBAKF,GAGD62B,EACC78B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,uDAAmD,KAGrD,GAGD+8B,EACCj9B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,kDAA8C,KAGhD,IAIJF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,SACLwF,GAAG,MACHY,YAAY,MACZ2D,MAAO,EACPzF,SAAU,SAAAU,GAAC,OAAI41B,EAAO51B,EAAEwC,OAAO7C,QAC/Bw6B,aAAcpe,GAAUA,GAAQyV,IAAMA,KAI1Cx3B,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,UACEoF,SAAU,SAAAU,GAAC,OAAI81B,EAAU91B,EAAEwC,OAAO7C,QAClCw6B,aAAcpe,GAAUA,GAAQ2V,OAASA,GAEzC13B,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,QACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,QACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,UAAf,UACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,aAAf,aACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,kBAAf,wBAIN3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAMqoB,GACNoJ,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBglB,GAAiBjuB,OAKvBvP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,4CACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAMkoB,EACNuJ,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBqjB,EAAetsB,OAKrBvP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAMsoB,GACNmJ,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBmlB,GAAkBpuB,OAIxBvP,EAAAC,EAAAC,cAAA,aAIJF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAhPV,WACE,IAAI+gC,EAAoB,oBAKxB,OAJK3/B,aAAaC,QAAQ,WACxB0/B,EAAoB,oBAGfjhC,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAOs7B,KA0O9C,OAEFjhC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBAiBV8gC,GAVc,kBAC3BlhC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,gDACLgY,UAAWsQ,OCneF0F,GA5DG,SAAAr+B,GAChB,IAAMs+B,EAAYt+B,EAAMs+B,UAoBxB,OACEphC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACkM,EAAAnM,EAAD,CAAYoM,OAAQ+0B,EAAWz8B,MAfd,CACnB6F,QAAS,CACPC,IAAK,MACLC,KAAM,MACNC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,UAAW,wBACXC,MAAO,MACPs2B,gBAAiB,aAOfrhC,EAAAC,EAAAC,cAAA,UAAQyE,MAAO,CAAE2B,MAAO,SAAWtB,QAAS,SAAAgB,GAnBhDlD,EAAM8rB,eAoBA5uB,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,wCAEX5H,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,QAAT,kIAKA5H,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,QAAT,2NAOA5H,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,QAAT,+KAMA5H,EAAAC,EAAAC,cAAA,0CACAF,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,QAAT,kJCzCK05B,GAAqB,SAAAx+B,GAChC,IAAMkhB,EAAUC,cAEVyX,GADiB,IAAI3qB,EACJ,IAAI6nB,IAHcvtB,EAIfC,mBAAS,IAJMC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAIlCrB,EAJkCuB,EAAA,GAI3BowB,EAJ2BpwB,EAAA,GAAAI,EAKnBL,mBAAS,IALUM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAKlC6rB,EALkC5rB,EAAA,GAK7BgwB,EAL6BhwB,EAAA,GAAAiM,EAMHvM,mBAAS,IANNwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAMlC4f,EANkC3f,EAAA,GAMrB+jB,EANqB/jB,EAAA,GAAAG,EAOb3M,mBAAS,IAPI4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAOlCyf,EAPkCxf,EAAA,GAO1B4jB,EAP0B5jB,EAAA,GAAA6jB,EASDzwB,qBATC0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GASlCtB,EATkCuB,EAAA,GASpBC,EAToBD,EAAA,GAAAE,EAUO5wB,mBAAS,IAVhB6wB,EAAAv7B,OAAA4K,EAAA,EAAA5K,CAAAs7B,EAAA,GAUlCxB,EAVkCyB,EAAA,GAUhBC,EAVgBD,EAAA,GAAAE,EAWnB/wB,qBAXmBgxB,EAAA17B,OAAA4K,EAAA,EAAA5K,CAAAy7B,EAAA,GAAAE,GAAAD,EAAA,GAAAA,EAAA,GAYLhxB,sBAZKkxB,EAAA57B,OAAA4K,EAAA,EAAA5K,CAAA27B,EAAA,GAYlCE,EAZkCD,EAAA,GAYtBE,EAZsBF,EAAA,GAAAG,EAaCrxB,qBAbDsxB,EAAAh8B,OAAA4K,EAAA,EAAA5K,CAAA+7B,EAAA,GAalCE,EAbkCD,EAAA,GAanBE,EAbmBF,EAAA,GAAAG,EAcCzxB,qBAdD0xB,EAAAp8B,OAAA4K,EAAA,EAAA5K,CAAAm8B,EAAA,GAclCE,EAdkCD,EAAA,GAcnBE,EAdmBF,EAAA,GAAAG,EAgBT7xB,mBAAS,IAhBA8xB,EAAAx8B,OAAA4K,EAAA,EAAA5K,CAAAu8B,EAAA,GAgBlCxF,EAhBkCyF,EAAA,GAgBxBC,GAhBwBD,EAAA,GAAAE,GAiBChyB,mBAAS,IAjBViyB,GAAA38B,OAAA4K,EAAA,EAAA5K,CAAA08B,GAAA,GAiBlC1F,GAjBkC2F,GAAA,GAiBnBC,GAjBmBD,GAAA,GAAAE,GAkBGnyB,mBAAS,IAlBZoyB,GAAA98B,OAAA4K,EAAA,EAAA5K,CAAA68B,GAAA,GAkBlC5F,GAlBkC6F,GAAA,GAkBlBC,GAlBkBD,GAAA,GAAAE,GAoBPtyB,qBApBOuyB,GAAAj9B,OAAA4K,EAAA,EAAA5K,CAAAg9B,GAAA,GAoBlCxyB,GApBkCyyB,GAAA,GAoBvBC,GApBuBD,GAAA,GAAAE,GAqBSzyB,mBAAS,IArBlB0yB,GAAAp9B,OAAA4K,EAAA,EAAA5K,CAAAm9B,GAAA,GAsBnCprB,IAtBmCqrB,GAAA,GAAAA,GAAA,GAsBnBl7B,EAAMqD,SAASiN,SAASC,MAAM,KAAK,IACnDT,GAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAvBnB4qB,GAyBX3yB,qBAzBW4yB,GAAAt9B,OAAA4K,EAAA,EAAA5K,CAAAq9B,GAAA,GAyBlClc,GAzBkCmc,GAAA,GAyBzBC,GAzByBD,GAAA,GAAAE,GA2BC9yB,qBA3BD+yB,GAAAz9B,OAAA4K,EAAA,EAAA5K,CAAAw9B,GAAA,GA2BnBE,IA3BmBD,GAAA,GAAAA,GAAA,IAAAE,GA4BOjzB,qBA5BPkzB,GAAA59B,OAAA4K,EAAA,EAAA5K,CAAA29B,GAAA,GA4BhBE,IA5BgBD,GAAA,GAAAA,GAAA,IAAAE,GA8BSpzB,qBA9BTqzB,GAAA/9B,OAAA4K,EAAA,EAAA5K,CAAA89B,GAAA,GA8BlCE,GA9BkCD,GAAA,GA8BfE,GA9BeF,GAAA,GAAA4C,GAgCPj2B,mBAAS,GAhCFk2B,GAAA5gC,OAAA4K,EAAA,EAAA5K,CAAA2gC,GAAA,GAgClCH,GAhCkCI,GAAA,GAgCvBC,GAhCuBD,GAAA,GAoCrCpC,GAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,iBAE9C8N,GAAO,IAAIpN,EAEjByiB,oBAAU,WAER,IAAI2a,EAAS,eAAAv/B,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACRsqB,GAAWiB,IADH,OAGVA,KACFzD,EAASyD,GAAcp1B,OACvBqzB,GAAY+B,GAAc5Z,WAC1BoW,EAAO8F,SAAStC,GAAc5H,MAC9BsE,EAAUsD,GAAc1H,QACxB8F,GAAiB4B,GAAcnG,0BAC/B4C,EAAeuD,GAAcpG,cAC7B2E,GAAkByB,GAAclG,wBAC5BkG,GAAc9Z,MAAM,KACtB8W,EAAoBgD,GAAc9Z,OAClCoX,EAAc0C,GAAc9Z,MAAM,GAAGljB,OAb3B,wBAAAuR,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,GAmBP2jB,EAAS,eAAAvX,EAAAzM,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAApB,IAAA,IAAA+lB,EAAAC,EAAApxB,EAAA2xB,EAAAN,EAAAC,EAAA,OAAAxrB,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,cAAAmF,EAAApF,KAAA,EAERkrB,EAAWzvB,GACd/M,IADc,GAAAjC,OAEVuB,EAFU,SAAAvB,OAEIsS,GAFJ,KAAAtS,OAEqBuS,GAFrB,kBAId7O,KAAK,SAAAm7B,GAAS,OAAIA,EAAU3vB,OAEzBwvB,EAAW1vB,GACd/M,IADc,GAAAjC,OACPuB,EADO,sCAEdmC,KAAK,SAAAo7B,GAAS,OAAIA,EAAU5vB,OAVjByJ,EAAAnF,KAAA,EAYeyN,QAAQC,IAAI,CAACud,EAAUC,IAZtC,OAAApxB,EAAAqL,EAAAuN,KAAA+Y,EAAA1+B,OAAA4K,EAAA,EAAA5K,CAAA+M,EAAA,GAYPqxB,EAZOM,EAAA,GAYAL,EAZAK,EAAA,GAadxB,GAAakB,GACbH,GACEI,EAAMjzB,OAAO,SAAA2J,GACX,OAAOA,EAAK3L,MAAM+K,gBAAkBpC,MAhB1BqG,EAAAnF,KAAA,iBAAAmF,EAAApF,KAAA,GAAAoF,EAAA9E,GAAA8E,EAAA,SAoBdoC,QAAQC,IAARrC,EAAA9E,IApBc,yBAAA8E,EAAAzE,SAAAwE,EAAA,kBAAH,yBAAA1L,EAAAmN,MAAA1Z,KAAAG,YAAA,GAwBfo+B,IACAza,KACC,CAAC6V,IAEJ,IAAM9P,GAAY,eAAAgX,EAAA/gC,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAAlB,EAAMoP,GAAN,IAAAiP,EAAA7R,EAAAuT,EAAAxT,EAAAyT,EAAAC,EAAA5T,EAAA,OAAA7R,EAAAxT,EAAAyT,KAAA,SAAAwF,GAAA,cAAAA,EAAAtF,KAAAsF,EAAArF,MAAA,UACnBwU,EAAIpiB,iBACAqxB,EAAclsB,GAAU,GAAG4K,IAEX5K,GAAU,GAAG3B,KAEfm1B,GAAkB,GAAGzzB,SAAS4I,KAC9C,SAAAwrB,GAAG,MAAkB,QAAdA,EAAIpqB,SAITsQ,EAAgB7S,GACF,GACL,QAIV5I,IACA2tB,GACD3tB,EAAM9I,OAAS,GACfy2B,EAASz2B,OAAS,GAClB+7B,GACAJ,GAtBiB,CAAA3jB,EAAArF,KAAA,gBAAAqF,EAAA0oB,OAAA,SAwBV,GAxBU,QA2BTtgC,aAAaC,QAAQ,WAC7B+8B,GAAiB,IACjBG,GAAoB,IAGAh3B,KAAKkd,MACvBrjB,aAAaC,QAAQ,wBAGnBy3B,EAAevB,GAA4B,GAC3CjS,EAAYmS,GAAsB,GAClCsB,EAA2BrB,IAAgC,GAC3DsB,EAAyBrB,IAAkC,GAC3DvS,EAAQoV,GAAsC,GAElDgB,EAAemG,mBACblvB,GACA2kB,EACA7R,EACAzb,EACAwtB,EACAwB,EACAtB,EACAlS,EACAyT,EACAC,EACA5T,GAEFtB,EAAQ7S,KAAR,cAAA9Q,OACgBsS,GADhB,KAAAtS,OACiCuS,GADjC,0BAvDiB,yBAAAsG,EAAA3E,SAAA0E,MAAH,gBAAAsB,GAAA,OAAAonB,EAAAnnB,MAAA1Z,KAAAG,YAAA,GA+IlB,IA4CMmG,GA5CsB,WAC1B,IAAIA,EAAc,cAIlB,OAHK9F,aAAaC,QAAQ,WACxB6F,EAAc,QAETA,EAuCW04B,GAGhBC,GAAoB,sBACpBC,GAAuB,sBACvBC,GAAW,0DACXC,GACF,+DACEl2B,GACEA,EAAM9I,OAAS,IACjB++B,GAAW,GACXF,GAAoB,IAIpBpI,GACEA,EAASz2B,OAAS,IACpBg/B,GAAe,GACfF,GAAuB,IAc3B,OACEhgC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,GAAhB,KAAAtS,OAAiCuS,KACtC,IACAD,GAFH,IAEmBC,GAAkB,KAC7B,KAEV5S,EAAAC,EAAAC,cAAA,2BAAmBkH,GAAnB,YACApH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,+CADX,qDAEuC,IACrC5H,EAAAC,EAAAC,cAAA,KAAG6E,KAAK,IAAIC,QAAS,SAAAgB,GAAC,OAvBV,SAAAA,GAChBA,EAAEC,iBACFw7B,IAAa,GAqBiB9S,CAAU3oB,KACjC,IADH,OAEO,KACF,IANP,YAQEhG,EAAAC,EAAAC,cAAC4hC,GAAD,CAAWV,UAAWA,GAAWxS,WAvBpB,WAEjB6S,IAAa,OAuBXzhC,EAAAC,EAAAC,cAAA,QAAME,UAAU,OAAOoG,GAAG,sBAAsBX,SAAU8kB,IACxD3qB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLwF,GAAG,QACHY,YAAY,OACZ9B,SAAU,SAAAU,GAAC,OAAI21B,EAAS31B,EAAEwC,OAAO7C,QACjCw6B,aAAcpe,GAAUA,GAAQ/X,MAAQ,KAE1ChK,EAAAC,EAAAC,cAAA,OAAKE,UAAW2/B,IACd//B,EAAAC,EAAAC,cAAA,SAAI+/B,OAIVjgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLwF,GAAG,WACHY,YAAY,YACZ9B,SAAU,SAAAU,GAAC,OAAIq3B,GAAYr3B,EAAEwC,OAAO7C,QACpCw6B,aAAcpe,GAAUA,GAAQyD,UAAY,KAE9CxlB,EAAAC,EAAAC,cAAA,OAAKE,UAAW4/B,IACdhgC,EAAAC,EAAAC,cAAA,SAAIggC,QAMZlgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBAAf,QACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBAGjBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAOwF,GAAG,aAAalB,SApN1B,SAAAU,GACnB,GAAKA,EAAEwC,OAAO43B,OAAmC,IAA1Bp6B,EAAEwC,OAAO43B,MAAMl/B,OAAtC,CAIoBm/B,IAAIC,gBAAgBt6B,EAAEwC,OAAO43B,MAAM,IAEjDp6B,EAAEwC,OAAO43B,MAAM,GAAGG,KAAO,QAC3BzD,EAAiB,GAEjBA,OAAiB37B,GAIS,cAA1B6E,EAAEwC,OAAO43B,MAAM,GAAGp/B,MACQ,aAA1BgF,EAAEwC,OAAO43B,MAAM,GAAGp/B,KAElBk8B,EAAiB,GAEjBA,OAAiB/7B,GAInB,IAAMq/B,EAAS,IAAIC,WACnBD,EAAOv3B,iBACL,OACA,WAEEyzB,EAAc8D,EAAOzL,QAGrB,IAAI2L,EAAM,IAAIC,MACdD,EAAIrb,IAAMmb,EAAOzL,OACjB2L,EAAIz3B,iBAAiB,OAAQ,WAC3By3B,EAAI31B,MAAQjK,KAAKiK,MACjB21B,EAAI11B,OAASlK,KAAKkK,OAElBoxB,EAAoB,CAClB,CACEh6B,IAAKtB,KAAKukB,WAKlB,GAEErf,EAAEwC,OAAO43B,OACXI,EAAOI,cAAc56B,EAAEwC,OAAO43B,MAAM,IAGtCnE,EAAgBj2B,EAAEwC,OAAO43B,MAAM,SAhD/BnE,OAAgB96B,OAqNVnB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,OACEsG,GAAG,mBACHuE,MAAM,QACNsa,IAAKoX,EACLzxB,OAAO,QACPrG,MAAO,CACLsG,OAAQ,iBACRrG,QAAS,MACTmG,MAAO,SAGV0xB,EACCz8B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,KAAG6E,KAAK,IAAIC,QAAS,SAAAgB,GAAC,OA/Kd,SAAAA,GACtBA,EAAEC,iBACFg2B,OAAgB96B,GAChBu7B,OAAcv7B,GACd+7B,OAAiB/7B,GACjB27B,OAAiB37B,GACjBi7B,OAAoBj7B,GACpB+E,SAASsmB,eAAe,cAAc7mB,MAAQ,GAwKNk7B,CAAgB76B,KAA1C,kBAKF,GAGD62B,EACC78B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,uDAAmD,KAGrD,GAGD+8B,EACCj9B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,kDAA8C,KAGhD,IAIJF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,SACLwF,GAAG,MACHY,YAAY,MACZ2D,MAAO,EACPzF,SAAU,SAAAU,GAAC,OAAI41B,EAAO51B,EAAEwC,OAAO7C,QAC/Bw6B,aAAcpe,GAAUA,GAAQyV,IAAM,MAI1Cx3B,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,UACEoF,SAAU,SAAAU,GAAC,OAAI81B,EAAU91B,EAAEwC,OAAO7C,QAElCA,MAAO+xB,GAAkB,UAEzB13B,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,QACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,QACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,UAAf,UACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,aAAf,aACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,kBAAf,wBAIN3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KACE6vB,GAAgBA,GAAcnG,yBAA2B,GAE3D+H,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBglB,GAAiBjuB,OAKvBvP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,4CACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAM6vB,GAAgBA,GAAcpG,aAAe,GACnDgI,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBqjB,EAAetsB,OAKrBvP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAM6vB,GAAgBA,GAAclG,uBAAyB,GAC7D8H,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBmlB,GAAkBpuB,OAIxBvP,EAAAC,EAAAC,cAAA,aAIJF,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cA9QV,WACE,IAAI+gC,EAAoB,oBAKxB,OAJK3/B,aAAaC,QAAQ,WACxB0/B,EAAoB,6BAGfjhC,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAOs7B,KAwQ9C,OAEFjhC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBAiBV2hC,GAVK,kBAClB/hC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,sDACLgY,UAAWmW,gBCpfJU,IAFH3gC,OAAOwB,EAEU,SAAAC,GACzB,IAAM6P,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACtDklB,EAAYz1B,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAHnBhI,GAIpBvI,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAEnB/H,sBANIC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAM3B0W,EAN2BxW,EAAA,GAMlB4yB,EANkB5yB,EAAA,GAAAI,EAOAL,qBAPAM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAO3BP,EAP2BQ,EAAA,GAOhBkyB,EAPgBlyB,EAAA,GAAAiM,EAQQvM,qBARRwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAQ3BoqB,EAR2BnqB,EAAA,GAQZoqB,EARYpqB,EAAA,GAAAG,EASU3M,mBAAS,IATnB4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAS3BqM,EAT2BpM,EAAA,GASXqM,EATWrM,EAAA,GAW9BiqB,EAAiB,GAEjBC,EAA0B,GAC1BptB,EAAkB,GAClBqtB,EAAoB,GAGpB34B,EAAU,GACV44B,EAAahhC,aAAaC,QAAQ,SAClCD,aAAaC,QAAQ,SACrB,GACAkjB,EAAWnjB,aAAaC,QAAQ,QAChCD,aAAaC,QAAQ,QACrB,GAMJmjB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,8BAAAvS,OACsEk4B,EADtE,eAAAl4B,OAC6FmP,KAAKC,QAE1G1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJi6B,EAAWj6B,KANC,cAAAyP,EAAAE,KAAA,EASVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,sCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJg+B,EAAiBh+B,KAZL,cAAAyP,EAAAE,KAAA,EAeVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ45B,EAAa55B,KApBD,cAAAyP,EAAAE,KAAA,EAuBVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,uBAAAvB,OAAgCokB,EAAhC,iBAAyD,CAClE5gB,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJqgB,EAAkBrgB,KA7BN,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,aAAA,EAgCf2jB,IACC,CAAC2T,IAEJ,IAYMgK,EAAe,SAAAxsB,GACnB,GAAIrM,EAAS,CACX,IAAI84B,EAAM94B,EAAQqK,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,IAC5C,IAAIysB,EAQF,MAAO,GAPP,GAAIP,EAIF,OAHgBA,EACbluB,KAAK,SAAA2uB,GAAI,OAAIA,EAAK14B,MAAM+K,gBAAkBpC,IAC1CgwB,iBAAiB5uB,KAAK,SAAA6uB,GAAK,OAAIA,EAAMp8B,IAAMg8B,EAAI9J,cAkBpDmK,EAAc,SAAAtzB,GAClB,IAAIuzB,EAAcb,EAAcluB,KAC9B,SAAA2uB,GAAI,OAAIA,EAAK14B,MAAM+K,gBAAkBpC,IACrCgwB,iBAAiBzhC,OAEnB,OADSqO,EAAO,MAAQuzB,EAAc,GAAKvzB,EAAKwzB,cAAgB,GAmPlE,OACE/iC,EAAAC,EAAAC,cAAA,YA/OI+hC,IACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAKC,iBAAiBx4B,IAEpB,SAAAy4B,GAAK,OACHR,EAAwBjxB,KACtBnR,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAEq+B,UAAW,WAChDhjC,EAAAC,EAAAC,cAAA,OACE+iC,WAAUL,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD05B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBpjC,EAAAC,EAAAC,cAAA,QAAME,UAAU,+BACb,IACAwiC,EAAMG,aAAc,KACf,IACR/iC,EAAAC,EAAAC,cAAA,gBAAQ0iC,EAAM54B,QAEhBhK,EAAAC,EAAAC,cAACmjC,GAAA,EAAD,CAAcz7B,MAAM,0BAMhCq6B,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,WAM5D+X,IACFrY,EAAUqY,EAAQqX,sBAGhBhuB,IACF+2B,EAAiB/2B,EAAUjB,IAAI,SAAAwL,GAAI,OACjCA,EAAKC,QAAQzL,IAAI,SAAA0L,GAAM,OACrB7V,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAK2V,EAAO7L,OAAY,MAG5BhK,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACG2V,EAAOC,aAAa3L,IAAI,SAAA4L,GAAU,OACjC/V,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,+CACb2V,EAAW/L,MAAM9I,OAAS,IACvB6U,EAAW/L,MACRqJ,MAAM,KACNgJ,OAAO,EAAG,IACVqK,KAAK,KAAO,MACf3Q,EAAW/L,QAGnBhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,OACEE,UAAU,cACVuE,MAAO,CACLoG,MACE83B,EAAYN,EAAaxsB,EAAWvP,KAAO,IAC7CuV,QAAS,cAGX/b,EAAAC,EAAAC,cAAA,QACEyE,MAAO,CACL2B,MAC8C,GAA5Cu8B,EAAYN,EAAaxsB,EAAWvP,KAChC,OACA,SAERpG,UAAU,uBAETmiC,EAAaxsB,EAAWvP,IACrB+7B,EAAaxsB,EAAWvP,IAAIu8B,aAC5B,OAMd/iC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,mDAGjBqe,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,mDAIhB4U,EAAgB7K,IAAI,SAAAwjB,GACnB,OACE3tB,EAAAC,EAAAC,cAAA,OACEE,UAAU,2BACVkjC,uBAAA,GAEAtjC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,aACbJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,WACZJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,kBAAUytB,EAAV,MAED5X,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OACPA,EAAUhT,OAAS2sB,IAEtBxjB,IAAI,SAAA6J,GACH,OACEhU,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBACZJ,EAAAC,EAAAC,cAAA,QAAMyE,MAAO,CAAEkG,YAAa,SAhJzC,SAAA4Q,GACzB,GAAI/R,EAIF,OAH6BA,EAAQqK,KAAK,SAAA0uB,GAAC,OACzCA,EAAE7xB,WAAWmD,KAAK,SAAA9T,GAAC,OAAIA,GAAKwb,MA8IS8nB,CACCvvB,EAAUxN,IAGVxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gCAEb,KAGJJ,EAAAC,EAAAC,cAAA,YAAO8T,EAAUhK,8BAyGrDhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiB2I,aAAW,cACzC/I,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,kDACR5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,SAEFzE,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,IACtC,IACAyvB,EAFH,IAEuBzvB,EAAkB,KACjC,KAEV5S,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,uBAAuBwa,eAAa,YAA9C,kBAKHL,EACC/hB,EAAAC,EAAAC,cAAA,OAAKsG,GAAG,WACNxG,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAE2B,MAAO,WAC0B,IAA5Cg8B,EAAWkB,OAAO,sBACnBlf,EAAepjB,OAAS,GACxBojB,EAAerf,SAASo9B,GACtBriC,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBACZJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAU,6CACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,kBAAAvS,OAAkEk4B,IAFtE,gBAKEv4B,EAAAC,EAAAC,cAAA,KAAGE,UAAU,uCAGjBJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBACZJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAU,6CACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,iBAAAvS,OAAiEk4B,IAFrE,oBAImBv4B,EAAAC,EAAAC,cAAA,KAAGE,UAAU,8BAA+B,IAC5Dgb,QAAQC,IAAI/Z,aAAaC,QAAQ,aAKxCvB,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEpE,UAAU,6CACVqE,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,0BAFJ,uBAIsB5S,EAAAC,EAAAC,cAAA,KAAGE,UAAU,iCAIvCJ,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE8+B,UAAW,MAAOtV,aAAc,QAC1CpM,EAAQ/X,MADX,MACqB+X,EAAQyD,WAG7BxlB,EAAAC,EAAAC,cAAA,OAAKE,UAAW2hB,EAAQgE,kBAAoB,cAC1C/lB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,OACEyE,MAAO,CAAEoX,QAAS,QAAS2nB,SAAU,SACrCre,IAAKtD,EAAQuD,MAAM,GAAKvD,EAAQuD,MAAM,GAAGljB,IAAM,MAGnDpC,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,KAAGyE,MAAO,CAAEq+B,UAAW,WACD,SAAnBjhB,EAAQ2V,OACP13B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACG6hB,EAAQ2V,QAA6B,mBAAnB3V,EAAQ2V,OACzB13B,EAAAC,EAAAC,cAAA,wCAEA,IAGJF,EAAAC,EAAAC,cAAA,SACG6hB,EAAQ2V,QAA6B,mBAAnB3V,EAAQ2V,OACzB13B,EAAAC,EAAAC,cAAA,qBAAa6hB,EAAQ2V,OAArB,KAEA,KAKN,GAED3V,EAAQyV,IAAMzV,EAAQyV,IAAM,SAAW,KAG5Cx3B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,0CACAF,EAAAC,EAAAC,cAAA,SACG6hB,EAAQkX,yBACL3sB,IAAOyV,EAAQkX,0BACf,IAGNj5B,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAA,SAAI6hB,EAAQiX,aAAe1sB,IAAOyV,EAAQiX,cAAgB,IAE1Dh5B,EAAAC,EAAAC,cAAA,SACG6hB,EAAQmX,uBACL5sB,IAAOyV,EAAQmX,wBACf,MAKVl5B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ,IACDJ,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE8+B,UAAW,SACrBpB,EADH,IACuBzvB,EADvB,oBAIF5S,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAEjBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,wBAAwBuE,MAAO,CAAE2B,MAAO,UACnD87B,KAIPpiC,EAAAC,EAAAC,cAAA,WACCiiC,GAGH,kBAGFniC,EAAAC,EAAAC,cAAA,QAAM2F,SAAU,SAAAG,GAxIlB3E,OAAOsiC,UAyIH3jC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,YAAYY,KAAK,UAAnC,SACQhB,EAAAC,EAAAC,cAAA,KAAGE,UAAU,sCAkBhBwjC,GAVY,kBACzB5jC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,yDACLgY,UAAW6W,OCvIF6B,WApXyB,SAAA/gC,GACtC,IAAIkhB,EAAUC,cACRtR,EAAgB7P,EAAM6P,cACtBC,EAAmB9P,EAAM8P,iBAGzBkxB,EAAiBhhC,EAAMghC,eAEvBC,EAAWjhC,EAAMihC,SACjBC,EAAWlhC,EAAMkhC,SACjB54B,EAAYtI,EAAMsI,UAClB62B,EAAgBn/B,EAAMm/B,cAExBE,EAAiB,GACjBQ,EAAmB,GACnBP,EAA0B,GAC1BptB,EAAkB,GAClBqtB,EAAoB,GAGpB4B,EAAW,GACXC,EAAW,GAKXC,GAJa7iC,aAAaC,QAAQ,UAClCD,aAAaC,QAAQ,SAGH,IAGlB6iC,GAFyB,IAAIxjC,OACJ,IAAIA,OACf,IAGdkiC,EAAc,GAEduB,EAAiB,GAEf9B,EAAe,SAACxsB,EAAYuuB,GAChC,IAOI9B,GANa,YAAb8B,EACQL,EAEAC,GAGMnwB,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,IAC5C,IAAIysB,EAiBF,OAAO,KAhBP,GAAIP,EAAe,CAKjB,IAAI9O,EAAM8O,EAAcluB,KACtB,SAAA2uB,GAAI,OAAIA,EAAK14B,MAAM+K,gBAAkBpC,IAGnC+lB,EAAYvF,EAAIwP,iBAAiB5uB,KACnC,SAAA6uB,GAAK,OAAIA,EAAMp8B,IAAMg8B,EAAI9J,YAG3B,OADAoK,EAAc3P,EAAIwP,iBAAiBzhC,OAC5Bw3B,IAOP6K,EAAqB,SAACvvB,EAAW+N,GACrC,IAAIrY,EAAU,GAOd,GALEA,EADa,YAAXqY,EACQgiB,EAAS3K,gBAET4K,EAAS5K,gBAQnB,QAJ6B1vB,EAAQqK,KAAK,SAAA0uB,GAAC,OACzCA,EAAE7xB,WAAWmD,KAAK,SAAA9T,GAAC,OAAIA,GAAK+T,OAqN9B+vB,IACFK,EAAY,GAAK,CACf7/B,IAAKw/B,EAASv9B,GACd+9B,MAAOR,EAAS/5B,QAIhBg6B,IACFI,EAAY,GAAK,CACf7/B,IAAKy/B,EAASx9B,GACd+9B,MAAOP,EAASh6B,QAoBpB,OACEhK,EAAAC,EAAAC,cAAA,OAAKsG,GAAG,IAzOkB,WACtBy7B,IACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MAGzB04B,EAAKC,iBAAiBx4B,IACpB,SAACy4B,EAAOr+B,GAAR,OAAiB4/B,EAAgB5/B,GAAOq+B,EAAMp8B,QAIpDy7B,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,WAMhE,IAAIoH,EAAQ,EACZuxB,EAAiBx4B,IAAI,SAACy4B,EAAOr+B,GAC3B69B,EAAwBjxB,KACtB,oDACEC,EACA,SACAwxB,EACA,SAEJxxB,MAGE2yB,IACFE,EAAWF,EAAS3K,iBAGlB4K,IACFE,EAAWF,EAAS5K,iBAGlB6I,GACFA,EAAc93B,IAAI,SAAAiB,GACZA,EAAUpB,OAAS2I,IACrBvH,EAAUu3B,iBAAiBx4B,IAAI,SAACy4B,EAAOr+B,GACrC4/B,EAAgB5/B,GAAOq+B,EAAMp8B,KAE/Bs8B,EAAc13B,EAAUu3B,iBAAiBzhC,UAK3CkK,IACF+2B,EAAiB/2B,EAAUjB,IAAI,SAAAwL,GAAI,OACjCA,EAAKC,QAAQzL,IAAI,SAAA0L,GAAM,OACrBA,EAAOC,aAAa3L,IAAI,SAAA4L,GACtB,IAAIyuB,EAAoBjC,EAAaxsB,EAAWvP,GAAI,YAChDi+B,EAAoBlC,EAAaxsB,EAAWvP,GAAI,YAEhDg+B,GAAqBC,EACvBJ,EAAelzB,KACbqzB,EAAkBzB,aAAe0B,EAAkB1B,aAC/ChtB,EAAWvP,GACX,MAEIg+B,GAAsBC,GAEtBD,GAAqBC,GAC/BJ,EAAelzB,KAAK4E,EAAWvP,IAF/B69B,EAAelzB,KAAK,MAKtBiK,QAAQC,IAAIynB,GACZ,IAAI4B,EAASF,EACT,MAAQ1B,EAAc,GAAK0B,EAAkBzB,cAC7C,EACA4B,EAAU,IAAMD,EACpBC,EAAqB,KAAXA,EAAiB,GAAKA,EAEhC,IAAIC,EAASH,EACT,MAAQ3B,EAAc,GAAK2B,EAAkB1B,cAC7C,EACA8B,EAAuB,GAAVD,EAAc,OAAS,QAExC,OACE5kC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBACb,IACA2V,EAAW/L,MAAM9I,OAAS,IACvB6U,EAAW/L,MACRqJ,MAAM,KACNgJ,OAAO,EAAG,IACVqK,KAAK,KAAO,MACf3Q,EAAW/L,QAGnBhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,OACEE,UAAU,aACVuE,MAAO,CACLoG,MAAO25B,EAAS,IAChBxW,WAAYyW,EAAU,MAGxB3kC,EAAAC,EAAAC,cAAA,QACEyE,MAAO,CAAEuR,SAAU,YACnB9V,UAAU,uBAETokC,EACGA,EAAkBzB,aAClB,MAKZ/iC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,OACEE,UAAU,cACVuE,MAAO,CAAEoG,MAAO65B,EAAS,IAAK7oB,QAAS,cAEvC/b,EAAAC,EAAAC,cAAA,QACEyE,MAAO,CAAE2B,MAAOu+B,GAChBzkC,UAAU,uBAETqkC,EACGA,EAAkB1B,aAClB,OAMd/iC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,mDAGpBqe,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,mDAInB4U,EAAgB7K,IAAI,SAAAwjB,GACnB,OACE3tB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,KAAGyE,MAAO,CAAC8d,YAAY,OAAQghB,UAAU,SACvCzjC,EAAAC,EAAAC,cAAA,kBAAUytB,EAAV,MAEF3tB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACZ2V,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OAAIA,EAAUhT,MAAQ2sB,IAEhCxjB,IAAI,SAAA6J,GACH,OACEhU,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBAAuBuE,MAAO,CAAC8d,YAAY,SACxDzO,EAAUhK,OAGbhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACZmjC,EACCvvB,EAAUxN,GACV,YAEAxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gCAEb,KAGJJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACZmjC,EACCvvB,EAAUxN,GACV,YAEAxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gCAEb,sBAmDjC0kC,GAED9kC,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,UACGmiC,EADH,IACuBzvB,EADvB,oBAIF5S,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,UAAK6jC,EAASve,YAEhBxlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,UAAK8jC,EAASxe,aAIlBxlB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,0BACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,oBADF,IACoBF,EAAAC,EAAAC,cAAA,QAAMyE,MAAO,CAAE2B,MAAO,UAAtB,SAEpBtG,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACbJ,EAAAC,EAAAC,cAAA,mBADF,IACmBF,EAAAC,EAAAC,cAAA,QAAMyE,MAAO,CAAE2B,MAAO,UAAtB,WAIrBtG,EAAAC,EAAAC,cAAA,WAAMiiC,GACNniC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAEogC,UAAW,WACtBjB,EACC9jC,EAAAC,EAAAC,cAAA,KAAGuE,GAAI,IAAKrE,UAAU,YAAY4E,QAAS,SAAAgB,GAAC,OA9ChC,SAAAA,GACpBA,EAAEC,iBACF+d,EAAQ7S,KAAK,CACXiC,SAAQ,cAAA/S,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,mCACRpP,MAAO,CACLwhC,gBAAiBjB,EAASve,UAC1B6e,eAAgBA,KAwCoCY,CAAcj/B,KAA9D,WACUhG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,2BAGvB,IAGJJ,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAEogC,UAAW,WACvB/kC,EAAAC,EAAAC,cAAA,KAAG6E,KAAK,IAAI3E,UAAU,YAAY4E,QAAS,SAAAgB,GAAC,OA3DhC,SAAAA,GAClBA,EAAEC,iBACF5E,OAAOsiC,QAyD+CuB,CAAYl/B,KAA5D,SACQhG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,kCAGvBJ,EAAAC,EAAAC,cAAA,gBCxWKilC,IAFH9jC,OAAOwB,EAEc,SAAAC,GAC7B,IAAM6P,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACtD+xB,EAAatiC,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAChDgyB,EAAaviC,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAElD+uB,EAA0B,GANQ/2B,EAQNC,qBARMC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAQ/B04B,EAR+Bx4B,EAAA,GAQrB+5B,EARqB/5B,EAAA,GAAAI,EASNL,qBATMM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAS/Bq4B,EAT+Bp4B,EAAA,GASrB25B,EATqB35B,EAAA,GAAAiM,EAUJvM,qBAVIwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAU/BzM,EAV+B0M,EAAA,GAUpBgmB,EAVoBhmB,EAAA,GAAAG,EAWM3M,qBAXN4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAW/B6rB,EAX+B5rB,EAAA,GAWfstB,EAXettB,EAAA,GAAA6jB,EAYIzwB,qBAZJ0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GAY/BkG,EAZ+BjG,EAAA,GAYhBkG,EAZgBlG,EAAA,GAAAE,EAaZ5wB,qBAbY6wB,EAAAv7B,OAAA4K,EAAA,EAAA5K,CAAAs7B,EAAA,GAa/BuJ,EAb+BtJ,EAAA,GAaxBuJ,EAbwBvJ,EAAA,GAAAE,EAcZ/wB,qBAdYgxB,EAAA17B,OAAA4K,EAAA,EAAA5K,CAAAy7B,EAAA,GAc/BsJ,EAd+BrJ,EAAA,GAcxBsJ,EAdwBtJ,EAAA,GAoGtC,OApFA5X,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAC,KAAA,EAEI,SAAdwxB,EAFU,CAAAzxB,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAGNyxB,EAAY79B,KAAKkd,MAAMrjB,aAAaC,QAAQ,kBAHtC,OAIZikC,EAAkB,GAClBE,EAAQ,cAAArlC,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,wBALIe,EAAAE,KAAA,uBASZ6xB,EAAQ,cAAArlC,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAAAvS,OAC0D+kC,EAD1D,WATIzxB,EAAAE,KAAA,GAYNjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,8BAAAvS,OACsE+kC,EADtE,eAAA/kC,OAC8FmP,KAAKC,QAE3G1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJohC,EAAYphC,KAjBJ,WAqBI,SAAdmhC,EArBU,CAAA1xB,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAsBN0xB,EAAY99B,KAAKkd,MAAMrjB,aAAaC,QAAQ,kBAtBtC,QAuBZikC,EAAkB,GAClBI,EAAQ,cAAAvlC,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,wBAxBIe,EAAAE,KAAA,wBA4BZ+xB,EAAQ,cAAAvlC,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAAAvS,OAC0DglC,EAD1D,WA5BI1xB,EAAAE,KAAA,GA+BNjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,8BAAAvS,OACsEglC,EADtE,eAAAhlC,OAC8FmP,KAAKC,QAE3G1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJqhC,EAAYrhC,KApCJ,eAAAyP,EAAAE,KAAA,GAwCRjQ,MAAK,GAAAvD,OAAIuB,EAAJ,sCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJg+B,EAAiBh+B,KA3CP,eAAAyP,EAAAE,KAAA,GA8CRjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ45B,EAAa55B,KAnDH,QAAAyP,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAsDdyH,QAAQC,IAAR1H,EAAAO,IAtDc,yBAAAP,EAAAY,SAAAhB,EAAA,kBAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,aAAA,EAyDf2jB,IACC,IAECqd,GACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAKC,iBAAiBx4B,IAAI,SAAAy4B,GAAK,OAC7BR,EAAwBjxB,KACtBnR,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAEq+B,UAAW,WAChDhjC,EAAAC,EAAAC,cAAA,OACE+iC,WAAUL,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD05B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBpjC,EAAAC,EAAAC,cAAA,QAAME,UAAU,+BAAhB,IAAgDwiC,EAAMG,aAAtD,KAA4E,IAC5E/iC,EAAAC,EAAAC,cAAA,gBAAQ0iC,EAAM54B,QAEhBhK,EAAAC,EAAAC,cAACmjC,GAAA,EAAD,CAAcz7B,MAAM,yBAS9B5H,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAAiB2I,aAAW,cACzC/I,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,kDACR5H,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,SAEFzE,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,wBACR5H,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,IACtC,IACAD,EAFH,IAEmBC,EAAkB,KAC7B,KAEV5S,EAAAC,EAAAC,cAAA,MAAI0H,MAAM,uBAAuBwa,eAAa,YAA9C,6BAKJpiB,EAAAC,EAAAC,cAAA,qCACAF,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAhB,yGAGGgb,QAAQC,IAAIyoB,IAGf9jC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,WACG6jC,EACC/jC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBACbJ,EAAAC,EAAAC,cAAA,OACEklB,IAAI,WACJC,IAAK0e,EAASze,MAAM,GAAKye,EAASze,MAAM,GAAGljB,IAAMmjB,KACjDxa,MAAM,UAER/K,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAIghC,GACRzlC,EAAAC,EAAAC,cAAA,UAAK6jC,EAASve,aAIlB,oBAIJxlB,EAAAC,EAAAC,cAAA,WACG8jC,EACChkC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBACbJ,EAAAC,EAAAC,cAAA,OACEklB,IAAI,WACJC,IAAK2e,EAAS1e,MAAM,GAAK0e,EAAS1e,MAAM,GAAGljB,IAAMmjB,KACjDxa,MAAM,UAER/K,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAIkhC,GACR3lC,EAAAC,EAAAC,cAAA,UAAK8jC,EAASxe,aAIlB,oBAGJxlB,EAAAC,EAAAC,cAAA,aAGFF,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACbJ,EAAAC,EAAAC,cAAA,gCAAgC,IAChCF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,yBAAyBgiC,KAG7CpiC,EAAAC,EAAAC,cAAA,UAEC6jC,GAAYC,EACXhkC,EAAAC,EAAAC,cAAC2lC,GAAD,CACElzB,cAAeA,EACfC,iBAAkBA,EAClBwyB,WAAYA,EACZC,WAAYA,EACZtB,SAAUA,EACVC,SAAUA,EACV54B,UAAWA,EACX62B,cAAeA,EACf6B,eAAgBA,IAGlB,MAgBOgC,GAVU,kBACvB9lC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,sEACLgY,UAAWga,OCtMXtiC,GAAIxB,OAAOwB,EAEJkjC,GAAqB,SAAAjjC,GAAS,IAAAuI,EAIXC,qBAJWC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAIlC0W,EAJkCxW,EAAA,GAIzB4yB,EAJyB5yB,EAAA,GAAAI,EAKPL,qBALOM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAKlCP,EALkCQ,EAAA,GAKvBkyB,EALuBlyB,EAAA,GAAAiM,EAMKvM,qBANLwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAMlCmuB,EANkCluB,EAAA,GAMjBmuB,EANiBnuB,EAAA,GAAAG,EAOC3M,qBAPD4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAOlCgqB,EAPkC/pB,EAAA,GAOnBgqB,EAPmBhqB,EAAA,GAAA6jB,EAUSzwB,mBAAS,IAVlB0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GAUfmK,GAVelK,EAAA,GAAAA,EAAA,IAYnCrpB,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAExD8yB,EAAiB,GACjBxD,EAAmB,GACnByD,EAA2B,GAC3BpxB,EAAkB,GAClBqtB,EAAoB,GAIpB34B,EAAU,GACV+1B,EAAoB,GACpB2C,EAA0B,GAExB/yB,EAAO,IAAIpN,EAEjByiB,oBAAU,WACR,IAAI0a,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,wBAEhD69B,IAEFjB,EAAWiB,GAEI,eAAAt/B,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,IAAA8yB,EAAAC,EAAAj5B,EAAAM,EAAA44B,EAAAC,EAAA,OAAA/yB,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAGRyyB,EAAmBh3B,EACtB/M,IADsB,GAAAjC,OACfuB,EADe,sCAEtBmC,KAAK,SAAA0iC,GAAiB,OAAIA,EAAkBl3B,OAGzC+2B,EAAiBj3B,EACpB/M,IADoB,GAAAjC,OAEhBuB,EAFgB,SAAAvB,OAEFsS,EAFE,KAAAtS,OAEeuS,EAFf,kBAIpB7O,KAAK,SAAA2iC,GAAe,OAAIA,EAAgBn3B,OAZ7BoE,EAAAE,KAAA,EAc6ByN,QAAQC,IAAI,CACrD8kB,EACAC,IAhBY,OAAAj5B,EAAAsG,EAAA4S,KAAA5Y,EAAA/M,OAAA4K,EAAA,EAAA5K,CAAAyM,EAAA,GAcPk5B,EAdO54B,EAAA,GAcQ64B,EAdR74B,EAAA,GAmBdg5B,EAAmBJ,EAAeC,EAAY,GAAGxwB,KACjDksB,EAAiBqE,GACjBzI,EAAa0I,GArBC7yB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAwBdyH,QAAQC,IAAR1H,EAAAO,IAxBc,yBAAAP,EAAAY,SAAAhB,EAAA,kBAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,EA4Bf2jB,KAED,IAEH,IAAM+F,EAAY,eAAA2U,EAAA1+B,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAApB,EAAM/S,GAAN,IAAAo5B,EAAA,OAAA3rB,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,OACnB7N,EAAEC,iBAGEm5B,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,wBACpDqlC,EAAwBxH,GALL,wBAAApmB,EAAAzE,SAAAwE,MAAH,gBAAAwB,GAAA,OAAA+kB,EAAA9kB,MAAA1Z,KAAAG,YAAA,GAkFZ4lC,EAA0B,SAAA9wB,GAC9B,IAAIqpB,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,wBAGhDk+B,EAAoBL,EAAa,kBACpBv8B,GACf,kCAAoCkT,EAAa,KACjD4W,KAAK,WAAW,IAAA5pB,EAAAjC,KAEd2+B,EAAkB1rB,KAAK,SAAA+I,GAAI,OAAIA,EAAKgqB,eAAiBjkC,GAAEE,GAAM+Z,KAAK,SAIlE2iB,EAAkBtuB,KAAK,CACrB21B,aAAcjkC,GAAE/B,MAAMgc,KAAK,MAC3BkF,cAAejM,KAGlB0pB,GAEHL,EAAa,kBAAwBK,EACrCn+B,aAAa+3B,QAAQ,sBAAuB5xB,KAAKC,UAAU03B,IAC3D8G,EAAqB9G,IAIjB2H,EAA6B,SAAAhxB,GACjC,IAAIqpB,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,wBAChDk+B,EAAoBL,EAAa,kBACpBv8B,GACf,kCAAoCkT,EAAa,KACjD4W,KAAK,WAAW,IAAAhpB,EAAA7C,KACZsQ,EAAQquB,EAAkB/b,UAC5B,SAAA/N,GAAI,OAAIA,EAAKmxB,eAAiBjkC,GAAEc,GAAMmZ,KAAK,QAG7C2iB,EAAkBpjB,OAAOjL,EAAO,IAC/BquB,GAGHL,EAAa,kBAAwBK,EACrCn+B,aAAa+3B,QAAQ,sBAAuB5xB,KAAKC,UAAU03B,IAC3D8G,EAAqB9G,IAmDvB,GAAI6C,EAAe,CACjBA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OAAKD,EAAiBC,EAAMG,cAAgBH,EAAM54B,WAM7D24B,EAAiBx4B,IAAI,SAACy4B,EAAOr+B,GAC3B69B,EAAwBjxB,KACtBnR,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEq+B,UAAW,WACtBhjC,EAAAC,EAAAC,cAAA,QAAME,UAAU,mBAAhB,IAAoCmE,EAApC,KADF,IACmDvE,EAAAC,EAAAC,cAAA,gBAAQ0iC,KAG7DxxB,IAIJ,IAAMu1B,EAAqB,SAAC1E,EAAe+E,GACzC,IAIIC,EAJKhF,EAAcj2B,OAAO,SAAA2J,GAC5B,OAAOA,EAAKK,MAAQgxB,IAGN,GAAGrE,iBAGnBsD,EAAmBgB,IAGfL,EAA0B,SAAA78B,GAC9B,IAAIuvB,EAAM,IAAIC,KAAM,IAAK,KAAM,MAC/BD,EAAIE,QAAQ,aAGMG,OAASlP,OAAO,aAChBkP,OAASlP,OAAO,YAEnB6O,EAAIQ,SAASC,SAASC,WACrBV,EAAIQ,SAASC,SAASG,YAOpBZ,EAAIQ,SAASC,SAASC,WAQhBjwB,EAAQ0wB,cAC5B1wB,EAAQ2wB,iBAAiB,GAAG3vB,MAEPhB,EAAQ0wB,cAC7B1wB,EAAQ2wB,iBAAiB,GAAG1vB,OAzBhC,IAsCIk8B,EAKK,IAGLC,EAASjhC,SAASsmB,eAAe,WAOjC4a,EAAer9B,EAAQ4tB,SAAStkB,MAAM,KAAKqT,KAAK,KACpD4S,EAAI+B,SACF8L,EA9CiB,GADC,GAkDlB,CAEEp8B,MAAOm8B,EACPG,gBA7ByB,CAC3BC,UAAW,SAASC,EAASC,GAC3B,OAAO,KA6BT,SAASC,GAGPnO,EAAIkC,KAAK4L,EAAaryB,cAAgB,WAStC2yB,EAAkB,SAACC,EAASC,GAEhC,MAAO,CAAEC,OADUD,EAAQ,OAASD,EAAU,QAAUC,EAAQ,KAuLlE,OACE5nC,EAAAC,EAAAC,cAAA,WApLmB,WA4BnB,GAzBI+hC,IACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OACFD,EAAiBC,EAAMp8B,IAAMo8B,EAAM54B,MACrB,kBAAf44B,EAAM54B,MACDo8B,EAA2BxD,EAAMp8B,GAClC,QAKZy7B,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,WAM5D+X,EAAS,CACXrY,EAAUqY,EAAQrY,QAElB,IAAI01B,EAAgB33B,KAAKkd,MACvBrjB,aAAaC,QAAQ,wBAEvBk+B,EAAoBL,EAAa,kBAG/Bh0B,IACF+6B,EAAiB/6B,EAAUjB,IAAI,SAACwL,EAAMvE,GAAP,OAC7BuE,EAAKC,QAAQzL,IAAI,SAAC0L,EAAQiY,GAAT,OACf9tB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIqE,IAAK6M,EAAOhR,UAAU,eACxBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAd,IAA+ByV,EAAO7L,QAExChK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,mCAGJF,EAAAC,EAAAC,cAAA,UACG2V,EAAOC,aAAa3L,IAAI,SAAC4L,EAAY/C,GAAb,OACvBhT,EAAAC,EAAAC,cAAA,MAAIqE,IAAKyO,EAAK5S,UAAU,mBACtBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,gDACdJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,eAAb,cAED2V,EAAW/L,QAIlByU,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,QAAME,UAAU,8CACdJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,eAAb,cAED2V,EAAW/L,SAKlBhK,EAAAC,EAAAC,cAAA,UACG8U,EAAgB7K,IAAI,SAACwjB,EAAgBvc,GACpC,OACEpR,EAAAC,EAAAC,cAAA,MAAIqE,IAAK6M,EAAOhR,UAAU,kBACvButB,EACD3tB,EAAAC,EAAAC,cAAA,UACG6V,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OACPA,EAAUhT,MAAQ2sB,IAErBxjB,IAAI,SAAC6J,EAAW8zB,GAAZ,OACH9nC,EAAAC,EAAAC,cAAA,MACEqE,IAAKujC,EACL1nC,UAAU,mBAEVJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,SACEoF,SAAU,SAAAU,GAAC,OApQ3B,SAAAT,GAC5B,IAAI65B,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,wBAChDygB,EAAgBzc,EAAMiD,OAAOuc,aAAa,mBAC1C+hB,EAAevhC,EAAMiD,OAAOuc,aAAa,MAGzC0a,EAAoBL,EAAa,kBACjCxuB,EAAa6uB,EAEjB,GAAIA,EAAkB1rB,KAAK,SAAA+I,GAAI,OAAIA,EAAKgqB,eAAiBA,IAAe,CAEtE,IAAI11B,EAAQquB,EAAkB/b,UAC5B,SAAA/N,GAAI,OAAIA,EAAKmxB,eAAiBA,IAEhCrH,EAAkBpjB,OAAOjL,EAAO,GAEhCguB,EAAa,kBAAwBK,EACrCn+B,aAAa+3B,QACX,sBACA5xB,KAAKC,UAAU03B,SAIjBxuB,EAAWO,KAAK,CACd21B,aAAcA,EACd9kB,cAAeA,IAGjBod,EAAa,kBAAwBxuB,EACrC/N,GAAE,qBAAuBikC,EAAe,KAAKiB,KAAK,WAAW,GAC7DzmC,aAAa+3B,QACX,sBACA5xB,KAAKC,UAAU03B,IAGnB8G,EAAqB9G,GAkOyB4I,CAAsBhiC,IAExBhF,KAAK,WACLwF,GAAIwN,EAAUxN,GACdyhC,kBAAiBlyB,EAAWvP,GAC5Bse,UACE2a,EAAkB1rB,KAChB,SAAA+I,GAAI,OACFA,EAAKgqB,cACL9yB,EAAUxN,QAOpBxG,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,SACEE,UACEq/B,EAAkB1rB,KAChB,SAAA+I,GAAI,OACFA,EAAKgqB,cACL9yB,EAAUxN,KAEV,0BACA,kBAEN0hC,QAASl0B,EAAUxN,IAElB,IACAwN,EAAUhK,mBAcrChK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,UACEoF,SAAU,SAAAU,GAAC,OA3ab,SAAAT,GACpB,IAAI65B,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,wBAChDygB,EAAgBzc,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAevQ,aAC3D,mBAEEojB,EAAe5iC,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAevQ,aAC1D,kBAEE2T,EAAYnzB,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAetsB,KAEzD,GAAIm/B,GAAgB/B,EAClBvjC,GAAE,kCAAoCmf,EAAgB,KAAK+lB,KACzD,WACA,GAEFllC,GAAE,kCAAoCmf,EAAgB,KAAK+lB,KACzD,YACA,GAGFhB,EAA2B/kB,OACtB,CAEL,IAAIomB,EAAUhJ,EAAa,QAE3B,GAAIgJ,EAAQr0B,KAAK,SAAA0uB,GAAC,OAAIA,EAAEzgB,gBAAkBA,IAAgB,CAExD,GAAIomB,EAAQD,cAAgBA,EAAc,CACxC,IAAI/2B,EAAQg3B,EAAQ1kB,UAClB,SAAA/N,GAAI,OAAIA,EAAKqM,gBAAkBA,IAGjComB,EAAQ/rB,OAAOjL,EAAO,EAAG,CACvB4Q,cAAeA,EACfmmB,aAAcA,EACdzP,UAAWA,IAIf0G,EAAa,QAAcgJ,EAC3B9mC,aAAa+3B,QACX,sBACA5xB,KAAKC,UAAU03B,QAEZ,CAEL,IAAIgJ,EAAUhJ,EAAa,QAC3BgJ,EAAQj3B,KAAK,CACX6Q,cAAeA,EACfmmB,aAAcA,EACdzP,UAAWA,IAEb0G,EAAa,QAAcgJ,EAC3B9mC,aAAa+3B,QACX,sBACA5xB,KAAKC,UAAU03B,IAInBv8B,GAAE,kCAAoCmf,EAAgB,KAAK+lB,KACzD,WACA,GAEFllC,GAAE,kCAAoCmf,EAAgB,KAAK+lB,KACzD,YACA,GAIFlB,EAAwB7kB,IAsWWqmB,CAAcriC,IAC7Bm6B,aACEz2B,EAAQqK,KAAK,SAAA0uB,GAAC,OAAIA,EAAEzgB,eAAiBjM,EAAWvP,KAC5CkD,EAAQqK,KACN,SAAA0uB,GAAC,OAAIA,EAAEzgB,eAAiBjM,EAAWvP,KACnC2hC,aACF/B,GAGLJ,EAAgB77B,IAAI,SAACy4B,EAAOr+B,GAAR,OACnBvE,EAAAC,EAAAC,cAAA,UACEqE,IAAKA,EACLoB,MAAOi9B,EAAMp8B,GACb8hC,iBAAgB1F,EAAMp8B,GACtByhC,kBAAiBlyB,EAAWvP,IAE3Bo8B,EAAM54B,uBAsB9Bu+B,GACAxmB,EACC/hB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,+CAEAF,EAAAC,EAAAC,cAAA,OAAKsG,GAAG,UAAUpG,UAAU,oBAC1BJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,UACG6hB,EAAQ/X,MAAMw+B,OAAO,GAAG1X,cACvB/O,EAAQ/X,MAAMypB,MAAM,GAAI,IAF5B,KAGK1R,EAAQ4V,YAKjB33B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,+BACZ2hB,EAAQ2Y,iBAAiB,GACxB16B,EAAAC,EAAAC,cAAA,OACEmlB,IACEtD,EAAQ2Y,iBAAiB,GAAGrV,IACxBtD,EAAQ2Y,iBAAiB,GAAGrV,IAC5BE,KAENxa,MAAM,UAGR,GAEF/K,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,WACC6hB,EAAQ2V,OAFX,KAEqB3V,EAAQyV,IAF7B,WAKFx3B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,OACEE,UAAU,aACVqoC,wBAAyBf,EACvB,gCACA3lB,EAAQ6V,iBAOZ53B,EAAAC,EAAAC,cAAA,OACEE,UAAU,aACVqoC,wBAAyBf,EACvB,8BACA3lB,EAAQ0V,eAIZz3B,EAAAC,EAAAC,cAAA,OACEE,UAAU,aACVqoC,wBAAyBf,EACvB,yBACA3lB,EAAQ8V,oBAMhB73B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,uDAC8C,IAC3CmiC,EAFH,2TASAriC,EAAAC,EAAAC,cAAA,mGAIAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACbJ,EAAAC,EAAAC,cAAA,gCAAgC,IAChCF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBAAiBgiC,MAKrCpiC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAEXJ,EAAAC,EAAAC,cAAA,QAAM2F,SAAU,SAAAG,GAAC,OAAI2kB,EAAa3kB,KAC/BmgC,EACDnmC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAASY,KAAK,UAAhC,SACQhB,EAAAC,EAAAC,cAAA,KAAGE,UAAU,sCASjCJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBAafJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,+BACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBAuBvB,YAgBOsoC,GAVmB,kBAChC1oC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,sDACLgY,UAAW4a,OC5rBJ4C,IAFHtnC,OAAOwB,EAEe,SAAAC,GAC9B,IAAM6P,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAFrBhI,EAITC,qBAJSC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAIhC0W,EAJgCxW,EAAA,GAIvB4yB,EAJuB5yB,EAAA,GAAAI,EAKLL,qBALKM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAKhCP,EALgCQ,EAAA,GAKrBkyB,EALqBlyB,EAAA,GAAAiM,EAMGvM,qBANHwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAMhCoqB,EANgCnqB,EAAA,GAMjBoqB,EANiBpqB,EAAA,GAQnCqqB,EAAiB,GAEjBC,EAA0B,GAC1BptB,EAAkB,GAClBqtB,EAAoB,GAGpB34B,EAAU,GAGVk7B,EAAS,GAGblgB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVsqB,EAAW12B,KAAKkd,MAAMrjB,aAAaC,QAAQ,kBADjC,cAAAoS,EAAAE,KAAA,EAGVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,sCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJg+B,EAAiBh+B,KANL,cAAAyP,EAAAE,KAAA,EASVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ45B,EAAa55B,KAdD,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,aAAA,EAiBf2jB,IACC,IAEH,IAAM2d,EAAe,SAAAxsB,GACnB,GAAIrM,EAAS,CACX,IAAI84B,EAAM94B,EAAQqK,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,IAC5C,IAAIysB,EAWF,MAAO,GAVP,GAAIP,EAOF,OAHgBA,EACbluB,KAAK,SAAA2uB,GAAI,OAAIA,EAAK14B,MAAM+K,gBAAkBpC,IAC1CgwB,iBAAiB5uB,KAAK,SAAA6uB,GAAK,OAAIA,EAAMp8B,IAAMg8B,EAAI9J,cAkBpDmK,EAAc,SAAAtzB,GAClB,IAAIuzB,EAAcb,EAAcluB,KAC9B,SAAA2uB,GAAI,OAAIA,EAAK14B,MAAM+K,gBAAkBpC,IACrCgwB,iBAAiBzhC,OAInB,OAFA0jC,EAASr1B,EAAO,MAAQuzB,EAAc,GAAKvzB,EAAKwzB,cAAgB,EAChE3nB,QAAQC,IAAI9L,GACLq1B,GAkKT,OACE5kC,EAAAC,EAAAC,cAAA,YA/JI+hC,IACF7mB,QAAQC,IAAI4mB,GACZA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAKC,iBAAiBx4B,IAEpB,SAAAy4B,GAAK,OACHR,EAAwBjxB,KACtBnR,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEq+B,UAAW,WACtBhjC,EAAAC,EAAAC,cAAA,OACE+iC,WAAUL,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD05B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBpjC,EAAAC,EAAAC,cAAA,QAAME,UAAU,mBACb,IACAwiC,EAAMG,aAAc,KACf,IACR/iC,EAAAC,EAAAC,cAAA,gBAAQ0iC,EAAM54B,QAEhBhK,EAAAC,EAAAC,cAACmjC,GAAA,EAAD,CAAcz7B,MAAM,0BAMhCq6B,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,WAM5D+X,IACFrY,EAAUqY,EAAQqX,gBAClBhe,QAAQC,IAAI3R,SAGV0B,IACF+2B,EAAiB/2B,EAAUjB,IAAI,SAAAwL,GAAI,OACjCA,EAAKC,QAAQzL,IAAI,SAAA0L,GAAM,OACrB7V,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAAA,UAAK2V,EAAO7L,OAAY,MAG3B6L,EAAOC,aAAa3L,IAAI,SAAA4L,GAAU,OACjC/V,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBACb,IACA2V,EAAW/L,MAAM9I,OAAS,IACvB6U,EAAW/L,MACRqJ,MAAM,KACNgJ,OAAO,EAAG,IACVqK,KAAK,KAAO,MACf3Q,EAAW/L,QAGnBhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,OACEE,UAAU,cACVuE,MAAO,CACLoG,MAAO83B,EAAYN,EAAaxsB,EAAWvP,KAAO,IAClDuV,QAAS,cAGX/b,EAAAC,EAAAC,cAAA,QACEyE,MAAO,CACL2B,MAC8C,GAA5Cu8B,EAAYN,EAAaxsB,EAAWvP,KAChC,OACA,SAERpG,UAAU,uBAETmiC,EAAaxsB,EAAWvP,IACrB+7B,EAAaxsB,EAAWvP,IAAIu8B,aAC5B,OAMd/iC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,mDAGjBqe,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,mDAIhB4U,EAAgB7K,IAAI,SAAAwjB,GACnB,OACE3tB,EAAAC,EAAAC,cAAA,OACEE,UAAU,2BACVkjC,uBAAA,GAEAtjC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,4BACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,kBAAUytB,EAAV,MAEF3tB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBAEhB2V,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OAAIA,EAAUhT,MAAQ2sB,IAEhCxjB,IAAI,SAAA6J,GACH,OACEhU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ4T,EAAUhK,OAEbhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBApJpB,SAAAqb,GACzB,GAAI/R,EAIF,OAH6BA,EAAQqK,KAAK,SAAA0uB,GAAC,OACzCA,EAAE7xB,WAAWmD,KAAK,SAAA9T,GAAC,OAAIA,GAAKwb,MAkJC8nB,CACCvvB,EAAUxN,IAGVxG,EAAAC,EAAAC,cAAA,KAAGE,UAAU,gCAEb,wBA0BhCJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,IACtC,IACAyvB,EAFH,IAEuBzvB,EAAkB,KACjC,KAETmP,EACC/hB,EAAAC,EAAAC,cAAA,OAAKsG,GAAG,WACNxG,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE8+B,UAAW,MAAOtV,aAAc,QAC1CpM,EAAQ/X,MADX,MACqB+X,EAAQyD,WAG7BxlB,EAAAC,EAAAC,cAAA,OAAKyE,MAAO,CAAE2B,MAAO,UACnBtG,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBACZJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,0BADJ,gBAIE5S,EAAAC,EAAAC,cAAA,KAAGE,UAAU,uCAGjBJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,sBACZJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,uBADJ,oBAGmB5S,EAAAC,EAAAC,cAAA,KAAGE,UAAU,8BAA+B,QAMrEJ,EAAAC,EAAAC,cAAA,OAAKE,UAAW2hB,EAAQgE,kBAAoB,QAC1C/lB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,OACEyE,MAAO,CAAEoX,QAAS,QAAS2nB,SAAU,SACrCre,IAAKtD,EAAQuD,MAAM,GAAKvD,EAAQuD,MAAM,GAAGljB,IAAMmjB,QAInDvlB,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,KAAGyE,MAAO,CAAEq+B,UAAW,WACD,SAAnBjhB,EAAQ2V,OACP13B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACG6hB,EAAQ2V,QAA6B,mBAAnB3V,EAAQ2V,OACzB13B,EAAAC,EAAAC,cAAA,wCAEA,IAGJF,EAAAC,EAAAC,cAAA,SACG6hB,EAAQ2V,QAA6B,mBAAnB3V,EAAQ2V,OACzB13B,EAAAC,EAAAC,cAAA,qBAAa6hB,EAAQ2V,OAArB,KAEA,KAKN,GAGD3V,EAAQyV,IAAMx3B,EAAAC,EAAAC,cAAA,kBAAU6hB,EAAQyV,IAAM,SAAxB,KAAyC,KAG5Dx3B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,0CACAF,EAAAC,EAAAC,cAAA,SACG6hB,EAAQkX,yBACL3sB,IAAOyV,EAAQkX,0BACf,IAGNj5B,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAA,SAAI6hB,EAAQiX,aAAe1sB,IAAOyV,EAAQiX,cAAgB,IAE1Dh5B,EAAAC,EAAAC,cAAA,SACG6hB,EAAQmX,uBACL5sB,IAAOyV,EAAQmX,wBACf,KAGRl5B,EAAAC,EAAAC,cAAA,WAEFF,EAAAC,EAAAC,cAAA,iBAEAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ,IACDJ,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE8+B,UAAW,SACrBpB,EADH,IACuBzvB,EADvB,oBAIF5S,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAEjBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAE2B,MAAO,UAC3C87B,KAIPpiC,EAAAC,EAAAC,cAAA,WACCiiC,GAGH,kBAGFniC,EAAAC,EAAAC,cAAA,QAAM2F,SAAU,SAAAG,GAtHlB3E,OAAOsiC,UAuHH3jC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAASY,KAAK,UAAhC,SACQhB,EAAAC,EAAAC,cAAA,KAAGE,UAAU,sCAkBhBwoC,GAViB,kBAC9B5oC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,oDACLgY,UAAWwd,OCpXX9lC,GAAIxB,OAAOwB,EAEJgmC,GAAkB,SAAA/lC,GACN,IAAIiO,EAA3B,IACM2qB,EAAiB,IAAI9C,GAFWvtB,EAIRC,qBAJQC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAI/B0W,EAJ+BxW,EAAA,GAItB4yB,EAJsB5yB,EAAA,GAAAI,EAKJL,qBALIM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAK/BP,EAL+BQ,EAAA,GAKpBkyB,EALoBlyB,EAAA,GAAAiM,EAMIvM,qBANJwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAM/BoqB,EAN+BnqB,EAAA,GAMhBoqB,EANgBpqB,EAAA,GAAAG,EAQhB3M,qBARgB4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAAA8jB,GAAA7jB,EAAA,GAAAA,EAAA,GASR5M,sBATQ0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GAS/BryB,EAT+BsyB,EAAA,GAStB8M,EATsB9M,EAAA,GAWhCrpB,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAGxD8yB,EAAiB,GACjBxD,EAAmB,GACnBP,EAA0B,GAC1BgE,EAA2B,GAC3BpxB,EAAkB,GAClBqtB,EAAoB,GAMpBjD,EAAgB33B,KAAKkd,MAAMrjB,aAAaC,QAAQ,iBAEpDmjB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVsqB,EAAWiB,GADD,cAAAzrB,EAAAE,KAAA,EAGVi1B,EACJ1J,EAAchG,gBAAkBgG,EAAchG,gBAAkB,IAJlD,cAAAzlB,EAAAE,KAAA,EAOVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,sCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJg+B,EAAiBh+B,KAVL,cAAAyP,EAAAE,KAAA,EAaVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ45B,EAAa55B,KAlBD,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,EAqBf2jB,GAEIlb,IACe7G,GAAE,kBACR8pB,KAAK,SAASvb,EAAOuE,EAAMqP,GACpC5J,QAAQC,IAAI,QAAU1F,EAAKwF,YAG9B,IAEH,IAAMwP,EAAY,eAAAtd,EAAAzM,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAApB,EAAM/S,GAAN,IAAAsJ,EAAA,OAAAmE,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,cACnB7N,EAAEC,iBADiB+S,EAAAnF,KAAA,EAGE6nB,EAAeqN,gBAAgBr/B,GAHjC,OAGf4F,EAHe0J,EAAAuN,KAInBnL,QAAQC,IAAI/L,GACZxM,EAAMkhB,QAAQ7S,KAAd,cAAA9Q,OACgBsS,EADhB,KAAAtS,OACiCuS,EADjC,wBALmB,wBAAAoG,EAAAzE,SAAAwE,MAAH,gBAAAwB,GAAA,OAAAlN,EAAAmN,MAAA1Z,KAAAG,YAAA,GAmRlB,OACEjB,EAAAC,EAAAC,cAAA,YA3LI+hC,IACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OACFD,EAAiBC,EAAMp8B,IAAMo8B,EAAM54B,MACrB,kBAAf44B,EAAM54B,QACDo8B,EAA2BxD,EAAMp8B,IAEtC47B,EAAwBjxB,KACtBnR,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEq+B,UAAW,WACtBhjC,EAAAC,EAAAC,cAAA,OACE+iC,WAAUL,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD05B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBpjC,EAAAC,EAAAC,cAAA,QAAME,UAAU,mBACb,IACAwiC,EAAMG,aAAc,KACf,IACR/iC,EAAAC,EAAAC,cAAA,gBAAQ0iC,EAAM54B,QAEhBhK,EAAAC,EAAAC,cAACmjC,GAAA,EAAD,CAAcz7B,MAAM,0BAOhCq6B,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,gBAiB5DoB,IACF+6B,EAAiB/6B,EAAUjB,IAAI,SAAAwL,GAAI,OACjCA,EAAKC,QAAQzL,IAAI,SAAC0L,EAAQiY,GAAT,OACf9tB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,eACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAd,IAA+ByV,EAAO7L,SAG1ChK,EAAAC,EAAAC,cAAA,UACG2V,EAAOC,aAAa3L,IAAI,SAAC4L,EAAY/C,GAAb,OACvBhT,EAAAC,EAAAC,cAAA,MAAIE,UAAU,mBACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,iDACb,KAEHJ,EAAAC,EAAAC,cAAA,YAAO6V,EAAW/L,QAGtByU,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,gDACb,KAEHJ,EAAAC,EAAAC,cAAA,YAAO6V,EAAW/L,SAItBhK,EAAAC,EAAAC,cAAA,UACG8U,EAAgB7K,IAAI,SAAAwjB,GACnB,OACE3tB,EAAAC,EAAAC,cAAA,MAAIE,UAAU,kBACXutB,EACD3tB,EAAAC,EAAAC,cAAA,UACG6V,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OACPA,EAAUhT,MAAQ2sB,IAErBxjB,IAAI,SAAA6J,GAAS,OACZhU,EAAAC,EAAAC,cAAA,MAAIE,UAAU,mBACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLwF,GAAIwN,EAAUxN,GACdlB,SAAU,SAAAU,GAAC,OAlIlC,SAAAA,GACrB,IAAIgjC,EAAiBhjC,EAAEwC,OAAOsc,QAC1B9C,EAAgBhc,EAAEwC,OAAO2S,QAAQpF,WACjCkzB,EAAcv/B,EAClB,GAAIu/B,EAAa,CACf,GAAsB,GAAlBD,EACFhjC,EAAEwC,OAAOsc,SAAU,EACXmkB,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAciM,IAC5CpR,WAAWO,KAAKnL,EAAEwC,OAAOhC,QACtB,CACL,IAAIi8B,EAAIwG,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAciM,IAC9CygB,EAAE7xB,WAAWyL,OAAOomB,EAAE7xB,WAAW6V,QAAQzgB,EAAEwC,OAAOhC,IAAK,GAEzDsiC,EAAWG,GAEb7tB,QAAQC,IAAI3R,GAoHkCw/B,CAAeljC,IAEjB+nB,iBACErkB,KACIA,EAAQqK,KAAK,SAAA0uB,GAAC,OACZA,EAAE7xB,WAAWmD,KACX,SAAA9T,GAAC,OAAIA,GAAK+T,EAAUxN,OAO9B2iC,UACEz/B,IACIA,EAAQqK,KACN,SAAA0uB,GAAC,OACCA,EAAE1sB,YACFA,EAAWvP,KAMrByhC,kBAAiBlyB,EAAWvP,MAGhCxG,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,SACEE,UAAU,kBACV0jB,IAAK9P,EAAUxN,IAEd,IACAwN,EAAUhK,mBAarChK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,UACEoF,SAAU,SAAAU,GAAC,OAxOd,SAAAT,GACnB,IAAIyc,EAAgBzc,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAevQ,aAC3D,mBAEEojB,EAAe5iC,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAevQ,aAC1D,kBAEEkkB,EAAcv/B,EAEd0/B,EAAiB,GACjBC,EAAaxmC,GAAE,kCAAoCmf,EAAgB,KAEvE,GAAImmB,GAAgB/B,EAClBiD,EAAW1c,KAAK,SAASvb,EAAOuE,EAAMqP,GACpCrP,EAAKmP,SAAU,EACfnP,EAAKwzB,UAAW,IAOlB/tB,QAAQC,IAAI4tB,GAEZA,EAAcA,EAAYj9B,OAAO,SAAAy2B,GAAC,OAAIA,EAAE1sB,YAAciM,IACtD5G,QAAQC,IAAI4tB,QACP,GAAIA,EACT,GAAIA,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,aAAeiM,IAAgB,CACzD,IAAIygB,EAAIwG,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,aAAeiM,IAC/CygB,EAAE/J,UAAYyP,EAEdkB,EAAW1c,KAAK,SAASvb,EAAOuE,EAAMqP,GACpCokB,EAAej4B,KAAKwE,EAAKnP,IACzBmP,EAAKmP,SAAU,EACfnP,EAAKwzB,UAAW,IAElB1G,EAAE7xB,WAAaw4B,OAEfC,EAAW1c,KAAK,SAASvb,EAAOuE,EAAMqP,GACpCokB,EAAej4B,KAAKwE,EAAKnP,IACzBmP,EAAKmP,SAAU,EACfnP,EAAKwzB,UAAW,IAElBF,EAAY93B,KAAK,CACf4E,WAAYiM,EACZ0W,UAAWyP,EACXv3B,WAAYw4B,IAIlBN,EAAWG,GAsL0B/c,CAAalmB,IAC5Bm6B,aACEz2B,GACIA,EAAQqK,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,EAAWvP,KAC3CkD,EAAQqK,KACN,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,EAAWvP,KAChCkyB,UAEJ0N,GAGLzD,EAAiBx4B,IAAI,SAAC5F,EAAKoB,GAAN,OACpB3F,EAAAC,EAAAC,cAAA,UACEyF,MAAOA,EACP2iC,iBAAgB3iC,EAChBsiC,kBAAiBlyB,EAAWvP,IAE3BjC,qBAmBzBvE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,IACtC,IACAyvB,EAFH,IAEuBzvB,EAAkB,KACjC,KAETmP,EACC/hB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,iCACuBmiC,EADvB,IAC2CzvB,EAD3C,KAC+D,IAC5DmP,EAAQyD,UAAW,KAGtBxlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,wBAEF5S,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,qCAHX,qBAMA5H,EAAAC,EAAAC,cAAA,YAIJF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,OACEmlB,IAAKtD,EAAQuD,MAAM,GAAKvD,EAAQuD,MAAM,GAAGljB,IAAMmjB,KAC/Cxa,MAAM,WAGV/K,EAAAC,EAAAC,cAAA,OAAKE,UAAU,8BACbJ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,iEACwD,IACrDmiC,EAFH,6TAWJriC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ,IACDJ,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE8+B,UAAW,SACrBpB,EADH,IACuBzvB,EADvB,oBAIF5S,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAE2B,MAAO,UAC3C87B,KAIPpiC,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAEXJ,EAAAC,EAAAC,cAAA,QAAM2F,SAAU,SAAAG,GAAC,OAAI2kB,EAAa3kB,KAC/BmgC,EACDnmC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAASY,KAAK,UAAhC,QACOhB,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,sCAU9B,YAgBOuL,GAVK,kBAClBnT,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,mDACLgY,UAAW0d,OChbJS,GAAc,SAAAxmC,GACzB,IAAM6P,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACtDklB,EAAYz1B,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAHnBhI,EAKJC,qBALIC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAKlB8yB,GALkB5yB,EAAA,GAAAA,EAAA,IAQ5BmwB,GADiB,IAAI3qB,EACJ,IAAI6nB,IAROjtB,EASRL,qBATQM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAS3B3B,EAT2B4B,EAAA,GASpB+vB,EAToB/vB,EAAA,GAAAiM,EAUZvM,qBAVYwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAU3B2f,EAV2B1f,EAAA,GAUtB8jB,EAVsB9jB,EAAA,GAAAG,EAWI3M,qBAXJ4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAW3Bwf,EAX2Bvf,EAAA,GAWd2jB,EAXc3jB,EAAA,GAAA6jB,EAYNzwB,qBAZM0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GAY3BrE,EAZ2BsE,EAAA,GAYnBF,EAZmBE,EAAA,GAAAE,EAcM5wB,qBAdN6wB,EAAAv7B,OAAA4K,EAAA,EAAA5K,CAAAs7B,EAAA,GAc3BzB,EAd2B0B,EAAA,GAcbF,EAdaE,EAAA,GAAAE,EAeZ/wB,qBAfYgxB,EAAA17B,OAAA4K,EAAA,EAAA5K,CAAAy7B,EAAA,GAe3BuD,EAf2BtD,EAAA,GAetBiN,EAfsBjN,EAAA,GAAAC,EAgBEjxB,qBAhBFkxB,EAAA57B,OAAA4K,EAAA,EAAA5K,CAAA27B,EAAA,GAgB3BE,EAhB2BD,EAAA,GAgBfE,EAhBeF,EAAA,GAAAG,EAiBQrxB,qBAjBRsxB,EAAAh8B,OAAA4K,EAAA,EAAA5K,CAAA+7B,EAAA,GAiB3BE,EAjB2BD,EAAA,GAiBZE,EAjBYF,EAAA,GAAAG,EAkBQzxB,qBAlBR0xB,EAAAp8B,OAAA4K,EAAA,EAAA5K,CAAAm8B,EAAA,GAkB3BE,EAlB2BD,EAAA,GAkBZE,EAlBYF,EAAA,GAAAG,EAoBF7xB,qBApBE8xB,EAAAx8B,OAAA4K,EAAA,EAAA5K,CAAAu8B,EAAA,GAoB3BxF,GApB2ByF,EAAA,GAoBjBC,GApBiBD,EAAA,GAAAE,GAqBQhyB,qBArBRiyB,GAAA38B,OAAA4K,EAAA,EAAA5K,CAAA08B,GAAA,GAqB3B1F,GArB2B2F,GAAA,GAqBZC,GArBYD,GAAA,GAAAE,GAsBUnyB,qBAtBVoyB,GAAA98B,OAAA4K,EAAA,EAAA5K,CAAA68B,GAAA,GAsB3B5F,GAtB2B6F,GAAA,GAsBXC,GAtBWD,GAAA,GAAAE,GAuBQtyB,qBAvBRuyB,GAAAj9B,OAAA4K,EAAA,EAAA5K,CAAAg9B,GAAA,GAuB3BpF,GAvB2BqF,GAAA,GAuBZ2L,GAvBY3L,GAAA,GAAAE,GAwBUzyB,mBAAS,IAxBnB0yB,GAAAp9B,OAAA4K,EAAA,EAAA5K,CAAAm9B,GAAA,GAwB3BzZ,GAxB2B0Z,GAAA,GAwBXzZ,GAxBWyZ,GAAA,GAAAC,GAyBA3yB,qBAzBA4yB,GAAAt9B,OAAA4K,EAAA,EAAA5K,CAAAq9B,GAAA,GA2B9BxZ,IA3B8ByZ,GAAA,GAAAA,GAAA,GA2BnB58B,aAAaC,QAAQ,QAChCD,aAAaC,QAAQ,QACrB,IAEaD,aAAaC,QAAQ,UAClCD,aAAaC,QAAQ,SAGzBmjB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,UAAAvB,OAAmBk4B,EAAnB,kBACRx0B,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJi6B,EAAWj6B,GACXy3B,EAASz3B,EAAa8F,MAAM,GAAGrE,OAC/B+2B,EACEx4B,EAAam0B,YAAY,GAAKn0B,EAAam0B,YAAY,GAAGj2B,IAAM,IAElEmnC,EACErlC,EAAam0B,YAAY,GACrBn0B,EAAam0B,YAAY,GAAGtrB,UAC5B,IAENswB,GACEn5B,EAAai0B,gBAAgB,GACzBj0B,EAAai0B,gBAAgB,GAAGxyB,MAChC,IAENi2B,EACE13B,EAAa8zB,UAAU,GAAK9zB,EAAa8zB,UAAU,GAAGryB,MAAQ,IAEhEm2B,EACE53B,EAAag0B,aAAa,GACtBh0B,EAAag0B,aAAa,GAAGvyB,MAC7B,QAENk2B,EACE33B,EAAa+zB,mBAAmB,GAC5B/zB,EAAa+zB,mBAAmB,GAAGtyB,MACnC,IAEN63B,GACEt5B,EAAak0B,+BAA+B,GACxCl0B,EAAak0B,+BAA+B,GAAGzyB,MAC/C,IAENg4B,GACEz5B,EAAagL,6BAA6B,GACtChL,EAAagL,6BAA6B,GAAGvJ,MAC7C,IAEN6jC,GACEtlC,EAAao0B,wBAAwB,GACjCp0B,EAAao0B,wBAAwB,GAAG3yB,MACxC,MA7CM,cAAAgO,EAAAE,KAAA,EAiDVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,uBAAAvB,OAAgCokB,GAAhC,iBAAyD,CAClE5gB,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJqgB,GAAkBrgB,KAvDN,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,aAAA,EA0Df2jB,IACC,CAAC2T,IAEJ,IAAM5N,GAAY,eAAAtd,EAAAzM,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAApB,EAAMsP,GAAN,IAAAqD,EAAAoM,EAAAxoB,EAAA,OAAAmE,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,UACnBwU,EAAIpiB,oBAED+D,IACA2tB,IACD3tB,EAAM9I,OAAS,GACfy2B,GAASz2B,OAAS,GAClB+7B,GACAJ,GARiB,CAAA7jB,EAAAnF,KAAA,QAAAmF,EAAAnF,KAAA,mBAWb6X,EAAQpqB,aAAaC,QAAQ,cAC7Bu2B,EAAS8H,GACTnF,EAba,CAAAzhB,EAAAnF,KAAA,eAAAmF,EAAAnF,KAAA,EAcTjQ,MACJhC,EAAS,yDACT,CACEkC,YAAa,UACbD,OAAQ,OACR2mB,QAAS,iBACTtoB,QAAS,CACPw9B,OAAQ,2BACRj+B,eAAgB,2BAChBC,eAAgBgqB,EAChBiU,sBAAuB,wCAEzBn9B,KAAMi4B,IAGP12B,KAAK,SAAAgvB,GAAI,OAAIA,EAAK9uB,SAClBF,KAAK,SAASwL,GACbuoB,EAASvoB,EAAKqwB,IAAI,GAAGj6B,QA/BV,cAAAqT,EAAAnF,KAAA,GAmCI6nB,EAAe5C,YAClCP,EACAvuB,EACAwtB,EACAC,EACAC,EACAC,GACAC,GACAC,GACAW,GACAV,GA7Ce,SAmCbxoB,EAnCa0J,EAAAuN,MAgDJvQ,IAAI,GAAGrQ,OAClB7C,EAAMkhB,QAAQ7S,KAAd,cAAA9Q,OACgBsS,EADhB,KAAAtS,OACiCuS,EADjC,kBAAAvS,OAEIiP,EAAS0G,IAAI,GAAGrQ,MAFpB,WAjDe,yBAAAqT,EAAAzE,SAAAwE,MAAH,gBAAAwB,GAAA,OAAAlN,EAAAmN,MAAA1Z,KAAAG,YAAA,GAmElB,IAQMmG,GARsB,WAC1B,IAAIA,EAAc,cAIlB,OAHK9F,aAAaC,QAAQ,WACxB6F,EAAc,QAETA,EAGW04B,GAGhBC,GAAoB,sBACpBC,GAAuB,sBACvBC,GAAW,0DACXC,GACF,+DACEl2B,GACEA,EAAM9I,OAAS,IACjB++B,GAAW,GACXF,GAAoB,IAIpBpI,IACEA,GAASz2B,OAAS,IACpBg/B,GAAe,GACfF,GAAuB,IA8D3B,OACEhgC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,IACtC,IACAD,EAFH,IAEmBC,EAAkB,KAC7B,KAlBQ,WACpB,IAAIsS,EAAO,GAIX,OAHAZ,GAAena,IAAI,SAAAwL,GACjBuP,EAAK/T,KAAKwE,EAAKZ,mBAEbmQ,EAAKjgB,SAAS0N,GAefwS,GACCnlB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,kBAAAvS,OAAkEk4B,EAAlE,WAED,IAHH,OAIO,KAEPv4B,EAAAC,EAAAC,cAAA,oBAAYkH,GAAZ,YAEApH,EAAAC,EAAAC,cAAA,QACEE,UAAU,OACVoG,GAAG,sBACHX,SAAU8kB,IAEV3qB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLwF,GAAG,QACHY,YAAY,OACZzB,MAAOqE,EACP1E,SAAU,SAAAU,GAAC,OAAI21B,EAAS31B,EAAEwC,OAAO7C,UAEnC3F,EAAAC,EAAAC,cAAA,OAAKE,UAAW2/B,IACd//B,EAAAC,EAAAC,cAAA,SAAI+/B,OAIVjgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,OACLwF,GAAG,WACHY,YAAY,YACZzB,MAAOgyB,GACPryB,SAAU,SAAAU,GAAC,OAAIq3B,GAAYr3B,EAAEwC,OAAO7C,UAEtC3F,EAAAC,EAAAC,cAAA,OAAKE,UAAW4/B,IACdhgC,EAAAC,EAAAC,cAAA,SAAIggC,QAMZlgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBAAf,QACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBAGjBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,SAAOc,KAAK,OAAOwF,GAAG,aAAalB,SAnH9B,SAAAU,GACnB,GAAKA,EAAEwC,OAAO43B,OAAmC,IAA1Bp6B,EAAEwC,OAAO43B,MAAMl/B,OAAtC,CAIE,IAAMuoC,EAAYpJ,IAAIC,gBAAgBt6B,EAAEwC,OAAO43B,MAAM,IAEjDp6B,EAAEwC,OAAO43B,MAAM,GAAGG,KAAO,QAC3BzD,EAAiB,GAEjBA,OAAiB37B,GAIS,cAA1B6E,EAAEwC,OAAO43B,MAAM,GAAGp/B,MACQ,aAA1BgF,EAAEwC,OAAO43B,MAAM,GAAGp/B,KAElBk8B,EAAiB,GAEjBA,OAAiB/7B,GAGnBia,QAAQC,IAAIrV,EAAEwC,OAAO43B,MAAM,IAE3B1D,EAAc+M,GACdxN,EAAgBj2B,EAAEwC,OAAO43B,MAAM,SAvB/BnE,OAAgB96B,OAoHNnB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,OACEsG,GAAG,mBACHuE,MAAM,QACNsa,IAAKoX,EACLzxB,OAAO,QACPrG,MAAO,CACLsG,OAAQ,iBACRrG,QAAS,MACTmG,MAAO,SAGV0xB,EACCz8B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,KAAG6E,KAAK,IAAIC,QAAS,SAAAgB,GAAC,OAvGlB,SAAAA,GACtBA,EAAEC,iBACFy2B,OAAcv7B,GACdooC,OAAOpoC,GACP+7B,OAAiB/7B,GACjB27B,OAAiB37B,GACjB+E,SAASsmB,eAAe,cAAc7mB,MAAQ,GAiGFk7B,CAAgB76B,KAA1C,kBAKF,GAGD62B,EACC78B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,uDAAmD,KAGrD,GAGD+8B,EACCj9B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,kDAA8C,KAGhD,IAIJF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,SACEc,KAAK,SACLwF,GAAG,MACHY,YAAY,MACZ2D,MAAO,EACPpF,MAAO6xB,EACPlyB,SAAU,SAAAU,GAAC,OAAI41B,EAAO51B,EAAEwC,OAAO7C,WAInC3F,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,UACEyF,MAAO+xB,EACPyI,aAAa,SACb76B,SAAU,SAAAU,GAAC,OAAI81B,EAAU91B,EAAEwC,OAAO7C,SAElC3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,QACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,QACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,UAAf,UACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,aAAf,aACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,kBAAf,wBAIN3F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACbJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAMqoB,GACNoJ,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBglB,GAAiBjuB,OAKvBvP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,4CACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAMkoB,EACNuJ,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBqjB,EAAetsB,OAKrBvP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,wCACAF,EAAAC,EAAAC,cAAC4gC,GAAA7gC,EAAD,CACEsY,OAAQwoB,KACRxxB,KAAMsoB,GACNmJ,OAAQ,SAAAzoB,KACRjT,SAAU,SAACC,EAAOgT,GAChB,IAAMhJ,EAAOgJ,EAAOC,UACpBmlB,GAAkBpuB,OAKxBvP,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,UACEyF,MAAO6yB,GACP2H,aAAa,SACb76B,SAAU,SAAAU,GAAC,OAAIwjC,GAAiBxjC,EAAEwC,OAAO7C,SAEzC3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,SAAf,SACA3F,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,QAAf,YAMR3F,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAtSd,WACE,IAAI+gC,EAAoB,oBAKxB,OAJK3/B,aAAaC,QAAQ,WACxB0/B,EAAoB,YAGfjhC,EAAAC,EAAAC,cAAA,SAAOc,KAAK,SAASZ,UAAU,SAASuF,MAAOs7B,KAgS1C,OAEFjhC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBAKrB,KAgBOspC,GAVY,kBACzB1pC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,kDACLgY,UAAWme,OCldXzmC,GAAIxB,OAAOwB,EAEJ8mC,GAAa,SAAA7mC,GACD,IAAIiO,EAA3B,IACM2qB,EAAiB,IAAI9C,GAFMvtB,EAIHC,qBAJGC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAI1B0W,EAJ0BxW,EAAA,GAIjB4yB,EAJiB5yB,EAAA,GAAAI,EAKCL,qBALDM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAK1BP,EAL0BQ,EAAA,GAKfkyB,EALelyB,EAAA,GAAAiM,EAMSvM,qBANTwM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAM1BoqB,EAN0BnqB,EAAA,GAMXoqB,EANWpqB,EAAA,GAAAG,EAQX3M,qBARW4M,EAAAtX,OAAA4K,EAAA,EAAA5K,CAAAqX,EAAA,GAAA8jB,GAAA7jB,EAAA,GAAAA,EAAA,GASH5M,sBATG0wB,EAAAp7B,OAAA4K,EAAA,EAAA5K,CAAAm7B,EAAA,GAS1BryB,EAT0BsyB,EAAA,GASjB8M,EATiB9M,EAAA,GAW3BrpB,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACtDklB,EAAYz1B,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAEjD8yB,EAAiB,GACjBxD,EAAmB,GACnBP,EAA0B,GAC1BgE,EAA2B,GAC3BpxB,EAAkB,GAClBqtB,EAAoB,GAMxB3d,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,8BAAAvS,OACsEk4B,EADtE,eAAAl4B,OAC6FmP,KAAKC,QAE1G1L,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJi6B,EAAWj6B,KANC,cAAAyP,EAAAE,KAAA,EASVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,sCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJg+B,EAAiBh+B,KAZL,cAAAyP,EAAAE,KAAA,EAeVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ45B,EAAa55B,KApBD,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,YAAA,EAuBf2jB,GAEIlb,IACe7G,GAAE,kBACR8pB,KAAK,SAASvb,EAAOuE,EAAMqP,GACpC5J,QAAQC,IAAI,QAAU1F,EAAKwF,YAG9B,CAACod,IAEJ,IAAM5N,EAAY,eAAAtd,EAAAzM,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAApB,EAAM/S,GAAN,IAAAsJ,EAAA,OAAAmE,EAAAxT,EAAAyT,KAAA,SAAAsF,GAAA,cAAAA,EAAApF,KAAAoF,EAAAnF,MAAA,cACnB7N,EAAEC,iBADiB+S,EAAAnF,KAAA,EAGE6nB,EAAe3C,WAAWR,EAAW7uB,GAHvC,OAGf4F,EAHe0J,EAAAuN,KAInBnL,QAAQC,IAAI/L,GACZxM,EAAMkhB,QAAQ7S,KAAd,cAAA9Q,OACgBsS,EADhB,KAAAtS,OACiCuS,EADjC,kBAAAvS,OACkEk4B,EADlE,WALmB,wBAAAvf,EAAAzE,SAAAwE,MAAH,gBAAAwB,GAAA,OAAAlN,EAAAmN,MAAA1Z,KAAAG,YAAA,GA4QlB,OACEjB,EAAAC,EAAAC,cAAA,YA3LI+hC,IACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IAC/B0vB,EAAoBK,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAKC,iBAAiBx4B,IACpB,SAAAy4B,GAAK,OACFD,EAAiBC,EAAMp8B,IAAMo8B,EAAM54B,MACrB,kBAAf44B,EAAM54B,QACDo8B,EAA2BxD,EAAMp8B,IAEtC47B,EAAwBjxB,KACtBnR,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAEq+B,UAAW,WACtBhjC,EAAAC,EAAAC,cAAA,OACE+iC,WAAUL,EAAMp5B,YAAco5B,EAAMp5B,YAAc,KAClD05B,aAAW,EACXC,YAAU,OACVC,kBAAgB,GAEhBpjC,EAAAC,EAAAC,cAAA,QAAME,UAAU,mBACb,IACAwiC,EAAMG,aAAc,KACf,IACR/iC,EAAAC,EAAAC,cAAA,gBAAQ0iC,EAAM54B,QAEhBhK,EAAAC,EAAAC,cAACmjC,GAAA,EAAD,CAAcz7B,MAAM,0BAOhCq6B,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,GAC/B+vB,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,WAiB5D+X,IACGrY,GACHo/B,EAAW/mB,EAAQqX,iBAErBhe,QAAQC,IAAI3R,SAGV0B,IACF+6B,EAAiB/6B,EAAUjB,IAAI,SAAAwL,GAAI,OACjCA,EAAKC,QAAQzL,IAAI,SAAC0L,EAAQiY,GAAT,OACf9tB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,eACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAd,IAA+ByV,EAAO7L,SAG1ChK,EAAAC,EAAAC,cAAA,UACG2V,EAAOC,aAAa3L,IAAI,SAAC4L,EAAY/C,GAAb,OACvBhT,EAAAC,EAAAC,cAAA,MAAIE,UAAU,mBACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,iDACb,KAEHJ,EAAAC,EAAAC,cAAA,YAAO6V,EAAW/L,QAGtByU,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,gDACb,KAEHJ,EAAAC,EAAAC,cAAA,YAAO6V,EAAW/L,SAItBhK,EAAAC,EAAAC,cAAA,UACG8U,EAAgB7K,IAAI,SAAAwjB,GACnB,OACE3tB,EAAAC,EAAAC,cAAA,MAAIE,UAAU,kBACXutB,EACD3tB,EAAAC,EAAAC,cAAA,UACG6V,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OACPA,EAAUhT,MAAQ2sB,IAErBxjB,IAAI,SAAA6J,GAAS,OACZhU,EAAAC,EAAAC,cAAA,MAAIE,UAAU,mBACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,SACEc,KAAK,WACLwF,GAAIwN,EAAUxN,GACdlB,SAAU,SAAAU,GAAC,OAlIlC,SAAAA,GACrB,IAAIgjC,EAAiBhjC,EAAEwC,OAAOsc,QAC1B9C,EAAgBhc,EAAEwC,OAAO2S,QAAQpF,WACjCkzB,EAAcv/B,EAClB,GAAIu/B,EAAa,CACf,GAAsB,GAAlBD,EACFhjC,EAAEwC,OAAOsc,SAAU,EACXmkB,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAciM,IAC5CpR,WAAWO,KAAKnL,EAAEwC,OAAOhC,QACtB,CACL,IAAIi8B,EAAIwG,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAciM,IAC9CygB,EAAE7xB,WAAWyL,OAAOomB,EAAE7xB,WAAW6V,QAAQzgB,EAAEwC,OAAOhC,IAAK,GAEzDsiC,EAAWG,GAEb7tB,QAAQC,IAAI3R,GAoHkCw/B,CAAeljC,IAEjB+nB,iBACErkB,EAAQqK,KAAK,SAAA0uB,GAAC,OACZA,EAAE7xB,WAAWmD,KACX,SAAA9T,GAAC,OAAIA,GAAK+T,EAAUxN,OAM1B2iC,UACEz/B,EAAQqK,KACN,SAAA0uB,GAAC,OACCA,EAAE1sB,YACFA,EAAWvP,KAKjByhC,kBAAiBlyB,EAAWvP,MAGhCxG,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,SACEE,UAAU,kBACV0jB,IAAK9P,EAAUxN,IAEd,IACAwN,EAAUhK,mBAarChK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,UACEoF,SAAU,SAAAU,GAAC,OApOd,SAAAT,GACnB,IAAIyc,EAAgBzc,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAevQ,aAC3D,mBAEEojB,EAAe5iC,EAAMiD,OAAOjD,EAAMiD,OAAO8sB,eAAevQ,aAC1D,kBAEEkkB,EAAcv/B,EAEd0/B,EAAiB,GACjBC,EAAaxmC,GAAE,kCAAoCmf,EAAgB,KAEvE,GAAImmB,GAAgB/B,EAClBiD,EAAW1c,KAAK,SAASvb,EAAOuE,EAAMqP,GACpCrP,EAAKmP,SAAU,EACfnP,EAAKwzB,UAAW,IAOlB/tB,QAAQC,IAAI4tB,GAEZA,EAAcA,EAAYj9B,OAAO,SAAAy2B,GAAC,OAAIA,EAAE1sB,YAAciM,IACtD5G,QAAQC,IAAI4tB,QACP,GAAIA,EACT,GAAIA,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,aAAeiM,IAAgB,CACzD,IAAIygB,EAAIwG,EAAYl1B,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,aAAeiM,IAC/CygB,EAAE/J,UAAYyP,EAEdkB,EAAW1c,KAAK,SAASvb,EAAOuE,EAAMqP,GACpCokB,EAAej4B,KAAKwE,EAAKnP,IACzBmP,EAAKmP,SAAU,EACfnP,EAAKwzB,UAAW,IAElB1G,EAAE7xB,WAAaw4B,OAEfC,EAAW1c,KAAK,SAASvb,EAAOuE,EAAMqP,GACpCokB,EAAej4B,KAAKwE,EAAKnP,IACzBmP,EAAKmP,SAAU,EACfnP,EAAKwzB,UAAW,IAElBF,EAAY93B,KAAK,CACf4E,WAAYiM,EACZ0W,UAAWyP,EACXv3B,WAAYw4B,IAIlBN,EAAWG,GAkL0B/c,CAAalmB,IAC5Bm6B,aACEz2B,EAAQqK,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,EAAWvP,KACzCkD,EAAQqK,KAAK,SAAA0uB,GAAC,OAAIA,EAAE1sB,YAAcA,EAAWvP,KAC1CkyB,UACH0N,GAGLzD,EAAiBx4B,IAAI,SAAC5F,EAAKoB,GAAN,OACpB3F,EAAAC,EAAAC,cAAA,UACEyF,MAAOA,EACP2iC,iBAAgB3iC,EAChBsiC,kBAAiBlyB,EAAWvP,IAE3BjC,qBAmBzBvE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAI,KAAV,QADF,KAC+B,IAC7BzE,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAMC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,IACtC,IACAyvB,EAFH,IAEuBzvB,EAAkB,KACjC,KAETmP,EACC/hB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,iCACuBmiC,EADvB,IAC2CzvB,EAD3C,KAC+D,IAC5DmP,EAAQyD,UAAW,KAGtBxlB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgBsS,EAAhB,KAAAtS,OAAiCuS,EAAjC,kBAAAvS,OAAkEk4B,EAAlE,WAEFv4B,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,qCAHX,qBAMA5H,EAAAC,EAAAC,cAAA,YAIJF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,OACEmlB,IAAKtD,EAAQuD,MAAM,GAAKvD,EAAQuD,MAAM,GAAGljB,IAAMmjB,KAC/Cxa,MAAM,WAGV/K,EAAAC,EAAAC,cAAA,OAAKE,UAAU,8BACbJ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,uDAC8C,IAC3CmiC,EAFH,6TAWJriC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ,IACDJ,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE8+B,UAAW,SACrBpB,EADH,IACuBzvB,EADvB,oBAIF5S,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBAAgBuE,MAAO,CAAE2B,MAAO,UAC3C87B,KAIPpiC,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAEXJ,EAAAC,EAAAC,cAAA,QAAM2F,SAAU,SAAAG,GAAC,OAAI2kB,EAAa3kB,KAC/BmgC,EACDnmC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACbJ,EAAAC,EAAAC,cAAA,UAAQE,UAAU,SAASY,KAAK,UAAhC,QACOhB,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,sCAU9B,YAgBOgiC,GAVW,kBACxB5pC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,iDACLgY,UAAWwe,OC5aJE,GAAyB,SAAA/mC,GACpC,IAAM6P,EAAgB7P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACnDT,EAAmB9P,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GACtDklB,EAAYz1B,EAAMqD,SAASiN,SAASC,MAAM,KAAK,GAHRhI,EAKXC,qBALWC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GAKtCD,EALsCG,EAAA,GAK3BuyB,EAL2BvyB,EAAA,GAAAI,EAMHL,qBANGM,EAAAhL,OAAA4K,EAAA,EAAA5K,CAAA+K,EAAA,GAMtCs2B,EANsCr2B,EAAA,GAMvBs2B,EANuBt2B,EAAA,GAOvCzF,EAAW2jC,cAP4BjyB,EAQfvM,qBARewM,EAAAlX,OAAA4K,EAAA,EAAA5K,CAAAiX,EAAA,GAQtCkyB,EARsCjyB,EAAA,GAQ7BkyB,EAR6BlyB,EAAA,GAUzCktB,EAAkB7+B,EAAS3C,MAAMwhC,gBACjCX,EAAiBl+B,EAAS3C,MAAM6gC,eAChClC,EAAiB,GACjBntB,EAAkB,GAIL1T,aAAaC,QAAQ,UAClCD,aAAaC,QAAQ,SAGzBmjB,oBAAU,YACO,eAAA5kB,EAAAc,OAAAsZ,EAAA,EAAAtZ,CAAA6S,EAAAxT,EAAAka,KAAG,SAAA5G,IAAA,OAAAE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACVjQ,MAAK,GAAAvD,OAAIuB,EAAJ,sCACRmC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJg+B,EAAiBh+B,KAJL,cAAAyP,EAAAE,KAAA,EAOVjQ,MAAK,GAAAvD,OACNuB,EADM,SAAAvB,OACQsS,EADR,KAAAtS,OACyBuS,EADzB,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ45B,EAAa55B,KAZD,cAAAyP,EAAAE,KAAA,EAeVjQ,MAAK,GAAAvD,OACNuB,EADM,yBAAAvB,OACwBsS,EADxB,KAAAtS,OACyCuS,EADzC,kBAGR7O,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJ8lC,EAAW9lC,KApBC,wBAAAyP,EAAAY,SAAAhB,MAAH,yBAAAzT,EAAA0a,MAAA1Z,KAAAG,aAAA,EAuBf2jB,IACC,CAAC2T,IAEAwR,GACF3uB,QAAQC,IAAI0uB,GA6Hd,OACE/pC,EAAAC,EAAAC,cAAA,YAtGI+hC,GACFA,EAAc93B,IAAI,SAAAu4B,GACZA,EAAK14B,MAAM+K,gBAAkBpC,IACX+vB,EAAK14B,MACT04B,EAAK9O,KAAK,GAAGxxB,IACbsgC,EAAKl5B,YACrBk5B,EAAK1tB,gBAAgB7K,IACnB,SAAA6J,GAAS,OAAKgB,EAAgBhB,EAAUxN,IAAMwN,EAAUhK,gBAM5DoB,IAEAgQ,QAAQC,IAAIgpB,GAEdlC,EAAiB/2B,EAAUjB,IAAI,SAAAwL,GAAI,OACjCA,EAAKC,QAAQzL,IAAI,SAAA0L,GAAM,OACrB7V,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,UAAK2V,EAAO7L,OAAY,KAE1BhK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,kCAGH2V,EAAOC,aAAa3L,IAAI,SAAA4L,GAAU,OACS,GAA1CsuB,EAAe5d,QAAQ1Q,EAAWvP,IAChCxG,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKsG,GAAIuP,EAAWvP,GAAIpG,UAAU,OAChCJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBACdJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACqe,GAAAte,EAAD,CACEue,QACExe,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,kDAAmD,IAC/D2V,EAAW/L,OAGhByU,gBACEze,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,iDAAkD,IAC9D2V,EAAW/L,QAIfgL,EAAgB7K,IAAI,SAAAwjB,GACnB,OACE3tB,EAAAC,EAAAC,cAAA,OACEE,UAAU,2BACVkjC,uBAAA,GAEAtjC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,4BACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,kBAAUytB,EAAV,MAEF3tB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBAEhB2V,EAAWnF,WACT5E,OACC,SAAAgI,GAAS,OACPA,EAAUhT,MAAQ2sB,IAErBxjB,IAAI,SAAA6J,GACH,OACEhU,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACZ4T,EAAUhK,iBAYnChK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACbJ,EAAAC,EAAAC,cAAA,UAxGE,SAAA8hB,GACpB,GAAI+nB,EAeF,OAdWA,EAAQ5/B,IAAI,SAAAwL,GACrB,GAAIA,EAAKnP,IAAMwb,EACb,OAAOrM,EAAK0L,UAAUlX,IAAI,SAAAwG,GACxB,OACE3Q,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,KAAG6E,KAAM4L,EAASs5B,aAAczhC,OAAO,UACpC,IACAmI,EAASu5B,aAAc,UA+FfC,CAAcp0B,EAAWvP,QAKpC,aAgBVxG,EAAAC,EAAAC,cAAA,2CACAF,EAAAC,EAAAC,cAAA,KAAGE,UAAU,QAAb,iJAEwE,IACrE4kC,GAEF7C,IAeQiI,GAVY,kBACzBpqC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACEC,OAAK,EACL/X,KAAK,gEACLgY,UAAW0e,qCC1LFQ,GATO,WACpB,OACErqC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE4B,MAAO,SAApB,qBACAvG,EAAAC,EAAAC,cAACoqC,GAAA,EAAD,CAAWC,KAAMh7B,OCPjBF,GAAO,IAAIpN,EACXuoC,GAAW,2BACXC,GAAY,eAEX,SAAeC,GAAtBnwB,EAAAgG,GAAA,OAAAoqB,GAAAnwB,MAAA1Z,KAAAG,wDAAO,SAAAsS,EAAqBnO,EAAUC,GAA/B,IAAAvB,EAAAwL,EAAAC,EAAA,OAAAkE,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACC/P,EAAc,CAAE4B,KAAMN,EAAUytB,KAAMxtB,GADvCsO,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGoBxE,GAAK3M,KAAK8nC,GAAU1mC,GAHxC,cAGGwL,EAHHqE,EAAA4S,KAIKhX,EAASD,EAATC,KACR6L,QAAQC,IAAI/L,GACZhO,aAAa+3B,QAAQ,QAAS9pB,EAAKq7B,aAAavmC,OAChD/C,aAAa+3B,QAAQ,aAAc9pB,EAAKs7B,YACxCvpC,aAAa+3B,QAAQ,eAAgB9pB,EAAKu7B,cAC1CxpC,aAAa+3B,QAAQ,OAAQ9pB,EAAKq7B,aAAallC,MAC/CpE,aAAa+3B,QAAQ,SAAU9pB,EAAKq7B,aAAahY,KACjDxX,QAAQC,IAAI/Z,aAAaC,QAAQ,UAX9BoS,EAAAiuB,OAAA,SAYIryB,GAZJ,cAAAoE,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAcHrQ,KAdGqQ,EAAAO,GAAA,yBAAAP,EAAAY,SAAAhB,EAAA,yCAmBA,SAASjQ,KAMd,OALAhC,aAAaskB,WAAW,SACxBtkB,aAAaskB,WAAW,cACxBtkB,aAAaskB,WAAW,gBACxBtkB,aAAaskB,WAAW,UACxBtkB,aAAaskB,WAAW,QACjBvW,GAAK3M,KAAK+nC,QCMJM,8MAvBbzjC,QAAU,SAAClC,EAAUC,GACnBqlC,GAAMtlC,EAAUC,MAGlB9B,SAAW,WACTD,8EAGO,IAAAc,EAC2BtD,KAAKgC,MAA/BuB,EADDD,EACCC,MAAOZ,EADRW,EACQX,KADRW,EACcrE,SAErB,OACEC,EAAAC,EAAAC,cAAA,WACGuD,GAAQY,EACPrE,EAAAC,EAAAC,cAAA,+BAEAF,EAAAC,EAAAC,cAAC4H,EAAD,CAAWjC,SAAU/E,KAAKwG,kBAxBhBpC,aCFd8lC,GAAmB,SAAAloC,GAAS,IAAAuI,EACIC,qBADJC,EAAA3K,OAAA4K,EAAA,EAAA5K,CAAAyK,EAAA,GACzB3H,EADyB6H,EAAA,GACb2nB,EADa3nB,EAAA,GAE5B9H,EAAOnC,aAAaC,QAAQ,QAgBhC,OAdAmjB,oBAAU,WAEN9gB,MAAK,GAAAvD,OAAIuB,EAAJ,uBAAAvB,OAAgCoD,EAAhC,iBAAqD,CACxDI,OAAQ,MACRC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GACJgvB,EAAchvB,MAInB,CAACT,IAGFzD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,+BACXsD,EACCA,EAAWyG,IAAI,SAAAiB,GACb,OACEpL,EAAAC,EAAAC,cAAA,MAAIE,UAAU,oBAAoBmE,IAAK6G,GACrCpL,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEC,GAAE,cAAApE,OAAgB+K,EACf2J,cACA1C,QAAQ,OAAQ,IAFjB,iBAIDjH,MAMTpL,EAAAC,EAAAC,cAAA,MAAIyE,MAAO,CAAE4B,MAAO,SAApB,0CAaK0kC,GANG,kBAChBjrC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAOC,OAAK,EAAC/X,KAAK,qBAAqBgY,UAAW6f,sECSvCE,GAtDA,WACb,OACElrC,EAAAC,EAAAC,cAAA,UAAQE,UAAU,aAChBJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACbJ,EAAAC,EAAAC,cAAA,KAAG0H,MAAM,qBAAT,6EAEM,IACJ5H,EAAAC,EAAAC,cAAA,KAAGE,UAAU,kBAAkB2E,KAAK,wBAApC,YAEK,IALP,MAMM,IACJ/E,EAAAC,EAAAC,cAAA,KAAG6E,KAAK,wBAAwB3E,UAAU,mBAA1C,mCAPF,8CAU6CJ,EAAAC,EAAAC,cAAA,KAAGE,UAAU,kBAAkB2E,KAAK,kDAApC,2CAV7C,6EAYc/E,EAAAC,EAAAC,cAAA,KAAGE,UAAU,kBAAkB2E,KAAK,0BAApC,8BAZd,KAeE/E,EAAAC,EAAAC,cAAA,UAAQE,UAAU,YAAYuE,MAAO,CAAC0qB,OAAO,SAC3CrvB,EAAAC,EAAAC,cAAA,OACEirC,UAAU,mBACV9lB,IAAK+lB,KACLhmB,IAAI,iBACJimB,QAAQ,OACRtgC,MAAM,WAGV/K,EAAAC,EAAAC,cAAA,UAAQE,UAAU,YAAYuE,MAAO,CAAC0qB,OAAO,SAC3CrvB,EAAAC,EAAAC,cAAA,OACEirC,UAAU,mBACV9lB,IAAKimB,KACLlmB,IAAI,iBACJimB,QAAQ,OACRtgC,MAAM,WAGV/K,EAAAC,EAAAC,cAAA,UAAQE,UAAU,YAAYuE,MAAO,CAAC0qB,OAAO,SAC3CrvB,EAAAC,EAAAC,cAAA,OACEirC,UAAU,mBACV9lB,IAAKkmB,KACLnmB,IAAI,WACJimB,QAAQ,OACRtgC,MAAM,QACNpG,MAAO,CAAC08B,gBAAgB,OAAQz8B,QAAQ,cC6PvC4mC,IApQLnqC,OAAOwB,6MAGfW,MAAQ,CACNzD,UAAU,EACVsE,MAAO/C,aAAaC,QAAQ,UAAY,GACxCkC,KAAMnC,aAAaC,QAAQ,SAAW,MAExCgR,eAAiB,IAAIxB,IAqBrB06B,qBAAuB,SAAAC,GACrB3oC,EAAKoB,SAAS,CAAEpE,SAAU2rC,OAG5BC,+BAAiC,SAAA7rC,GAAuB,IAApByE,EAAoBzE,EAApByE,IAAKgF,EAAezJ,EAAfyJ,SAC3B,SAARhF,IACEgF,EACFxG,EAAKoB,SAAS,CACZV,KAAMnC,aAAaC,QAAQ,QAC3B8C,MAAO/C,aAAaC,QAAQ,WAG9BwB,EAAKoB,SAAS,CAAEV,KAAM,GAAIY,MAAO,SAKvCunC,kDAAc,SAAAr4B,EAAOnO,EAAUC,GAAjB,OAAAoO,EAAAxT,EAAAyT,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEJ62B,GAAMtlC,EAAUC,GAFZ,OAGVtC,EAAKoB,SAAS,CACZV,KAAMnC,aAAaC,QAAQ,QAC3B8C,MAAO/C,aAAaC,QAAQ,WAE9B2E,SAASC,SAASC,SAPRuN,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAAO,GAAAP,EAAA,SASVtS,OAAO+Z,QAAQiZ,MAAf1gB,EAAAO,KACIP,EAAAO,GAAM5E,SAVA,CAAAqE,EAAAE,KAAA,SAAAF,EAAAk4B,GAWAl4B,EAAAO,GAAM5E,SAAS6F,OAXfxB,EAAAE,KAYD,MAZCF,EAAAk4B,GAAA,2BAaJxqC,OAAOwf,MAAMlN,EAAAO,GAAM5E,SAASC,KAAKjF,SAb7BqJ,EAAAiuB,OAAA,kBAgBJvgC,OAAOwf,MACL,gEAjBE,QAoBRxf,OAAOwf,MACL,gEArBM,yBAAAlN,EAAAY,SAAAhB,EAAA,2EA2Bdu4B,aAAe,WACb/oC,EAAKoB,SAAS,CAAEV,KAAM,GAAIY,MAAO,KACjCf,yFA7DAxC,KAAKqD,SAAS,CAAEpE,SAAUe,KAAKyR,eAAexS,WAC9Ce,KAAKirC,YAAcjrC,KAAKyR,eAAetJ,iBACrCnI,KAAK2qC,sBAGPpqC,OAAO4H,iBAAiB,UAAWnI,KAAK6qC,+EAIpC7qC,KAAKirC,aACPjrC,KAAKyR,eAAerJ,oBAAoBpI,KAAKirC,aAE/C1qC,OAAO6H,oBAAoB,UAAWpI,KAAK6qC,iEAoDpC,IAAA7lC,EAC2BhF,KAAK0C,MAA/BzD,EADD+F,EACC/F,SAAUsE,EADXyB,EACWzB,MAAOZ,EADlBqC,EACkBrC,KACzB,OACEzD,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAC8rC,EAAA,iBAAD,CACEC,SAAU,EACVC,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDC,kBAAgB,GAEhBrsC,EAAAC,EAAAC,cAACosC,EAAD,CACEjoC,MAAOA,EACPZ,KAAMA,EACN1D,SAAUA,EACVuH,QAASxG,KAAK8qC,YACdroC,SAAUzC,KAAKgrC,eAGjB9rC,EAAAC,EAAAC,cAAA,WAASsG,GAAG,oBAAoBpG,UAAU,MAAMI,KAAK,QACnDR,EAAAC,EAAAC,cAAA,QAAME,UAAU,UACdJ,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,KACEjrB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,mBACpCkO,KAAK,+BACLgY,UAAWlD,KAEbjoB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,mBACpCkO,KAAK,4BACLgY,UAAWC,KAGbprB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,gEACLgY,UAAW2K,KAGb91B,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,mEACLgY,UAAW7Y,KAEbtS,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,uDACLgY,UAAWzS,KAGb1Y,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,+CACLgY,UAAW7K,KAGbtgB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,yDACLgY,UAAWjK,KAGblhB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,gDACLgY,UAAWoJ,KAGbv0B,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,sDACLgY,UAAWmW,KAGbthC,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,gDACLgY,UAAWsQ,KAGbz7B,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,oDACLgY,UAAWwd,KAGb3oC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,mDACLgY,UAAW0d,KAGb7oC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,yDACLgY,UAAW6W,KAGbhiC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,gEACLgY,UAAW0e,KAGb7pC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,sEACLgY,UAAWga,KAGbnlC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,sDACLgY,UAAW4a,KAGb/lC,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,kDACLgY,UAAWme,KAGbtpC,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,qBACpCkO,KAAK,iDACLgY,UAAWwe,KAGb3pC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,iCACLgY,UAAW9I,KAGbriB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,mBACpCkO,KAAK,yCACLgY,UAAWS,KAGb5rB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,GAAQY,EAAMY,SAAS,mBACpCkO,KAAK,iDACLgY,UAAWgM,KAGbn3B,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,0BACLgY,UAAW8D,KAGbjvB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,0BACLgY,UAAWgG,KAEbnxB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CACE9X,KAAK,2BACLgY,UAAWmH,KAGbtyB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,EACb0P,KAAK,wBACLgY,UAAWqH,KAGbxyB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,EACb0P,KAAK,aACLgY,UAAW6H,KAGbhzB,EAAAC,EAAAC,cAACqsC,GAAD,CACEC,YAAa/oC,EACb0P,KAAK,qBACLgY,UAAW6f,KAGbhrC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAO9X,KAAK,iBAAiBgY,UAAWkf,KAExCrqC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAO9X,KAAK,SAASgY,UAAWoI,KAChCvzB,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAO9X,KAAK,SAASgY,UAAW4f,KAChC/qC,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAO9X,KAAK,IAAIgY,UAAWiJ,QAIjCp0B,EAAAC,EAAAC,cAACusC,GAAD,eA3PSvnC,cAoQbwnC,oLACK,IAAAtoC,EAC+CtD,KAAKgC,MAAxCoC,EADZd,EACC+mB,UAAsBqhB,EADvBpoC,EACuBooC,UAAc1pC,EADrClC,OAAA+rC,EAAA,EAAA/rC,CAAAwD,EAAA,2BAEP,OACEpE,EAAAC,EAAAC,cAAC+qB,EAAA,EAADrqB,OAAAgsC,OAAA,GACM9pC,EADN,CAEE6F,OAAQ,SAAA7F,GAAK,OACX0pC,EAAYxsC,EAAAC,EAAAC,cAACgF,EAAcpC,GAAY9C,EAAAC,EAAAC,cAAC+qB,EAAA,EAAD,CAAUxmB,GAAG,iBAPjCS,aCzSvB2nC,GAAO3mC,SAASsmB,eAAe,QACrCsgB,IAASnkC,OACP3I,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAeuoC,SAAUlrC,0BACvB7B,EAAAC,EAAAC,cAAC8sC,GAAD,OAEFH,IAGFte,IAAMC,cAAcqe,yBCfpBI,EAAAC,QAAA,CAAkBzsC,MAAA,4BAAAF,SAAA,k+ICDlB0sC,EAAAC,QAAiBC,EAAAC,EAAuB,gECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wDCAxCH,EAAAC,QAAA,87ECAAD,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.16bd5e81.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './progress-bar.module.css';\r\n\r\nfunction ProgressBar({ isActive }) {\r\n  return (\r\n    <React.Fragment>\r\n      {isActive && (\r\n        <div\r\n          className={`warning progress ${styles.progress}`}\r\n          role=\"progressbar\"\r\n        >\r\n          <div className={`progress-meter ${styles.meter}`} />\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nProgressBar.defaultProps = {\r\n  isActive: false\r\n};\r\n\r\nProgressBar.propTypes = {\r\n  isActive: PropTypes.bool\r\n};\r\n\r\nexport default ProgressBar;\r\n","class HeadersService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (HeadersService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    HeadersService.instance = this;\r\n  }\r\n\r\n  get(type = 'hal+json') {\r\n    const csfrToken = window.localStorage.getItem('csrf_token');\r\n    if (type === 'json') {\r\n      return {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': csfrToken,\r\n        Authorization: 'Basic'\r\n      };\r\n    }\r\n\r\n    return {\r\n      Accept: 'application/hal+json',\r\n      'Content-Type': 'application/hal+json',\r\n      'X-CSRF-Token': csfrToken,\r\n      Authorization: 'Basic'\r\n    };\r\n  }\r\n}\r\n\r\nexport default HeadersService;\r\n","import Headers from './headers';\r\nimport axios from 'axios';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\naxios.defaults.baseURL = apiUrl;\r\n\r\nclass HttpService {\r\n  static instance;\r\n  headers = new Headers();\r\n\r\n  constructor() {\r\n    if (HttpService.instance) {\r\n      return HttpService.instance;\r\n    }\r\n\r\n    HttpService.instance = this;\r\n  }\r\n\r\n  get(url, credentialType = '') {\r\n    if (credentialType) {\r\n      return axios.get(url, {\r\n        headers: this.headers.get(credentialType),\r\n        withCredentials: true\r\n      });\r\n    }\r\n    return axios.get(url);\r\n  }\r\n\r\n  post(url, body, option = 'hal+json') {\r\n    return axios.post(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  patch(url, body, option = 'hal+json') {\r\n    return axios.patch(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { apiUrl } from '../../services/http/http';\r\nimport HttpService from '../../services/http/http';\r\n//import ManageFrameworks from './ManageFrameworks';\r\n\r\nconst http = new HttpService();\r\n\r\nconst $ = window.$;\r\n\r\nclass Navigation extends Component {\r\n  navRef = React.createRef();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: this.props.user,\r\n      frameworks: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    //$(this.navRef.current).foundation();\r\n    fetch(`${apiUrl}/api/authorisation/${this.state.user}?_format=json`, {\r\n      method: 'GET',\r\n      credentials: 'include'\r\n    })\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  logout = () => {\r\n    const { onLogout } = this.props;\r\n    onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user } = this.props;\r\n    const frameworkResources = (\r\n      <>\r\n        <li className=\"vf-list__item\" key=\"navigation\">\r\n          <Link\r\n            className=\"vf-link\"\r\n            to=\"/manage-frameworks\" // eslint-disable-line jsx-a11y/anchor-is-valid\r\n            tabIndex=\"0\"\r\n          >\r\n            Manage frameworks\r\n          </Link>\r\n        </li>\r\n        <li className=\"vf-list__item\" style={{ padding: '5px' }}>|</li>\r\n      </>\r\n    );\r\n\r\n    const trainingResources = (\r\n      <li className=\"vf-link\" key=\"resources\">\r\n        <Link to=\"all-training-resources\">Manage Training Resources</Link>\r\n      </li>\r\n    );\r\n\r\n    const userDropdown = (\r\n      <>\r\n        <li\r\n          className=\"vf-list__item\"\r\n          key=\"myaccount\"\r\n          style={{ padding: '5px' }}\r\n        >\r\n          <Link className=\"vf-link\" to={'/user/view'}>\r\n            My account\r\n          </Link>\r\n        </li>\r\n        <li\r\n          className=\"vf-list__item\"\r\n          key=\"changepwd\"\r\n          style={{ padding: '5px' }}\r\n        >\r\n          <Link className=\"vf-link\" to={'/user/change/password'}>\r\n            Change password\r\n          </Link>\r\n        </li>\r\n        <li className=\"vf-list__item\" style={{ padding: '5px' }}>\r\n          <a\r\n            className=\"vf-link\"\r\n            href=\"#\" // eslint-disable-line jsx-a11y/anchor-is-valid\r\n            onClick={this.logout}\r\n          >\r\n            Logout\r\n          </a>\r\n        </li>\r\n      </>\r\n    );\r\n\r\n    return (\r\n      <div className=\"vf-grid\">\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div>\r\n          <ul className=\"vf-list vf-list--inline\">\r\n            {roles.includes('framework_manager') && frameworkResources}\r\n            {roles.includes('content_manager') && trainingResources}\r\n            {userDropdown}\r\n          </ul>\r\n          {/* <nav class=\"vf-navigation vf-navigation--global\">\r\n            <ul className=\"vf-list vf-list--inline\">{userDropdown}</ul>\r\n          </nav> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport 'react-responsive-modal/styles.css';\r\nimport { Modal } from 'react-responsive-modal';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showModal: false\r\n    };\r\n  }\r\n\r\n  state = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\r\n  };\r\n\r\n  OpenModal(e) {\r\n    e.preventDefault();\r\n    this.setState({ showModal: true });\r\n  }\r\n\r\n  CloseModal() {\r\n    this.setState({ showModal: false });\r\n    document.location.reload();\r\n\r\n    //console.log(this.state.showModal)\r\n  }\r\n\r\n  submit = () => {\r\n    const { onSubmit } = this.props;\r\n    const { username, password } = this.state;\r\n    if (username && password) {\r\n      onSubmit(username, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <nav>\r\n        {/* The wrapping in an `ul.menu.float-left > li` is necessary for the sticky header to work */}\r\n        <button\r\n          style={{ float: 'right', color: '#000' }}\r\n          href={'#'}\r\n          id=\"loginSwitch\"\r\n          onClick={e => this.OpenModal(e)}\r\n        >\r\n          Admin login <i className=\"fa fa-key\" aria-hidden=\"true\" />\r\n        </button>\r\n        <Modal\r\n          open={this.state.showModal}\r\n          onClose={e => this.CloseModal()}\r\n          center\r\n          classNames={{\r\n            overlay: 'customOverlay',\r\n            modal: 'customModal'\r\n          }}\r\n        >\r\n          <ul id=\"loginForm\" className=\"menu float-left small-12\">\r\n            <li className=\"small-12 margin-bottom-large\">\r\n              <div className=\"columns small-12 medium-12 large-12 margin-top-large\">\r\n                <h3>Admin login</h3>\r\n                <p>\r\n                  If you are a framework manager or content manager, please\r\n                  login to continue\r\n                </p>\r\n              </div>\r\n              <label className=\"columns small-12 medium-12 large-12 margin-top-large\">\r\n                <input\r\n                  value={username}\r\n                  name=\"username\"\r\n                  onChange={event => this.onChange(event)}\r\n                  type=\"text\"\r\n                  autoComplete=\"username\"\r\n                  placeholder=\"Username\"\r\n                />\r\n              </label>\r\n              <label className=\"columns small-12 medium-12 large-12 margin-top-large\">\r\n                <input\r\n                  value={password}\r\n                  name=\"password\"\r\n                  onChange={event => this.onChange(event)}\r\n                  type=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  placeholder=\"Password\"\r\n                />\r\n              </label>\r\n              <div className=\"columns small-12 medium-12 large-12 margin-top-large\">\r\n                <button\r\n                  className=\"button\"\r\n                  type=\"button\"\r\n                  onClick={() => this.submit()}\r\n                >\r\n                  <i className=\"fa fa-key\" aria-hidden=\"true\" /> Login\r\n                </button>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </Modal>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ProgressBar from '../../../shared/components/progress-bar/progress-bar';\r\nimport Navigation from '../navigation/Navigation';\r\nimport LoginForm from '../login-form/LoginForm';\r\n\r\nclass Masthead extends Component {\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    this.props.onLogin(username, password);\r\n  };\r\n\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user, isActive } = this.props;\r\n    const bgStyle = {\r\n      backgroundImage:\r\n        'url(' +\r\n        JSON.stringify(\r\n          'https://www.ebi.ac.uk/training/static/media/catalogue_masthead.c4ba340d.jpg'\r\n        ) +\r\n        ')'\r\n    };\r\n\r\n    return (\r\n      // <div data-sticky-container>\r\n      //   <header\r\n      //     id=\"masthead\"\r\n      //     className=\"masthead\"\r\n      //     data-sticky\r\n      //     data-sticky-on=\"large\"\r\n      //     data-top-anchor=\"main-content-area:top\"\r\n      //     data-btm-anchor=\"main-content-area:bottom\"\r\n      //   >\r\n      //     <div className=\"masthead-inner row\">\r\n      //       <div className=\"columns medium-12\" id=\"local-title\">\r\n      //         <h1>\r\n      //           <Link to=\"/\">Competency Hub</Link>\r\n      //         </h1>\r\n      //       </div>\r\n      //       {user && roles ? (\r\n      //         <Navigation roles={roles} user={user} onLogout={this.onLogout} />\r\n      //       ) : (\r\n      //         <LoginForm onSubmit={this.onLogin} />\r\n      //       )}\r\n      //     </div>\r\n      //     <ProgressBar isActive={isActive} />\r\n      //   </header>\r\n      // </div>\r\n      <>\r\n        <section\r\n          className=\"vf-hero vf-hero--primary  vf-hero--block    vf-hero--1200 | vf-u-fullbleed\"\r\n          style={bgStyle}\r\n          data-vf-google-analytics-region=\"masthead\"\r\n        >\r\n          <div className=\"vf-hero__content | vf-stack vf-stack--400\">\r\n            <h1 className=\"vf-hero__heading\">Competency Hub</h1>\r\n            <h4 class=\"vf-hero__subheading\">Supporting competency-based training and professional development.</h4>\r\n          </div>\r\n        </section>\r\n        <div>\r\n          {user && roles ? (\r\n            <Navigation roles={roles} user={user} onLogout={this.onLogout} />\r\n          ) : (\r\n            <LoginForm onSubmit={this.onLogin} />\r\n          )}\r\n          {/* <ProgressBar isActive={isActive} /> */}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Masthead;\r\n","import React, { Component } from 'react';\r\n\r\nimport './EditInline.css';\r\n\r\nconst defaultProps = {\r\n  style: {} as Record<string, string | number>,\r\n  text: '',\r\n  change: (newValue: string) => {},\r\n  staticElement: 'div',\r\n  editable: true\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  oriValue: '',\r\n  value: '',\r\n  active: false\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class EditInline extends Component<Props, State> {\r\n  static defaultProps = defaultProps; // No idea why the props are marked as optional (see '!' in the code below)\r\n  readonly state: State = defaultState;\r\n  selfRef = React.createRef<HTMLDivElement>();\r\n  inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  componentDidMount() {\r\n    const { text } = this.props;\r\n    this.setState({ value: text!, oriValue: text! });\r\n    document.addEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    const { active } = this.state;\r\n    if (active && !prevState.active) {\r\n      // Unable to focus on the input element.\r\n      // this.inputRef.current && this.inputRef.current.focus();\r\n\r\n      // Dirty: The only way I was able to focus on the input element.\r\n      setTimeout(\r\n        () => this.inputRef.current && this.inputRef.current.focus(),\r\n        0\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleActive = (event: MouseEvent) => {\r\n    if (\r\n      this.selfRef.current &&\r\n      this.selfRef.current.contains(event.target as Node)\r\n    ) {\r\n      this.setState({ active: true });\r\n      return;\r\n    }\r\n    this.reset();\r\n  };\r\n\r\n  onChange(value: string) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  reset = () => {\r\n    const { oriValue, active } = this.state;\r\n    if (active) {\r\n      this.setState({ active: false, value: oriValue });\r\n    }\r\n  };\r\n\r\n  submit = () => {\r\n    const { change } = this.props;\r\n    const { value } = this.state;\r\n    change!(value);\r\n    this.setState({ active: false, oriValue: value });\r\n  };\r\n\r\n  render = () => {\r\n    const { style, staticElement, editable } = this.props;\r\n    const { value, active } = this.state;\r\n\r\n    if (!editable) {\r\n      return React.createElement(staticElement!, { style }, value);\r\n    }\r\n\r\n    if (!active) {\r\n      return React.createElement(staticElement!, { style, ref: this.selfRef }, [\r\n        value,\r\n        <>\r\n          <i\r\n            key=\"dummy\"\r\n            className=\"icon icon-common icon-edit icon-left-spacer edit-indicator cursor\"\r\n            aria-label=\"edit\"\r\n          />\r\n          <span className=\"edit-indicator cursor\">Edit</span>\r\n        </>\r\n      ]);\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-inline-container\" ref={this.selfRef}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inner-input\"\r\n          value={value}\r\n          onChange={event => this.onChange(event.target.value)}\r\n          ref={this.inputRef}\r\n          // autoFocus={true} // It only works when it is rendered after mounting\r\n        />\r\n        <div className=\"edit-inline-controls\">\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.submit}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-check\"\r\n              aria-label=\"accept changes\"\r\n            />\r\n          </button>\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.reset}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-undo\"\r\n              aria-label=\"undo changes\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nconst defaultProps = {\r\n  showMappingField: false\r\n};\r\n\r\ntype Props = {\r\n  title: string;\r\n  placeholder: string;\r\n  options: Record<'description' | 'uuid', string>[];\r\n  onCreate(newValue: string, uuid: string, mapping: string): any;\r\n} & Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  description: '',\r\n  uuid: '',\r\n  mapping: ''\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class SimpleForm extends Component<Props, State> {\r\n  static defaultProps = defaultProps;\r\n  readonly state = defaultState;\r\n\r\n  componentDidMount() {\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  setDefaultOption() {\r\n    const { options } = this.props;\r\n    if (options.length) {\r\n      const { uuid } = options[0];\r\n      this.setState({ uuid });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.setState(defaultState);\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  onChange = (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    event.preventDefault();\r\n    const { value } = event.currentTarget;\r\n    const name = event.currentTarget.name;\r\n    // https://github.com/Microsoft/TypeScript/issues/13948\r\n    if (name === 'uuid') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'description') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'mapping') {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const { onCreate } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    if (description.trim() && uuid) {\r\n      onCreate(description, uuid, mapping);\r\n      this.reset();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, placeholder, options, showMappingField } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    const selectOptions = options.map(({ description, uuid }) => (\r\n      <option key={uuid} value={uuid}>\r\n        {description}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <form onSubmit={this.onSubmit} className=\"callout\">\r\n        <h4>{title}</h4>\r\n        <div className=\"row\">\r\n          <div className=\"column large-7\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              name=\"description\"\r\n              value={description}\r\n              required\r\n              onChange={this.onChange}\r\n            />\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <select name=\"uuid\" value={uuid} required onChange={this.onChange}>\r\n              {selectOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <input type=\"submit\" className=\"button\" value=\"Create\" />\r\n          </div>\r\n          {showMappingField ? (\r\n            <div className=\"column\">\r\n              <label>\r\n                Maps to competency/attribute from other framework\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Framework (version), competency or attribute\"\r\n                  name=\"mapping\"\r\n                  value={mapping}\r\n                  onChange={this.onChange}\r\n                />\r\n              </label>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst defaultProps = {\r\n  message: 'Sorry, there was a problem when fetching the data!',\r\n  style: {} as Record<string, string | number>\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nexport const ErrorLoading: React.FC<Props> = ({ message, style }) => {\r\n  return (\r\n    <div className=\"margin-top-large callout alert\" style={style}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nErrorLoading.defaultProps = defaultProps;\r\n\r\nexport default ErrorLoading;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  versions: Version[];\r\n  framework: string;\r\n  style: string;\r\n};\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    right: 'auto',\r\n    bottom: 'auto',\r\n    marginRight: '-50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: '80%',\r\n    height: '50%',\r\n    border: '1px solid #000'\r\n  }\r\n};\r\n\r\nexport const FrameworkVersion: React.FC<Props> = ({ versions, framework }) => {\r\n  const [showNotes, setShowNotes] = useState(false);\r\n  const [notes, setNotes] = useState('');\r\n\r\n  let versionNumber = '';\r\n\r\n  const versionItems = versions\r\n    .filter(version => version.number !== 'draft')\r\n    .map(version => (\r\n      <li key={version.id}>\r\n        <Link to={`/framework/${framework}/${version.number}`}>\r\n          {version.number}\r\n        </Link>{' '}\r\n        <button\r\n          className=\"anchor-like\"\r\n          onClick={() => {\r\n            setNotes('Version: ' + version.number + version.release_notes);\r\n            setShowNotes(true);\r\n          }}\r\n        >\r\n          (release notes)\r\n        </button>\r\n      </li>\r\n    ));\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={showNotes} style={customStyles}>\r\n        <h4>Release notes for {framework} </h4>\r\n        <div style={{float:'right'}}>\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            X\r\n          </button>\r\n        </div>\r\n        {Parser(notes)}\r\n        {versionItems}\r\n        <div className=\"padding-top-large\">\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n      <div className=\"callout\">\r\n        <h5>Framework versions</h5>\r\n        {versions.length === 0 ? (\r\n          'No previous versions'\r\n        ) : (\r\n          <ul>{versionItems}</ul>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FrameworkVersion;\r\n","import { apiUrl } from '../http/http';\r\n\r\nclass BodyService {\r\n  static createCompetency({\r\n    description,\r\n    domainId,\r\n    domainUuid,\r\n    mapping = '',\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'competency'\r\n        }\r\n      ],\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static createAttribute({\r\n    description,\r\n    attributeTypeId,\r\n    attributeTypeUuid,\r\n    competencyId,\r\n    competencyUuid,\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'attribute'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static mutateCompetency(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateCompetencyPosition(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateAttribute(key, value) {\r\n    return BodyService.mutate(key, value, 'attribute');\r\n  }\r\n\r\n  static mutateDomain(key, value) {\r\n    return BodyService.mutate(key, value, 'domain');\r\n  }\r\n\r\n  static mutate(key, value, target) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/${target}`\r\n        }\r\n      },\r\n      [key]: [\r\n        {\r\n          value: value\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: target\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static publishFramework(framework, version, releaseNotes) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: releaseNotes\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: version\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createDraftFramework(framework) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: 'draft'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static toggleArchivingVersionedNode(framework, nodeId) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: nodeId\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static updateReleaseNotes(notes) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href:\r\n            //'https://dev-competency-mapper.pantheonsite.io/rest/type/taxonomy_term/version'\r\n            `${apiUrl}/rest/type/taxonomy_term/version`\r\n        }\r\n      },\r\n      vid: [\r\n        {\r\n          target_id: 'version'\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: notes\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  // Change domain service\r\n\r\n  static changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        }\r\n      },\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      type: {\r\n        target_id: 'competency'\r\n      },\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  // Change competency service\r\n\r\n  static changeAttributeSettings(\r\n    attribuiteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${apiUrl}/node/${attribuiteId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        }\r\n      },\r\n      type: {\r\n        target_id: 'attribute'\r\n      },\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static editResource(\r\n    resourceID,\r\n    title,\r\n    dates,\r\n    dates2,\r\n    type,\r\n    description,\r\n    location,\r\n    url,\r\n    target_audience,\r\n    learning_outcomes,\r\n    keywords,\r\n    organisers,\r\n    trainers\r\n  ) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/training_resource`\r\n        }\r\n      },\r\n      title: [\r\n        {\r\n          value: title\r\n        }\r\n      ],\r\n\r\n      type: [\r\n        {\r\n          target_id: 'training_resource'\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createBulkData(parentID, versionID, newData, type, addtional) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      body: [\r\n        {\r\n          value: newData\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: parentID\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: versionID\r\n        }\r\n      ],\r\n      field_type: [\r\n        {\r\n          value: type\r\n        }\r\n      ],\r\n      field_additional_information: [\r\n        {\r\n          value: addtional\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static saveSorting(items) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      body: [\r\n        {\r\n          value: items\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\nexport default BodyService;\r\n","import HttpService from '../http/http';\r\nimport Body from './body';\r\n\r\nclass CompetencyService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CompetencyService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CompetencyService.instance = this;\r\n  }\r\n\r\n  async getFramework(framework) {\r\n    const response = await this.http.get(\r\n      `/api/v1/framework/${framework}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedDraftFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/edit?_format=json&timestamp=${Date.now()}`,\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/${version}?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworks() {\r\n    const response = await this.http.get(`/api/v1/framework?_format=json`);\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getAllVersionedFrameworks() {\r\n    const response = await this.http.get(\r\n      `/api/version_manager?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createAttribute(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createAttribute(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async createCompetency(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createCompetency(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetency(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetency(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchDomain(domainId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${domainId}?_format=hal_json`,\r\n      Body.mutateDomain(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetencyPosition(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetencyPosition(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async toggleArchivingVersionedNode(framework, nodeId) {\r\n    const response = await this.http.patch(\r\n      `/api/${framework}/edit?_format=json`,\r\n      Body.toggleArchivingVersionedNode(framework, nodeId),\r\n      'json'\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttribute(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttributePosition(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async publishFramework(framework, version, releaseNotes) {\r\n    const response = await this.http.patch(\r\n      '/api/version_manager?_format=json',\r\n      Body.publishFramework(framework, version, releaseNotes),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createDraftFramework(framework) {\r\n    const response = await this.http.post(\r\n      '/api/version_manager?_format=json',\r\n      Body.createDraftFramework(framework),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async updateReleaseNotes(notes, versionId) {\r\n    const response = await this.http.patch(\r\n      `/taxonomy/term/${versionId}?_format=hal_json`,\r\n      Body.updateReleaseNotes(notes)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.changeDomain(competencyId, domainId, domainUuid, mapping)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async editResource(\r\n    resourceID,\r\n    title,\r\n    dates,\r\n    dates2,\r\n    type,\r\n    description,\r\n    location,\r\n    url,\r\n    target_audience,\r\n    learning_outcomes,\r\n    keywords,\r\n    organisers,\r\n    trainers\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${resourceID}?_format=hal_json`,\r\n      Body.editResource(\r\n        resourceID,\r\n        title,\r\n        dates,\r\n        dates2,\r\n        type,\r\n        description,\r\n        location,\r\n        url,\r\n        target_audience,\r\n        learning_outcomes,\r\n        keywords,\r\n        organisers,\r\n        trainers\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeAttributeSettings(\r\n    attribiuteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${attribiuteId}?_format=hal_json`,\r\n      Body.changeAttributeSettings(\r\n        attribiuteId,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async demap(resource, items) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&items=` +\r\n        items +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async attrmap(resource, attributes) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&attributes=` +\r\n        attributes +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createBulkData(parentID, versionID, newData, type, addtional) {\r\n    const response = await this.http.post(\r\n      '/api/data_manager?_format=json',\r\n      Body.createBulkData(parentID, versionID, newData, type, addtional),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async saveSorting(items) {\r\n    const response = await this.http.patch(\r\n      '/api/data_manager?_format=json',\r\n      Body.saveSorting(items),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CompetencyService;\r\n","class ActiveRequestsService {\r\n  static instance;\r\n  counter = 0;\r\n  callbacks = [];\r\n\r\n  get isActive() {\r\n    return !!this.counter;\r\n  }\r\n\r\n  constructor() {\r\n    if (ActiveRequestsService.instance) {\r\n      return ActiveRequestsService.instance;\r\n    }\r\n\r\n    ActiveRequestsService.instance = this;\r\n  }\r\n\r\n  addEventListener(fn) {\r\n    return this.callbacks.push(fn);\r\n  }\r\n\r\n  removeEventListener(index) {\r\n    return delete this.callbacks[index - 1];\r\n  }\r\n\r\n  startRequest() {\r\n    if (this.counter === 0) {\r\n      this.callbacks.forEach(fn => fn && fn(true));\r\n    }\r\n    ++this.counter;\r\n  }\r\n\r\n  finishRequest() {\r\n    if (this.counter === 1) {\r\n      this.callbacks.forEach(fn => fn && fn(false));\r\n    }\r\n\r\n    if (this.counter > 0) {\r\n      --this.counter;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActiveRequestsService;\r\n","// In modern browser (es2018), instead of `reduce` it is possible to call `flat`\r\nexport const safeFlat = array =>\r\n  Array.prototype.flat\r\n    ? array.flat()\r\n    : array.reduce((acc, cur) => [...acc, ...cur], []);\r\n\r\nconst tagsReg = new RegExp('</?.+?/?>', 'g');\r\nconst nbspReg = /&nbsp;/g;\r\n\r\nexport const removeHtmlTags = (htmlString, replaceBy = '') =>\r\n  htmlString.replace(tagsReg, replaceBy).replace(nbspReg, ' ');\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat } from '../services/util/util';\r\n\r\nclass ManageAttributes extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    // framework level\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    frameworkVersion: '',\r\n    frameworStatus: '',\r\n    attributeTypes: [], // defined at framework level\r\n    versions: [],\r\n\r\n    // domain level\r\n    domainId: '',\r\n    domainName: '',\r\n\r\n    // competency level\r\n    competencyId: this.props.match.params.cid,\r\n    competencyUuid: '',\r\n    competencyName: '',\r\n    competencyData: [],\r\n\r\n    path: this.props.location.pathname.split('/'),\r\n\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scroll(0, 0);\r\n    this.loadData();\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions() {\r\n    const { framework } = this.state;\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const attributeTypes = currentFramework[0].attribute_types.map(\r\n        attribute => ({ description: attribute.title, uuid: attribute.uuid })\r\n      );\r\n      this.setState({\r\n        versions: currentFramework[0].versions.reverse(),\r\n        attributeTypes\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchFramework() {\r\n    const { framework, versions, competencyId } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    const competencyMatch = this.filterByCompetencyId(\r\n      frameworkData,\r\n      competencyId\r\n    );\r\n\r\n    if (competencyMatch.length) {\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        domainName: competencyMatch[0].domainTitle,\r\n        domainId: competencyMatch[0].domainId,\r\n        competencyUuid: competencyMatch[0].uuid,\r\n        competencyName: competencyMatch[0].title,\r\n        competencyData: competencyMatch[0],\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  filterByCompetencyId(data, id) {\r\n    return safeFlat(\r\n      data.map(item =>\r\n        safeFlat(\r\n          item.domains.map(domain =>\r\n            domain.competencies\r\n              .filter(competency => competency.id === id)\r\n              .map(competency => {\r\n                competency.domainTitle = domain.title;\r\n                competency.domainId = domain.nid;\r\n                return competency;\r\n              })\r\n          )\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  createAttribute = async (description, attributeTypeUuid, mapping) => {\r\n    const {\r\n      competencyId,\r\n      competencyUuid,\r\n      attributeTypes,\r\n      versions\r\n    } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const attributeTypeId = attributeTypes.find(\r\n        attribute => attribute.uuid === attributeTypeUuid\r\n      ).id;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createAttribute({\r\n        description,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editAttribute(attributeId, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(attributeId, 'title', title);\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editAttributePosition(attributeId, position) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttributePosition(\r\n        attributeId,\r\n        'field_number',\r\n        position\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(attributeId, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(\r\n        attributeId,\r\n        'field_archived',\r\n        isArchived === '1' ? false : true\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getAttributeRows(attributeType) {\r\n    const { competencyData, editable } = this.state;\r\n\r\n    return competencyData.attributes\r\n      .filter(attribute => attribute.type === attributeType.description)\r\n      .map(attribute => {\r\n        if (editable) {\r\n          return (\r\n            <tr key={attribute.uuid}>\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.title}\r\n                  change={newValue =>\r\n                    this.editAttribute(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.field_number}\r\n                  change={newValue =>\r\n                    this.editAttributePosition(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td>\r\n                <button\r\n                  className=\"cursor\"\r\n                  onClick={() =>\r\n                    this.toggleArchive(attribute.id, attribute.archived)\r\n                  }\r\n                >\r\n                  {attribute.archived === '1' ? (\r\n                    <span className=\"fas fa-toggle-on\">\r\n                      <span>Archived</span>\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"fas fa-toggle-off\" />\r\n                  )}\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <Link\r\n                  to={`/framework/${this.state.framework}/competency/${\r\n                    this.state.competencyId\r\n                  }/attribute/${attribute.id}/settings`}\r\n                >\r\n                  <i class=\"fas fa-cog\" />\r\n                </Link>\r\n              </td>\r\n            </tr>\r\n          );\r\n        }\r\n\r\n        if (attribute.archived === '1') {\r\n          return null;\r\n        }\r\n        return (\r\n          <tr key={attribute.uuid}>\r\n            <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={attribute.title}\r\n                change={newValue => this.editAttribute(attribute.id, newValue)}\r\n                editable={editable}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributeList() {\r\n    const { attributeTypes, editable } = this.state;\r\n    return attributeTypes.map(attributeType => (\r\n      <React.Fragment key={attributeType.uuid}>\r\n        <tr className=\"secondary-background-important white-color\">\r\n          <td>\r\n            <strong>\r\n              <em>{attributeType.description}</em>\r\n            </strong>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getAttributeRows(attributeType)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      attributeTypes,\r\n      versions,\r\n      domainId,\r\n      domainName,\r\n      competencyName,\r\n      competencyData,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (competencyData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage attributes</h2>\r\n        <h4>\r\n          <Link to={`/framework/${framework}/manage/competencies`}>\r\n            {frameworkName}\r\n          </Link>\r\n          {' / '}\r\n          <Link to={`/framework/${framework}/manage/competencies/${domainId}`}>\r\n            {domainName}\r\n          </Link>\r\n          {' / '}\r\n          {competencyName}\r\n        </h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new attribute\"\r\n            placeholder=\"Attribute description\"\r\n            options={attributeTypes}\r\n            onCreate={this.createAttribute}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getAttributeList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageAttributes);\r\n","import React, { FC, useState } from 'react';\r\n\r\nimport Modal from 'react-modal';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  release(version: string, notes: string): void;\r\n  updateNotes(notes: string): void;\r\n  createDraft(): void;\r\n  versions: Version[];\r\n  editable: false;\r\n};\r\n\r\nexport const VersionControls: React.FC<Props> = ({\r\n  release,\r\n  updateNotes,\r\n  createDraft,\r\n  versions,\r\n  editable\r\n}) => {\r\n  const liveVersion = versions.reduce((prev, curr) => {\r\n    if (curr.status === 'live') {\r\n      return curr.number;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const originalNotes = versions.reduce((prev, curr) => {\r\n    if (curr.number === 'draft') {\r\n      return curr.release_notes;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const [version, setVersion] = useState('');\r\n  const [notes, setNotes] = useState(originalNotes);\r\n  const [pressedRelease, setPressedRelease] = useState(false);\r\n  const [pressedNotes, setPressedNotes] = useState(false);\r\n\r\n  const reset = () => {\r\n    setVersion('');\r\n    setPressedRelease(false);\r\n  };\r\n\r\n  const publish = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const cleanNotes = notes.trim();\r\n    if (pressedRelease && version && cleanNotes) {\r\n      release(version, cleanNotes);\r\n      reset();\r\n    }\r\n  };\r\n\r\n  if (editable) {\r\n    return (\r\n      <div>\r\n        <Modal isOpen={pressedNotes}>\r\n          <CKEditor\r\n            content={notes}\r\n            events={{\r\n              change: (event: any) => setNotes(event.editor.getData())\r\n            }}\r\n          />\r\n          <div className=\"padding-top-large\">\r\n            <span className=\"padding-right-small\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={() => {\r\n                  setNotes(originalNotes);\r\n                  setPressedNotes(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </span>\r\n            <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                updateNotes(notes);\r\n                setPressedNotes(false);\r\n              }}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n        <Modal isOpen={pressedRelease}>\r\n          <form onSubmit={publish}>\r\n            <label>\r\n              Version{' '}\r\n              {liveVersion\r\n                ? `(live version ${liveVersion})`\r\n                : '(no live version)'}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"1.0.0\"\r\n                value={version}\r\n                required\r\n                onChange={event => setVersion(event.currentTarget.value.trim())}\r\n              />\r\n            </label>\r\n            <CKEditor\r\n              content={notes}\r\n              events={{\r\n                change: (event: any) => setNotes(event.editor.getData())\r\n              }}\r\n            />\r\n            <div className=\"padding-top-large\">\r\n              <span className=\"padding-right-small\">\r\n                <button className=\"button\" onClick={reset}>\r\n                  Cancel\r\n                </button>\r\n              </span>\r\n              <button className=\"button\" type=\"submit\">\r\n                Publish\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </Modal>\r\n        <span className=\"padding-right-small\">\r\n          <button\r\n            className=\"button secondary\"\r\n            onClick={() => setPressedRelease(true)}\r\n          >\r\n            Release new version <i className=\"icon icon-common icon-send\" />\r\n          </button>\r\n        </span>\r\n        <button\r\n          className=\"button secondary\"\r\n          onClick={() => setPressedNotes(true)}\r\n        >\r\n          Update release notes <i className=\"icon icon-common icon-edit\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"padding-right-small\">\r\n        <button className=\"button\" onClick={() => createDraft()}>\r\n          Create draft\r\n        </button>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControls;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\nimport VersionControls from '../containers/version-controls/VersionControls';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nclass ManageCompetencies extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkName: '',\r\n    frameworkData: [],\r\n    frameworkVersion: '',\r\n    frameworkVersionId: '',\r\n    frameworkStatus: '',\r\n    competencyTypes: [],\r\n    versions: [],\r\n    loadingError: false,\r\n    editable: false,\r\n    allowedFrms: []\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework } = props.match.params;\r\n    if (framework !== state.framework) {\r\n      return {\r\n        framework,\r\n        frameworkData: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, domainId } = this.props.match.params;\r\n    await this.loadData(framework);\r\n\r\n    if (domainId) {\r\n      setTimeout(() => {\r\n        const ref = this.refs[domainId];\r\n        if (ref) {\r\n          ref.scrollIntoView();\r\n        }\r\n      }, 100);\r\n    }\r\n\r\n    // fetch(`https://dev-competency-mapper.pantheonsite.io/api/authorisation/cath?_format=json`,{\r\n    //   method: 'GET',\r\n    //   credentials: 'include'\r\n    // })\r\n    // .then(Response => Response.json())\r\n    // .then(findResponse =>\r\n    //   this.setState({allowedFrms: findResponse})\r\n    // );\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkData, loadingError } = this.state;\r\n    if (framework !== prevState.framework) {\r\n      if (frameworkData.length === 0 && !loadingError) {\r\n        this.loadData(framework);\r\n      }\r\n    }\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework) {\r\n    const { versions } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      this.setState({ frameworkVersionId: draftVersion[0].id });\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    if (frameworkData.length) {\r\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\r\n        description: domain.title,\r\n        uuid: domain.uuid\r\n      }));\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkData,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        competencyTypes,\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  createCompetency = async (description, domainUuid, mapping) => {\r\n    const { framework, frameworkData, versions } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const domainId = frameworkData[0].domains.find(\r\n        domain => domain.uuid === domainUuid\r\n      ).nid;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createCompetency({\r\n        description,\r\n        domainId,\r\n        domainUuid,\r\n        mapping,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editCompetency(cid, title) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetency(cid, 'title', title);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editCompetencyPosition(cid, position) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetencyPosition(\r\n        cid,\r\n        'field_number',\r\n        position\r\n      );\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(cid, isArchived) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.toggleArchivingVersionedNode(framework, cid);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  releaseNewVersion = async (version, notes) => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.publishFramework(framework, version, notes);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  updateNotes = async notes => {\r\n    const { framework, frameworkVersionId } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.updateReleaseNotes(\r\n        notes,\r\n        frameworkVersionId\r\n      );\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  createDraft = async () => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.createDraftFramework(framework);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  getCompetencyList() {\r\n    const { frameworkData, editable } = this.state;\r\n    return frameworkData[0].domains.map(domain => (\r\n      <React.Fragment key={domain.nid}>\r\n        <tr\r\n          className=\"secondary-background-important white-color\"\r\n          ref={domain.nid}\r\n        >\r\n          <td>\r\n            <h4>{domain.title}</h4>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          <td>Attributes</td>\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getCompetencyRows(domain.competencies)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  getCompetencyRows(competencies) {\r\n    const { framework, editable } = this.state;\r\n    return competencies.map(competency => {\r\n      if (editable) {\r\n        return (\r\n          <tr key={competency.id}>\r\n            <td className={competency.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={competency.title}\r\n                change={newValue =>\r\n                  this.editCompetency(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n            <td>\r\n              <InlineEdit\r\n                text={competency.position}\r\n                change={newValue =>\r\n                  this.editCompetencyPosition(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n\r\n            <td>\r\n              <button\r\n                className=\"cursor\"\r\n                onClick={this.toggleArchive.bind(\r\n                  this,\r\n                  competency.id,\r\n                  competency.archived\r\n                )}\r\n              >\r\n                {competency.archived === '1' ? (\r\n                  <span className=\"fas fa-toggle-on\">\r\n                    <span>Archived</span>\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"fas fa-toggle-off\" />\r\n                )}\r\n              </button>\r\n            </td>\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/manage/competencies/${\r\n                  competency.id\r\n                }/manage-attributes`}\r\n              >\r\n                <i className=\"fas fa-sitemap\" />\r\n              </Link>\r\n            </td>\r\n\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/competency/${\r\n                  competency.id\r\n                }/settings`}\r\n              >\r\n                <i class=\"fas fa-cog\" />\r\n              </Link>\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n\r\n      if (competency.archived === '1') {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <tr key={competency.id}>\r\n          <td>\r\n            <InlineEdit\r\n              text={competency.title}\r\n              change={newValue => this.editCompetency(competency.id, newValue)}\r\n              editable={editable}\r\n            />\r\n          </td>\r\n          <td>\r\n            <Link\r\n              to={`/framework/${framework}/manage/competencies/${\r\n                competency.id\r\n              }/manage-attributes`}\r\n            >\r\n              <i className=\"fas fa-sitemap\" />\r\n            </Link>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // if(this.state.allowedFrms.length > 0){\r\n    //   if(this.state.allowedFrms.indexOf(this.state.framework) == -1){\r\n    //     return(<h4 className=\"callout warning\"> <i class=\"icon icon-common icon-exclamation-triangle\"></i> You are not authorised to manage this framework </h4> );\r\n    //   }\r\n    // }\r\n\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkData,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      competencyTypes,\r\n      versions,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (frameworkData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage framework</h2>\r\n        <h4>{frameworkName}</h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        <VersionControls\r\n          editable={editable}\r\n          createDraft={this.createDraft}\r\n          versions={versions}\r\n          release={this.releaseNewVersion}\r\n          updateNotes={this.updateNotes}\r\n        />\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new competency\"\r\n            placeholder=\"Competency description\"\r\n            options={competencyTypes}\r\n            onCreate={this.createCompetency}\r\n            showMappingField={true}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getCompetencyList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageCompetencies);\r\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\n\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass ManageAttribute extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingError: false,\n      editable: false,\n      showModal: false,\n      parentID: '',\n      parentTitle: '',\n      showAttributeModal: '',\n      attributeType: '',\n      attributeTypeTitle: '',\n      newAttributes: '',\n      competency: [],\n      typetitle: ''\n    };\n    this.handleOpenAttributeModal = this.handleOpenAttributeModal.bind(this);\n    this.handleCloseAttributeModal = this.handleCloseAttributeModal.bind(this);\n    this.OpenModalPosition = this.OpenModalPosition.bind(this);\n    this.closeModalPosition = this.closeModalPosition.bind(this);\n    //this.archiveAttribute = this.archiveAttribute.bind(this);\n  }\n\n  OpenModalPosition(e, competency) {\n    this.setState({ showModalPosition: true });\n    this.setState({ competency: competency });\n    this.setState({ typetitle: e.target.dataset.typetitle });\n    console.log(e.target.dataset.typetitle);\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  handleOpenAttributeModal(e) {\n    this.setState({ showAttributeModal: true });\n    this.setState({ parentID: e.target.dataset.competencyid });\n    this.setState({ parentTitle: e.target.dataset.competencytitle });\n    this.setState({ attributeType: e.target.dataset.attributetype });\n    this.setState({ attributeTypeTitle: e.target.dataset.typetitle });\n\n    e.preventDefault();\n  }\n\n  handleCloseAttributeModal() {\n    this.setState({ showAttributeModal: false });\n  }\n\n  async editAttribute(aid, title) {\n    const { framework, loadData } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchCompetency(aid, 'title', title);\n      await loadData(framework);\n      this.props.enqueueSnackbar('Attribute updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  setAttributes(e) {\n    this.setState({ newAttributes: e.target.value });\n    console.log(e.target.value);\n  }\n\n  async saveAttributes(e) {\n    const { frameworkData, framework, loadData } = this.props;\n    const { newAttributes, attributeType, parentID } = this.state;\n\n    let versionID = frameworkData[0].version_id;\n    let newData = newAttributes;\n    let type = 'attribute';\n    let addtional = attributeType;\n    let response = '';\n    try {\n      //this.activeRequests.startRequest();\n      response = this.competencyService.createBulkData(\n        parentID,\n        versionID,\n        newData,\n        type,\n        addtional\n      );\n      console.log(response);\n      loadData(framework);\n      this.props.enqueueSnackbar('Attributes created', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      //this.activeRequests.finishRequest();\n    }\n    e.preventDefault();\n    this.handleCloseAttributeModal();\n  }\n\n  async archiveAttribute(attribute, isArchived) {\n    const { framework, loadData } = this.props;\n\n    try {\n      //this.activeRequests.startRequest();\n      await this.competencyService.toggleArchivingVersionedNode(\n        framework,\n        attribute\n      );\n      loadData(framework);\n      this.props.enqueueSnackbar('Attribute status updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      //this.activeRequests.finishRequest();\n    }\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n    console.log(this.dragged.parentNode);\n    //update state and call api for PATCH request\n    //var data = this.props.frameworkData[0].domains;\n    var data = this.state.competency.attributes;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ sorting: data });\n    console.log(data.map(d => d.id));\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  saveSorting = async data => {\n    const { framework, frameworkData } = this.props;\n    const { sorting } = this.state;\n    let items = sorting.map(d => d.id);\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.saveSorting(items);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Items updated', {\n        variant: 'success'\n      });\n    } catch {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.setState({ sorting: undefined });\n      this.closeModalPosition();\n      //window.location.reload()\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  getAttributes(frameworkDef, frameworkData, competency, domain, editableFrm) {\n    return frameworkDef.map(def => (\n      <div className=\"row\">\n        <div className=\"column medium-12\">\n          <li className=\"attribute_type\">\n            <em>{def.title}</em>\n            <span style={{ display: 'flex' }}>\n              {editableFrm === true ? (\n                <button\n                  className=\"addButton icon icon-common icon-plus-circle icon-custom \"\n                  data-competencyid={competency.id}\n                  data-competencytitle={competency.title}\n                  data-typetitle={def.title}\n                  data-attributetype={def.id}\n                  title=\"Add attributes\"\n                  onClick={e => this.handleOpenAttributeModal(e)}\n                >\n                  Add {def.title}{' '}\n                </button>\n              ) : (\n                ''\n              )}\n            </span>\n\n            <ul>\n              {competency.attributes.map(attr => {\n                if (attr.type === def.title)\n                  return (\n                    <li\n                      key={attr.id}\n                      className={attr.archived === '1' ? 'strikeout' : ''}\n                    >\n                      <div className=\"attribute_title\">\n                        <InlineEdit\n                          style={{ display: 'inline' }}\n                          text={attr.title}\n                          change={newValue =>\n                            this.editAttribute(attr.id, newValue)\n                          }\n                          editable={\n                            attr.archived === '1' || editableFrm === false\n                              ? false\n                              : true\n                          }\n                        />\n                        {editableFrm === true ? (\n                          <>\n                            <span className=\"edit-indicator\">\n                              <button\n                                className=\"cursor\"\n                                onClick={() =>\n                                  this.archiveAttribute(attr.id, attr.archived)\n                                }\n                              >\n                                {attr.archived === '1' ? (\n                                  <span className=\"fas fa-toggle-on icon-left-spacer\">\n                                    <span>Archived</span>\n                                  </span>\n                                ) : (\n                                  <span className=\"fas fa-toggle-off icon-left-spacer\">\n                                    {' '}\n                                    <span> Archive</span>\n                                  </span>\n                                )}\n                              </button>\n                            </span>\n                            <span className=\"edit-indicator\">\n                              <button\n                                className=\"addButton icon icon-common icon-sort\"\n                                title=\"Change order\"\n                                data-typetitle={def.title}\n                                onClick={e =>\n                                  this.OpenModalPosition(e, competency)\n                                }\n                              >\n                                Change order{' '}\n                              </button>\n                            </span>\n                          </>\n                        ) : (\n                          ''\n                        )}\n                      </div>\n                    </li>\n                  );\n              })}\n            </ul>\n\n            <hr />\n          </li>\n        </div>\n        {/*<div className=\"column medium-4\" style={{ display: 'flex' }}>\n          <button\n            className=\"addButton\"\n            data-competencyid={competency.id}\n            data-competencytitle={competency.title}\n            data-typetitle={def.title}\n            data-attributetype={def.id}\n            title=\"Add attributes\"\n            onClick={e => this.handleOpenAttributeModal(e)}\n          >\n            Add {def.title} <i className=\"icon icon-common icon-plus-circle\" />\n          </button>\n          <button\n            className=\"addButton\"\n            title=\"Change order\"\n            data-typetitle={def.title}\n            onClick={e => this.OpenModalPosition(e, competency)}\n          >\n            Change order <i className=\"icon icon-common icon-sort\" />\n          </button>\n            </div>*/}\n      </div>\n    ));\n  }\n\n  render() {\n    const {\n      frameworkDef,\n      frameworkData,\n      competency,\n      domain,\n      editableFrm\n    } = this.props;\n    const {\n      parentID,\n      parentTitle,\n      attributeType,\n      attributeTypeTitle\n    } = this.state;\n    return (\n      <div>\n        {this.getAttributes(\n          frameworkDef,\n          frameworkData,\n          competency,\n          domain,\n          editableFrm\n        )}\n        {/* Modal for adding attributes */}\n        <Modal\n          open={this.state.showAttributeModal}\n          onClose={this.handleCloseAttributeModal}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Add {attributeTypeTitle} attributes</h3>\n          <h4>{parentTitle} </h4>\n          <h5>Please enter one {attributeTypeTitle} attribute per line</h5>\n          <form>\n            <textarea\n              id=\"attribute_txt\"\n              rows=\"5\"\n              onChange={e => this.setAttributes(e)}\n              required\n            />\n            <button className=\"button\" onClick={e => this.saveAttributes(e)}>\n              Save\n            </button>\n          </form>\n        </Modal>\n\n        {/* Modal for sorting attribute positions */}\n\n        <Modal\n          open={this.state.showModalPosition}\n          onClose={this.closeModalPosition}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Change order</h3>\n          <p>Please drag and drop items to change order</p>\n          {this.state.competency.id ? (\n            <>\n              {console.log(competency)}\n              <h4>{this.state.competency.title}</h4>\n              <ul onDragOver={this.dragOver.bind(this)}>\n                {this.state.competency.attributes.map((attribute, i) => {\n                  if (attribute.type === this.state.typetitle) {\n                    return (\n                      <li\n                        style={{ listStyleType: 'none' }}\n                        data-position={i}\n                        key={attribute.position}\n                        draggable=\"true\"\n                        onDragEnd={this.dragEnd.bind(this)}\n                        onDragStart={this.dragStart.bind(this)}\n                      >\n                        <i class=\"icon icon-common icon-move\" />{' '}\n                        {attribute.title}\n                      </li>\n                    );\n                  }\n                })}\n              </ul>\n            </>\n          ) : (\n            ''\n          )}\n\n          <button className=\"button primary\" onClick={this.saveSorting}>\n            Save\n          </button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(ManageAttribute);\n","import React from 'react';\nimport CKEditor from 'react-ckeditor-component';\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\n//import ErrorLoading from '../components/error-loading/ErrorLoading';\nimport Parser from 'html-react-parser';\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport ManageAttribute from './ManageAttribute';\n\nimport Collapsible from 'react-collapsible';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass ManageCompetency extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingError: false,\n      editable: false,\n      domain: [],\n      comp: '',\n      mapping: ''\n    };\n    this.OpenModalPosition = this.OpenModalPosition.bind(this);\n    this.closeModalPosition = this.closeModalPosition.bind(this);\n    this.OpenModalMapping = this.OpenModalMapping.bind(this);\n    this.CloseModalMapping = this.CloseModalMapping.bind(this);\n  }\n\n  OpenModalPosition(e, domain) {\n    this.setState({ showModalPosition: true });\n    this.setState({ domain: domain });\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  OpenModalMapping(e, competency) {\n    this.setState({ showModalMapping: true });\n    this.setState({ comp: competency });\n    this.setState({ mapping: competency.mapped_other_competency });\n  }\n\n  CloseModalMapping() {\n    this.setState({ showModalMapping: false });\n  }\n\n  async editCompetency(competency, title) {\n    const { framework } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchCompetency(competency, 'title', title);\n      await this.props.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Competency updated', {\n        variant: 'success'\n      });\n    }\n  }\n\n  async editMapping(e, competency, mapping) {\n    console.log(competency);\n    e.preventDefault();\n    const { framework } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchCompetency(\n        competency,\n        'field_map_other_competency',\n        mapping\n      );\n      await this.props.loadData(framework);\n      this.CloseModalMapping();\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Record updated', {\n        variant: 'success'\n      });\n    }\n  }\n\n  async archiveCompetency(competency, isArchived) {\n    const { framework, loadData } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.toggleArchivingVersionedNode(\n        framework,\n        competency\n      );\n      loadData(framework);\n      this.props.enqueueSnackbar('Competency status updated', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n      console.log(e);\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n\n    //update state and call api for PATCH request\n    //var data = this.props.frameworkData[0].domains;\n    var data = this.state.domain.competencies;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ sorting: data });\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  saveSorting = async data => {\n    const { framework } = this.props;\n    const { sorting } = this.state;\n    let items = sorting.map(d => d.id);\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.saveSorting(items);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Items updated', {\n        variant: 'success'\n      });\n    } catch {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.setState({ sorting: undefined });\n      this.closeModalPosition();\n      //window.location.reload()\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  getCompetencies(competencies) {\n    const {\n      frameworkData,\n      domain,\n      frameworkDef,\n      framework,\n      loadData,\n      editableFrm\n    } = this.props;\n    return competencies.map(competency => (\n      <li\n        id={competency.id}\n        key={competency.id}\n        style={{ listStyleType: 'none' }}\n      >\n        <div className=\"row competency_title\">\n          <h3 className={competency.archived === '1' ? 'strikeout' : ''}>\n            <InlineEdit\n              style={{ display: 'inline' }}\n              text={competency.title}\n              change={newValue => this.editCompetency(competency.id, newValue)}\n              editable={\n                competency.archived === '1' || editableFrm === false\n                  ? false\n                  : true\n              }\n            />\n            {editableFrm === true ? (\n              <>\n                <span className=\"edit-indicator\">\n                  <button\n                    className=\"cursor\"\n                    onClick={() =>\n                      this.archiveCompetency(competency.id, competency.archived)\n                    }\n                  >\n                    {competency.archived === '1' ? (\n                      <span className=\"fas fa-toggle-on icon-left-spacer\">\n                        <span>Archived</span>\n                      </span>\n                    ) : (\n                      <span className=\"fas fa-toggle-off icon-left-spacer\">\n                        {' '}\n                        <span> Archive</span>\n                      </span>\n                    )}\n                  </button>\n                </span>\n\n                <span className=\"edit-indicator\">\n                  <button\n                    className=\"cursor\"\n                    onClick={e => this.OpenModalPosition(e, domain)}\n                  >\n                    <span className=\"fas fa-sort icon-left-spacer\">\n                      <span>Change order</span>\n                    </span>\n                  </button>\n                </span>\n              </>\n            ) : (\n              ''\n            )}\n          </h3>\n        </div>\n\n        <Collapsible\n          trigger={\n            <div className=\"open-close-title collapsible-arrows\">\n              <span className=\"icon icon-common icon-angle-right icon-custom\" />\n            </div>\n          }\n          triggerWhenOpen={\n            <div className=\"open-close-title collapsible-arrows\">\n              <span className=\"icon icon-common icon-angle-down icon-custom\" />\n            </div>\n          }\n        >\n          <em>\n            {competency.mapped_other_competency ? (\n              <span>\n                This competency maps to:\n                {/* <InlineEdit\n                  style={{ display: 'inline' }}\n                  text={competency.mapped_other_competency}\n                  change={newValue => this.editMapping(competency.id, newValue)}\n                  editable={competency.archived === '1' ? false : true}\n                /> */}\n                {Parser(competency.mapped_other_competency)}\n                <button\n                  className=\"cursor\"\n                  onClick={e => this.OpenModalMapping(e, competency)}\n                >\n                  <span className=\"fas fa-edit icon-left-spacer\" />\n                </button>\n              </span>\n            ) : (\n              ''\n            )}\n          </em>\n          <ul>\n            <ManageAttribute\n              framework={framework}\n              frameworkData={frameworkData}\n              domain={domain}\n              competency={competency}\n              frameworkDef={frameworkDef}\n              loadData={loadData}\n              editableFrm={editableFrm}\n            />\n          </ul>\n        </Collapsible>\n      </li>\n    ));\n  }\n\n  render() {\n    const { frameworkData, domain } = this.props;\n    const competencies = frameworkData.map(item =>\n      item.domains.map(item => {\n        if (item.nid == domain.nid)\n          return <ul>{this.getCompetencies(item.competencies)}</ul>;\n      })\n    );\n    return (\n      <>\n        <div key={'domainlist'}>\n          {competencies\n            ? competencies\n            : 'No competencies found. Add new competencies to start.'}\n        </div>\n        <Modal\n          open={this.state.showModalMapping}\n          onClose={this.CloseModalMapping}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <form\n            onSubmit={e =>\n              this.editMapping(e, this.state.comp.id, this.state.mapping)\n            }\n          >\n            <div className=\"column medium-9\">\n              <h3>{this.state.comp.title}</h3>\n              <h4>This competency maps to:</h4>\n              {console.log(this.state.comp.id)}\n              <CKEditor\n                key={'mapsto_'}\n                content={this.state.mapping}\n                events={{\n                  change: e => this.setState({ mapping: e.editor.getData() }) //this.editMapping(this.state.comp.id, \"This info\")\n                }}\n                activeClass=\"p10\"\n                config={{\n                  toolbarGroups: [\n                    {\n                      name: 'document',\n                      groups: ['mode', 'document', 'doctools']\n                    },\n                    {\n                      name: 'paragraph',\n                      groups: [\n                        'list',\n                        'indent',\n                        'blocks',\n                        'align',\n                        'bidi',\n                        'paragraph'\n                      ]\n                    },\n                    { name: 'links', groups: ['links'] }\n                  ]\n                }}\n              />\n              <input type=\"submit\" className=\"button\" value=\"Save\" />\n            </div>\n          </form>\n        </Modal>\n\n        {/* Modal for sorting competency positions */}\n\n        <Modal\n          open={this.state.showModalPosition}\n          onClose={this.closeModalPosition}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Change order</h3>\n          <p>Please drag and drop items to change order</p>\n          {this.state.domain.nid ? <h4>{this.state.domain.title}</h4> : ''}\n\n          <ul onDragOver={this.dragOver.bind(this)}>\n            {frameworkData.map(item =>\n              item.domains.map(domain => {\n                if (domain.nid === this.state.domain.nid) {\n                  return domain.competencies.map((competency, i) => {\n                    return (\n                      <li\n                        style={{ listStyleType: 'none' }}\n                        data-position={i}\n                        key={competency.position}\n                        draggable=\"true\"\n                        onDragEnd={this.dragEnd.bind(this)}\n                        onDragStart={this.dragStart.bind(this)}\n                      >\n                        <i class=\"icon icon-common icon-move\" />{' '}\n                        {competency.title}\n                      </li>\n                    );\n                  });\n                }\n              })\n            )}\n          </ul>\n          <button className=\"button primary\" onClick={this.saveSorting}>\n            Save\n          </button>\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport default withSnackbar(ManageCompetency);\n","import React from 'react';\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\nimport CKEditor from 'react-ckeditor-component';\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport ManageCompetency from './ManageCompetency';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass ManageDomains extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      loadingError: false,\n      editable: false,\n      showModal: false,\n      newDomains: '',\n      showModalCompetency: false,\n      showModalMapping: false,\n      newCompetencies: [{ competency: '', mapping: '' }],\n      parentID: '',\n      parentTitle: '',\n      sorting: []\n    };\n\n    this.archiveDomain = this.archiveDomain.bind(this);\n    this.OpenModalCompetency = this.OpenModalCompetency.bind(this);\n    this.closeModalCompetency = this.closeModalCompetency.bind(this);\n\n    this.OpenModalMapping = this.OpenModalMapping.bind(this);\n    this.CloseModalMapping = this.CloseModalMapping.bind(this);\n\n    this.handleRemoveCompetencies = this.handleRemoveCompetencies.bind(this);\n    this.setCompetencies = this.setCompetencies.bind(this);\n\n    this.OpenModalPosition = this.OpenModalPosition.bind(this);\n    this.closeModalPosition = this.closeModalPosition.bind(this);\n  }\n\n  OpenModalMapping(e, domain) {\n    this.setState({ showModalMapping: true });\n    //this.setState({ domain: domain });\n  }\n\n  CloseModalMapping() {\n    this.setState({ showModalMapping: false });\n  }\n\n  handleOpenModal() {\n    this.setState({ showModal: true });\n  }\n\n  handleCloseModal() {\n    this.setState({ showModal: false });\n  }\n\n  OpenModalPosition(e) {\n    this.setState({ showModalPosition: true });\n    console.log('change positions');\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  OpenModalCompetency(e) {\n    this.setState({ parentID: e.target.dataset.domainid });\n    this.setState({ parentTitle: e.target.dataset.domaintitle });\n    this.setState({ showModalCompetency: true });\n  }\n\n  closeModalCompetency() {\n    this.setState({ showModalCompetency: false });\n  }\n\n  handleAddMoreCompetencies(e) {\n    this.setState({\n      newCompetencies: [\n        ...this.state.newCompetencies,\n        { competency: '', mapping: '' }\n      ]\n    });\n    e.preventDefault();\n  }\n\n  handleRemoveCompetencies(e, index) {\n    this.state.newCompetencies.splice(index, 1);\n    this.setState({ newCompetencies: this.state.newCompetencies });\n    e.preventDefault();\n  }\n\n  setCompetencies(e, index, type) {\n    let newData = this.state.newCompetencies;\n    if (type === 'competency') {\n      newData[index].competency = e.target.value;\n    } else {\n      newData[index].mapping = e.editor.getData(); //e.target.value;\n    }\n    this.setState({ newCompetencies: newData });\n  }\n\n  async saveCompetencies(e) {\n    const { framework, frameworkData } = this.props;\n    const { newCompetencies, parentID } = this.state;\n\n    let versionID = frameworkData[0].version_id;\n    let newData = newCompetencies;\n    let type = 'competency';\n    let addtional = '';\n    e.preventDefault();\n\n    console.log(this.state.newCompetencies);\n\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.createBulkData(\n        parentID,\n        versionID,\n        newData,\n        type,\n        addtional\n      );\n      await this.props.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Competencies added successfully', {\n        variant: 'success'\n      });\n    }\n    this.setState({ newCompetencies: [{ competency: '', mapping: '' }] });\n    this.closeModalCompetency();\n  }\n\n  async editDomain(domain, title) {\n    const { framework } = this.props;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.patchDomain(domain, 'title', title);\n      await this.props.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Domain updated', {\n        variant: 'success'\n      });\n    }\n  }\n\n  async archiveDomain(domain, isArchived) {\n    const { framework } = this.props;\n    try {\n      //this.activeRequests.startRequest();\n      await this.competencyService.toggleArchivingVersionedNode(\n        framework,\n        domain\n      );\n      this.props.loadData(framework);\n      console.log('all good gg');\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      //this.activeRequests.finishRequest();\n      this.props.enqueueSnackbar('Domain updated', {\n        variant: 'success'\n      });\n    }\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n    console.log(this.dragged.parentNode);\n    //update state and call api for PATCH request\n    var data = this.props.frameworkData[0].domains;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ sorting: data });\n    console.log(data.map(d => d.nid));\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  saveSorting = async data => {\n    const { framework } = this.props;\n    const { sorting } = this.state;\n    let items = sorting.map(d => d.nid);\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.saveSorting(items);\n      await this.props.loadData(framework);\n      this.props.enqueueSnackbar('Items updated', {\n        variant: 'success'\n      });\n    } catch {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.setState({ sorting: undefined });\n      this.closeModalPosition();\n      //window.location.reload()\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  render() {\n    const {\n      framework,\n      frameworkData,\n      frameworkDef,\n      loadData,\n      editableFrm\n    } = this.props;\n    const domains = frameworkData.map(item =>\n      item.domains.map((domain, index) => (\n        <li\n          key={'li_' + index}\n          id={domain.nid}\n          className={domain.archived === '1' ? 'strikeout' : ''}\n          style={{ listStyleType: 'none' }}\n        >\n          <div key={'div1_' + domain.nid} className=\"row domain_title\">\n            <hr />\n            <div key={'div2_' + domain.nid} className=\"column medium-12\">\n              <h2 key={'h4_' + domain.nid}>\n                <InlineEdit\n                  style={{ display: 'inline' }}\n                  text={domain.title}\n                  change={newValue => this.editDomain(domain.nid, newValue)}\n                  editable={\n                    domain.archived === '1' || editableFrm === false\n                      ? false\n                      : true\n                  }\n                  key={'inline_edit_' + domain.nid}\n                />\n                {editableFrm !== false ? (\n                  <>\n                    <span key={'span_' + domain.nid} className=\"edit-indicator\">\n                      <button\n                        key={domain.nid}\n                        className=\"cursor\"\n                        onClick={() =>\n                          this.archiveDomain(domain.nid, domain.archived)\n                        }\n                      >\n                        {domain.archived === '1' ? (\n                          <span className=\"fas fa-toggle-on icon-left-spacer\">\n                            <span>Archived</span>\n                          </span>\n                        ) : (\n                          <span className=\"fas fa-toggle-off icon-left-spacer\">\n                            {' '}\n                            <span> Archive</span>\n                          </span>\n                        )}\n                      </button>\n                    </span>\n                    <span key={'span_' + domain.nid} className=\"edit-indicator\">\n                      <button\n                        className=\"addButton\"\n                        onClick={this.OpenModalPosition}\n                      >\n                        {' '}\n                        <i className=\"icon icon-common icon-sort icon-left-spacer\" />{' '}\n                        Change order{' '}\n                      </button>\n                    </span>\n                    {domain.archived !== '1' ? (\n                      <span\n                        key={'span_' + domain.nid}\n                        className=\"edit-indicator\"\n                      >\n                        <button\n                          className=\"addButton icon icon-common icon-plus-circle icon-left-spacer\"\n                          href=\"#\"\n                          data-domainid={domain.nid}\n                          data-domaintitle={domain.title}\n                          onClick={e => this.OpenModalCompetency(e)}\n                        >\n                          Add competencies\n                        </button>\n                      </span>\n                    ) : (\n                      ''\n                    )}\n                  </>\n                ) : (\n                  ''\n                )}\n              </h2>\n            </div>\n          </div>\n          <div key={'p_' + domain.nid}>\n            <ManageCompetency\n              framework={framework}\n              frameworkData={frameworkData}\n              frameworkDef={frameworkDef}\n              loadData={loadData}\n              domain={domain}\n              editableFrm={editableFrm}\n            />\n          </div>\n        </li>\n      ))\n    );\n\n    return (\n      <div key={'domains_list'}>\n        {domains[0].length > 0 ? (\n          <>\n            <ul key={'ul_' + domains.count}>{domains}</ul>{' '}\n            {console.log(domains)}{' '}\n          </>\n        ) : (\n          <>\n            <p className=\"callout\">\n              No data found. You may start by adding domains.\n            </p>{' '}\n            {console.log(domains)}\n          </>\n        )}\n\n        {/* Modal for mapping */}\n\n        {/* <Modal\n          open={this.state.showModalCompetency}\n          onClose={this.closeModalCompetency}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n         <form onSubmit={e => this.saveCompetencies(e)}>\n            {this.state.newCompetencies.map((item, index) => (\n              <div key={'competency_' + index} className=\"row callout\">\n                <div className=\"column medium-9\">\n\n                  Add/edit this competency maps to:\n  \n                   <CKEditor\n                    key={'mapsto_' + index}\n                    content={item.mapping}\n                    events={{\n                      change: (e) => this.setCompetencies(e, index, 'mapping')\n                    }}\n                    activeClass=\"p10\"\n                    config={{\n                      toolbarGroups :[\n                        { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },\n                        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi', 'paragraph' ] },\n                        { name: 'links', groups: [ 'links' ] },\n                    ]\n                  }}\n                  />\n                </div>\n\n              </div>\n            ))}\n\n            <input type=\"submit\" className=\"button\" value=\"Save\" />\n          </form> \n        </Modal> */}\n\n        {/* Modal for competencies */}\n\n        <Modal\n          open={this.state.showModalCompetency}\n          onClose={this.closeModalCompetency}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h2>{this.state.parentTitle}</h2>\n          <h3>Add competencies(s) </h3>\n\n          <form onSubmit={e => this.saveCompetencies(e)}>\n            {this.state.newCompetencies.map((item, index) => (\n              <div key={'competency_' + index} className=\"row callout\">\n                <div className=\"column medium-9\">\n                  Competency\n                  <input\n                    key={index}\n                    type=\"text\"\n                    onChange={e => this.setCompetencies(e, index, 'competency')}\n                    value={item.competency}\n                    required\n                  />\n                  This competency maps to:\n                  {/* <input\n                    key={'mapsto_' + index}\n                    type=\"text\"\n                    onChange={e => this.setCompetencies(e, index, 'mapping')}\n                    value={item.mapping}\n                  />\n                   */}\n                  <CKEditor\n                    key={'mapsto_' + index}\n                    content={item.mapping}\n                    events={{\n                      change: e => this.setCompetencies(e, index, 'mapping')\n                    }}\n                    activeClass=\"p10\"\n                    config={{\n                      toolbarGroups: [\n                        {\n                          name: 'document',\n                          groups: ['mode', 'document', 'doctools']\n                        },\n                        {\n                          name: 'paragraph',\n                          groups: [\n                            'list',\n                            'indent',\n                            'blocks',\n                            'align',\n                            'bidi',\n                            'paragraph'\n                          ]\n                        },\n                        { name: 'links', groups: ['links'] }\n                      ]\n                    }}\n                  />\n                </div>\n                <div className=\"column medium-3\" style={{ paddingTop: '1%' }}>\n                  {index > 0 ? (\n                    <button\n                      className=\"button small\"\n                      onClick={e => this.handleRemoveCompetencies(e, index)}\n                    >\n                      <i className=\"icon icon-common icon-close\" />{' '}\n                    </button>\n                  ) : (\n                    ''\n                  )}\n                </div>\n              </div>\n            ))}\n\n            <div className=\"row\">\n              <div className=\"column medium-10\">\n                <button\n                  className=\"button small\"\n                  onClick={e => this.handleAddMoreCompetencies(e)}\n                >\n                  <i className=\"icon icon-common icon-plus-circle\" /> Add more\n                </button>\n              </div>\n            </div>\n            <input type=\"submit\" className=\"button\" value=\"Save\" />\n          </form>\n        </Modal>\n\n        {/* Modal for sorting domain positions */}\n\n        <Modal\n          open={this.state.showModalPosition}\n          onClose={this.closeModalPosition}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h3>Change order</h3>\n          <p>Please drag and drop items to change order</p>\n\n          <ul onDragOver={this.dragOver.bind(this)}>\n            {frameworkData.map(item =>\n              item.domains.map((domain, i) => {\n                return (\n                  <li\n                    style={{ listStyleType: 'none' }}\n                    data-position={i}\n                    key={item.position}\n                    draggable=\"true\"\n                    onDragEnd={this.dragEnd.bind(this)}\n                    onDragStart={this.dragStart.bind(this)}\n                  >\n                    <i className=\"icon icon-common icon-move\" /> {domain.title}\n                  </li>\n                );\n              })\n            )}\n          </ul>\n          <button className=\"button primary\" onClick={this.saveSorting}>\n            Save\n          </button>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(ManageDomains);\n","import React from 'react';\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\nimport VersionControls from '../containers/version-controls/VersionControls';\n\nimport { withSnackbar } from 'notistack';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\nimport ManageDomains from './ManageDomains';\n\nclass ManageData extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n  constructor(props) {\n    super(props);\n    this.state = {\n      framework: '',\n      frameworkName: '',\n      frameworkData: [],\n      frameworkVersion: '',\n      frameworkVersionId: '',\n      frameworkStatus: '',\n      frameworkDef: [],\n      versions: [],\n      loadingError: false,\n      editable: false,\n      showModal: false,\n      showModalPosition: false,\n      newDomains: '',\n      parent: ''\n    };\n\n    this.handleOpenModal = this.handleOpenModal.bind(this);\n    this.handleCloseModal = this.handleCloseModal.bind(this);\n    this.saveDomains = this.saveDomains.bind(this);\n    this.loadData = this.loadData.bind(this);\n  }\n\n  handleOpenModal() {\n    this.setState({ showModal: true });\n  }\n\n  handleCloseModal() {\n    this.setState({ showModal: false });\n  }\n\n  OpenModalPosition(e) {\n    this.setState({ showModalPosition: true });\n  }\n\n  closeModalPosition() {\n    this.setState({ showModalPosition: false });\n  }\n\n  setDomains(e) {\n    this.setState({ newDomains: e.target.value });\n  }\n\n  async saveDomains(e) {\n    const { framework, frameworkData, newDomains } = this.state;\n\n    let parentID = frameworkData[0].nid;\n    let versionID = frameworkData[0].version_id;\n    let newData = newDomains;\n    let type = 'domain';\n    let addtional = '';\n    e.preventDefault();\n\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.createBulkData(\n        parentID,\n        versionID,\n        newData,\n        type,\n        addtional\n      );\n      await this.loadData(framework);\n      this.props.enqueueSnackbar('Domains created', {\n        variant: 'success'\n      });\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n\n    this.handleCloseModal();\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { framework } = props.match.params;\n    if (framework !== state.framework) {\n      return {\n        framework,\n        frameworkData: [],\n        loadingError: false\n      };\n    }\n\n    // No state update necessary\n    return null;\n  }\n\n  async componentDidMount() {\n    const { framework, domainId } = this.props.match.params;\n    await this.loadData(framework);\n\n    if (domainId) {\n      setTimeout(() => {\n        const ref = this.refs[domainId];\n        if (ref) {\n          ref.scrollIntoView();\n        }\n      }, 100);\n    }\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    const { framework, frameworkData, loadingError } = this.state;\n    if (framework !== prevState.framework) {\n      if (frameworkData.length === 0 && !loadingError) {\n        this.loadData(framework);\n      }\n    }\n  }\n\n  async loadData(framework) {\n    try {\n      this.activeRequests.startRequest();\n      await this.fetchVersions(framework);\n      await this.fetchFramework(framework);\n    } catch (error) {\n      this.setState({ loadingError: true });\n      alert(`Error: ${error}`);\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  }\n\n  async fetchVersions(framework) {\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\n    const currentFramework = allFrameworks.filter(\n      fw => fw.title.toLowerCase().replace(/\\s+/g, '') === framework\n    );\n    if (currentFramework.length > 0) {\n      this.setState({ versions: currentFramework[0].versions.reverse() });\n      this.setState({ frameworkDef: currentFramework[0].attribute_types });\n    }\n  }\n\n  async fetchFramework(framework) {\n    const { versions } = this.state;\n    const liveVersion = versions.filter(version => version.status === 'live');\n    const draftVersion = versions.filter(version => version.status === 'draft');\n    let frameworkData = [];\n    let editable = false;\n\n    if (draftVersion.length) {\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\n        framework\n      );\n      this.setState({ frameworkVersionId: draftVersion[0].id });\n      editable = true;\n      console.log(frameworkData);\n    } else {\n      if (liveVersion.length) {\n        frameworkData = await this.competencyService.getVersionedFramework(\n          framework,\n          liveVersion[0].number\n        );\n      }\n    }\n\n    if (frameworkData.length) {\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\n        description: domain.title,\n        uuid: domain.uuid\n      }));\n      this.setState({\n        frameworkName: frameworkData[0].title,\n        frameworkData: frameworkData,\n        frameworkVersion: frameworkData[0].version,\n        frameworkStatus: frameworkData[0].status,\n        competencyTypes,\n        editable\n      });\n    }\n  }\n\n  releaseNewVersion = async (version, notes) => {\n    const { framework } = this.state;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.publishFramework(framework, version, notes);\n      this.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  updateNotes = async notes => {\n    const { framework, frameworkVersionId } = this.state;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.updateReleaseNotes(\n        notes,\n        frameworkVersionId\n      );\n      this.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  createDraft = async () => {\n    const { framework } = this.state;\n    try {\n      this.activeRequests.startRequest();\n      await this.competencyService.createDraftFramework(framework);\n      this.loadData(framework);\n    } catch (e) {\n      this.props.enqueueSnackbar('Unable to perform the request', {\n        variant: 'error'\n      });\n    } finally {\n      this.activeRequests.finishRequest();\n    }\n  };\n\n  render() {\n    const {\n      framework,\n      frameworkName,\n      frameworkData,\n      frameworkVersion,\n      frameworkStatus,\n      frameworkDef,\n      //competencyTypes,\n      versions,\n      loadingError,\n      editable\n    } = this.state;\n\n    if (loadingError) {\n      return <ErrorLoading />;\n    }\n\n    if (frameworkData.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"row\">\n        <h2>Manage framework data</h2>\n        <h4>{frameworkName}</h4>\n        <p>\n          <span className=\"tag\">{frameworkVersion}</span>\n          <span className=\"tag secondary-background\">\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\n          </span>\n        </p>\n        <div className=\"row\">\n          <div className=\"column medium-9\">\n            <VersionControls\n              editable={editable}\n              createDraft={this.createDraft}\n              versions={versions}\n              release={this.releaseNewVersion}\n              updateNotes={this.updateNotes}\n            />\n          </div>\n          <div className=\"column medium-3\">\n            {editable === true ? (\n              <button\n                href=\"#\"\n                className=\"addButton\"\n                onClick={this.handleOpenModal}\n              >\n                {' '}\n                <i className=\"icon icon-common icon-plus-circle\" /> Add domains{' '}\n              </button>\n            ) : (\n              ''\n            )}\n          </div>\n        </div>\n\n        <ManageDomains\n          editableFrm={editable}\n          framework={framework}\n          frameworkData={frameworkData}\n          frameworkDef={frameworkDef}\n          loadData={this.loadData}\n        />\n\n        <FrameworkVersions framework={framework} versions={versions} />\n\n        {/* Modal for adding domains */}\n\n        <Modal\n          open={this.state.showModal}\n          onClose={this.handleCloseModal}\n          center\n          classNames={{\n            overlay: 'customOverlay',\n            modal: 'customModal'\n          }}\n        >\n          <h2>Add domain(s) </h2>\n          <h3>Please enter one domain per line</h3>\n          <form>\n            <textarea\n              id=\"domain_txt_area\"\n              rows=\"5\"\n              onChange={e => this.setDomains(e)}\n              required\n            />\n            <button className=\"button\" onClick={e => this.saveDomains(e)}>\n              Save\n            </button>\n          </form>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(ManageData);\n","import HttpService from '../http/http';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass CoursesService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CoursesService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CoursesService.instance = this;\r\n  }\r\n\r\n  async getCourses() {\r\n    const response = await this.http.get(\r\n      /*`${apiUrl}/api/v1/training-resources/all?_format=json`*/\r\n      `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CoursesService;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport CoursesService from '../services/courses/courses';\r\n\r\nclass CompetencyDetails extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n    version: this.props.location.pathname.split('/'),\r\n    frameworkData: [],\r\n    competencyId: this.props.match.params.cid,\r\n    attributeDefs: [],\r\n    resources: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.getFramework(),\r\n        this.getAttributes(),\r\n        this.getResources()\r\n      ]);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async getFramework() {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      version[3]\r\n    );\r\n\r\n    this.setState({\r\n      frameworkData\r\n    });\r\n  }\r\n\r\n  async getAttributes() {\r\n    const allFrameworks = await this.competencyService.getAllFrameworks();\r\n    const { framework } = this.state;\r\n    const frameworkMatch = allFrameworks.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n    if (frameworkMatch.length) {\r\n      const attributeDefs = frameworkMatch[0].attribute_types.map(\r\n        attribute => attribute.title\r\n      );\r\n      this.setState({ attributeDefs });\r\n    }\r\n  }\r\n\r\n  async getResources() {\r\n    try {\r\n      const allResources = await this.coursesService.getCourses();\r\n      const resources = allResources.filter(\r\n        resource =>\r\n          !!resource.competency_profile.find(\r\n            profile =>\r\n              // !!profile.domains.find(\r\n              //   domain =>\r\n              //     !!domain.competencies.find(\r\n              //       competency => competency.id === this.state.competencyId\r\n              //     )\r\n              // )\r\n\r\n              profile.competency_id === this.state.competencyId\r\n          )\r\n      );\r\n\r\n      this.setState({ resources });\r\n      /*const resources = [{\"id\":1, \"title\":this.state.version[3]}];*/\r\n      this.setState({ resources });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to retrieve training resources', {\r\n        variant: 'error'\r\n      });\r\n    }\r\n  }\r\n\r\n  resourceBlock() {\r\n    const { resources } = this.state;\r\n    return resources.map(resource => (\r\n      <li key={resource.id}>\r\n        <Link to={`/training-resources/${resource.id}`}>{resource.title}</Link>\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      competencyId,\r\n      frameworkData,\r\n      attributeDefs,\r\n      resources\r\n    } = this.state;\r\n\r\n    const competencies = [];\r\n    console.log(frameworkData);\r\n    frameworkData.forEach(item =>\r\n      item.domains.forEach(domain =>\r\n        domain.competencies.forEach(competency => {\r\n          if (competency.id === competencyId) {\r\n            competencies.push({\r\n              ...competency,\r\n              framework: item.title,\r\n              domain: domain.title\r\n            });\r\n          }\r\n        })\r\n      )\r\n    );\r\n\r\n    const competencyDetails = competencies.map(competency => (\r\n      <div key={competency.id}>\r\n        <h4>\r\n          {' '}\r\n          {competency.framework} / {competency.domain}\r\n        </h4>\r\n\r\n        <div className=\"vf-grid\">\r\n          <div>\r\n            <h3>{competency.title}</h3>\r\n            <ul>\r\n              {attributeDefs.map(def => {\r\n                return (\r\n                  <div key={def}>\r\n                    <div className=\"margin-top-medium\">\r\n                      {' '}\r\n                      <strong>\r\n                        <em>{def}</em>\r\n                      </strong>\r\n                    </div>\r\n                    {competency.attributes.map(attribute => {\r\n                      if (attribute.type === def) {\r\n                        return <li key={attribute.id}>{attribute.title} </li>;\r\n                      }\r\n                      return null;\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n\r\n          <div>\r\n            <h4>Competency derived from:</h4>\r\n            <p>\r\n              {' '}\r\n              {competency.mapped_other_competency\r\n                ? Parser(competency.mapped_other_competency)\r\n                : 'No data available'}{' '}\r\n            </p>\r\n\r\n            {resources.length === 0 ? null : (\r\n              <div>\r\n                <h4>Training resources mapped to this competency</h4>\r\n                <ul>{this.resourceBlock()}</ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"column large-12\">\r\n          {frameworkData.length > 0 ? (\r\n            \r\n              <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\r\n                <ul class=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\r\n                  <li class=\"vf-breadcrumbs__item\">\r\n                    <Link to=\"/\" class=\"vf-breadcrumbs__link\">\r\n                      Home\r\n                    </Link>\r\n                  </li>\r\n                  <li class=\"vf-breadcrumbs__item\">\r\n                    <Link\r\n                      to={`/framework/${frameworkData[0].title.toLowerCase()}/${\r\n                        frameworkData[0].version\r\n                      }`}\r\n                    >\r\n                      {frameworkData[0].title} {frameworkData[0].version}\r\n                    </Link>{' '}\r\n                  </li>\r\n                  <li class=\"vf-breadcrumbs__item\" aria-current=\"location\">\r\n                      Competency details\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n            \r\n          ) : (\r\n            ''\r\n          )}\r\n\r\n          <h3>Competency details</h3>\r\n\r\n          {competencyDetails}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(CompetencyDetails);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Collapsible from 'react-collapsible';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { groupBy } from 'lodash-es';\r\nimport './CompetencyList.css';\r\n\r\n\r\nfunction CompetencyList({\r\n  index,\r\n  framework,\r\n  competency,\r\n  disable,\r\n  version,\r\n  attributeTypes\r\n}) {\r\n  const attributesGrouped = groupBy(competency.attributes, 'type');\r\n  //const attributesTypes = [\"Knowledge\", \"Skill\", \"Attitude\"]; //  Object.keys(attributesGrouped)\r\n  const attrTypes = attributeTypes;\r\n  //console.log(attributesTypes)\r\n  const attributes = attrTypes.map(type => {\r\n    const attributes = attributesGrouped[type]\r\n      ? attributesGrouped[type].map(attribute => (\r\n          <li className=\"vf-list__item\" key={attribute.id}>{attribute.title}</li>\r\n        ))\r\n      : '';\r\n    return attributes ? (\r\n      <div key={type} className=\"attribute_type\">\r\n        <em>{type}</em>\r\n        <ul className=\"vf-list--unordered\" style={{paddingLeft: '24px'}} >{attributes}</ul>\r\n      </div>\r\n    ) : (\r\n      ''\r\n    );\r\n  });\r\n\r\n  if (competency.archived === '1') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        <Collapsible\r\n          trigger={\r\n            <div className=\"open-close-title\">\r\n              <span className=\"icon icon-common icon-angle-right float-left icon-custom\">\r\n                \r\n              </span>\r\n              <span>{competency.title}</span>\r\n            </div>\r\n          }\r\n          triggerWhenOpen={\r\n            <div className=\"open-close-title\">\r\n              <span className=\"icon icon-common icon-angle-down float-left icon-custom\">\r\n                \r\n              </span>\r\n              <span>{competency.title}</span>\r\n            </div>\r\n          }\r\n        >\r\n          <div>\r\n            {attributes}\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.id\r\n              }`}\r\n            >\r\n              <span style={{float:'right'}}>\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />\r\n                More details\r\n              </span>\r\n            </Link>\r\n          </div>\r\n        </Collapsible>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nCompetencyList.defaultProps = {\r\n  parentIndex: 0,\r\n  index: 0,\r\n  disable: true\r\n};\r\n\r\nCompetencyList.propTypes = {\r\n  parentIndex: PropTypes.number,\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  competency: PropTypes.shape({\r\n    title: PropTypes.string\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CompetencyList from '../competency-list/CompetencyList';\r\n\r\nfunction DomainList({\r\n  index,\r\n  framework,\r\n  domain,\r\n  disable,\r\n  version,\r\n  attributeTypes\r\n}) {\r\n  const competencies = domain.competencies.map((competency, childIndex) => (\r\n    <CompetencyList\r\n      key={competency.id}\r\n      index={childIndex}\r\n      framework={framework}\r\n      competency={competency}\r\n      disable={disable}\r\n      version={version}\r\n      attributeTypes={attributeTypes}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <tbody style={{ border: 'none' }}>\r\n      <tr>\r\n        <td>\r\n          <h2> {domain.title}</h2>\r\n        </td>\r\n      </tr>\r\n      {competencies}\r\n    </tbody>\r\n  );\r\n}\r\n\r\nDomainList.defaultProps = {\r\n  domain: { title: '', competencies: [] },\r\n  disable: true\r\n};\r\n\r\nDomainList.propTypes = {\r\n  framework: PropTypes.string,\r\n  domain: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    competencies: PropTypes.array\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default DomainList;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport ErrorLoading from '../../components/error-loading/ErrorLoading';\r\n\r\nimport ActiveRequestsService from '../../services/active-requests/active-requests';\r\nimport CoursesService from '../../services/courses/courses';\r\nimport { safeFlat } from '../../services/util/util';\r\n\r\nclass Courses extends Component {\r\n  static propTypes = {\r\n    framework: PropTypes.string,\r\n    version: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    courses: [],\r\n    filteredCourses: [],\r\n    filter: '',\r\n    loadingError: false\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.framework = props.framework;\r\n    this.state.version = props.version;\r\n  }\r\n\r\n  coursesService = new CoursesService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const allCourses = await this.coursesService.getCourses();\r\n      const courses = this.filterCourses(allCourses);\r\n      this.setState({ courses, filteredCourses: courses });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  filterCourses(allCourses) {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const filteredCourses = [];\r\n    allCourses.forEach(course => {\r\n      if (course.archived === '1') {\r\n        return;\r\n      }\r\n\r\n      const filteredProfiles = course.competency_profile.filter(\r\n        //profile => (profile.title || '').toLowerCase() === framework\r\n        profile => (profile.framework_label || '').toLowerCase() === framework\r\n      );\r\n\r\n      if (filteredProfiles.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const modifiedCourse = {\r\n        ...course,\r\n        competencies: safeFlat(\r\n          filteredProfiles.map(\r\n            profile =>\r\n              // safeFlat(\r\n              //   profile.domains.map(domain =>\r\n              //     domain.competencies.map(competency => ({\r\n              //       ...competency,\r\n              //       domain: domain.title\r\n              //     }))\r\n              //   )\r\n              // )\r\n              profile\r\n          )\r\n        )\r\n      };\r\n\r\n      filteredCourses.push(modifiedCourse);\r\n    });\r\n    //console.log(filteredCourses);\r\n    return filteredCourses;\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { courses } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredCourses = courses.filter(course => term.test(course.title));\r\n    this.setState({ filteredCourses, filter });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      filteredCourses,\r\n      framework,\r\n      filter,\r\n      loadingError,\r\n      version\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    //let unique = [...new Set(course.competencies.map(item => item.id))];\r\n\r\n    let duplicates = [];\r\n\r\n    const competencyList = competencies =>\r\n      competencies\r\n        .filter(\r\n          (competency, index, all) =>\r\n            all.findIndex(c => c.competency_id === competency.competency_id) ===\r\n            index\r\n        )\r\n        .map(competency => (\r\n          <li key={competency.id}>\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.competency_id\r\n              }`}\r\n            >\r\n              {competency.competency_label}\r\n            </Link>\r\n          </li>\r\n        ));\r\n\r\n    const resources = filteredCourses.map(course => (\r\n      <tr key={course.id}>\r\n        <td>\r\n          <Link to={`/training-resources/${course.id}`}>{course.title}</Link>\r\n        </td>\r\n        <td>{course.type}</td>\r\n        <td>\r\n          <ul>{competencyList(course.competencies)} </ul>\r\n        </td>\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        {/* <input\r\n          type=\"search\"\r\n          // className=\"clearable\" // It doesn't work correctly\r\n          value={filter}\r\n          onChange={event => this.onFilter(event.target.value)}\r\n          placeholder=\"Filter resources\"\r\n        /> */}\r\n        <form action=\"#\" class=\"vf-form | vf-search vf-search--inline\">\r\n              <div className=\"vf-form__item | vf-search__item\">\r\n                <label\r\n                  className=\"vf-form__label vf-u-sr-only | vf-search__label\"\r\n                  for=\"inlinesearchitem\"\r\n                >\r\n                  Inline search\r\n                </label>\r\n                <input\r\n                  type=\"search\"\r\n                  placeholder=\"Filter training resources\"\r\n                  id=\"inlinesearchitem\"\r\n                  className=\"vf-form__input | vf-search__input\"\r\n                  onChange={event => this.onFilter(event.target.value)}\r\n                  value={filter}\r\n                />\r\n              </div>\r\n            </form>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Training resource(s)</th>\r\n              <th>Type</th>\r\n              <th>Competencies</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{resources}</tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Courses;\r\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Link } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\nimport './Profile.css';\nimport user_icon from './user_icon.png';\n\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nconst ProfileList = props => {\n  let history = useHistory();\n\n  const frameworkName = props.framework;\n  const frameworkVersion = props.version;\n  const [guestProfile, setGuestProfile] = useState();\n  const [profiles, setProfiles] = useState();\n  const [framework, setFramework] = useState();\n  const [userFrameworks, setUserFrameworks] = useState([]);\n  //const [userRole, setUserRole] = useState();\n\n  var profilesToCompare = [];\n\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n  var userName = localStorage.getItem('user')\n    ? localStorage.getItem('user')\n    : '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await setGuestProfile(JSON.parse(localStorage.getItem('guestProfile')));\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles/?_format=json&timestamp=${Date.now()}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfiles(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/authorisation/${userName}?_format=json`, {\n        method: 'GET',\n        credentials: 'include'\n      })\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setUserFrameworks(findresponse);\n        });\n    };\n\n    fetchData();\n  }, [framework, frameworkVersion, frameworkName, userName]);\n\n  const checkUserAccess = () => {\n    if (localStorage.getItem('roles')) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const setProfilesToCompare = e => {\n    if (profilesToCompare.length > 2) {\n      alert('You have to select two profiles to compare.');\n      return;\n    }\n\n    if (e.target.checked) {\n      profilesToCompare.push(e.target.getAttribute('data-profileid'));\n    } else {\n      profilesToCompare = profilesToCompare.filter(function(value, index, arr) {\n        return value !== e.target.getAttribute('data-profileid');\n      });\n    }\n  };\n\n  const redirectToCompare = e => {\n    e.preventDefault();\n    if (profilesToCompare.length !== 2) {\n      alert('You have to select two profiles to compare.');\n      return;\n    } else {\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n          profilesToCompare[0]\n        }/${profilesToCompare[1]}`\n      );\n    }\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    confirmAlert({\n      //   title: 'Delete my profile',\n      //   message: 'Are you sure you want to delete your profile? This action cannot be undone!!',\n      //   buttons: [\n      //     {\n      //       label: 'Yes',\n      //       onClick: () => localStorage.removeItem('guestProfile')\n      //     },\n      //     {\n      //       label: 'No',\n      //       onClick: () => alert('Profile not deleted')\n      //     }\n      //   ]\n      // });\n\n      customUI: ({ onClose }) => {\n        return (\n          <div className=\"react-confirm-alert-body\">\n            <h2>Delete my profile</h2>\n            <p>\n              Are you sure you want to delete your profile? This action cannot\n              be undone!!\n            </p>\n            <div className=\"react-confirm-alert-button-group\">\n              <button onClick={onClose}>No</button>\n              <button\n                onClick={() => {\n                  localStorage.removeItem('guestProfile');\n                  alert('Profile deleted');\n                  window.location.reload(false);\n                  onClose();\n                }}\n              >\n                Yes, Delete it!\n              </button>\n            </div>\n          </div>\n        );\n      }\n    });\n  };\n\n  const checkFMAccess = () => {\n    var temp = [];\n    if (userFrameworks.length > 0) {\n      userFrameworks.map(item => {\n        temp.push(item.toLowerCase());\n      });\n      if (temp.includes(frameworkName)) {\n        return true;\n      }\n      return false;\n    }\n  };\n  return (\n    <div>\n      <div className=\"introduction\">\n        <div className=\"vf-grid vf-grid__col-2\">\n          <div>\n            <h5>\n              <i class=\"icon icon-common icon-search-document\" /> Discover and\n              explore{' '}\n            </h5>\n            <p>Explore career profiles within this competency framework</p>\n          </div>\n          <div>\n            <h5>\n              <i class=\"icon icon-common icon-user-plus\" /> Create your own\n              profile\n            </h5>\n            <p>\n              Create your own profile and assess yourself against the\n              competencies\n            </p>\n          </div>\n\n          <div>\n            <h5>\n              <i class=\"icon icon-common icon-compare\" /> Compare profiles\n            </h5>\n            <p>\n              Compare your profile with other reference profiles to help you\n              make career choices based on your competencies and interests\n            </p>\n          </div>\n          <div>\n            <h5>\n              <i class=\"icon icon-common icon-tutorial\" /> Identify training\n              oportunities\n            </h5>\n            <p>Training opportunities will help boost your career</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"wrapper\">\n        <div className=\"vf-grid vf-grid__col-2\">\n          <div>\n            <h3>Career profiles</h3>\n          </div>\n          <div>\n            <span style={{ float: 'right' }}>\n              {localStorage.getItem('roles') && checkFMAccess() ? (\n                <span>\n                  <Link\n                    className=\"button secondary small action-buttons\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/`}\n                  >\n                    {' '}\n                    Create reference profile{' '}\n                    <i className=\"icon icon-common icon-user-plus\" />\n                  </Link>\n                  <Link\n                    onClick={e => redirectToCompare(e)}\n                    className=\"vf-button vf-button--tertiary vf-button--sm\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n                      profilesToCompare[0]\n                    }/${profilesToCompare[1]}`}\n                  >\n                    {' '}\n                    Compare selected profiles{' '}\n                    <i className=\"icon icon-common icon-compare\" />\n                  </Link>\n                </span>\n              ) : (\n                <span>\n                  <Link\n                    onClick={e => redirectToCompare(e)}\n                    className=\"vf-button vf-button--tertiary vf-button--sm\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n                      profilesToCompare[0]\n                    }/${profilesToCompare[1]}`}\n                  >\n                    {' '}\n                    Compare selected profiles{' '}\n                    <i className=\"icon icon-common icon-compare\" />\n                  </Link>\n                </span>\n              )}\n            </span>\n          </div>\n        </div>\n        <hr />\n        <div className=\"vf-grid vf-grid__col-3\">\n          {guestProfile ? (\n            <div class=\"vf-profile vf-profile--very-easy vf-profile--large vf-profile--block\">\n              <img\n                alt=\"profile\"\n                src={\n                  guestProfile.image[0] ? guestProfile.image[0].url : user_icon\n                }\n                class=\"vf-profile__image\"\n              />\n              <div class=\"row action-buttons-row my-profile-card\">\n                <h4>{guestProfile.job_title}</h4>\n                <Link\n                  style={{ marginRight: '20px' }}\n                  to={`/framework/${guestProfile.frameworkName}/${\n                    guestProfile.versionNumber\n                  }/profile/view/guest`}\n                >\n                  View profile <i class=\"icon icon-common icon-angle-right\" />\n                </Link>\n\n                <Link onClick={e => handleDelete(e)} to={`#`}>\n                  Delete profile <i class=\"icon icon-common icon-trash-alt\" />\n                </Link>\n\n                <span class=\"compare_checkbox\">\n                  <label>\n                    <input\n                      type=\"checkbox\"\n                      onClick={e => setProfilesToCompare(e)}\n                      data-profileid=\"guest\"\n                    />\n                    Click to compare\n                  </label>\n                  <span className=\"cm_badge\">Your profile</span>\n                </span>\n\n                <p\n                  style={{\n                    color: '#999',\n                    bottom: '-15px',\n                    position: 'relative'\n                  }}\n                >\n                  {guestProfile.frameworkName} - {guestProfile.versionNumber}\n                </p>\n              </div>\n            </div>\n          ) : (\n            <article class=\"vf-profile vf-profile--very-easy vf-profile--large vf-profile--block\">\n              <img alt=\"profile\" src={user_icon} class=\"vf-profile__image\" />\n\n              \n              <Link className=\"vf-button vf-button--primary vf-button--sm\"\n                to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/guest`}\n              >\n                Create your profile{' '}\n                <i class=\"icon icon-common icon-user-plus\" />\n              </Link>\n            </article>\n          )}\n          {/* </div> */}\n          {profiles\n            ? profiles.map((profile, index) => {\n                if (!checkUserAccess()) {\n                  if (profile.publishing_status === 'Live') {\n                    return (\n                      <div>\n                        <article class=\"vf-profile vf-profile--very-easy vf-profile--large vf-profile--block\">\n                          {profile.image[0] ? (\n                            <div className={profile.publishing_status}>\n                              <img\n                                alt=\"profile\"\n                                src={profile.image[0].url}\n                                className=\"vf-profile__image\"\n                              />\n                            </div>\n                          ) : (\n                            <img\n                              alt=\"profile\"\n                              src={user_icon}\n                              className=\"vf-profile__image\"\n                            />\n                          )}\n                            <h3 className=\"vf-profile__title\">\n                            {profile.job_title\n                              ?  <Link\n                              className=\"vf-profile__link\"\n                              to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${\n                                profile.id\n                              }${profile.url_alias}`}\n                            >\n                              {profile.job_title}\n                            </Link>\n                              : 'Job title'}\n                          </h3>\n                          {/* <Link\n                            className=\"vf-profile__link\"\n                            to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${\n                              profile.id\n                            }${profile.url_alias}`}\n                          >\n                            View profile{' '}\n                            <i class=\"icon icon-common icon-angle-right\" />\n                          </Link> */}\n                          <span>\n                            {' '}\n                            <label>\n                              <input\n                                type=\"checkbox\"\n                                onClick={e => setProfilesToCompare(e)}\n                                data-profileid={profile.id}\n                              />\n                              Click to compare\n                            </label>\n                          </span>\n                        </article>\n                      </div>\n                    );\n                  }\n                } else {\n                  return (\n                    <div>\n                      <div className=\"profile_badge\">\n                        <span>\n                          <label>\n                            <input\n                              type=\"checkbox\"\n                              onClick={e => setProfilesToCompare(e)}\n                              data-profileid={profile.id}\n                            />\n                            Click to compare\n                          </label>\n                        </span>\n                        <p className={profile.publishing_status}>\n                          {profile.image[0] ? (\n                            <img\n                              alt=\"profile\"\n                              src={profile.image[0].url}\n                              className=\"profile_img\"\n                            />\n                          ) : (\n                            <img\n                              alt=\"profile\"\n                              src={user_icon}\n                              className=\"profile_img\"\n                            />\n                          )}\n                        </p>\n\n                        <div className=\"row action-buttons-row my-profile-card\">\n                          <div>\n                            <h4>\n                              {profile.job_title\n                                ? profile.job_title\n                                : 'Job title'}\n                            </h4>\n                            <Link\n                              to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${\n                                profile.id\n                              }${profile.url_alias}`}\n                            >\n                              View profile{' '}\n                              <i class=\"icon icon-common icon-angle-right\" />\n                            </Link>\n                            <p>&nbsp;</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              })\n            : ''}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileList;\n","import React, { useEffect, useState } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport { CSVLink } from 'react-csv';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\n\nconst FAIRDownload = () => {\n  let http = new HttpService();\n  const [data, setData] = useState();\n  // const [data2, setData2] = useState();\n  const [headers, setHeaders] = useState();\n  const [filters, setFilters] = useState();\n  const [facets, setFacets] = useState('');\n  let history = useHistory();\n  let location = history.location;\n  const frameworkName = location.pathname.split('/')[2];\n  const frameworkVersion = location.pathname.split('/')[3];\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await http\n        .get(\n          `${apiUrl}/api/export/${frameworkName}/${frameworkVersion}?_format=json&filters=${facets}&timestamp=${Date.now()}`\n        )\n        .then(response => response.data);\n      setData(response.data);\n      setHeaders(response.headers);\n      setFilters(response.filters);\n    };\n    fetchData();\n  }, [facets, frameworkName, frameworkVersion, http]);\n\n  const facetClick = e => {\n    let target = e.target;\n    let temp = facets.split(\",\");\n    //temp.push();\n    if (target.checked) {\n      let index = temp.indexOf(e.target.name);\n      temp.splice(index, 1);\n      console.log(index);\n    } else {\n      temp.push(...facets, e.target.name);\n    }\n    setFacets(temp.join());\n  };\n\n  return (\n    <>\n      <div>\n        <div class=\"vf-u-margin__top--400\" />\n        <h3>Filter columns</h3>\n      </div>\n      <div className=\"vf-grid\">\n        <div>\n          <div class=\"vf-u-margin__top--400\" />\n          <h4>Identifiers</h4>\n          <form action=\"#\" class=\"vf-form | vf-search\">\n            {filters\n              ? filters.identifiers.map(filter => {\n                  return (\n                    <div class=\"vf-form__item vf-form__item--checkbox\">\n                      <input\n                        type=\"checkbox\"\n                        id={filter}\n                        name={filter}\n                        class=\"vf-form__checkbox\"\n                        checked={!facets.includes(filter)}\n                        onClick={e => facetClick(e)}\n                      />\n                      <label for={filter} class=\"vf-form__label\">\n                        {filter}\n                      </label>\n                    </div>\n                  );\n                })\n              : ''}\n          </form>\n        </div>\n        <div>\n          <div class=\"vf-u-margin__top--400\" />\n          <h4>Reference profiles</h4>\n          <form action=\"#\" class=\"vf-form | vf-search\">\n            <div class=\"vf-form__item\" style={{ columnCount: '2' }}>\n              {filters\n                ? filters.profiles.map(filter => {\n                    return (\n                      <div class=\"vf-form__item vf-form__item--checkbox\">\n                        <input\n                          type=\"checkbox\"\n                          id={filter}\n                          name={filter}\n                          class=\"vf-form__checkbox\"\n                          checked={!facets.includes(filter)}\n                          onClick={e => facetClick(e)}\n                        />\n                        <label for={filter} class=\"vf-form__label\">\n                          {filter}\n                        </label>\n                      </div>\n                    );\n                  })\n                : ''}\n            </div>\n          </form>\n        </div>\n        <div>\n          <div class=\"vf-u-margin__top--1600\" />\n          <CSVLink\n            className=\"vf-button vf-button--primary vf-button--sm\"\n            filename={frameworkName+\"_\"+frameworkVersion+'.csv'}\n            data={data ? data : ''}\n          >\n            Export\n          </CSVLink>\n        </div>\n      </div>\n      <div class=\"vf-u-margin__top--400\" />\n      <div>\n        <svg className=\"vf-icon-sprite vf-icon-sprite--tables\" display=\"none\">\n          <defs>\n            <g id=\"vf-table-sortable--up\">\n              <path\n                xmlns=\"http://www.w3.org/2000/svg\"\n                d=\"M17.485,5.062,12.707.284a1.031,1.031,0,0,0-1.415,0L6.515,5.062a1,1,0,0,0,.707,1.707H10.25a.25.25,0,0,1,.25.25V22.492a1.5,1.5,0,1,0,3,0V7.019a.249.249,0,0,1,.25-.25h3.028a1,1,0,0,0,.707-1.707Z\"\n              />\n            </g>\n            <g id=\"vf-table-sortable--down\">\n              <path\n                xmlns=\"http://www.w3.org/2000/svg\"\n                d=\"M17.7,17.838a1,1,0,0,0-.924-.617H13.75a.249.249,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0V16.971a.25.25,0,0,1-.25.25H7.222a1,1,0,0,0-.707,1.707l4.777,4.778a1,1,0,0,0,1.415,0l4.778-4.778A1,1,0,0,0,17.7,17.838Z\"\n              />\n            </g>\n            <g id=\"vf-table-sortable\">\n              <path\n                xmlns=\"http://www.w3.org/2000/svg\"\n                d=\"M9,19a1,1,0,0,0-.707,1.707l3,3a1,1,0,0,0,1.414,0l3-3A1,1,0,0,0,15,19H13.5a.25.25,0,0,1-.25-.25V5.249A.25.25,0,0,1,13.5,5H15a1,1,0,0,0,.707-1.707l-3-3a1,1,0,0,0-1.414,0l-3,3A1,1,0,0,0,9,5h1.5a.25.25,0,0,1,.25.25v13.5a.25.25,0,0,1-.25.25Z\"\n              />\n            </g>\n          </defs>\n        </svg>\n        <table className=\"vf-table vf-table--striped\">\n          <thead className=\"vf-table__header\">\n            <tr className=\"vf-table__row\">\n              {headers\n                ? headers.map(header => {\n                    return (\n                      <>\n                        <th className=\"vf-table__heading\">{header}</th>\n                      </>\n                    );\n                  })\n                : ''}\n            </tr>\n          </thead>\n          <tbody className=\"vf-table__body\">\n            {data ? (\n              data.map(data => {\n                return (\n                  <tr className=\"vf-table__row\">\n                    {headers\n                      ? headers.map(header => (\n                          <td className=\"vf-table__cell\">{data[header]}</td>\n                        ))\n                      : ''}\n                  </tr>\n                );\n              })\n            ) : (\n              <div>\n                <img alt=\"progress\" src=\"progressbar.gif\" />\n                <h4>Loading data...</h4>\n              </div>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n};\n\nexport default FAIRDownload;\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\nimport ProfileList from './ProfileList';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\nimport FAIRDownload from '../components/FAIRDownload';\r\n\r\nclass CompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkVersion: '',\r\n    frameworkName: '',\r\n    frameworkStatus: '',\r\n    frameworkDescription: '',\r\n    versions: [],\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false,\r\n    profileCount: 0,\r\n    attributeTypes: []\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework, version: frameworkVersion } = props.match.params;\r\n    if (\r\n      framework !== state.framework ||\r\n      frameworkVersion !== state.frameworkVersion\r\n    ) {\r\n      return {\r\n        framework,\r\n        frameworkVersion,\r\n        domains: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, version: frameworkVersion } = this.props.match.params;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.fetchFramework(framework, frameworkVersion),\r\n        this.fetchVersions(framework)\r\n      ]);\r\n\r\n      this.fetchProfiles();\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkVersion, domains, loadingError } = this.state;\r\n    if (\r\n      framework !== prevState.framework ||\r\n      frameworkVersion !== prevState.frameworkVersion\r\n    ) {\r\n      if (domains.length === 0 && !loadingError) {\r\n        try {\r\n          this.activeRequests.startRequest();\r\n          await this.fetchFramework(framework, frameworkVersion);\r\n        } catch (error) {\r\n          this.setState({ loadingError: true });\r\n        } finally {\r\n          this.activeRequests.finishRequest();\r\n        }\r\n      }\r\n      this.fetchProfiles();\r\n    }\r\n  }\r\n\r\n  fetchProfiles() {\r\n    const { framework, frameworkVersion } = this.state;\r\n    fetch(\r\n      `${apiUrl}/api/${framework}/${frameworkVersion}/profiles?_format=json&timestamp=${Date.now()}`\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findResponse => {\r\n        this.setState({\r\n          profileCount: findResponse.filter(\r\n            item => item.publishing_status === 'Live'\r\n          ).length\r\n        });\r\n      });\r\n  }\r\n\r\n  async fetchFramework(framework, frameworkVersion) {\r\n    window.scroll(0, 0);\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      frameworkVersion\r\n    );\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    const frameworkDescription = removeHtmlTags(frameworkData[0].description);\r\n\r\n    this.setState({\r\n      frameworkName: frameworkData[0].title,\r\n      //frameworkStatus: frameworkData[0].status,\r\n      frameworkDescription,\r\n      domains,\r\n      filteredDomains: domains\r\n    });\r\n\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase().replace(/ /g, '') === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const versionStatus = currentFramework[0].versions.filter(\r\n        vr => vr.number === frameworkVersion\r\n      );\r\n      this.setState({ frameworkStatus: versionStatus[0].status });\r\n      let attrTypes = currentFramework[0].attribute_types.map(\r\n        type => type.title\r\n      );\r\n      this.setState({ attributeTypes: attrTypes });\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase().replace(/ /g, '') === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkVersion,\r\n      frameworkName,\r\n      frameworkStatus,\r\n      frameworkDescription,\r\n      filteredDomains,\r\n      versions,\r\n      filter,\r\n      loadingError,\r\n      attributeTypes\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map(domain =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n          version={frameworkVersion}\r\n          attributeTypes={attributeTypes}\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\r\n          <ul class=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\r\n            <li class=\"vf-breadcrumbs__item\">\r\n              <Link to=\"/\" class=\"vf-breadcrumbs__link\">\r\n                Home\r\n              </Link>\r\n            </li>\r\n            <li class=\"vf-breadcrumbs__item\" aria-current=\"location\">\r\n            {frameworkName} - {frameworkVersion}\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n        <h1 style={{ color: '#000000' }}>{frameworkName}</h1>\r\n        <p>\r\n          <span className=\"vf-badge\">{frameworkVersion}</span>\r\n          <span className=\"vf-badge vf-badge--primary\"> {frameworkStatus}</span>\r\n        </p>\r\n        <p>{frameworkDescription}</p>\r\n\r\n        <Tabs>\r\n          <TabList>\r\n            {localStorage.getItem('roles') ? (\r\n              <Tab>Career profiles</Tab>\r\n            ) : this.state.profileCount > 0 ? (\r\n              <Tab>Career profiles</Tab>\r\n            ) : (\r\n              ''\r\n            )}\r\n\r\n            <Tab>Competencies</Tab>\r\n            <Tab>Export</Tab>\r\n            <Tab>Training resources</Tab>\r\n          </TabList>\r\n\r\n          {localStorage.getItem('roles') ? (\r\n            <TabPanel>\r\n              <ProfileList framework={framework} version={frameworkVersion} />\r\n              <FrameworkVersions framework={framework} versions={versions} />\r\n            </TabPanel>\r\n          ) : this.state.profileCount > 0 ? (\r\n            <TabPanel>\r\n              <ProfileList framework={framework} version={frameworkVersion} />\r\n              <FrameworkVersions framework={framework} versions={versions} />\r\n            </TabPanel>\r\n          ) : (\r\n            ''\r\n          )}\r\n\r\n          <TabPanel>\r\n            <form action=\"#\" class=\"vf-form | vf-search vf-search--inline\">\r\n              <div className=\"vf-form__item | vf-search__item\">\r\n                <label\r\n                  className=\"vf-form__label vf-u-sr-only | vf-search__label\"\r\n                  for=\"inlinesearchitem\"\r\n                >\r\n                  Inline search\r\n                </label>\r\n                <input\r\n                  type=\"search\"\r\n                  placeholder=\"Filter competencies\"\r\n                  id=\"inlinesearchitem\"\r\n                  className=\"vf-form__input | vf-search__input\"\r\n                  onChange={event => this.onFilter(event.target.value)}\r\n                  value={filter}\r\n                />\r\n              </div>\r\n            </form>\r\n            <table>{domainList}</table>\r\n            <FrameworkVersions framework={framework} versions={versions} />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <FAIRDownload />\r\n            <FrameworkVersions framework={framework} versions={versions} />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Courses framework={framework} version={frameworkVersion} />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass ResourceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      path: this.props.location.pathname.split('/'),\r\n      nid: '',\r\n      title: '',\r\n      dates: '',\r\n      dates2: '',\r\n      type: '',\r\n      description: '',\r\n      location: '',\r\n      url: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      keywords: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n    this.redirectTo = this.redirectTo.bind(this);\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ nid: this.state.path[3] });\r\n\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchResource = `${apiUrl}/node/${this.state.path[3]}?_format=json`;\r\n    //let fetchResource = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    //let fetchResource = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(fetchResource)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    //console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  redirectTo(event) {\r\n    this.props.history.push('/training-resources/' + this.state.nid);\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let nid = '';\r\n    let title = '';\r\n    let dates = '';\r\n    let dates2 = '';\r\n    let type = '';\r\n    let description = '';\r\n    let location = '';\r\n    let url = '';\r\n    let target_audience = '';\r\n    let learning_outcomes = '';\r\n    let keywords = '';\r\n    let organisers = '';\r\n    let trainers = '';\r\n\r\n    //this.state.data.forEach(item => {\r\n    //  if (item.id === this.state.nid) {\r\n    if (this.state.data.nid) {\r\n      let item = this.state.data;\r\n      nid = item.nid[0].value;\r\n      title = item.title[0].value;\r\n      dates = item.field_dates[0] ? item.field_dates[0].value : null;\r\n      dates2 = item.field_end_date[0] ? item.field_end_date[0].value : null;\r\n      type = item.field_type[0].value;\r\n      description = item.field_description[0]\r\n        ? item.field_description[0].value\r\n        : null;\r\n      location = item.field_location[0] ? item.field_location[0].value : null;\r\n      url = item.field_url[0] ? item.field_url[0].value : null;\r\n      target_audience = item.field_target_audience[0]\r\n        ? item.field_target_audience[0].value\r\n        : null;\r\n      learning_outcomes = item.field_learning_outcomes[0]\r\n        ? item.field_learning_outcomes[0].value\r\n        : null;\r\n      keywords = item.field_keywords[0] ? item.field_keywords[0].value : null;\r\n      organisers = item.field_organisers[0]\r\n        ? item.field_organisers[0].value\r\n        : null;\r\n      trainers = item.field_trainers[0] ? item.field_trainers[0].value : null;\r\n      //console.log(item.nid[0].value)\r\n    }\r\n\r\n    //  }\r\n    //});\r\n    if (this.state.data.nid) {\r\n      console.log(dates);\r\n      return (\r\n        <EditForm\r\n          nid={nid}\r\n          title={title}\r\n          dates={dates}\r\n          dates2={dates2}\r\n          type={type}\r\n          description={description}\r\n          location={location}\r\n          url={url}\r\n          target_audience={target_audience}\r\n          learning_outcomes={learning_outcomes}\r\n          keywords={keywords}\r\n          organisers={organisers}\r\n          trainers={trainers}\r\n          redirectTo={this.redirectTo}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass EditForm extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nid: this.props.nid,\r\n      title: this.props.title,\r\n      dates: this.props.dates,\r\n      dates2: this.props.dates2,\r\n      type: this.props.type,\r\n      description: this.props.description,\r\n      location: this.props.location,\r\n      url: this.props.url,\r\n      target_audience: this.props.target_audience,\r\n      learning_outcomes: this.props.learning_outcomes,\r\n      keywords: this.props.keywords,\r\n      organisers: this.props.organisers,\r\n      trainers: this.props.trainers,\r\n      redirect: false,\r\n      updateFlag: false,\r\n      csrf: ''\r\n    };\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleDates = this.handleDates.bind(this);\r\n    this.handleDates2 = this.handleDates2.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.handleDesc = this.handleDesc.bind(this);\r\n    this.handleLocation = this.handleLocation.bind(this);\r\n    this.handleURL = this.handleURL.bind(this);\r\n    this.handleTargetAudience = this.handleTargetAudience.bind(this);\r\n    this.handleLearningOutcomes = this.handleLearningOutcomes.bind(this);\r\n    this.handleKeywords = this.handleKeywords.bind(this);\r\n    this.handleOrganisers = this.handleOrganisers.bind(this);\r\n    this.handleTrainers = this.handleTrainers.bind(this);\r\n    //this.redirectTo = this.redirectTo.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  static contextTypes = {\r\n    router: PropTypes.object\r\n  };\r\n\r\n  handleTitle(event) {\r\n    this.setState({ title: event.value });\r\n  }\r\n\r\n  handleDates(event) {\r\n    this.setState({ dates: event.value });\r\n  }\r\n\r\n  handleDates2(event) {\r\n    this.setState({ dates2: event.value });\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ type: event.value });\r\n  }\r\n\r\n  handleDesc(event) {\r\n    this.setState({ description: event.editor.getData() });\r\n    //this.setState({ description: \"test\" });\r\n    //console.log(this.setState({ description: event.editor.getData() }));\r\n  }\r\n  handleLocation(event) {\r\n    this.setState({ location: event.value });\r\n  }\r\n  handleURL(event) {\r\n    this.setState({ url: event.value });\r\n  }\r\n\r\n  handleTargetAudience(event) {\r\n    this.setState({ target_audience: event.editor.getData() });\r\n    //this.setState({ target_audience: \"test\" });\r\n  }\r\n\r\n  handleLearningOutcomes(event) {\r\n    this.setState({ learning_outcomes: event.editor.getData() });\r\n    //this.setState({ learning_outcomes: \"hi\" });\r\n  }\r\n\r\n  handleKeywords(event) {\r\n    this.setState({ keywords: event.value });\r\n  }\r\n\r\n  handleOrganisers(event) {\r\n    this.setState({ organisers: event.editor.getData() });\r\n    //this.setState({ organisers: \"test\" });\r\n  }\r\n\r\n  handleTrainers(event) {\r\n    this.setState({ trainers: event.editor.getData() });\r\n    //this.setState({ trainers: \"test\" });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.props.history.push('all-training-resources');\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      // setTimeout(() => {\r\n      //  // this.props.redirectTo()\r\n      // }, 1000);\r\n      //await this.handleSubmit();\r\n      //this.props.redirectTo();\r\n    }\r\n  }\r\n\r\n  dateValidate(d1, d2) {\r\n    let date1 = new Date(d1);\r\n    let date2 = new Date(d2);\r\n\r\n    if (date1 > date2) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    let resourceID = this.state.nid;\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n\r\n    let type = this.refs.type.value;\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n    let keywords = this.refs.keywords.value;\r\n    let csrf = localStorage.getItem('csrf_token');\r\n\r\n    if (this.dateValidate(dates, dates2)) {\r\n      fetch(`${apiUrl}/node/` + resourceID + '?_format=hal_json', {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        cookies: 'x-access-token',\r\n        headers: {\r\n          Accept: 'application/hal+json',\r\n          'Content-Type': 'application/hal+json',\r\n          'X-CSRF-Token': csrf\r\n          //Authorization: 'Basic'\r\n        },\r\n        body: JSON.stringify({\r\n          _links: {\r\n            type: {\r\n              href: `${apiUrl}/rest/type/node/training_resource`\r\n            }\r\n          },\r\n          title: [\r\n            {\r\n              value: title\r\n            }\r\n          ],\r\n          field_dates: [\r\n            {\r\n              value: dates ? dates : null\r\n            }\r\n          ],\r\n          field_end_date: [\r\n            {\r\n              value: dates2 ? dates2 : null\r\n            }\r\n          ],\r\n          field_type: [\r\n            {\r\n              value: type\r\n            }\r\n          ],\r\n          field_description: [\r\n            {\r\n              value: description,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_location: [\r\n            {\r\n              value: location\r\n            }\r\n          ],\r\n          field_url: [\r\n            {\r\n              value: url\r\n            }\r\n          ],\r\n          field_target_audience: [\r\n            {\r\n              value: target_audience,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_learning_outcomes: [\r\n            {\r\n              value: learning_outcomes,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_keywords: [\r\n            {\r\n              value: keywords\r\n            }\r\n          ],\r\n          field_organisers: [\r\n            {\r\n              value: organisers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_trainers: [\r\n            {\r\n              value: trainers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          type: [\r\n            {\r\n              target_id: 'training_resource'\r\n            }\r\n          ]\r\n        })\r\n      });\r\n      setTimeout(() => {\r\n        this.props.redirectTo();\r\n      }, 1000);\r\n    } else {\r\n      alert('Incorrect dates');\r\n    }\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <p>\r\n          <nav>\r\n            <Link to={`/`}>Home</Link> /{' '}\r\n            <Link to={`/all-training-resources`}>All training resources</Link> /\r\n            Edit resource{' '}\r\n          </nav>\r\n        </p>\r\n        <h2>Edit Training Resources</h2>\r\n        <p>(* fields are mandatory)</p>\r\n        <p style={{ float: 'right' }}>\r\n          <Link to={`/training-resources/${this.state.nid}`}>\r\n            {' '}\r\n            <i class=\"fas fa-eye\" /> View{' '}\r\n          </Link>\r\n        </p>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_edit_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title *</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"title\"\r\n                    id={'title'}\r\n                    value={this.state.title}\r\n                    onChange={this.handleTitle.bind(this)}\r\n                    required\r\n                    placeholder=\"Title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates\"\r\n                    value={this.state.dates}\r\n                    onChange={this.handleDates.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates2\"\r\n                    value={this.state.dates2}\r\n                    onChange={this.handleDates2.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type *</strong>\r\n                  <select\r\n                    ref={'type'}\r\n                    value={this.state.type}\r\n                    onChange={this.handleType.bind(this)}\r\n                  >\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.handleDesc\r\n                    }}\r\n                    onChange={this.handleDesc}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" value={this.state.description} onChange={this.handleDesc.bind(this)} required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"location\"\r\n                    value={this.state.location}\r\n                    onChange={this.handleLocation.bind(this)}\r\n                    placeholder=\"Location\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL *</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"url\"\r\n                    value={this.state.url}\r\n                    onChange={this.handleURL.bind(this)}\r\n                    required\r\n                    placeholder=\"URL\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.handleTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"target_audience\" value={this.state.target_audience} onChange={this.handleTargetAudience.bind(this)} required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.handleLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" value={this.state.learning_outcomes} onChange={this.handleLearningOutcomes.bind(this)} required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.handleOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" value={this.state.organisers} onChange={this.handleOrganisers.bind(this)} required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.handleTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" value={this.state.trainers} onChange={this.handleTrainers.bind(this)} required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"keywords\"\r\n                    value={this.state.keywords}\r\n                    onChange={this.handleKeywords.bind(this)}\r\n                    placeholder=\"Keywords\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Update\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/edit/:nid\" component={ResourceEdit} />\r\n  </Switch>\r\n);\r\n\r\nexport default EditResources;\r\n","import React from 'react';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport FileUpload from './FileUpload';\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceCreate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //this.onChange = this.onChange.bind(this);\r\n    this.changeDescription = this.changeDescription.bind(this);\r\n    this.changeTargetAudience = this.changeTargetAudience.bind(this);\r\n    this.changeLearningOutcomes = this.changeLearningOutcomes.bind(this);\r\n    this.changeOrganisers = this.changeOrganisers.bind(this);\r\n    this.changeTrainers = this.changeTrainers.bind(this);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      content: 'content',\r\n      description: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.props.history.push('/all-training-resources');\r\n        //this.setState({'updateFlag': false});\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  dateValidate(d1, d2) {\r\n    let date1 = new Date(d1);\r\n    let date2 = new Date(d2);\r\n\r\n    if (date1 > date2) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = 'Online';\r\n    if (this.refs.type.value) {\r\n      type = this.refs.type.value;\r\n    }\r\n\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let keywords = this.refs.keywords.value;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n\r\n    let token = localStorage.getItem('csrf_token');\r\n\r\n    //alert(learning_outcomes);\r\n    if (this.dateValidate(dates, dates2)) {\r\n      fetch(`${apiUrl}/node?_format=hal_json`, {\r\n        credentials: 'include',\r\n        method: 'POST',\r\n        cookies: 'x-access-token',\r\n        headers: {\r\n          Accept: 'application/hal+json',\r\n          'Content-Type': 'application/hal+json',\r\n          'X-CSRF-Token': token,\r\n          Authorization: 'Basic'\r\n        },\r\n        body: JSON.stringify({\r\n          _links: {\r\n            type: {\r\n              href: `${apiUrl}/rest/type/node/training_resource`\r\n            }\r\n          },\r\n          title: [\r\n            {\r\n              value: title\r\n            }\r\n          ],\r\n          field_dates: [\r\n            {\r\n              value: dates ? dates : null\r\n            }\r\n          ],\r\n          field_end_date: [\r\n            {\r\n              value: dates2 ? dates2 : null\r\n            }\r\n          ],\r\n          field_type: [\r\n            {\r\n              value: type\r\n            }\r\n          ],\r\n          field_description: [\r\n            {\r\n              value: description,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_location: [\r\n            {\r\n              value: location\r\n            }\r\n          ],\r\n          field_url: [\r\n            {\r\n              value: url\r\n            }\r\n          ],\r\n          field_target_audience: [\r\n            {\r\n              value: target_audience,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_learning_outcomes: [\r\n            {\r\n              value: learning_outcomes,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_keywords: [\r\n            {\r\n              value: keywords\r\n            }\r\n          ],\r\n          field_organisers: [\r\n            {\r\n              value: organisers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n          field_trainers: [\r\n            {\r\n              value: trainers,\r\n              format: 'basic_html'\r\n            }\r\n          ],\r\n\r\n          type: [\r\n            {\r\n              target_id: 'training_resource'\r\n            }\r\n          ]\r\n        })\r\n      })\r\n        .then(response => response.json())\r\n        .then(data =>\r\n          this.props.history.push(`/training-resources/${data.nid[0].value}`)\r\n        );\r\n    } else {\r\n      alert('Incorrect dates');\r\n    }\r\n\r\n    //event.target.reset();\r\n    //this.setState({ updateFlag: true });\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <p>\r\n          <nav>\r\n            <Link to={`/`}>Home</Link> /{' '}\r\n            <Link to={`/all-training-resources`}>All training resources</Link> /\r\n            Create resource{' '}\r\n          </nav>\r\n        </p>\r\n        <h2>Create Training Resource</h2>\r\n        <p>(* fields are mandatory)</p>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_create_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title *</strong>\r\n                  <input type=\"text\" ref=\"title\" required placeholder=\"Title\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Start Date</strong>\r\n                  <input type=\"date\" ref=\"dates\" placeholder=\"Date\" />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>End Date</strong>\r\n                  <input type=\"date\" ref=\"dates2\" placeholder=\"Date\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type *</strong>\r\n                  <select ref={'type'}>\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.changeDescription\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input type=\"text\" ref=\"location\" placeholder=\"Location\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL *</strong>\r\n                  <input type=\"url\" ref=\"url\" required placeholder=\"URL\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.changeTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<input type=\"text\" ref=\"target_audience\" required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.changeLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.changeOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.changeTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input type=\"text\" ref=\"keywords\" placeholder=\"Keywords\" />\r\n                </div>\r\n              </div>\r\n\r\n              {/* <div id=\"fileupload\" className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>File upload</strong>\r\n                  <FileUpload />\r\n                </div>\r\n              </div> */}\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/create\" component={ResourceCreate} />\r\n  </Switch>\r\n);\r\n\r\nexport default CreateResources;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dropzone from 'react-dropzone';\n\nclass FileUpload extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Dropzone\n        onDrop={acceptedFiles => {\n          console.log(acceptedFiles);\n          const reader = new FileReader();\n\n          reader.onabort = () => console.log('file reading was aborted');\n          reader.onerror = () => console.log('file reading has failed');\n          reader.onload = () => {\n            // Do whatever you want with the file contents\n            const binaryStr = reader.result;\n            console.log(binaryStr);\n          };\n          document.getElementById('fileupload').append(acceptedFiles[0].name);\n          acceptedFiles.forEach(file => reader.readAsArrayBuffer(file));\n        }}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <section>\n            <div {...getRootProps()}>\n              <input {...getInputProps()} />\n              <a href=\"#\">Click to upload image</a>\n            </div>\n          </section>\n        )}\n      </Dropzone>\n    );\n  }\n}\n\nexport default FileUpload;\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nconst $ = window.$;\r\n\r\nclass AttributeMap extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      //framework: this.props.selectedFramework,\r\n      //resourceID: this.props.resourceID,\r\n      framework: this.props.location.pathname.split('/')[4],\r\n      resourceID: this.props.location.pathname.split('/')[2],\r\n      frameworkdetails: [],\r\n      csrf: '',\r\n      frameworkUUID: '',\r\n      competencies: [],\r\n      //attributes: this.props.selectedAttributes,\r\n      //selectedAttributes: this.props.selectedAttributes,\r\n      selectedAttributes: [],\r\n      //selectedCompetencies: this.props.selectedCompetencies,\r\n      resourceDetails: '',\r\n      resourcePath: this.props.location.pathname.split('/')\r\n    };\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    //this.loadSelectedAttributes = this.loadSelectedAttributes.bind(this);\r\n  }\r\n\r\n  async handleSelect() {\r\n    let checkedAttributes = this.state.selectedAttributes;\r\n    let attributeIDs = [];\r\n    let token = localStorage.getItem('csrf_token');\r\n    for (let i = 0; i < checkedAttributes.length; i++) {\r\n      attributeIDs.push(checkedAttributes[i].split('id', 2));\r\n    }\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.competencyService.attrmap(this.state.resourceID, attributeIDs)\r\n      ]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n      this.props.history.push('/training-resources/' + this.state.resourceID);\r\n    }\r\n  }\r\n\r\n  handleAllCheck(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let childItems = document.getElementsByName(id);\r\n    if (e.target.checked) {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        childItems[i].checked = true;\r\n        selectedAttributes.push(\r\n          // childItems[i].getAttribute('data-uuid') +\r\n          //   'id' +\r\n          childItems[i].getAttribute('data-id')\r\n        );\r\n        this.setState({ selectedAttributes });\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        if (childItems[i].checked === true) {\r\n          childItems[i].checked = false;\r\n          //selectedAttributes.pop(childItems[i].getAttribute('data-id'));\r\n          //let index = array.indexOf(element);\r\n          selectedAttributes.splice(\r\n            selectedAttributes.indexOf(childItems[i]),\r\n            1\r\n          );\r\n          this.setState({ selectedAttributes });\r\n          //console.log(this.state.selectedAttributes);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAttributeClick(id, uuid, e) {\r\n    let selectedAttributes = this.state.selectedAttributes;\r\n    //let selectedAttributes =\r\n    let isChecked = e.target.checked;\r\n    if (isChecked) {\r\n      //selectedAttributes.push(uuid + 'id' + id);\r\n      selectedAttributes.push(id);\r\n      this.setState({ selectedAttributes });\r\n      document.getElementById(e.target.name).checked = true;\r\n      console.log(selectedAttributes);\r\n    } else {\r\n      //selectedAttributes.pop(id);\r\n      selectedAttributes.splice(selectedAttributes.indexOf(id), 1);\r\n      this.setState({ selectedAttributes });\r\n      if (!$(':checkbox[name=' + e.target.name + ']').is(':checked')) {\r\n        document.getElementById(e.target.name).checked = false;\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleListAllChecked(e) {\r\n    let lists = [];\r\n    $(':checkbox').each(function() {\r\n      if ($(this).is(':checked')) {\r\n        lists.push($(this).attr('id'));\r\n      }\r\n    });\r\n    alert(lists);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(\r\n      `${apiUrl}` +\r\n        '/api/resources/?_format=hal_json&id=' +\r\n        this.state.resourceID +\r\n        '&timestamp=' +\r\n        Date.now()\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resourceDetails: findresponse\r\n        });\r\n      });\r\n\r\n    console.log(this.state.resourceDetails);\r\n\r\n    let selectedAttributes = [];\r\n    this.state.resourceDetails.competency_profile.map(profile => {\r\n      //if(profile.title.toLowerCase() == this.state.framewor  k){\r\n      profile.domains.map(domain => {\r\n        domain.competencies.map(competency => {\r\n          competency.attributes.map(attribute => {\r\n            selectedAttributes.push(attribute.id);\r\n          });\r\n        });\r\n      });\r\n      //}\r\n    });\r\n\r\n    this.setState({ selectedAttributes: selectedAttributes });\r\n\r\n    //console.log(this.state.framework);\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchFrameworkDetails = `${apiUrl}/api/version_manager?_format=json&timestamp=${Date.now()}`;\r\n    await fetch(fetchFrameworkDetails)\r\n      .then(Response => Response.json())\r\n      .then(findresponse1 => {\r\n        this.setState({\r\n          frameworkdetails: findresponse1\r\n        });\r\n      });\r\n\r\n    let latest_version = '';\r\n\r\n    this.state.frameworkdetails.map(detail => {\r\n      if (detail.title.toLowerCase() == this.state.framework) {\r\n        detail.versions.map(version => {\r\n          if (version.status == 'live') {\r\n            latest_version = version.number;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    let fetchCompetencyList =\r\n      `${apiUrl}` +\r\n      '/api/' +\r\n      this.state.framework +\r\n      '/' +\r\n      latest_version +\r\n      '?_format=json';\r\n    console.log(fetchCompetencyList);\r\n    await fetch(fetchCompetencyList)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n\r\n    //this.loadSelectedAttributes();\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.state.attributes === nextState.attributes;\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.state.data);\r\n    let frameworkDetails = this.state.frameworkdetails;\r\n    let data = this.state.data;\r\n    let frameworkDefs = [];\r\n    let domainsOptions = [];\r\n    let attributeTypeOptions = [];\r\n    let resDetails = this.state.resourceDetails;\r\n    //let resDetails = this.state.resourceDetails;\r\n    let selectedAttributesArray = [];\r\n    let selectedCompetenciesArray = [];\r\n    if (resDetails) {\r\n      resDetails.competency_profile.map(profile => {\r\n        profile.domains.map(domain => {\r\n          domain.competencies.map(competency => {\r\n            selectedCompetenciesArray.push(competency.id);\r\n            competency.attributes.map(attribute => {\r\n              selectedAttributesArray.push(attribute.id);\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      //console.log(selectedAttributesArray);\r\n    }\r\n    //this.loadSelectedAttributes();\r\n\r\n    frameworkDetails.forEach((item, ikey) => {\r\n      if (item.title.toLowerCase() === this.state.framework) {\r\n        //this.state.frameworkUUID = item.uuid;\r\n        item.attribute_types.forEach(attribute_type => {\r\n          frameworkDefs.push(attribute_type.title);\r\n          attributeTypeOptions.push(\r\n            <option data-id={attribute_type.id} value={attribute_type.uuid}>\r\n              {attribute_type.title}\r\n            </option>\r\n          );\r\n        });\r\n        item.domains.forEach(domain => {\r\n          domainsOptions.push(\r\n            <option data-id={domain.id} value={domain.uuid}>\r\n              {domain.title}\r\n            </option>\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    // console.log(data);\r\n\r\n    const ListOfCompetencies = data.map(item =>\r\n      item.domains.map((domain, did) => (\r\n        <tbody>\r\n          <tr key={domain.nid}>\r\n            <td>{did + 1}</td>{' '}\r\n            <td>\r\n              <strong> {domain.title}</strong>{' '}\r\n            </td>{' '}\r\n          </tr>\r\n          {domain.competencies.map((competency, cid) => (\r\n            <tr key={competency.id}>\r\n              <td>\r\n                {did + 1}.{cid + 1}\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type={'checkbox'}\r\n                  defaultChecked={\r\n                    -1 !== selectedCompetenciesArray.indexOf(competency.id)\r\n                  }\r\n                  data-test={competency.uuid}\r\n                  id={competency.id}\r\n                  onChange={this.handleAllCheck.bind(\r\n                    this,\r\n                    competency.id,\r\n                    competency.uuid\r\n                  )}\r\n                />{' '}\r\n                {competency.title}\r\n                <ul style={{ marginLeft: 1 + 'em', marginBottom: 1 + 'em' }}>\r\n                  {frameworkDefs.map(def => {\r\n                    return (\r\n                      <div style={{ marginLeft: 1 + 'em' }}>\r\n                        <div>\r\n                          {' '}\r\n                          <strong>\r\n                            <em>{def}</em>\r\n                          </strong>\r\n                        </div>\r\n                        {competency.attributes\r\n                          .filter(attribute => attribute.type === def)\r\n                          .map(attribute => {\r\n                            return (\r\n                              <li\r\n                                key={attribute.id}\r\n                                style={{ marginLeft: 1 + 'em' }}\r\n                              >\r\n                                <input\r\n                                  type={'checkbox'}\r\n                                  defaultChecked={\r\n                                    -1 !==\r\n                                    selectedAttributesArray.indexOf(\r\n                                      //attribute.uuid + 'id' + attribute.id\r\n                                      attribute.id\r\n                                    )\r\n                                  }\r\n                                  name={competency.id}\r\n                                  data-id={attribute.id}\r\n                                  data-uuid={attribute.uuid}\r\n                                  id={attribute.id}\r\n                                  onChange={this.handleAttributeClick.bind(\r\n                                    this,\r\n                                    attribute.id,\r\n                                    attribute.uuid\r\n                                  )}\r\n                                />{' '}\r\n                                <span className={attribute.archived}>\r\n                                  {' '}\r\n                                  {attribute.title}\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          })}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          <tr>\r\n            <td>\r\n              <td />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      ))\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <h2>{resDetails.title}</h2>\r\n        <h4>Type: {resDetails.type}</h4>\r\n        <h4>URL: {resDetails.url}</h4>\r\n        <table className={'table'}>{ListOfCompetencies}</table>\r\n        <div id={'footer-button'}>\r\n          <button className={'button'} onClick={this.handleSelect.bind(this)}>\r\n            {' '}\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst AttrMap = () => (\r\n  <Switch>\r\n    <Route\r\n      exact\r\n      path=\"/training-resources/:id/map/:framework\"\r\n      component={AttributeMap}\r\n    />\r\n  </Switch>\r\n);\r\n\r\nexport default AttrMap;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport { Link } from 'react-router-dom';\n\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)'\n  }\n};\n\n// Make sure to bind modal to your appElement (http://reactcommunity.org/react-modal/accessibility/)\nModal.setAppElement('#root');\n\nclass ItemVersions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalIsOpen: false\n    };\n\n    this.openModal = this.openModal.bind(this);\n    // this.afterOpenModal = this.afterOpenModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  openModal() {\n    this.setState({ modalIsOpen: true });\n  }\n\n  // afterOpenModal() {\n  //   // references are now sync'd and can be accessed.\n  //   this.subtitle.style.color = '#f00';\n  // }\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  render() {\n    return (\n      <span>\n        <button onClick={this.openModal}>\n          {' '}\n          <i className={'fa fa-question-circle'} />{' '}\n        </button>\n        <Modal\n          isOpen={this.state.modalIsOpen}\n          onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n        >\n          <button className={'float-right'} onClick={this.closeModal}>\n            <i className={'fa fa-window-close'} />\n          </button>\n          <p />\n          <div className={'callout'}>\n            This item is deprecated in the latest version of this framework.\n            Please see the\n            <Link\n              to={`/framework/${this.props.framework.toLowerCase()}/${\n                this.props.version\n              }`}\n            >\n              {' '}\n              release notes\n            </Link>\n          </div>\n        </Modal>\n      </span>\n    );\n  }\n}\n\nexport default ItemVersions;\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport AttributeMap from './AttributeMap';\r\nimport Parser from 'html-react-parser';\r\nimport ItemVersions from '../containers/framework-versions/VersionNotice';\r\nimport { apiUrl } from '../services/http/http';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ResourceDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resource: [],\r\n      frameworks: [],\r\n      resourcePath: this.props.location.pathname.split('/'),\r\n      showModal: false,\r\n      selectedFramework: '',\r\n      updateFlag: ''\r\n    };\r\n    this.handleOpenModal = this.handleOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n  }\r\n\r\n  handleOpenModal(event, temp) {\r\n    this.setState({ showModal: true });\r\n    this.setState({ selectedFramework: event });\r\n    temp.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.setState({ showModal: false });\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //&timestamp=${Date.now()}\r\n\r\n    /*let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=hal_json`;*/\r\n    let resourcesURL = `${apiUrl}/api/resources/?_format=json&id=${\r\n      this.state.resourcePath[2]\r\n    }&timestamp=${Date.now()}`;\r\n    console.log(resourcesURL);\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse3 => {\r\n        this.setState({ resource: findresponse3 });\r\n      });\r\n\r\n    //fetch(`${apiUrl}/api/v1/framework?_format=json`)\r\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  mappingBlock() {\r\n    if (localStorage.getItem('roles')) {\r\n      if (localStorage.getItem('roles').includes('content_manager')) {\r\n        return (\r\n          <div className={'callout white-color industry-background'}>\r\n            <strong> Manage competency profile </strong>\r\n            <ul>\r\n              {this.state.frameworks.map((item, id) => {\r\n                return (\r\n                  <li style={{ display: 'inline', margin: '5px' }}>\r\n                    <a\r\n                      href={\r\n                        '/training-resources/' +\r\n                        this.state.resourcePath[2] +\r\n                        '/map/' +\r\n                        item.title.toLowerCase()\r\n                      }\r\n                    >\r\n                      {' '}\r\n                      <i className=\"fas fa-tags\" /> {item.title}{' '}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  formatDates(start, end) {\r\n    let months = [\r\n      'January',\r\n      'February',\r\n      'March',\r\n      'April',\r\n      'May',\r\n      'June',\r\n      'July',\r\n      'August',\r\n      'September',\r\n      'October',\r\n      'November',\r\n      'December'\r\n    ];\r\n\r\n    let start_dt = new Date(start);\r\n    let end_date = new Date(end);\r\n\r\n    let start_day = start_dt.getDate();\r\n    let start_month = start_dt.getMonth();\r\n    let start_year = start_dt.getFullYear();\r\n\r\n    if (end) {\r\n      let end_day = end_date.getDate();\r\n      let end_month = end_date.getMonth();\r\n      let end_year = end_date.getFullYear();\r\n\r\n      if (start_year === end_year) {\r\n        if (start_month === end_month) {\r\n          if (start_day === end_day) {\r\n            return start_day + ' ' + months[start_month] + ' ' + start_year;\r\n          } else {\r\n            return (\r\n              start_day +\r\n              ' - ' +\r\n              end_day +\r\n              ' ' +\r\n              months[start_month] +\r\n              ' ' +\r\n              start_year\r\n            );\r\n          }\r\n        } else {\r\n          return (\r\n            start_day +\r\n            ' ' +\r\n            months[start_month] +\r\n            ' - ' +\r\n            end_day +\r\n            ' ' +\r\n            months[end_month] +\r\n            ' ' +\r\n            start_year\r\n          );\r\n        }\r\n      } else {\r\n        return (\r\n          start_day +\r\n          ' ' +\r\n          months[start_month] +\r\n          ' ' +\r\n          start_year +\r\n          ' - ' +\r\n          end_day +\r\n          ' ' +\r\n          months[end_month] +\r\n          ' ' +\r\n          end_year\r\n        );\r\n      }\r\n    } else {\r\n      return start_day + ' ' + months[start_month] + ' ' + start_year;\r\n    }\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      return false;\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let attributes = [];\r\n    let selectedCompetencies = [];\r\n    let attribute_types = [];\r\n    let item = this.state.resource;\r\n    let frameworkLiveVersion = '';\r\n\r\n    let link = '/bioexcel/1.1';\r\n    let check_array = Array.isArray(item.competency_profile);\r\n    const Resource = (\r\n      <div>\r\n        <div>\r\n          <div className={'row'}>\r\n            <h2>{item.title}</h2>\r\n            {this.checkUser() ? (\r\n              <span className=\"float-right\">\r\n                {' '}\r\n                <Link\r\n                  to={'/training-resource/edit/' + this.state.resourcePath[2]}\r\n                >\r\n                  {' '}\r\n                  <i class=\"fas fa-edit\" /> Edit{' '}\r\n                </Link>\r\n              </span>\r\n            ) : (\r\n              ''\r\n            )}\r\n          </div>\r\n\r\n          <div className={'row'}>\r\n            <div className={'column large-9'}>\r\n              <div className={'callout'}>\r\n                {item.dates ? (\r\n                  <span>\r\n                    <strong>Date:</strong>{' '}\r\n                    {this.formatDates(item.dates, item.end_date)}\r\n                  </span>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.keywords ? (\r\n                  <p>\r\n                    <strong>Keywords:</strong> {item.keywords}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.location ? (\r\n                  <p>\r\n                    <strong>Location:</strong> {item.location}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.type ? (\r\n                  <p>\r\n                    <strong>Type:</strong> {item.type}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.url ? (\r\n                  <p>\r\n                    <strong> URL: </strong>{' '}\r\n                    <a href={item.url} target={'_blank'}>\r\n                      {item.url}\r\n                    </a>\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n              </div>\r\n              <h3>Overview</h3>\r\n              {item.description ? Parser(item.description) : ''}\r\n\r\n              {item.target_audience\r\n                ? Parser('<h3>Target Audience</h3>' + item.target_audience)\r\n                : ''}\r\n              {item.learning_outcomes\r\n                ? Parser('<h3>Learning Outcomes</h3>' + item.learning_outcomes)\r\n                : ''}\r\n              {item.organisers\r\n                ? Parser('<h3>Organizers</h3>' + item.organisers)\r\n                : ''}\r\n\r\n              {item.trainers ? Parser('<h3>Trainers</h3>' + item.trainers) : ''}\r\n              <h3>Competency Profile</h3>\r\n\r\n              <table className={'hover'}>\r\n                <tbody>\r\n                  {check_array\r\n                    ? item.competency_profile.map(profile => {\r\n                        return (\r\n                          <tr>\r\n                            {this.state.frameworks.map(framework => {\r\n                              if (framework.nid === profile.id) {\r\n                                framework.attribute_types.map(type =>\r\n                                  attribute_types.push(type.title)\r\n                                );\r\n                                frameworkLiveVersion = framework.versions.find(\r\n                                  version => version.status === 'live'\r\n                                );\r\n                              }\r\n\r\n                              return null;\r\n                            })}\r\n                            <td>\r\n                              <h4>{profile.title}</h4>\r\n                            </td>\r\n                            <td>\r\n                              {profile.domains.map(domain => (\r\n                                <div>\r\n                                  <h5>{domain.title}</h5>\r\n                                  <ul>\r\n                                    {domain.competencies.map(competency => (\r\n                                      <li>\r\n                                        <span\r\n                                          className={\r\n                                            competency.archived === 'archived'\r\n                                              ? 'archived'\r\n                                              : ''\r\n                                          }\r\n                                        >\r\n                                          {competency.title}\r\n                                          {competency.archived ===\r\n                                          'archived' ? (\r\n                                            <ItemVersions\r\n                                              framework=\"bioexcel\"\r\n                                              versions={link}\r\n                                            />\r\n                                          ) : (\r\n                                            ''\r\n                                          )}\r\n                                        </span>\r\n                                        <ul>\r\n                                          {attribute_types.map(type => (\r\n                                            <span>\r\n                                              {competency.attributes.map(\r\n                                                attribute => {\r\n                                                  if (attribute.type === type) {\r\n                                                    return (\r\n                                                      <li>\r\n                                                        {' '}\r\n                                                        <em>{type}</em> -{' '}\r\n                                                        <span\r\n                                                          className={\r\n                                                            attribute.archived ===\r\n                                                            'archived'\r\n                                                              ? 'archived'\r\n                                                              : ''\r\n                                                          }\r\n                                                        >\r\n                                                          {attribute.title}\r\n                                                          {attribute.archived ===\r\n                                                          'archived' ? (\r\n                                                            <ItemVersions\r\n                                                              framework={\r\n                                                                profile.title\r\n                                                              }\r\n                                                              version={\r\n                                                                frameworkLiveVersion.number\r\n                                                              }\r\n                                                            />\r\n                                                          ) : (\r\n                                                            ''\r\n                                                          )}\r\n                                                          {attribute.archived ===\r\n                                                          'archived' ? (\r\n                                                            <a\r\n                                                              href={\r\n                                                                '/training-resources/' +\r\n                                                                item.id +\r\n                                                                '/demap/' +\r\n                                                                attribute.id\r\n                                                              }\r\n                                                            >\r\n                                                              <i class=\"fas fa-times-circle\" />\r\n                                                            </a>\r\n                                                          ) : (\r\n                                                            ''\r\n                                                          )}\r\n                                                        </span>\r\n                                                      </li>\r\n                                                    );\r\n                                                  }\r\n                                                  return null;\r\n                                                }\r\n                                              )}\r\n                                            </span>\r\n                                          ))}\r\n                                        </ul>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              ))}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : ''}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div\r\n              className={\r\n                'column large-3 callout industry-background white-color'\r\n              }\r\n            >\r\n              <h3>More information</h3>\r\n              <p>No data available</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={'row'}>\r\n        <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\r\n                <ul class=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\r\n                  <li class=\"vf-breadcrumbs__item\">\r\n                    <Link to=\"/\" class=\"vf-breadcrumbs__link\">\r\n                      Home\r\n                    </Link>\r\n                  </li>                  \r\n                  <li class=\"vf-breadcrumbs__item\" aria-current=\"location\">\r\n                      Training resource\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n        {this.checkUser() ? (\r\n          <p>\r\n            <nav>\r\n              <Link to={`/`}>Home</Link> /{' '}\r\n              <Link to={`/all-training-resources`}>All training resources</Link>\r\n            </nav>\r\n          </p>\r\n        ) : (\r\n          ''\r\n        )}\r\n\r\n        <div className={'column large-12'}>\r\n          {Resource}\r\n          {this.mappingBlock()}\r\n        </div>\r\n\r\n        <div style={{ overflow: 'scroll' }}>\r\n          <ReactModal\r\n            isOpen={this.state.showModal}\r\n            className=\"Modal\"\r\n            overlayClassName=\"Overlay\"\r\n            contentLabel=\"Minimal Modal Example\"\r\n          >\r\n            <div>\r\n              <h2 style={{ 'text-align': 'center' }}>\r\n                Manage competency profile for{' '}\r\n                {this.state.selectedFramework.toUpperCase()}{' '}\r\n                <i\r\n                  className=\"fas fa-window-close float-right\"\r\n                  data-close\r\n                  onClick={this.handleCloseModal}\r\n                />{' '}\r\n              </h2>\r\n            </div>\r\n            <table>\r\n              <AttributeMap\r\n                selectedCompetencies={selectedCompetencies}\r\n                selectedAttributes={attributes}\r\n                selectedFramework={this.state.selectedFramework}\r\n                resourceID={this.state.resourcePath[2]}\r\n                handleCloseModal={this.handleCloseModal}\r\n              />\r\n            </table>\r\n          </ReactModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ResDetails = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resources/:id\" component={ResourceDetails} />\r\n  </Switch>\r\n);\r\n\r\nexport default ResDetails;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourcesList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      filterType: '',\r\n      filterMapping: '',\r\n      userid: ''\r\n    };\r\n    this.archiveHandle = this.archiveHandle.bind(this);\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    //console.log(localStorage.getItem('roles'));\r\n    //console.log(localStorage.getItem('userid'));\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resources: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  checkAuthor(author_id) {\r\n    let userid = localStorage.getItem('userid');\r\n    if (userid == author_id) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n    //console.log(localStorage.getItem('userid'));\r\n  }\r\n\r\n  filter(e) {\r\n    this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  filterTypeHandle(e) {\r\n    this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  filterMappingHandle(e) {\r\n    if (this.state.filterMapping) {\r\n      this.setState({ filterMapping: 0 });\r\n    } else {\r\n      this.setState({ filterMapping: 1 });\r\n    }\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    //alert(\"competency \"+ cid+ \"is \"+ status);\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let resources = this.state.resources;\r\n    if (this.state.filter) {\r\n      resources = resources.filter(\r\n        item =>\r\n          item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\r\n          item.description\r\n            .toLocaleLowerCase()\r\n            .includes(this.state.filter.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterType !== 'All') {\r\n      resources = resources.filter(item =>\r\n        item.type\r\n          .toLocaleLowerCase()\r\n          .includes(this.state.filterType.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterMapping) {\r\n      resources = resources.filter(item =>\r\n        item.competency_profile.some(\r\n          profile =>\r\n            profile.attribute_archived == 'archived' ||\r\n            profile.competency_archived == 'archived' ||\r\n            profile.domain == 'archived'\r\n        )\r\n      );\r\n      console.log('filter applied');\r\n    }\r\n\r\n    const ListOfResources = resources.map((item, index) => (\r\n      <tr key={index}>\r\n        <td>{index + 1} </td>\r\n        <td>\r\n          {' '}\r\n          <Link to={'/training-resources/' + item.id}>{item.title} </Link>\r\n        </td>\r\n        <td>{item.dates}</td>\r\n        <td>{item.type}</td>\r\n        <td>\r\n          <a href={item.url} target={'_blank'}>\r\n            {item.url}\r\n          </a>\r\n        </td>\r\n        <td>\r\n          {item.archived === '1' ? (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\r\n            </a>\r\n          ) : (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-off\" />\r\n            </a>\r\n          )}\r\n        </td>\r\n        <td>\r\n          {this.checkAuthor(item.author) ? (\r\n            <Link to={`/training-resource/edit/${item.id}`}>\r\n              <i className=\"fas fa-edit\" />{' '}\r\n            </Link>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </td>\r\n      </tr>\r\n    ));\r\n    return (\r\n      <div className={'row'}>\r\n        <h3>Training Resources</h3>\r\n        <div className=\"row\">\r\n          <div className=\"column large-6\">\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                onChange={this.filter.bind(this)}\r\n                placeholder=\"Type to search\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <div>\r\n              <select ref={'type'} onChange={this.filterTypeHandle.bind(this)}>\r\n                <option value={'All'}>All</option>\r\n                <option value={'Online'}>Online</option>\r\n                <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                <option value={'Webinar'}>Webinar</option>\r\n                <option value={'Hackathon'}>Hackathon</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"checkboxMapping\"\r\n              checked={this.state.filterMapping}\r\n              onChange={this.filterMappingHandle.bind(this)}\r\n            />\r\n            <span id=\"checkboxMappingLabel\" for=\"checkboxMapping\">\r\n              Items with deprecated mapping\r\n            </span>\r\n          </div>\r\n          <div className={'column large-1'}>\r\n            <Link\r\n              className={'button float-right'}\r\n              to={'/training-resource/create'}\r\n            >\r\n              <i className=\"fas fa-plus-circle\"> </i> Add new{' '}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>S. No.</th>\r\n              <th>Title</th>\r\n              <th>Date(s)</th>\r\n              <th>Type</th>\r\n              <th>URL</th>\r\n              <th>Archive</th>\r\n              <th>Edit</th>\r\n            </tr>\r\n          </thead>\r\n          {resources.length > 0 ? (\r\n            <tbody>{ListOfResources}</tbody>\r\n          ) : (\r\n            <center>\r\n              <img alt=\"progress\" src=\"progressbar.gif\" />\r\n              <h4>Loading results...</h4>\r\n            </center>\r\n          )}\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Resources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/all-training-resources\" component={ResourcesList} />\r\n  </Switch>\r\n);\r\n\r\nexport default Resources;\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Parser from 'html-react-parser';\nimport { Link } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\n\nclass ResourcesHome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resources: [],\n      filterType: ''\n    };\n    //this.archiveHandle = this.archiveHandle.bind(this);\n  }\n\n  checkUser() {\n    if (!localStorage.getItem('roles')) {\n      this.props.history.push('/');\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\n      alert(\n        'You are not authorised to access this page. Contact the administrator'\n      );\n      this.props.history.push('/');\n    }\n    console.log(localStorage.getItem('roles'));\n  }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (this.state.updateFlag) {\n  //     this.fetchData();\n  //     setTimeout(() => {\n  //       this.setState({ updateFlag: false });\n  //     }, 1000);\n  //     console.log('componentDidUpdate');\n  //   }\n  // }\n\n  // componentDidMount() {\n  //   this.fetchData();\n  // }\n\n  // fetchData() {\n  //   let csrfURL = `${apiUrl}/rest/session/token`;\n  //   fetch(csrfURL)\n  //     .then(Response => Response)\n  //     .then(findresponse2 => {\n  //       this.setState({ csrf: findresponse2 });\n  //     });\n\n  //   //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\n  //   let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\n  //   fetch(resourcesURL)\n  //     .then(Response => Response.json())\n  //     .then(findresponse => {\n  //       this.setState({\n  //         resources: findresponse\n  //       });\n  //     });\n  // }\n\n  // filter(e) {\n  //   this.setState({ filter: e.target.value });\n  // }\n\n  // filterTypeHandle(e) {\n  //   this.setState({ filterType: e.target.value });\n  // }\n\n  // archiveHandle(rid, status, event) {\n  //   //alert(\"competency \"+ cid+ \"is \"+ status);\n  //   let archivedStatus = '';\n  //   if (status === 1) {\n  //     archivedStatus = false;\n  //   } else {\n  //     archivedStatus = true;\n  //   }\n  //   let token = localStorage.getItem('csrf_token');\n  //   fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\n  //     credentials: 'include',\n  //     method: 'PATCH',\n  //     cookies: 'x-access-token',\n  //     headers: {\n  //       Accept: 'application/hal+json',\n  //       'Content-Type': 'application/hal+json',\n  //       'X-CSRF-Token': token,\n  //       Authorization: 'Basic'\n  //     },\n  //     body: JSON.stringify({\n  //       _links: {\n  //         type: {\n  //           href: `${apiUrl}/rest/type/node/training_resource`\n  //         }\n  //       },\n  //       field_archived: [\n  //         {\n  //           value: archivedStatus\n  //         }\n  //       ],\n  //       type: [\n  //         {\n  //           target_id: 'training_resource'\n  //         }\n  //       ]\n  //     })\n  //   });\n\n  //   this.setState({ updateFlag: true });\n\n  //   event.preventDefault();\n  // }\n\n  render() {\n    this.checkUser();\n    // let resources = this.state.resources;\n    // if (this.state.filter) {\n    //   resources = resources.filter(\n    //     item =>\n    //       item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\n    //       item.description\n    //         .toLocaleLowerCase()\n    //         .includes(this.state.filter.toLowerCase())\n    //   );\n    // }\n\n    // if (this.state.filterType !== 'All') {\n    //   resources = resources.filter(item =>\n    //     item.type\n    //       .toLocaleLowerCase()\n    //       .includes(this.state.filterType.toLowerCase())\n    //   );\n    // }\n\n    // const ListOfResources = resources.map((item, index) => (\n    //   <tr key={index}>\n    //     <td>{index + 1} </td>\n    //     <td>\n    //       {' '}\n    //       <h4>\n    //         {' '}\n    //         <Link to={'/training-resources/' + item.id}>{item.title} </Link>\n    //       </h4>\n    //       <p>{item.dates} </p>\n    //       <strong>Learning resource type:</strong> {item.type} <br />\n    //       {Parser(item.description.substr(0, 240) + '...')} <br />\n    //       <br />\n    //       <strong> URL: </strong>{' '}\n    //       <a href={item.url} target={'_blank'}>\n    //         {item.url}\n    //       </a>\n    //     </td>\n    //     <td>\n    //       {item.archived === '1' ? (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 1)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\n    //         </a>\n    //       ) : (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 0)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-off\" />\n    //         </a>\n    //       )}\n    //     </td>\n    //     <td>\n    //       <Link to={`/training-resource/edit/${item.id}`}>\n    //         <i className=\"fas fa-edit\" />{' '}\n    //       </Link>\n    //     </td>\n    //   </tr>\n    // ));\n    return (\n      <div className={'row'}>\n        <h3>Training Resources</h3>\n        <div className=\"row\">\n          <div className=\"column large-4 callout\">\n            <Link\n              className={'button float-right'}\n              to={'/all-training-resources'}\n            >\n              <i className=\"fas fa-list\"> </i> View published training resources{' '}\n            </Link>\n          </div>\n          <div className=\"column large-4 callout\">\n            <Link className={'button float-right'} to={'#'}>\n              <i className=\"fas fa-list\"> </i> View unpublished training\n              resources{' '}\n            </Link>\n          </div>\n          <div className={'column large-4 callout'}>\n            <Link className={'button float-right'} to={'#'}>\n              <i className=\"fas fa-tasks\"> </i> Manage training resources{' '}\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst ResourcesHomepage = () => (\n  <Switch>\n    <Route exact path=\"/training-resources-home\" component={ResourcesHome} />\n  </Switch>\n);\n\nexport default ResourcesHomepage;\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      roles: '',\r\n      user: ''\r\n    };\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    let old = this.refs.old.value;\r\n    let new1 = this.refs.new1.value;\r\n    let uid = localStorage.getItem('userid');\r\n    fetch(`${apiUrl}/user/` + uid + '?_format=json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': localStorage.getItem('csrf_token')\r\n      },\r\n      body: JSON.stringify({\r\n        pass: [\r\n          {\r\n            existing: old,\r\n            value: new1\r\n          }\r\n        ]\r\n      })\r\n    })\r\n      .then(resp => resp)\r\n      .then(data =>\r\n        setTimeout(() => {\r\n          alert('Password changed successfully');\r\n          window.location.reload();\r\n        }, 1000)\r\n      );\r\n    e.preventDefault();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h3>Change password:</h3>\r\n        <form id={'passChange'}>\r\n          <input type={'password'} ref={'old'} placeholder={'Old password'} />\r\n          <input type={'password'} ref={'new1'} placeholder={'New password'} />\r\n          <input type={'password'} placeholder={'Confirm new password'} />\r\n          <input\r\n            type={'button'}\r\n            className={'button'}\r\n            onClick={this.handlePasswordChange.bind(this)}\r\n            value={'Submit'}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React from 'react';\n\nvar placeholder = document.createElement('li');\nplaceholder.className = 'placeholder';\n\nclass List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...props };\n  }\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.dragged);\n  }\n  dragEnd(e) {\n    this.dragged.style.display = 'block';\n    this.dragged.parentNode.removeChild(placeholder);\n\n    // update state\n    var data = this.state.colors;\n    var from = Number(this.dragged.dataset.position);\n    var to = Number(this.over.dataset.position);\n    if (from < to) to--;\n    //data.splice(to, 0, data.splice(from, 1)[0]);\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({ colors: data });\n    console.log(data);\n  }\n  dragOver(e) {\n    e.preventDefault();\n    this.dragged.style.display = 'none';\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n  render() {\n    //var listItems = this.state.colors.map((item, i) => {\n    var listItems = this.state.colors.map((item, i) => {\n      return (\n        <li\n          data-position={i}\n          key={item.position}\n          //data-position={i}\n          //key={i}\n          draggable=\"true\"\n          onDragEnd={this.dragEnd.bind(this)}\n          onDragStart={this.dragStart.bind(this)}\n        >\n          {item.title}\n        </li>\n      );\n    });\n    return <ul onDragOver={this.dragOver.bind(this)}>{listItems}</ul>;\n  }\n}\n\nexport default List;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\n//import { Draggable, Droppable } from 'react-drag-and-drop';\nimport List from './List';\n\nconst UserView = () => {\n  const [user, setUser] = useState();\n  const [test, setTest] = useState();\n  const [frameworks, setFrameworks] = useState();\n  const [frm, setFrm] = useState();\n\n  let colors = [\n    { id: '101', position: '10', title: 'First' },\n    { id: '102', position: '11', title: 'Second' },\n    { id: '103', position: '21', title: 'Third' },\n    { id: '104', position: '32', title: 'Fourth' }\n  ];\n\n  let uid = localStorage.getItem('userid');\n  //let dt = '';\n  //let year = '';\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/user/${uid}?_format=json`, {\n        credentials: 'include',\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': localStorage.getItem('csrf_token')\n        }\n      })\n        .then(Response => Response.json())\n        .then(findResponse => setUser(findResponse));\n\n      await fetch(`${apiUrl}/api/version_manager/?_format=json`)\n        .then(Response => Response.json())\n        .then(findResponse => setFrameworks(findResponse));\n    };\n    fetchData();\n  }, [test]);\n\n  if (!frm && user && frameworks) {\n    let test = [];\n    frameworks.map(item => {\n      user.field_frameworks.map(frm => {\n        if (frm.target_id == item.nid) test.push(item.title);\n      });\n    });\n    setFrm(test.join());\n  }\n\n  const onDrop = data => {\n    console.log(data);\n    // => banana\n  };\n\n  return (\n    <div>\n      <h2>My profile</h2>\n      <div className=\"row\">\n        <div className=\"column medium-3\">&nbsp;</div>\n        <div className=\"column medium-6\">\n          {user ? (\n            <table className=\"responsive-table userprofile-table\">\n              <tbody>\n                <tr>\n                  <td>\n                    <strong>Username:</strong>\n                  </td>\n                  <td>{user.name[0].value}</td>\n                </tr>\n                <tr>\n                  <td>\n                    <strong>Email:</strong>\n                  </td>\n                  <td>{user.mail[0].value}</td>\n                </tr>\n                <tr>\n                  <td>\n                    <strong>Frameworks:</strong>\n                  </td>\n                  <td>{frm ? frm : ''}</td>\n                </tr>\n              </tbody>\n            </table>\n          ) : (\n            'Loading profile'\n          )}\n        </div>\n        <div className=\"column medium-3\" />\n      </div>\n    </div>\n  );\n};\n\nexport const path = () => (\n  <Switch>\n    <Route exact path=\"/user/view\" component={UserView} />\n  </Switch>\n);\n\nexport default path;\n","import React from 'react';\r\n\r\nconst About = () => (\r\n  <React.Fragment>\r\n    <h2>About Competency Hub</h2>\r\n    <p className=\"lead\">\r\n      Competency Hub is a web-based tool to support the creation and management\r\n      of competency frameworks. A competency is an observable ability of any\r\n      professional, integrating multiple components such as knowledge, skills\r\n      and behaviours. A competency framework lists and defines all the\r\n      competencies that an individual might need to fulfil a particular role, or\r\n      that define specific user groups.\r\n    </p>\r\n    <h3>Anyone can..</h3>\r\n    <p>\r\n      <ul>\r\n        <li>\r\n          Explore the competency frameworks that we currently have in the system\r\n        </li>\r\n        <li>\r\n          Click on any competency to find the knowledge, skills and attitudes\r\n          (KSAs) associated with it\r\n        </li>\r\n        <li>\r\n          Explore career profiles associated with a competency framework when\r\n          available\r\n        </li>\r\n        <li>\r\n          See the relationships between different competency frameworks; for\r\n          example, if a competency in framework 2 is derived from one in\r\n          framework 1, this information is captured\r\n        </li>\r\n        <li>\r\n          Access a list of courses that have been mapped to a particular\r\n          competency\r\n        </li>\r\n        <li>\r\n          View summary information on each of these courses, including a link\r\n          through to the course website\r\n        </li>\r\n      </ul>\r\n    </p>\r\n    <h3>In addition to the above, content editors can...</h3>\r\n    <ul>\r\n      <li>Map courses to any competency in the Hub</li>\r\n      <li>Map courses to any combination of knowledge, skills and attitudes</li>\r\n    </ul>\r\n    <h3>In addition to the above, administrators can...</h3>\r\n    <ul>\r\n      <li>Build a completely new competency framework from a blank template</li>\r\n      <li>Make minor updates to an existing competency framework</li>\r\n      <li>\r\n        If a competency framework has undergone major updates such as merging,\r\n        splitting or deprecation of competencies, create and publish a new\r\n        version of the framework without overwriting the previous version, and\r\n        without losing links to pre-existing mappings\r\n      </li>\r\n      <li>\r\n        Create and edit multiple personas or roles associated with a competency\r\n        framework\r\n      </li>\r\n      <li>\r\n        For each competency in an associated framework, define the level of\r\n        competency required by any of the personas/roles associated with it,\r\n        using an administrator-defined list of variables.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is competency?</h3>\r\n    <p>\r\n      By definition, competency is an observable ability of any professional,\r\n      integrating multiple components such as knowledge, skills, values and\r\n      attitudes. It is observable, so its acquisition can be validated\r\n      objectively.\r\n    </p>\r\n    <h4>Why is it relevant?</h4>\r\n    <p>\r\n      Competency provides a shared ‘currency’ applicable to learning of all\r\n      types and at all career stages.\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        Individual professionals can use competency as a career development\r\n        tool: by documenting the competencies that you have gained, and the\r\n        evidence that you have gained them, in a competency portfolio you can\r\n        seek further training to fill gaps in your portfolio, or map your\r\n        existing portfolio to roles that you might not previously have\r\n        considered.\r\n      </li>\r\n      <li>\r\n        Professional bodies and employers can use competency to define\r\n        competency frameworks for different roles or professions. These provide\r\n        useful guidance when hiring and promoting individuals, and can also\r\n        provide the basis for professional recognition in regulated professions.\r\n      </li>\r\n      <li>\r\n        Course providers can use competency to develop training (by asking what\r\n        competencies their trainees need to gain) and, where appropriate, to\r\n        assess whether training has been effective.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is a competency framework?</h3>\r\n    <p>\r\n      A competency framework defines the competencies required to fulfil a\r\n      particular role. competency frameworks are typically defined by\r\n      professional bodies or learned societies in collaboration with employers.\r\n      Several projects under the EU’s Horizon 2020 framework have developed\r\n      competency frameworks to support emerging professions.\r\n    </p>\r\n\r\n    <h3>Who is developing the Competency Hub?</h3>\r\n    <p>\r\n      The Competency Hub is being developed by the{' '}\r\n      <a\r\n        href={'https://www.ebi.ac.uk/about/people/cath-brooksbank'}\r\n        target={'_blank'}\r\n      >\r\n        {' '}\r\n        EMBL-EBI training team{' '}\r\n      </a>{' '}\r\n      with the{' '}\r\n      <a href={'https://bioexcel.eu/'} target={'_blank'}>\r\n        {' '}\r\n        BioExcel{' '}\r\n      </a>{' '}\r\n      competency framework as its primary use case.{' '}\r\n    </p>\r\n    <p>\r\n      EMBL-EBI’s Training programme uses a competency-based approach to\r\n      developing new courses: put simply, we ask ourselves ‘What competency or\r\n      competencies does our audience for this course need to develop?’ before we\r\n      create the programme and content for a new course, and before we make a\r\n      significant update to an existing course.\r\n    </p>\r\n    <p>\r\n      The team has contributed to, and helped to steer, a number of initiatives\r\n      to develop new training programmes by defining competency requirements in\r\n      relation to a specific target audience and building a competency framework\r\n      for that audience. Competency-based projects that we have been involved in\r\n      include:\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        The ISCB education committee’s{' '}\r\n        <a href={'https://europepmc.org/articles/PMC5794068'} target={'_blank'}>\r\n          {' '}\r\n          competency framework for bioinformatics professionals{' '}\r\n        </a>{' '}\r\n      </li>\r\n      <li>\r\n        A clinical bioinformatics competency framework to support Health\r\n        Education England to prepare clinical practitioners for the application\r\n        of genomics in the healthcare service\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={\r\n            'https://drive.google.com/file/d/0B3BA3KSKGOoQb0hvUkx3a3lMS00/view'\r\n          }\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          RItrain competency framework{' '}\r\n        </a>{' '}\r\n        for managers and leaders of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/154085#.WbUNUhNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          CORBEL competency framework{' '}\r\n        </a>{' '}\r\n        for technical operators of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/264231#.WbUNoRNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          BioExcel competency framework{' '}\r\n        </a>\r\n        for scientists working on biomolecular modelling and simulation\r\n      </li>\r\n      <li>\r\n        The CINECA competency framework for professionals working with human\r\n        data for disease research\r\n      </li>\r\n      <p />\r\n      <p>\r\n        These competency frameworks were designed to be used by the training\r\n        communities who developed them, and openly available to anyone who might\r\n        find them useful, yet all too often they end up buried in a PDF file as\r\n        part of a project deliverable. This made us long for a web-based tool\r\n        that would make these frameworks, and the training associated with them,\r\n        readily discoverable. We therefore decided to build that tool, and\r\n        although it’s still in the early stages of development we’ve decided to\r\n        make it openly available now so that we can seek broad input to improve\r\n        it and make it as useful as possible to the education and training\r\n        community at large. If you have comments or suggestions, please{' '}\r\n        <a href={'mailto:competency@ebi.ac.uk'}> contact us </a>.\r\n      </p>\r\n    </ul>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default About;\r\n","import React from 'react';\r\n\r\nimport { removeHtmlTags } from '../../services/util/util';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FrameworkButton({ framework }) {\r\n  let description = removeHtmlTags(framework.description);\r\n  if (description.length > 120) {\r\n    description = `${description.slice(0, 120).trim()}...`;\r\n  }\r\n  const liveVersion = framework.versions.reduce((prevVersion, newVersion) => {\r\n    if (newVersion.status === 'live') {\r\n      return newVersion.number;\r\n    }\r\n    return prevVersion;\r\n  }, null);\r\n\r\n  if (liveVersion === null) {\r\n    return null;\r\n  }\r\n\r\n  const tempDesc = [\r\n    {\r\n      title: 'bioexcel',\r\n      desc: 'Professionals in computational biomolecular research'\r\n    },\r\n    {\r\n      title: 'corbel',\r\n      desc: 'Technical operators of biomedical research infrastructures'\r\n    },\r\n    { title: 'ritrain', desc: 'Managers of research infrastructures' },\r\n    {\r\n      title: 'iscb',\r\n      desc: 'Students and professionals in computational biology'\r\n    },\r\n    {\r\n      title: 'cineca',\r\n      desc: 'Professionals working with human data for disease research'\r\n    },\r\n    {\r\n      title: 'nhs',\r\n      desc:\r\n        'Clinical practitioners for the application of genomics in the healthcare service'\r\n    },\r\n    {\r\n      title: 'datasteward',\r\n      desc: 'Data steward roles: policy, research and infrastructure'\r\n    }\r\n  ];\r\n\r\n  const logoStyles = [\r\n    {\r\n      title: 'bioexcel',\r\n      width: '250px',\r\n      left: '15%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n    {\r\n      title: 'corbel',\r\n      width: '200px',\r\n      left: '25%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n    {\r\n      title: 'ritrain',\r\n      width: '150px',\r\n      left: '25%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n    {\r\n      title: 'iscb',\r\n      width: '200px',\r\n      left: '25%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n    {\r\n      title: 'nhs',\r\n      width: '300px',\r\n      left: '10%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n    {\r\n      title: 'cineca',\r\n      width: '250px',\r\n      left: '15%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n    {\r\n      title: 'datasteward',\r\n      width: '340px',\r\n      left: '10%',\r\n      position: 'relative',\r\n      objectFit:'contain'\r\n    },\r\n  ]\r\n  return (\r\n    <article className=\"vf-card vf-card--primary\">\r\n      <img\r\n        alt=\"tile\"\r\n        className=\"vf-card__image\"\r\n        src={`https://acxngcvroo.cloudimg.io/v7/${framework.logo[0].url}?w=600`}\r\n        style={logoStyles.find(el => el.title === framework.title.toLowerCase().replace(/ /g, '') )}\r\n      />\r\n      <div className=\"vf-card__content | vf-stack vf-stack--400\">\r\n        <div className=\"vf-card__title\">\r\n          <Link\r\n            className=\"vf-card__link\"\r\n            data-equalizer-watch\r\n            to={`/framework/${framework.title\r\n              .toLowerCase()\r\n              .replace(/ /g, '')}/${liveVersion}`}\r\n          >\r\n            {framework.title}\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"vf-card__text\">\r\n          {tempDesc.map(item =>\r\n            item.title === framework.title.toLowerCase().replace(/ /g, '')\r\n              ? item.desc\r\n              : ''\r\n          )}\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default FrameworkButton;\r\n","import React from 'react';\r\n\r\nimport FrameworkButton from '../framework-button/FrameworkButton';\r\n\r\nconst $ = window.$;\r\n\r\nfunction FrameworkButtons({ frameworks }) {\r\n  const selfRef = new React.createRef();\r\n\r\n  const invokeFoundation = () => {\r\n    // window.setTimeout(() => $(selfRef.current).foundation());\r\n    return (\r\n      <div className=\"vf-grid vf-grid__col-3\">\r\n        {' '}\r\n        {frameworks.map(framework => (\r\n          <FrameworkButton key={framework.nid} framework={framework} />\r\n        ))}\r\n        \r\n      </div>\r\n    );\r\n  };\r\n\r\n  return frameworks.length < 1 ? null : (\r\n    <div className=\"row\" data-equalizer ref={selfRef}>\r\n      {invokeFoundation()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButtons;\r\n","import React, { Component } from 'react';\r\n\r\nimport FrameworkButtons from '../components/framework-buttons/FrameworkButtons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass Frameworks extends Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    frameworks: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const frameworks = await this.competencyService.getAllVersionedFrameworks();\r\n      this.setState({ frameworks });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to fetch framework data', {\r\n        variant: 'error'\r\n      });\r\n      console.error(error);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { frameworks } = this.state;\r\n\r\n    return (\r\n      <div className=\"column\">\r\n        <h3>Overview</h3>\r\n        <p className=\"lead\">\r\n          Competency Hub is a web-based tool to support the creation and\r\n          management of competency frameworks{' '}\r\n          <Link to=\"/about\" className=\"readmore\">\r\n            read more{' '}\r\n          </Link>\r\n        </p>\r\n\r\n        <FrameworkButtons frameworks={frameworks} />\r\n        <div style={{ padding: '20px' }}>\r\n          <p>\r\n            If you have any questions, comments or suggestions, please contact\r\n            us: competency [at] ebi.ac.uk\r\n          </p>\r\n          <p>\r\n            <Link to=\"/documentation\" className=\"readmore\">\r\n              Developer documentation{' '}\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Frameworks);\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactModal from 'react-modal';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass CompetencySettings extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      competency: '',\n      competencyUUID: '',\n      competencyTitle: '',\n      frameworkList: [],\n      domainID: '',\n      domainUuid: '',\n      csrf: '',\n      mapping: ''\n    };\n\n    this.editDomain = this.editDomain.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.onTextChange = this.onTextChange.bind(this);\n  }\n\n  async fetchData() {\n    let competencyID = this.state.path[4];\n    let url = `${apiUrl}/node/` + competencyID + `/?_format=json`;\n    fetch(url)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ competency: findresponse }, this.setMappingText);\n      });\n\n    // Load all domains of all frameworks from version_manager API\n\n    let versoinManagerURL = `${apiUrl}/api/version_manager/?_format=json&timestamp=${Date.now()}`;\n    fetch(versoinManagerURL)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    //console.log(apiUrl);\n  }\n\n  async setMappingText() {\n    let competency = this.state.competency;\n    if (competency.field_map_other_competency.length > 0) {\n      this.setState({\n        mapping: competency.field_map_other_competency[0].value\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.fetchData();\n    //await this.setMappingText();\n  }\n\n  editDomain(e) {\n    let competencyID = this.state.path[4];\n    let selectedDomainID = this.state.domainID;\n    let selectedDomainUUID = this.state.domainUuid;\n    let mapping = this.state.mapping;\n    if (!selectedDomainID) {\n      selectedDomainID = this.state.competency.field_domain[0].target_id;\n      selectedDomainUUID = this.state.competency.field_domain[0].target_uuid;\n    }\n    this.competencyService.changeDomain(\n      competencyID,\n      selectedDomainID,\n      selectedDomainUUID,\n      mapping\n    );\n    //console.log(\"editDomain() called\");\n    this.props.history.push(\n      '/framework/' + this.state.path[2] + '/manage/competencies'\n    );\n    e.preventDefault();\n  }\n\n  onTextChange(event) {\n    this.setState({ mapping: event.target.value });\n    //console.log(this.state.mapping);\n  }\n\n  handleChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({ domainID: dataset.id, domainUuid: dataset.uuid });\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let competency_title = '';\n    let domain_id = '';\n    let domain_uuid = '';\n    let domain_title = '';\n    let competency = this.state.competency;\n    let frameworkList = this.state.frameworkList;\n    let domainOptions = [];\n    let domainArray = [];\n    //let mapped_other_competency = \"\";\n\n    if (frameworkList.length > 0) {\n      console.log(this.state.frameworkList);\n      frameworkList.map(framework => {\n        if (framework.title.toLowerCase() === this.state.path[2]) {\n          framework.domains.map(domain => {\n            domainOptions.push(\n              <option\n                key={domain.id}\n                data-id={domain.id}\n                data-uuid={domain.uuid}\n                value={domain.id}\n              >\n                {domain.title}\n              </option>\n            );\n            domainArray.push({ key: domain.id, value: domain.title });\n            console.log(frameworkList);\n          });\n        }\n      });\n    }\n\n    if (competency) {\n      competency_title = competency.title[0].value;\n      domain_id = competency.field_domain[0].target_id;\n      domain_uuid = competency.field_domain[0].target_uuid;\n      if (domainArray.length > 0) {\n        let obj = domainArray.find(d => d.key == domain_id);\n        domain_title = obj.value;\n      }\n    }\n\n    return (\n      <div>\n        <h2>Change domain</h2>\n        <table className=\"table hover stack\">\n          <tbody>\n            <tr>\n              <td>\n                <h4>Domain:</h4>\n              </td>\n              <td>\n                <h4>{domain_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <h4>Competency:</h4>\n              </td>\n              <td>\n                <h4>{competency_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td colSpan={2}>\n                <p className=\"lead\">\n                  Select the domain from the following list to change:\n                </p>\n                <form\n                  id={'changeDomainForm'}\n                  onSubmit={this.editDomain.bind(this)}\n                >\n                  <div className=\"row\">\n                    <div className=\"column large-11\">\n                      <select\n                        value={\n                          this.state.domainID ? this.state.domainID : domain_id\n                        }\n                        onChange={this.handleChange}\n                      >\n                        {domainOptions}\n                      </select>\n                      <label>\n                        Maps to competency/attribute from other framework\n                        <input\n                          type=\"text\"\n                          placeholder=\"Framework (version), competency or attribute\"\n                          name=\"mapping\"\n                          value={this.state.mapping}\n                          onChange={this.onTextChange.bind(this)}\n                        />\n                      </label>\n                      <input type=\"submit\" className=\"button\" value=\"Save\" />\n                    </div>\n                    <div className=\"column large-1\" />\n                  </div>\n                </form>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst CompetencySettingsRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/competency/:id/settings\"\n      component={CompetencySettings}\n    />\n  </Switch>\n);\n\nexport default CompetencySettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from 'react-ckeditor-component';\n//import FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport Dropzone from 'react-dropzone';\n\nclass ArticleCreate extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.createArticle = this.createArticle.bind(this);\n\n    this.state = {\n      file: [],\n      fid: ''\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {}\n\n  componentDidMount() {\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    let title = this.refs.title.value;\n    let token = localStorage.getItem('csrf_token');\n    let fid = '';\n\n    console.log(this.state.file);\n\n    let response = await fetch(\n      apiUrl + '/file/upload/node/article/field_image?_format=hal_json',\n      {\n        credentials: 'include',\n        method: 'POST',\n        cookies: 'x-access-token',\n        headers: {\n          accept: 'application/octet-stream',\n          'Content-Type': 'application/octet-stream',\n          'X-CSRF-Token': token,\n          'Content-Disposition': 'file; filename=\"prakash_file.png\"'\n        },\n        body: this.state.file\n      }\n    )\n      .then(resp => resp.json())\n      .then(\n        function(data) {\n          this.setState({ fid: data.fid[0].value }, this.createArticle);\n        }.bind(this)\n      );\n  }\n\n  createArticle() {\n    let token = localStorage.getItem('csrf_token');\n    fetch(`${apiUrl}/node/6771?_format=hal_json`, {\n      credentials: 'include',\n      method: 'PATCH',\n      cookies: 'x-access-token',\n      headers: {\n        Accept: 'application/hal+json',\n        'Content-Type': 'application/hal+json',\n        'X-CSRF-Token': token,\n        Authorization: 'Basic'\n      },\n      body: JSON.stringify({\n        _links: {\n          type: {\n            href: `${apiUrl}/rest/type/node/article`\n          }\n        },\n        field_image: [\n          {\n            target_id: this.state.fid,\n            description: 'The most fascinating image ever!'\n          }\n        ]\n      })\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>File upload</h2>\n\n        <div className=\"row\">\n          <div className=\"column large-12 callout\">\n            <h4>Bulk upload training resources</h4>\n            <form\n              className=\"form\"\n              id={'resource_create_form'}\n              onSubmit={this.handleSubmit.bind(this)}\n            >\n              <div id=\"fileupload\" className=\"row\">\n                <div className=\"column large-12\">\n                  <strong>File upload</strong>\n                  <Dropzone\n                    ref=\"fileref\"\n                    onDrop={acceptedFiles => {\n                      //console.log(acceptedFiles)\n                      const reader = new FileReader();\n\n                      reader.onabort = () =>\n                        console.log('file reading was aborted');\n                      reader.onerror = () =>\n                        console.log('file reading has failed');\n                      reader.onload = () => {\n                        // Do whatever you want with the file contents\n                        //const binaryStr = reader.result;\n                        var stringImage = reader.result;\n                        if (stringImage) {\n                          console.log(' image content =' + stringImage);\n                          var striped = stringImage.toString().split('base64');\n                          if (striped[1]) {\n                            //this.uploadDrupalImage(striped[1]);\n                            this.setState({ newfile: striped[1] });\n                          }\n                        }\n                        this.setState({ file: reader.result });\n                        //console.log(binaryStr)\n                      };\n                      document\n                        .getElementById('fileupload')\n                        .append(acceptedFiles[0].name);\n                      acceptedFiles.forEach(file =>\n                        reader.readAsArrayBuffer(file)\n                      );\n                    }}\n                  >\n                    {({ getRootProps, getInputProps }) => (\n                      <section>\n                        <div {...getRootProps()}>\n                          <input {...getInputProps()} />\n                          <a href=\"#\">Click to select files</a>\n                        </div>\n                      </section>\n                    )}\n                  </Dropzone>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column large-12\">\n                  <strong>Remarks</strong>\n                  <input\n                    type=\"text\"\n                    ref=\"title\"\n                    required\n                    placeholder=\"Remarks\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column large-2\">\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst CreateArticles = () => (\n  <Switch>\n    <Route exact path=\"/article/create\" component={ArticleCreate} />\n  </Switch>\n);\n\nexport default CreateArticles;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactModal from 'react-modal';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass AttributeSettings extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      attributeID: this.props.location.pathname.split('/')[6],\n      frameworkName: this.props.location.pathname.split('/')[2],\n      frameworkList: [],\n      attributeType: '',\n      attribute: '',\n      competencyID: this.props.location.pathname.split('/')[4],\n      competencyUUID: '',\n      competencyTitle: '',\n      attributeTypeID: '',\n      attributeTypeUUID: '',\n      frameworkData: []\n    };\n\n    this.changeSettings = this.changeSettings.bind(this);\n    this.handleCompetencyChange = this.handleCompetencyChange.bind(this);\n    this.handleTypeChange = this.handleTypeChange.bind(this);\n  }\n\n  async fetchData() {\n    // Load the attribute\n\n    let attributeID = this.state.attributeID;\n    let url =\n      `${apiUrl}/node/` +\n      attributeID +\n      `/?_format=json&timestamp=${Date.now()}`;\n    fetch(url)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ attribute: findresponse });\n      });\n\n    // Load all domains of all frameworks from version_manager API\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    let result = await this.competencyService.getVersionedDraftFramework(\n      this.state.frameworkName\n    );\n    this.setState({ frameworkData: result });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  changeSettings(e) {\n    let attributeID = this.state.attributeID;\n    let selectedCompetencyID = this.state.competencyID\n      ? this.state.competencyID\n      : this.state.attribute.field_competency[0].target_id;\n    let selectedCompetencyUUID = this.state.competencyUUID\n      ? this.state.competencyUUID\n      : this.state.attribute.field_competency[0].target_uuid;\n    let selectedAttributeTypeID = this.state.attributeTypeID\n      ? this.state.attributeTypeID\n      : this.state.attribute.field_attribute_type[0].target_id;\n    let selectedAttributeTypeUUID = this.state.attributeTypeUUID\n      ? this.state.attributeTypeUUID\n      : this.state.attribute.field_attribute_type[0].target_uuid;\n\n    // console.log(\"competencyID: \"+selectedCompetencyID + \" attributeTypeID: \"+ selectedAttributeTypeID);\n    // if(!selectedCompetencyID){\n    //   selectedCompetencyID = this.state.attribute.field_competency[0].target_id;\n    //   selectedCompetencyUUID = this.state.competency.field_competency[0].target_uuid;\n    // }\n\n    // if(!selectedAttributeTypeID){\n    //   selectedAttributeTypeID = this.state.attribute.field_attribute_type[0].target_id;\n    //   selectedAttributeTypeUUID = this.state.competency.field_attribute_type[0].target_uuid;\n    // }\n\n    this.competencyService.changeAttributeSettings(\n      attributeID,\n      selectedCompetencyID,\n      selectedCompetencyUUID,\n      selectedAttributeTypeID,\n      selectedAttributeTypeUUID\n    );\n\n    this.props.history.push(\n      '/framework/' +\n        this.state.path[2] +\n        '/manage/competencies/' +\n        this.props.location.pathname.split('/')[4] +\n        '/manage-attributes'\n    );\n    e.preventDefault();\n  }\n\n  handleCompetencyChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({ competencyID: dataset.id, competencyUUID: dataset.uuid });\n    //console.log(dataset.uuid);\n  }\n\n  handleTypeChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({\n      attributeTypeID: dataset.id,\n      attributeTypeUUID: dataset.uuid\n    });\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let attribute_title = '';\n    let competency_id = '';\n    let competency_uuid = '';\n    let competency_title = '';\n    let attribute_type_id = '';\n    let attribute_type_uuid = '';\n    let attribute_type_title = '';\n    let attribute = this.state.attribute;\n    let frameworkData = this.state.frameworkData;\n    let frameworkList = this.state.frameworkList;\n    let competencyOptions = [];\n    let competencyArray = [];\n    let attributeTypeOptions = [];\n    let attributeTypeArray = [];\n\n    //console.log(frameworkList);\n\n    if (frameworkList) {\n      frameworkList.map(framework => {\n        if (framework.title.toLowerCase() == this.state.frameworkName) {\n          framework.attribute_types.map(attribute_type => {\n            attributeTypeOptions.push(\n              <option\n                key={attribute_type.id}\n                data-id={attribute_type.id}\n                data-uuid={attribute_type.uuid}\n                value={attribute_type.id}\n              >\n                {attribute_type.title}\n              </option>\n            );\n            attributeTypeArray.push({\n              key: attribute_type.id,\n              value: attribute_type.title\n            });\n          });\n        }\n      });\n      //console.log(attributeTypeArray);\n    }\n\n    if (frameworkData) {\n      frameworkData.map(framework => {\n        framework.domains.map(domain => {\n          domain.competencies.map(competency => {\n            if (competency.archived == 0) {\n              competencyOptions.push(\n                <option\n                  key={competency.id}\n                  data-id={competency.id}\n                  data-uuid={competency.uuid}\n                  value={competency.id}\n                >\n                  {competency.title}\n                </option>\n              );\n              competencyArray.push({\n                key: competency.id,\n                value: competency.title\n              });\n            }\n          });\n        });\n      });\n    }\n\n    if (attribute) {\n      attribute_title = attribute.title[0].value;\n      competency_id = attribute.field_competency[0].target_id;\n      competency_uuid = attribute.field_competency[0].target_uuid;\n      attribute_type_id = attribute.field_attribute_type[0].target_id;\n      if (competencyArray.length > 0) {\n        let obj = competencyArray.find(d => d.key == competency_id);\n        competency_title = obj.value;\n        //console.log(attribute_type_id);\n      }\n\n      if (attributeTypeArray.length > 0) {\n        let obj = attributeTypeArray.find(d => d.key == attribute_type_id);\n        attribute_type_title = obj.value;\n      }\n\n      //console.log(attribute_title);\n    }\n\n    return (\n      <div>\n        <h2>Change attribute settings</h2>\n        <h3>Attribute: {attribute_title}</h3>\n        <table className=\"table hover stack\">\n          <tbody>\n            <tr>\n              <td>Competency:</td>\n              <td>{competency_title}</td>\n              <td rowSpan={2}>\n                <form\n                  id={'changeDomainForm'}\n                  onSubmit={this.changeSettings.bind(this)}\n                >\n                  <label>Change competency:</label>\n                  <select\n                    value={\n                      this.state.competencyID\n                        ? this.state.competencyID\n                        : competency_id\n                    }\n                    onChange={this.handleCompetencyChange}\n                  >\n                    {competencyOptions}\n                  </select>\n                  <label>Change attribute type:</label>\n                  <select\n                    value={\n                      this.state.attributeTypeID\n                        ? this.state.attributeTypeID\n                        : attribute_type_id\n                    }\n                    onChange={this.handleTypeChange}\n                  >\n                    {attributeTypeOptions}\n                  </select>\n                  <input type=\"submit\" className=\"button\" value=\"Save\" />\n                </form>\n              </td>\n            </tr>\n\n            <tr>\n              <td>Attribute type:</td>\n              <td>{attribute_type_title}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst AttributeSettingsRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\n      component={AttributeSettings}\n    />\n  </Switch>\n);\n\nexport default AttributeSettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport CompetencyService from '../services/competency/competency';\n\nconst $ = window.$;\n\nclass AttributeDemap extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      resourceID: this.props.location.pathname.split('/')[2],\n      attributeID: this.props.location.pathname.split('/')[4],\n      resourceDetails: [],\n      csrf: ''\n    };\n    this.demap = this.demap.bind(this);\n  }\n\n  async demap(e) {\n    //alert(\"mapping removed\");\n    let resource = 1034;\n    let items = [20, 21];\n    //this.activeRequests.startRequest();\n    let result = await this.competencyService.demap(resource, items);\n    console.log(result);\n    //this.activeRequests.finishRequest();\n    //console.log(this.state.resourceDetails);\n    //this.props.history.push(\"/training-resources/\"+this.props.location.pathname.split('/')[2]);\n    //e.preventDefault();\n  }\n\n  componentDidMount() {\n    //fetch(`${apiUrl}`+'/api/resources/?_format=hal_json&id='+ this.state.resourceID)\n    fetch(`${apiUrl}` + '/node/' + this.state.resourceID + '?_format=hal_json')\n      .then(Response => Response.json())\n      .then(findresponse => {\n        this.setState({\n          resourceDetails: findresponse\n        });\n      });\n\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n  }\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return this.state.attributes === nextState.attributes;\n  // }\n\n  render() {\n    return (\n      <div>\n        <h3>\n          Are you sure you want to remove this mapping? This action cannot be\n          undone!\n        </h3>\n        <button className=\"button\" onClick={this.demap.bind(this)}>\n          Yes\n        </button>\n      </div>\n    );\n  }\n}\n\nconst AttributeDemapRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/training-resources/:resource/demap/:attribute\"\n      component={AttributeDemap}\n    />\n  </Switch>\n);\n\nexport default AttributeDemapRoot;\n","import { apiUrl } from '../http/http';\n\nclass BodyService {\n  static createProfile({\n    title,\n    frameworkId,\n    frameworkUuid,\n    versionID,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    fileid\n  }) {\n    return {\n      _links: {\n        type: {\n          href: `${apiUrl}/rest/type/node/profile`\n        },\n        [`${apiUrl}/rest/relation/node/profile/field_competency_framework`]: {\n          href: `${apiUrl}/node/${frameworkId}?_format=hal_json`\n        }\n      },\n      title: [\n        {\n          value: title\n        }\n      ],\n      field_versions: [\n        {\n          target_id: versionID\n        }\n      ],\n      field_age: [\n        {\n          value: age\n        }\n      ],\n      field_current_role: [\n        {\n          value: currentRole,\n          format: 'basic_html'\n        }\n      ],\n      field_gender: [\n        {\n          value: gender\n        }\n      ],\n      field_job_title: [\n        {\n          value: jobTitle\n        }\n      ],\n      field_qualification_background: [\n        {\n          value: qualification\n        }\n      ],\n      field_additional_information: [\n        {\n          value: additionalInfo\n        }\n      ],\n      field_image: [\n        {\n          target_id: fileid,\n          description: 'persona picture'\n        }\n      ],\n      field_publishing_status: [\n        {\n          value: 'Draft'\n        }\n      ],\n      type: [\n        {\n          target_id: 'profile'\n        }\n      ],\n      _embedded: {\n        [`${apiUrl}/rest/relation/node/profile/field_competency_framework`]: [\n          {\n            _links: {\n              self: {\n                href: `${apiUrl}/node/${frameworkId}?_format=hal_json`\n              },\n              type: {\n                href: `${apiUrl}/rest/type/node/competency_framework`\n              }\n            },\n            uuid: [\n              {\n                value: frameworkUuid\n              }\n            ],\n            lang: 'en'\n          }\n        ]\n      }\n    };\n  }\n\n  static editProfile(\n    profileId,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    publishStatus,\n    fileid\n  ) {\n    return {\n      _links: {\n        self: {\n          href: `${apiUrl}/node/${profileId}?_format=hal_json`\n        },\n        type: {\n          href: `${apiUrl}/rest/type/node/profile`\n        }\n      },\n      title: [\n        {\n          value: title\n        }\n      ],\n      field_age: [\n        {\n          value: age\n        }\n      ],\n      field_current_role: [\n        {\n          value: currentRole,\n          format: 'basic_html'\n        }\n      ],\n      field_gender: [\n        {\n          value: gender\n        }\n      ],\n      field_job_title: [\n        {\n          value: jobTitle\n        }\n      ],\n      field_qualification_background: [\n        {\n          value: qualification,\n          format: 'basic_html'\n        }\n      ],\n      field_additional_information: [\n        {\n          value: additionalInfo,\n          format: 'basic_html'\n        }\n      ],\n      field_image: [\n        {\n          target_id: fileid ? fileid : null\n          //description: 'persona picture'\n        }\n      ],\n      field_publishing_status: [\n        {\n          value: publishStatus\n        }\n      ],\n      type: [\n        {\n          target_id: 'profile'\n        }\n      ]\n    };\n  }\n\n  static mapProfile(profileId, mapping) {\n    let mappingBody = [];\n    mapping.forEach(function(item) {\n      mappingBody.push({\n        competency: item.competency,\n        expertise: item.expertise,\n        attributes: item.attributes.join()\n      });\n    });\n\n    //  console.log(mappingBody)\n\n    return {\n      type: [\n        {\n          target_id: 'article'\n        }\n      ],\n      field_item: [\n        {\n          value: profileId\n        }\n      ],\n      field_profile_mapping: mappingBody\n    };\n  }\n}\n\nexport default BodyService;\n","import HttpService from '../http/http';\nimport Body from './body';\nimport Download from './download';\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nclass ProfileService {\n  static instance;\n  http = new HttpService();\n\n  constructor() {\n    if (ProfileService.instance) {\n      return this.instance;\n    }\n    ProfileService.instance = this;\n  }\n\n  async createProfile(options) {\n    const response = await this.http.post(\n      `/node?_format=hal_json`,\n      Body.createProfile(options)\n    );\n    return response.data;\n  }\n\n  async editProfile(\n    profileId,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    publishStatus,\n    fileid\n  ) {\n    const response = await this.http.patch(\n      `/node/${profileId}?_format=hal_json`,\n      Body.editProfile(\n        profileId,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        publishStatus,\n        fileid\n      )\n    );\n\n    return response.data;\n  }\n\n  async mapProfile(profileId, mapping) {\n    const response = await this.http.patch(\n      `/api/bioexcel/2.0/profiles?_format=json`,\n      Body.mapProfile(profileId, mapping),\n      'json'\n    );\n    return response.data;\n  }\n\n  async createGuestProfile(\n    frameworkName,\n    frameworkId,\n    versionNumber,\n    title,\n    age,\n    current_role,\n    gender,\n    job_title,\n    qualification_background,\n    additional_information,\n    image\n  ) {\n    let mapping = [];\n\n    let existingGuestProfile = JSON.parse(localStorage.getItem('guestProfile'));\n    if (existingGuestProfile) {\n      if (existingGuestProfile.profile_mapping) {\n        mapping = existingGuestProfile.profile_mapping;\n      }\n    }\n\n    let guestProfile = {\n      frameworkName,\n      frameworkId,\n      versionNumber,\n      title,\n      age,\n      current_role,\n      gender,\n      job_title,\n      qualification_background,\n      additional_information,\n      image\n    };\n\n    guestProfile['profile_mapping'] = mapping;\n\n    localStorage.setItem('guestProfile', JSON.stringify(guestProfile));\n    console.log('Profile service called for Guest user');\n  }\n\n  async mapProfileGuest(mapping) {\n    let guestProfile = JSON.parse(localStorage.getItem('guestProfile'));\n    guestProfile['profile_mapping'] = mapping;\n    localStorage.setItem('guestProfile', JSON.stringify(guestProfile));\n  }\n\n  mapDownloadProfile(options) {\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(options));\n  }\n\n  downloadProfile(options) {\n    // Download.getProfile(options);\n    // console.log(options)\n\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    // PROFILE Header\n    doc.setFontType('normal');\n    doc.setFontSize(22);\n    doc.text(marginleft, startHeight, 'EMBL-EBI Competency Profile');\n\n    // Framework Logo\n    if (options.frameworkLogoData) {\n      let frameworkLogoWidth = options.frameworkLogoData[0]\n        ? options.frameworkLogoData[0].width\n        : 100;\n      let frameworkLogoHeight = options.frameworkLogoData[0]\n        ? options.frameworkLogoData[0].height\n        : 30;\n      let logoRatio = frameworkLogoWidth / frameworkLogoHeight;\n      let pdfLogoHeight = pageLogoWidth / logoRatio;\n\n      let logoData = options.frameworkLogoData[0].src;\n      let logoType = 'PNG';\n      doc.addImage(\n        logoData,\n        logoType,\n        marginright - 100,\n        5,\n        pageLogoWidth,\n        pdfLogoHeight,\n        '',\n        'SLOW'\n      );\n    }\n\n    currentYAxis = currentYAxis + 50;\n\n    // PROFILE Title\n    doc.setFontSize(18);\n    doc.text(\n      marginleft,\n      currentYAxis,\n      options.title + ' - ' + options.jobTitle\n    );\n\n    // PROFILE Image\n    if (options.selectedFile) {\n      let type = options.selectedFile.type === 'image/jpeg' ? 'JPEG' : 'PNG'; // maybe you should add some controls to prevent loading of other file types\n      let imgData = options.selectedFileData[0].src;\n      doc.addImage(\n        imgData,\n        type,\n        marginleft,\n        currentYAxis + 30,\n        pdfProfileImgWidth,\n        pdfProfileImgHeight,\n        '',\n        'SLOW'\n      ); // Compression options are NONE, FAST, MEDIUM and SLOW\n    }\n\n    // doc.setFontType('normal');\n    // PROFILE Demographics\n    if (options.gender || options.age) {\n      let gender = options.gender\n        ? options.age\n          ? options.gender + ', '\n          : options.gender\n        : '';\n      let age = options.age ? options.age + ' years' : '';\n\n      doc.setFontSize(12);\n      doc.text(\n        marginleft,\n        pdfProfileImgHeight + currentYAxis + 60,\n        gender + age\n      );\n    }\n\n    currentYAxis = currentYAxis + 40;\n\n    // PROFILE Qualifications\n    let qDim;\n    if (options.qualification) {\n      doc.setFontSize(16);\n      doc.text(fifthCol, currentYAxis, 'Qualifications & background');\n      currentYAxis = currentYAxis + 20;\n\n      doc.setFontSize(12);\n      let qualification = doc.splitTextToSize(\n        options.qualification,\n        profileBody\n      );\n      // Adjust yAxis based on text height\n      qDim = doc.getTextDimensions(qualification);\n      let margins = {\n        top: 70,\n        bottom: 40,\n        left: 30,\n        width: 550\n      };\n\n      doc.fromHTML(options.qualification, fifthCol, currentYAxis, {\n        // y coord\n        width: profileBody // max width of content on PDF\n      });\n\n      // doc.text(fifthCol, currentYAxis, qualification)\n      currentYAxis = currentYAxis + 30;\n    }\n\n    // PROFILE Activities\n    if (options.currentRole) {\n      doc.setFontSize(16);\n      doc.text(fifthCol, qDim.h + currentYAxis, 'Activities and current role');\n      currentYAxis = currentYAxis + 20;\n\n      doc.setFontSize(12);\n      let currentRole = doc.splitTextToSize(options.currentRole, profileBody);\n      // Adjust yAxis based on text height\n      let cDim = doc.getTextDimensions(currentRole);\n      currentYAxis = qDim.h + currentYAxis;\n\n      doc.text(fifthCol, currentYAxis, currentRole);\n    }\n\n    doc.setFontSize(9);\n    doc.text(\n      marginleft,\n      pdfHeight - 20,\n      'Profile created on ' + currentDate + ' at ' + currentTime\n    );\n\n    // Save the Data\n    let jobTitleUnderscored = options.jobTitle.split(' ').join('_');\n    doc.save(jobTitleUnderscored.toLowerCase() + '.pdf');\n  }\n}\n\nexport default ProfileService;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\n\nexport const ProfileCreate = props => {\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState('');\n  const [age, setAge] = useState('');\n  const [currentRole, setCurrentRole] = useState('');\n  const [gender, setGender] = useState('');\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [selectedFileData, setSelectedFileData] = useState([]);\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [additionalInfo, setAdditionalInfo] = useState('');\n\n  const [framework, setFramework] = useState();\n  const [frameworkLogoData, setFrameworkLogoData] = useState([]);\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n\n  const [errorMsgTitle, setErrorMsgTitle] = useState();\n  const [errorMsgJobTitle, setErrorMsgJobTitle] = useState();\n\n  const [frameworkMoreData, setFrameworkMoreData] = useState();\n\n  let errors = [];\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    // Set variables from Local Storage to populate form fields onload\n    const bootstrap = () => {\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n      setProfile(storedProfile);\n\n      if (storedProfile) {\n        setTitle(storedProfile.title);\n        setJobTitle(storedProfile.jobTitle);\n        setAge(storedProfile.age);\n        setGender(storedProfile.gender);\n        setQualification(storedProfile.qualification);\n        setCurrentRole(storedProfile.currentRole);\n        setAdditionalInfo(storedProfile.additionalInfo);\n        if (storedProfile.selectedFileData[0]) {\n          setSelectedFileData(storedProfile.selectedFileData);\n          setImgpreview(storedProfile.selectedFileData[0].src);\n        }\n      }\n    };\n\n    // Calling multiple APIs, since data Framework are in two different endpoints\n    const fetchData = async () => {\n      try {\n        const promise1 = http\n          .get(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n          )\n          .then(response1 => response1.data);\n\n        const promise2 = http\n          .get(`${apiUrl}/api/version_manager?_format=json`)\n          .then(response2 => response2.data);\n\n        const [data1, data2] = await Promise.all([promise1, promise2]);\n        // Get current Framework only\n\n        // if (frameworkMoreData[0].logo[0].url) {\n\n        //   toDataURL(frameworkMoreData[0].logo[0].url, function(myBase64) {\n        //     let img = new Image();\n        //     img.src = myBase64;\n        //     img.addEventListener('load', function() {\n        //       img.width = this.width;\n        //       img.height = this.height;\n        //       setFrameworkLogoData([\n        //         {\n        //           url: frameworkMoreData[0].logo[0].url,\n        //           src: img.src,\n        //           width: this.width,\n        //           height: this.height\n        //         }\n        //       ]);\n        //     });\n        //   });\n        // }\n        setFramework(data1);\n        setFrameworkMoreData(\n          data2.filter(item => {\n            return item.title.toLowerCase() === frameworkName;\n          })\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    bootstrap();\n    fetchData();\n  }, [selectedFile]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    let frameworkId = framework[0].nid;\n    let frameworkName = framework[0].title;\n    let frameworkUuid = framework[0].uuid;\n    console.log(frameworkMoreData);\n    let liveVersion = frameworkMoreData[0].versions.find(\n      ver => ver.status == 'live'\n    );\n\n    let versionID = liveVersion.id;\n    var arrayBuffer = '';\n    var fileid = null;\n\n    // Do nothing if Form doesn't pass validation criteris above\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n    }\n    // Check if is Anonymous/Authenticated\n    else if (!localStorage.getItem('roles')) {\n      setErrorMsgTitle('');\n      setErrorMsgJobTitle('');\n\n      // Retrieve values from Local Storage if exist\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n\n      profileService.mapDownloadProfile({\n        title,\n        frameworkId,\n        frameworkLogoData,\n        frameworkName,\n        frameworkUuid,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        selectedFile,\n        // selectedFileData: storedProfile ? selectedFileData ? selectedFileData : '' : '',\n        selectedFileData,\n        mapping: storedProfile ? storedProfile.mapping : [],\n        mappingAttributes: storedProfile ? storedProfile.mappingAttributes : []\n      });\n      //props.history.push('/framework/bioexcel/2.0/profile/map/download/');\n    } else if (localStorage.getItem('roles').includes('framework_manager')) {\n      if (selectedFile) {\n        let token = localStorage.getItem('csrf_token');\n        await fetch(\n          apiUrl + '/file/upload/node/profile/field_image?_format=hal_json',\n          {\n            credentials: 'include',\n            method: 'POST',\n            cookies: 'x-access-token',\n            headers: {\n              accept: 'application/octet-stream',\n              'Content-Type': 'application/octet-stream',\n              'X-CSRF-Token': token,\n              'Content-Disposition': 'file; filename=\"persona_picture.png\"'\n            },\n            body: selectedFile\n          }\n        )\n          .then(resp => resp.json())\n          .then(function(data) {\n            fileid = data.fid[0].value;\n          });\n      }\n\n      let response = await profileService.createProfile({\n        title,\n        frameworkId,\n        frameworkUuid,\n        versionID,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        fileid\n      });\n\n      props.history.push(\n        `/framework/${frameworkName.toLowerCase()}/${frameworkVersion}/profile/view/${\n          response.nid[0].value\n        }/${response.path[0].alias}`\n      );\n    }\n  };\n\n  const setPreview = () => {\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/preview`,\n      {\n        title: title\n      }\n    );\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type != 'image/jpeg' &&\n        e.target.files[0].type != 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      // convert image file to base64 string. From https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      const reader = new FileReader();\n      reader.addEventListener(\n        'load',\n        function() {\n          // Set Image Preview\n          setImgpreview(reader.result);\n\n          // Set selected image src\n          let img = new Image();\n          img.src = reader.result;\n          img.addEventListener('load', function() {\n            img.width = this.width;\n            img.height = this.height;\n\n            setSelectedFileData([\n              {\n                src: this.src,\n                width: this.width,\n                height: this.height\n              }\n            ]);\n          });\n        },\n        false\n      );\n      if (e.target.files) {\n        reader.readAsDataURL(e.target.files[0]);\n      }\n\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setSelectedFile(undefined);\n    setImgpreview(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Add Competencies';\n    }\n\n    return <input type=\"submit\" className=\"button\" value={submitButtonLabel} />;\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  // From https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript\n  const getImageData = (url, callback) => {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n        return callback(reader.result);\n      };\n      reader.readAsDataURL(xhr.response);\n    };\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.send();\n  };\n\n  const toDataURL = (src, callback, outputFormat) => {\n    var img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = function() {\n      var canvas = document.createElement('CANVAS');\n      var ctx = canvas.getContext('2d');\n      var dataURL;\n      canvas.height = this.naturalHeight;\n      canvas.width = this.naturalWidth;\n      ctx.drawImage(this, 0, 0);\n      dataURL = canvas.toDataURL(outputFormat);\n      callback(dataURL);\n    };\n    img.src = src;\n    if (img.complete || img.complete === undefined) {\n      img.src =\n        'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n      img.src = src;\n    }\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  return (\n    <div>\n      <h2>Create {placeholder} profile</h2>\n      <form className=\"form\" id=\"profile_create_form\" onSubmit={handleSubmit}>\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Name</strong>\n              <input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Name\"\n                onChange={e => setTitle(e.target.value)}\n                defaultValue={profile ? profile.title : title}\n              />\n              <div className={titleCalloutClass}>\n                <i>{nameHelp}</i>\n              </div>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Job title</strong>\n              <input\n                type=\"text\"\n                id=\"jobTitle\"\n                placeholder=\"Job title\"\n                onChange={e => setJobTitle(e.target.value)}\n                defaultValue={profile ? profile.jobTitle : jobTitle}\n              />\n              <div className={jobTitleCalloutClass}>\n                <i>{jobTitleHelp}</i>\n              </div>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">&nbsp;</div>\n          <div className=\"column large-8\" />\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Image</strong>\n              <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n            </span>\n\n            <span>\n              <img\n                id=\"imgpreview_image\"\n                width=\"100px\"\n                src={imgpreview}\n                height=\"100px\"\n                style={{\n                  border: '1px solid #ccc',\n                  padding: '5px',\n                  width: '30%'\n                }}\n              />\n              {imgpreview ? (\n                <div>\n                  <a href=\"#\" onClick={e => clearimgpreview(e)}>\n                    Clear image x\n                  </a>\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileSizeError ? (\n                <div className=\"small callout alert\">\n                  <em> Image size should not be more than 2 MB </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileTypeError ? (\n                <div className=\"small callout alert\">\n                  <em> Only JPG or PNG images are allowed </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n            </span>\n\n            <br />\n            <br />\n            <span>\n              <strong>Age (in years)</strong>\n              <input\n                type=\"number\"\n                id=\"age\"\n                placeholder=\"Age\"\n                width={4}\n                onChange={e => setAge(e.target.value)}\n                defaultValue={profile ? profile.age : age}\n              />\n            </span>\n\n            <span>\n              <strong>Gender</strong>\n              <select\n                onChange={e => setGender(e.target.value)}\n                defaultValue={profile ? profile.gender : gender}\n              >\n                <option value={'None'}>None</option>\n                <option value={'Male'}>Male</option>\n                <option value={'Female'}>Female</option>\n                <option value={'Nonbinary'}>Nonbinary</option>\n                <option value={'Prefernottosay'}>Prefer not to say</option>\n              </select>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Qualification and background</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={qualification}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setQualification(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Activities of current role</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={currentRole}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setCurrentRole(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Additional information</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={additionalInfo}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setAdditionalInfo(data);\n                }}\n              />\n            </span>\n            <br />\n          </div>\n        </div>\n\n        <p />\n        <div className=\"row\">\n          <div className=\"column medium-2\" />\n          <div className=\"column medium-3\">\n            <ButtonLabel />\n          </div>\n          <div className=\"column medium-7\" />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const CreateProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/create\"\n      component={ProfileCreate}\n    />\n  </Switch>\n);\n\nexport default CreateProfile;\n","import React from 'react';\nimport ReactModal from 'react-modal';\n\nconst GuestHelp = props => {\n  const modalOpen = props.modalOpen;\n\n  const closeModal = e => {\n    //e.preventDefault(e);\n    props.closeModal();\n  };\n\n  const customStyles = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: 'auto',\n      bottom: 'auto',\n      marginRight: '-50%',\n      transform: 'translate(-50%, -50%)',\n      width: '70%',\n      backgroundColor: '#f1f1f1'\n    }\n  };\n\n  return (\n    <div>\n      <ReactModal isOpen={modalOpen} style={customStyles}>\n        <button style={{ float: 'right' }} onClick={e => closeModal(e)}>\n          <i class=\"icon icon-common icon-window-close\" />\n        </button>\n        <h2>Help</h2>\n        <h4>Create/edit your profile</h4>\n        <p class=\"lead\">\n          You may fill the Create/Edit Profile form in order to create your own\n          user profile. The profile will be saved in your browser.\n        </p>\n\n        <h4>Map competencies to your profile</h4>\n        <p class=\"lead\">\n          After creating your profile, the next step is to map it with the\n          competencies. In the mapping form, you may select the level of\n          expertise from the dropdown and choose the attributes that are\n          applicable in your case.\n        </p>\n\n        <h4>Compare your profile</h4>\n        <p class=\"lead\">\n          After creating your profile and mapping it to competencies. You can\n          compare your profile with another reference profile and see the\n          summary of differences between the two.\n        </p>\n\n        <h4>Save / download your profile</h4>\n        <p class=\"lead\">\n          After creating your profile and mapping it to competencies, you may\n          click the print button and download the profile in your desired\n          format.\n        </p>\n      </ReactModal>\n    </div>\n  );\n};\n\nexport default GuestHelp;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport GuestHelp from './GuestHelp';\n\nexport const ProfileCreateGuest = props => {\n  const history = useHistory();\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState('');\n  const [age, setAge] = useState('');\n  const [currentRole, setCurrentRole] = useState('');\n  const [gender, setGender] = useState('');\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [selectedFileData, setSelectedFileData] = useState([]);\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [additionalInfo, setAdditionalInfo] = useState('');\n\n  const [framework, setFramework] = useState();\n  const [frameworkLogoData, setFrameworkLogoData] = useState([]);\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n\n  const [errorMsgTitle, setErrorMsgTitle] = useState();\n  const [errorMsgJobTitle, setErrorMsgJobTitle] = useState();\n\n  const [frameworkMoreData, setFrameworkMoreData] = useState();\n\n  const [modalOpen, setModelOpen] = useState(0);\n\n  let errors = [];\n\n  var storedProfile = JSON.parse(localStorage.getItem('guestProfile'));\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    // Set variables from Local Storage to populate form fields onload\n    let bootstrap = async () => {\n      await setProfile(storedProfile);\n\n      if (storedProfile) {\n        setTitle(storedProfile.title);\n        setJobTitle(storedProfile.job_title);\n        setAge(parseInt(storedProfile.age));\n        setGender(storedProfile.gender);\n        setQualification(storedProfile.qualification_background);\n        setCurrentRole(storedProfile.current_role);\n        setAdditionalInfo(storedProfile.additional_information);\n        if (storedProfile.image[0]) {\n          setSelectedFileData(storedProfile.image);\n          setImgpreview(storedProfile.image[0].url);\n        }\n      }\n    };\n\n    // Calling multiple APIs, since data Framework are in two different endpoints\n    const fetchData = async () => {\n      try {\n        const promise1 = http\n          .get(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n          )\n          .then(response1 => response1.data);\n\n        const promise2 = http\n          .get(`${apiUrl}/api/version_manager?_format=json`)\n          .then(response2 => response2.data);\n\n        const [data1, data2] = await Promise.all([promise1, promise2]);\n        setFramework(data1);\n        setFrameworkMoreData(\n          data2.filter(item => {\n            return item.title.toLowerCase() === frameworkName;\n          })\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    bootstrap();\n    fetchData();\n  }, [selectedFile]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    let frameworkId = framework[0].nid;\n    //let frameworkName = framework[0].title;\n    let frameworkUuid = framework[0].uuid;\n    //console.log(frameworkMoreData);\n    let liveVersion = frameworkMoreData[0].versions.find(\n      ver => ver.status == 'live'\n    );\n\n    //let versionID = liveVersion.id;\n    let versionNumber = frameworkVersion;\n    var arrayBuffer = '';\n    var fileid = null;\n\n    // Do nothing if Form doesn't pass validation criteris above\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n      return 0;\n    }\n    // Check if is Anonymous/Authenticated\n    else if (!localStorage.getItem('roles')) {\n      setErrorMsgTitle('');\n      setErrorMsgJobTitle('');\n\n      // Retrieve values from Local Storage if exist\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n\n      let current_role = currentRole ? currentRole : '';\n      let job_title = jobTitle ? jobTitle : '';\n      let qualification_background = qualification ? qualification : '';\n      let additional_information = additionalInfo ? additionalInfo : '';\n      let image = selectedFileData ? selectedFileData : '';\n\n      profileService.createGuestProfile(\n        frameworkName,\n        frameworkId,\n        versionNumber,\n        title,\n        age,\n        current_role,\n        gender,\n        job_title,\n        qualification_background,\n        additional_information,\n        image\n      );\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest/`\n      );\n    }\n  };\n\n  const setPreview = () => {\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/preview`,\n      {\n        title: title\n      }\n    );\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type != 'image/jpeg' &&\n        e.target.files[0].type != 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      // convert image file to base64 string. From https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      const reader = new FileReader();\n      reader.addEventListener(\n        'load',\n        function() {\n          // Set Image Preview\n          setImgpreview(reader.result);\n\n          // Set selected image src\n          let img = new Image();\n          img.src = reader.result;\n          img.addEventListener('load', function() {\n            img.width = this.width;\n            img.height = this.height;\n\n            setSelectedFileData([\n              {\n                url: this.src\n              }\n            ]);\n          });\n        },\n        false\n      );\n      if (e.target.files) {\n        reader.readAsDataURL(e.target.files[0]);\n      }\n\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setSelectedFile(undefined);\n    setImgpreview(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    setSelectedFileData(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Save and Map Competencies';\n    }\n\n    return <input type=\"submit\" className=\"button\" value={submitButtonLabel} />;\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  // From https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript\n  const getImageData = (url, callback) => {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n        return callback(reader.result);\n      };\n      reader.readAsDataURL(xhr.response);\n    };\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.send();\n  };\n\n  const toDataURL = (src, callback, outputFormat) => {\n    var img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = function() {\n      var canvas = document.createElement('CANVAS');\n      var ctx = canvas.getContext('2d');\n      var dataURL;\n      canvas.height = this.naturalHeight;\n      canvas.width = this.naturalWidth;\n      ctx.drawImage(this, 0, 0);\n      dataURL = canvas.toDataURL(outputFormat);\n      callback(dataURL);\n    };\n    img.src = src;\n    if (img.complete || img.complete === undefined) {\n      img.src =\n        'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n      img.src = src;\n    }\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  const openModal = e => {\n    e.preventDefault();\n    setModelOpen(true);\n  };\n\n  const closeModal = () => {\n    //e.preventDefault();\n    setModelOpen(false);\n  };\n\n  return (\n    <div>\n      <nav>\n        <Link to={'/'}>Home</Link> /{' '}\n        <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n          {' '}\n          {frameworkName} {frameworkVersion}{' '}\n        </Link>{' '}\n      </nav>\n      <h2>Create / Edit {placeholder} profile</h2>\n      <div className=\"callout warning\">\n        <i class=\"icon icon-common icon-exclamation-triangle\" /> Your profile\n        will be saved in your browser. Click{' '}\n        <a href=\"#\" onClick={e => openModal(e)}>\n          {' '}\n          here{' '}\n        </a>{' '}\n        for help.\n        <GuestHelp modalOpen={modalOpen} closeModal={closeModal} />\n      </div>\n      <form className=\"form\" id=\"profile_create_form\" onSubmit={handleSubmit}>\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Name</strong>\n              <input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Name\"\n                onChange={e => setTitle(e.target.value)}\n                defaultValue={profile ? profile.title : ''}\n              />\n              <div className={titleCalloutClass}>\n                <i>{nameHelp}</i>\n              </div>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Job title</strong>\n              <input\n                type=\"text\"\n                id=\"jobTitle\"\n                placeholder=\"Job title\"\n                onChange={e => setJobTitle(e.target.value)}\n                defaultValue={profile ? profile.job_title : ''}\n              />\n              <div className={jobTitleCalloutClass}>\n                <i>{jobTitleHelp}</i>\n              </div>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">&nbsp;</div>\n          <div className=\"column large-8\" />\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Image</strong>\n              <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n            </span>\n\n            <span>\n              <img\n                id=\"imgpreview_image\"\n                width=\"100px\"\n                src={imgpreview}\n                height=\"100px\"\n                style={{\n                  border: '1px solid #ccc',\n                  padding: '5px',\n                  width: '30%'\n                }}\n              />\n              {imgpreview ? (\n                <div>\n                  <a href=\"#\" onClick={e => clearimgpreview(e)}>\n                    Clear image x\n                  </a>\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileSizeError ? (\n                <div className=\"small callout alert\">\n                  <em> Image size should not be more than 2 MB </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileTypeError ? (\n                <div className=\"small callout alert\">\n                  <em> Only JPG or PNG images are allowed </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n            </span>\n\n            <br />\n            <br />\n            <span>\n              <strong>Age (in years)</strong>\n              <input\n                type=\"number\"\n                id=\"age\"\n                placeholder=\"Age\"\n                width={4}\n                onChange={e => setAge(e.target.value)}\n                defaultValue={profile ? profile.age : ''}\n              />\n            </span>\n\n            <span>\n              <strong>Gender</strong>\n              <select\n                onChange={e => setGender(e.target.value)}\n                //defaultValue={gender?gender:'-None-'}\n                value={gender ? gender : '-None-'}\n              >\n                <option value={'None'}>None</option>\n                <option value={'Male'}>Male</option>\n                <option value={'Female'}>Female</option>\n                <option value={'Nonbinary'}>Nonbinary</option>\n                <option value={'Prefernottosay'}>Prefer not to say</option>\n              </select>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Qualification and background</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={\n                  storedProfile ? storedProfile.qualification_background : ''\n                }\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setQualification(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Activities of current role</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile ? storedProfile.current_role : ''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setCurrentRole(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Additional information</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile ? storedProfile.additional_information : ''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setAdditionalInfo(data);\n                }}\n              />\n            </span>\n            <br />\n          </div>\n        </div>\n\n        <p />\n        <div className=\"row\">\n          <div className=\"column medium-2\" />\n          <div className=\"column medium-3\">\n            <ButtonLabel />\n          </div>\n          <div className=\"column medium-7\" />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const Path = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/create/guest\"\n      component={ProfileCreateGuest}\n    />\n  </Switch>\n);\n\nexport default Path;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n//import CKEditor from 'react-ckeditor-component';\nimport Parser from 'html-react-parser';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactTooltip from 'react-tooltip';\n\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nconst $ = window.$;\n\nexport const ProfileView = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n  const alias = props.location.pathname.split('/')[7];\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const [userFrameworks, setUserFrameworks] = useState([]);\n\n  var competencyView = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  var mapping = [];\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n  var userName = localStorage.getItem('user')\n    ? localStorage.getItem('user')\n    : '';\n\n  let profile2Expertise = '';\n  let width2 = '';\n  let floatRight = '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&timestamp=${Date.now()}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/authorisation/${userName}?_format=json`, {\n        method: 'GET',\n        credentials: 'include'\n      })\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setUserFrameworks(findresponse);\n        });\n    };\n    fetchData();\n  }, [profileId]);\n\n  const checkAlias = () => {\n    if (profile) {\n      let url_alias = profile.url_alias;\n\n      if (profile.url_alias != alias) {\n        props.history.push(\n          `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}${url_alias}`\n        );\n      }\n    }\n  };\n\n  const getExpertise = competency => {\n    if (mapping) {\n      let obj = mapping.find(o => o.competency == competency);\n      if (obj) {\n        if (frameworkInfo) {\n          let expertise = frameworkInfo\n            .find(info => info.title.toLowerCase() === frameworkName)\n            .expertise_levels.find(level => level.id == obj.expertise);\n          return expertise;\n        }\n      } else {\n        return '';\n      }\n    }\n  };\n\n  const getAttributeStatus = aid => {\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a == aid)\n      );\n      return attribute_check_status;\n    }\n  };\n\n  const getBarWidth = data => {\n    let totalLevels = frameworkInfo.find(\n      info => info.title.toLowerCase() === frameworkName\n    ).expertise_levels.length;\n    width2 = data ? 100 / ((totalLevels - 1) / data.rating_level) : 0;\n    return width2;\n  };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            //level => (expertise_levels[level.rating_level] = level.title)\n            level =>\n              expertise_levels_legend.push(\n                <li className=\"vf-list__item\" style={{ textAlign: 'center' }}>\n                  <div\n                    data-tip={level.description ? level.description : 'NA'}\n                    data-html={true}\n                    data-type=\"info\"\n                    data-multiline={true}\n                  >\n                    <span className=\"vf-badge vf-badge--tertiary\">\n                      {' '}\n                      {level.rating_level}{' '}\n                    </span>{' '}\n                    <span> {level.title}</span>\n                  </div>\n                  <ReactTooltip class=\"tooltip-custom\" />\n                </li>\n              )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (profile) {\n      mapping = profile.profile_mapping;\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <>\n            <div>\n              <div>\n                <h4>{domain.title}</h4>{' '}\n              </div>\n            </div>\n            <div>\n              <div>\n                {domain.competencies.map(competency => (\n                  <>\n                    <div className=\"vf-grid vf-grid__col-4\">\n                      <div className=\"vf-grid__col--span-3\">\n                        <span className=\"vf-text vf-text-heading--5 competency_title\">\n                          {competency.title.length > 150\n                            ? competency.title\n                                .split(' ')\n                                .splice(0, 18)\n                                .join(' ') + ' ..'\n                            : competency.title}\n                        </span>\n                      </div>\n                      <div className=\"vf-grid__col--span-1\">\n                        <div className=\"fillerbg\">\n                          <div\n                            className=\"fillerRight\"\n                            style={{\n                              width:\n                                getBarWidth(getExpertise(competency.id)) + '%',\n                              display: 'flow-root'\n                            }}\n                          >\n                            <span\n                              style={{\n                                float:\n                                  getBarWidth(getExpertise(competency.id)) == 0\n                                    ? 'none'\n                                    : 'right'\n                              }}\n                              className=\"rating_level_number\"\n                            >\n                              {getExpertise(competency.id)\n                                ? getExpertise(competency.id).rating_level\n                                : 0}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"profile_collapsible\">\n                      <Collapsible\n                        trigger={\n                          <div className=\"open-close-title\">\n                            <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                          </div>\n                        }\n                        triggerWhenOpen={\n                          <div className=\"open-close-title\">\n                            <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                          </div>\n                        }\n                      >\n                        {attribute_types.map(attribute_type => {\n                          return (\n                            <div\n                              className=\"accordion-item is-active\"\n                              data-accordion-item\n                            >\n                              <div className=\"embl-grid\">\n                                <div />\n                                <ul className=\"vf-list\">\n                                  <div>\n                                    <strong> {attribute_type} </strong>\n                                  </div>\n                                  {competency.attributes\n                                    .filter(\n                                      attribute =>\n                                        attribute.type === attribute_type\n                                    )\n                                    .map(attribute => {\n                                      return (\n                                        <li className=\"vf-list__item\">\n                                          <span style={{ marginRight: '20px' }}>\n                                            {getAttributeStatus(\n                                              attribute.id,\n                                              'profile1'\n                                            ) ? (\n                                              <i className=\"icon icon-common icon-check\" />\n                                            ) : (\n                                              '-'\n                                            )}\n                                          </span>\n                                          <span>{attribute.title}</span>\n                                        </li>\n                                      );\n                                    })}\n                                </ul>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </Collapsible>\n                    </div>\n                  </>\n                ))}\n              </div>\n            </div>\n          </>\n        ))\n      );\n    }\n  };\n\n  const handleDownload = e => {\n    e.preventDefault();\n\n    // Download Profile\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    downloadProfileFromHtml(storedProfile);\n  };\n  const downloadProfileFromHtml = options => {\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    var specialElementHandlers = {\n      '#editor': function(element, renderer) {\n        return true;\n      }\n    };\n\n    let margins = {\n      top: startHeight,\n      bottom: 60,\n      left: marginleft,\n      right: marginright,\n      width: 490\n    };\n    var sourceFull = document.getElementById('profile');\n    var source = sourceFull;\n\n    let profileTitle = options.jobTitle.split(' ').join('_');\n    doc.fromHTML(\n      source,\n      marginleft,\n      currentYAxis,\n      {\n        // y coord\n        width: margins.width, // max width of content on PDF\n        elementHandlers: specialElementHandlers\n      },\n      function(dispose) {\n        // dispose: object with X, Y of the last line add to the PDF\n        //          this allow the insertion of new lines after html\n        doc.save(profileTitle.toLowerCase() + '.pdf');\n      }\n      // margins\n    );\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateProfileView()}\n      <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\n        <ul class=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\n          <li class=\"vf-breadcrumbs__item\">\n            <Link to={'/'}>Home</Link>\n          </li>\n          <li class=\"vf-breadcrumbs__item\">\n            <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n              {' '}\n              {frameworkFullName} {frameworkVersion}{' '}\n            </Link>{' '}\n          </li>\n          <li class=\"vf-breadcrumbs__item\" aria-current=\"location\">\n                      Profile view\n                  </li>\n        </ul>\n      </nav>\n      {profile ? (\n        <div id=\"profile\">\n          <div style={{ float: 'right' }}>\n            {user_roles.search('framework_manager') !== -1 &&\n            userFrameworks.length > 0 &&\n            userFrameworks.includes(frameworkFullName) ? (\n              <ul>\n                <li className=\"profile_navigation\">\n                  <Link\n                    className=\"vf-button vf-button--primary vf-button--sm\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/edit/${profileId}`}\n                  >\n                    Edit overview\n                    <i className=\"icon icon-common icon-pencil-alt\" />\n                  </Link>\n                </li>\n                <li className=\"profile_navigation\">\n                  <Link\n                    className=\"vf-button vf-button--primary vf-button--sm\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/map/${profileId}`}\n                  >\n                    Map competencies <i className=\"icon icon-common icon-cog\" />{' '}\n                    {console.log(localStorage.getItem('roles'))}\n                  </Link>\n                </li>\n              </ul>\n            ) : (\n              <Link\n                className=\"vf-button vf-button--primary vf-button--sm\"\n                to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/guest`}\n              >\n                Create your profile <i className=\"icon icon-common icon-plus\" />\n              </Link>\n            )}\n          </div>\n          <h2 style={{ marginTop: '1em', marginBottom: '1em' }}>\n            {profile.title} - {profile.job_title}\n          </h2>\n\n          <div className={profile.publishing_status + ' embl-grid'}>\n            <div>\n              <center>\n                <img\n                  style={{ display: 'block', maxWidth: '200px' }}\n                  src={profile.image[0] ? profile.image[0].url : ''}\n                />\n              </center>\n              <p />\n              <p style={{ textAlign: 'center' }}>\n                {profile.gender !== 'None' ? (\n                  <div>\n                    <p>\n                      {profile.gender && profile.gender === 'Prefernottosay' ? (\n                        <p> Gender: Prefer not to say </p>\n                      ) : (\n                        ''\n                      )}\n                    </p>\n                    <p>\n                      {profile.gender && profile.gender !== 'Prefernottosay' ? (\n                        <p> Gender: {profile.gender} </p>\n                      ) : (\n                        ''\n                      )}\n                    </p>\n                  </div>\n                ) : (\n                  ''\n                )}\n                {profile.age ? profile.age + ' years' : ''}\n              </p>\n            </div>\n            <div>\n              <h3>Qualification and background</h3>\n              <p>\n                {profile.qualification_background\n                  ? Parser(profile.qualification_background)\n                  : ''}\n              </p>\n\n              <h3>Activities of current role</h3>\n              <p>{profile.current_role ? Parser(profile.current_role) : ''}</p>\n\n              <p>\n                {profile.additional_information\n                  ? Parser(profile.additional_information)\n                  : ''}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"row\">\n            <div className=\"column medium-3\">\n              {' '}\n              <h5 style={{ marginTop: '25px' }}>\n                {frameworkFullName} {frameworkVersion} / Competencies\n              </h5>\n            </div>\n            <div className=\"column medium-9 \" />\n          </div>\n          <div className=\"row\">\n            <div className=\"column medium-12\">\n              <ul className=\"vf-list legend-inline\" style={{ float: 'right' }}>\n                {expertise_levels_legend}\n              </ul>\n            </div>\n          </div>\n          <hr />\n          {competencyView}\n        </div>\n      ) : (\n        'Loading profile'\n      )}\n\n      <form onSubmit={e => handlePrint(e)}>\n        <div className=\"submit_fixed\">\n          <button className=\"vf-button\" type=\"submit\">\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const ViewProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/view/:id/:alias\"\n      component={ProfileView}\n    />\n  </Switch>\n);\n\nexport default ViewProfile;\n","import React from 'react';\nimport { useHistory, Link } from 'react-router-dom';\n//import { apiUrl } from '../services/http/http';\n//import ProfileService from '../services/profile/profile';\n//import ActiveRequestsService from '../services/active-requests/active-requests';\n//import { Link, Redirect } from 'react-router-dom';\n//import RadarChart from 'react-svg-radar-chart';\nimport 'react-svg-radar-chart/build/css/index.css';\n//import user_icon from './user_icon.png';\nimport Collapsible from 'react-collapsible';\n\nexport const ProfilesCompareButterfly = props => {\n  let history = useHistory();\n  const frameworkName = props.frameworkName;\n  const frameworkVersion = props.frameworkVersion;\n  //const profile1Id = props.profile1Id;\n  //const profile2Id = props.profile2Id;\n  const isGuestProfile = props.isGuestProfile;\n\n  const profile1 = props.profile1;\n  const profile2 = props.profile2;\n  const framework = props.framework;\n  const frameworkInfo = props.frameworkInfo;\n\n  var competencyView = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  //var frameworkLogo = '';\n  //var frameworkDesc = '';\n  var mapping1 = [];\n  var mapping2 = [];\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n  var competencies_array = [];\n  var expertise_array = [];\n  var profile1_expertise_obj = new Object();\n  var profile2_expertise_obj = new Object();\n  var chart_props = [];\n  var leftData = [];\n  var rightData = [];\n  var totalLevels = '';\n\n  var includeSummary = [];\n\n  const getExpertise = (competency, profileid) => {\n    let mapping = [];\n    if (profileid == 'profile1') {\n      mapping = mapping1;\n    } else {\n      mapping = mapping2;\n    }\n\n    let obj = mapping.find(o => o.competency == competency);\n    if (obj) {\n      if (frameworkInfo) {\n        // let expertise = frameworkInfo[0].expertise_levels.find(\n        //   level => level.id == obj.expertise\n        // );\n\n        let frm = frameworkInfo.find(\n          info => info.title.toLowerCase() === frameworkName\n        );\n\n        let expertise = frm.expertise_levels.find(\n          level => level.id == obj.expertise\n        );\n        totalLevels = frm.expertise_levels.length;\n        return expertise;\n      }\n    } else {\n      return null;\n    }\n  };\n\n  const getAttributeStatus = (attribute, profile) => {\n    let mapping = '';\n    if (profile == 'profile1') {\n      mapping = profile1.profile_mapping;\n    } else {\n      mapping = profile2.profile_mapping;\n    }\n    //console.log(mapping)\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a == attribute)\n      );\n      //console.log(attribute_check_status)\n      return attribute_check_status ? true : false;\n    }\n  };\n\n  const getAttributeRows = competency => {\n    console.log('hi ' + competency);\n  };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          //frameworkLogo = info.logo[0].url;\n          //frameworkDesc = info.description;\n          info.expertise_levels.map(\n            (level, key) => (expertise_array[key] = level.id) //(expertise_levels[level.id] = level.title)\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        \"<li class='legend'>  <div class='legend_number'> \" +\n          index +\n          '</div>' +\n          level +\n          '</li>'\n      );\n      index++;\n    });\n\n    if (profile1) {\n      mapping1 = profile1.profile_mapping;\n    }\n\n    if (profile2) {\n      mapping2 = profile2.profile_mapping;\n    }\n\n    if (frameworkInfo) {\n      frameworkInfo.map(framework => {\n        if (framework.title == frameworkName) {\n          framework.expertise_levels.map((level, key) => {\n            expertise_array[key] = level.id;\n          });\n          totalLevels = framework.expertise_levels.length;\n        }\n      });\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain =>\n          domain.competencies.map(competency => {\n            let profile1Expertise = getExpertise(competency.id, 'profile1');\n            let profile2Expertise = getExpertise(competency.id, 'profile2');\n\n            if (profile1Expertise && profile2Expertise) {\n              includeSummary.push(\n                profile1Expertise.rating_level < profile2Expertise.rating_level\n                  ? competency.id\n                  : null\n              );\n            } else if (!profile1Expertise && !profile2Expertise) {\n              includeSummary.push(null);\n            } else if (!profile1Expertise && profile2Expertise) {\n              includeSummary.push(competency.id);\n            }\n\n            console.log(totalLevels);\n            let width1 = profile1Expertise\n              ? 100 / ((totalLevels - 1) / profile1Expertise.rating_level)\n              : 0;\n            let margin1 = 100 - width1;\n            margin1 = margin1 == 100 ? 88 : margin1;\n\n            let width2 = profile2Expertise\n              ? 100 / ((totalLevels - 1) / profile2Expertise.rating_level)\n              : 0;\n            let floatRight = width2 == 0 ? 'none' : 'right';\n\n            return (\n              <div>\n                <div className=\"vf-grid vf-grid__col-5\">\n                  <div className=\"vf-grid__col--span-3\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"vf-grid__col--span-1\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerLeft\"\n                        style={{\n                          width: width1 + '%',\n                          marginLeft: margin1 + '%'\n                        }}\n                      >\n                        <span\n                          style={{ position: 'relative' }}\n                          className=\"rating_level_number\"\n                        >\n                          {profile1Expertise\n                            ? profile1Expertise.rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"vf-grid__col--span-1\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{ width: width2 + '%', display: 'flow-root' }}\n                      >\n                        <span\n                          style={{ float: floatRight }}\n                          className=\"rating_level_number\"\n                        >\n                          {profile2Expertise\n                            ? profile2Expertise.rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <span className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <span className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map(attribute_type => {\n                      return (\n                        <>\n                          <p style={{paddingLeft:'20px', marginTop:'10px'}}>\n                            <strong> {attribute_type} </strong>\n                          </p>\n                          <div className=\"vf-grid vf-grid__col-5\">\n                            {competency.attributes\n                              .filter(\n                                attribute => attribute.type == attribute_type\n                              )\n                              .map(attribute => {\n                                return (\n                                  <>\n                                    <span className=\"vf-grid__col--span-3\" style={{paddingLeft:'20px'}}>\n                                      {attribute.title}\n                                    </span>\n\n                                    <div className=\"vf-grid__col--span-1\">\n                                      {getAttributeStatus(\n                                        attribute.id,\n                                        'profile1'\n                                      ) ? (\n                                        <i className=\"icon icon-common icon-check\" />\n                                      ) : (\n                                        '-'\n                                      )}\n                                    </div>\n                                    <div className=\"vf-grid__col--span-1\">\n                                      {getAttributeStatus(\n                                        attribute.id,\n                                        'profile2'\n                                      ) ? (\n                                        <i className=\"icon icon-common icon-check\" />\n                                      ) : (\n                                        '-'\n                                      )}\n                                    </div>\n                                  </>\n                                );\n                              })}\n                          </div>\n                        </>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            );\n          })\n        )\n      );\n    }\n  };\n  if (profile1) {\n    chart_props[0] = {\n      key: profile1.id,\n      label: profile1.title\n    };\n  }\n\n  if (profile2) {\n    chart_props[1] = {\n      key: profile2.id,\n      label: profile2.title\n    };\n  }\n\n  const handlePrint = e => {\n    e.preventDefault();\n    window.print();\n  };\n\n  const handleSummary = e => {\n    e.preventDefault();\n    history.push({\n      pathname: `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/guest/summary`,\n      state: {\n        profileJobTitle: profile1.job_title,\n        includeSummary: includeSummary\n      }\n    });\n  };\n\n  return (\n    <div id=\"\">\n      {generateProfileView()}\n\n      <p>&nbsp; </p>\n      <div className=\"vf-grid vf-grid__col-5\">\n        <div className=\"vf-grid__col--span-3\">\n          <h5>\n            {frameworkFullName} {frameworkVersion} / Competencies\n          </h5>\n        </div>\n        <div className=\"vf-grid__col--span-1\">\n          <h5>{profile1.job_title}</h5>\n        </div>\n        <div className=\"vf-grid__col--span-1\">\n          <h5>{profile2.job_title}</h5>\n        </div>\n      </div>\n\n      <hr />\n      <div className=\"vf-grid vf-grid__col-5\">\n        <div className=\"vf-grid__col--span-3\" />\n        <div className=\"vf-grid__col--span-1\">\n          <span>High</span> <span style={{ float: 'right' }}> Low</span>\n        </div>\n        <div className=\"vf-grid__col--span-1\">\n          <span>Low</span> <span style={{ float: 'right' }}> High</span>\n        </div>\n      </div>\n\n      <div>{competencyView}</div>\n      <div className=\"vf-grid\">\n        <div></div>\n        <div style={{ textAling: 'center' }}>\n          {isGuestProfile ? (\n            <a to={'#'} className=\"vf-button\" onClick={e => handleSummary(e)}>\n              Summary <i className=\"icon-common icon-list\" />\n            </a>\n          ) : (\n            ''\n          )}\n        </div>\n        <div style={{ textAling: 'center' }}>\n          <a href=\"#\" className=\"vf-button\" onClick={e => handlePrint(e)}>\n            Print <i className=\"icon icon-common icon-print\" />\n          </a>\n        </div>\n        <div/>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilesCompareButterfly;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\n\nimport { Link, Redirect } from 'react-router-dom';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\n//import ProfilesCompareTable from './ProfilesCompareTable';\n//import ProfilesCompareGraph from './ProfilesCompareGraph';\nimport ProfilesCompareButterfly from './ProfilesCompareButterfly';\nimport user_icon from './user_icon.png';\nimport Stars from './Stars';\nimport ReactTooltip from 'react-tooltip';\n\nconst $ = window.$;\n\nexport const ProfilesCompare = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profile1Id = props.location.pathname.split('/')[6];\n  const profile2Id = props.location.pathname.split('/')[7];\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n\n  const [profile1, setProfile1] = useState();\n  const [profile2, setProfile2] = useState();\n  const [framework, setFramework] = useState();\n  const [isGuestProfile, setIsGuestProfile] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const [link1, setLink1] = useState();\n  const [link2, setLink2] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        if (profile1Id == 'guest') {\n          await setProfile1(JSON.parse(localStorage.getItem('guestProfile')));\n          setIsGuestProfile(1);\n          setLink1(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n          );\n        } else {\n          setLink1(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profile1Id}/alias`\n          );\n          await fetch(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profile1Id}&timestamp=${Date.now()}`\n          )\n            .then(Response => Response.json())\n            .then(findresponse => {\n              setProfile1(findresponse);\n            });\n        }\n\n        if (profile2Id == 'guest') {\n          await setProfile2(JSON.parse(localStorage.getItem('guestProfile')));\n          setIsGuestProfile(1);\n          setLink2(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n          );\n        } else {\n          setLink2(\n            `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profile2Id}/alias`\n          );\n          await fetch(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profile2Id}&timestamp=${Date.now()}`\n          )\n            .then(Response => Response.json())\n            .then(findresponse => {\n              setProfile2(findresponse);\n            });\n        }\n\n        await fetch(`${apiUrl}/api/version_manager?_format=json`)\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setFrameworkInfo(findresponse);\n          });\n\n        await fetch(\n          `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n        )\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setFramework(findresponse);\n          });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, []);\n\n  if (frameworkInfo) {\n    frameworkInfo.map(info => {\n      if (info.title.toLowerCase() === frameworkName) {\n        info.expertise_levels.map(level =>\n          expertise_levels_legend.push(\n            <li className=\"vf-list__item\" style={{ textAlign: 'center' }}>\n              <div\n                data-tip={level.description ? level.description : 'NA'}\n                data-html={true}\n                data-type=\"info\"\n                data-multiline={true}\n              >\n                <span className=\"vf-badge vf-badge--tertiary\"> {level.rating_level} </span>{' '}\n                <span> {level.title}</span>\n              </div>\n              <ReactTooltip class=\"tooltip-custom\" />\n            </li>\n          )\n        );\n      }\n    });\n  }\n\n  return (\n    <div>\n      <nav className=\"vf-breadcrumbs\" aria-label=\"Breadcrumb\">\n        <ul class=\"vf-breadcrumbs__list | vf-list vf-list--inline\">\n          <li class=\"vf-breadcrumbs__item\">\n            <Link to={'/'}>Home</Link>\n          </li>\n          <li class=\"vf-breadcrumbs__item\">\n            <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n              {' '}\n              {frameworkName} {frameworkVersion}{' '}\n            </Link>{' '}\n          </li>\n          <li class=\"vf-breadcrumbs__item\" aria-current=\"location\">\n            Compare career profiles\n          </li>\n        </ul>\n      </nav>\n      <h3>Compare career profiles</h3>\n      <span className=\"lead\">\n        Compare profile with other reference profiles to help you make career\n        choices based on your competency\n        {console.log(isGuestProfile)}\n      </span>\n\n      <div className=\"vf-grid\">\n        <div />\n        <div>\n          {profile1 ? (\n            <div className=\"profile_badge_page\">\n              <img\n                alt=\"profile1\"\n                src={profile1.image[0] ? profile1.image[0].url : user_icon}\n                width=\"120px\"\n              />\n              <Link to={link1}>\n                <h5>{profile1.job_title}</h5>\n              </Link>\n            </div>\n          ) : (\n            'loading profiles'\n          )}\n        </div>\n\n        <div>\n          {profile2 ? (\n            <div className=\"profile_badge_page\">\n              <img\n                alt=\"profile2\"\n                src={profile2.image[0] ? profile2.image[0].url : user_icon}\n                width=\"120px\"\n              />\n              <Link to={link2}>\n                <h5>{profile2.job_title}</h5>\n              </Link>\n            </div>\n          ) : (\n            'loading profiles'\n          )}\n        </div>\n        <div />\n      </div>\n\n      <div>\n          <div className=\"legend-inline-wrapper\">\n            <strong>Rating levels </strong>{' '}\n            <ul className=\"vf-list legend-inline\">{expertise_levels_legend}</ul>\n          </div>\n      </div>\n      <p />\n\n      {profile1 && profile2 ? (\n        <ProfilesCompareButterfly\n          frameworkName={frameworkName}\n          frameworkVersion={frameworkVersion}\n          profile1Id={profile1Id}\n          profile2Id={profile2Id}\n          profile1={profile1}\n          profile2={profile2}\n          framework={framework}\n          frameworkInfo={frameworkInfo}\n          isGuestProfile={isGuestProfile}\n        />\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\nexport const sendRoute = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profiles/compare/:profile1/:profile2\"\n      component={ProfilesCompare}\n    />\n  </Switch>\n);\n\nexport default sendRoute;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport HttpService from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\nimport Parser from 'html-react-parser';\n\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nconst $ = window.$;\n\nexport const ProfileMapDownload = props => {\n  // const activeRequests = new ActiveRequestsService();\n  // const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [expertiseLevels, setExpertiseLevels] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  // const [ksa, setKsa] = useState();\n  const [profileAttributes, setProfileAttributes] = useState([]);\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkDesc = '';\n  var frameworkLogo = '';\n\n  var mapping = [];\n  let mappingAttributes = [];\n  var expertise_levels_legend = [];\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n\n    if (storedProfile) {\n      // Get Profile from Session\n      setProfile(storedProfile);\n\n      const fetchData = async () => {\n        try {\n          // Get Framework\n          const promiseFramework = http\n            .get(`${apiUrl}/api/version_manager?_format=json`)\n            .then(responseFramework => responseFramework.data);\n\n          // Get Framework version\n          const promiseVersion = http\n            .get(\n              `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n            )\n            .then(responseVersion => responseVersion.data);\n\n          const [dataFramework, dataVersion] = await Promise.all([\n            promiseFramework,\n            promiseVersion\n          ]);\n\n          getExpertiseLevels(dataFramework, dataVersion[0].nid);\n          setFrameworkInfo(dataFramework);\n          setFramework(dataVersion);\n          // return false;\n        } catch (err) {\n          console.log(err);\n        }\n      };\n\n      fetchData();\n    }\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Download Profile\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    downloadProfileFromHtml(storedProfile);\n  };\n\n  const handleMapping = event => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let expertise = event.target[event.target.selectedIndex].text;\n\n    if (expertise_id == expertise_not_applicable) {\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'checked',\n        false\n      );\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'disabled',\n        true\n      );\n\n      removeCompetencyAttributes(competency_id);\n    } else {\n      // Create temp mapping\n      let tempMap = storedProfile['mapping'];\n\n      if (tempMap.find(o => o.competency_id === competency_id)) {\n        // Update stored Competencies only if existing levels of expertise is updated\n        if (tempMap.expertise_id != expertise_id) {\n          var index = tempMap.findIndex(\n            item => item.competency_id === competency_id\n          );\n          // replace current stored values with incoming ones\n          tempMap.splice(index, 1, {\n            competency_id: competency_id,\n            expertise_id: expertise_id,\n            expertise: expertise\n          });\n        }\n        // Update local Storage mapping\n        storedProfile['mapping'] = tempMap;\n        localStorage.setItem(\n          'ProfileDownloadData',\n          JSON.stringify(storedProfile)\n        );\n      } else {\n        // Add competency that has been selected\n        let tempMap = storedProfile['mapping'];\n        tempMap.push({\n          competency_id: competency_id,\n          expertise_id: expertise_id,\n          expertise: expertise\n        });\n        storedProfile['mapping'] = tempMap;\n        localStorage.setItem(\n          'ProfileDownloadData',\n          JSON.stringify(storedProfile)\n        );\n      }\n\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'checked',\n        true\n      );\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'disabled',\n        false\n      );\n\n      // Add Competency's selected attributes to LocalStorage\n      addCompetencyAttributes(competency_id);\n    }\n  };\n\n  // Add all attributes to LocalStorage if Competency is selected\n  const addCompetencyAttributes = competency => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    // let selectedAttributes = new Array();\n\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = $(\n      'input:checkbox[data-competency=' + competency + ']'\n    ).each(function() {\n      if (\n        mappingAttributes.find(attr => attr.attribute_id === $(this).attr('id'))\n      ) {\n        // Do nothing if attributes are in LocalStorage already\n      } else {\n        mappingAttributes.push({\n          attribute_id: $(this).attr('id'),\n          competency_id: competency\n        });\n      }\n    }, mappingAttributes);\n\n    storedProfile['mappingAttributes'] = mappingAttributes;\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(storedProfile));\n    setProfileAttributes(storedProfile);\n  };\n\n  // Remove current attributes if Competency is deselected\n  const removeCompetencyAttributes = competency => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = $(\n      'input:checkbox[data-competency=' + competency + ']'\n    ).each(function() {\n      let index = mappingAttributes.findIndex(\n        item => item.attribute_id === $(this).attr('id')\n      );\n      // Remove current attributes if Competency is deselected\n      mappingAttributes.splice(index, 1);\n    }, mappingAttributes);\n\n    // localStorage.setItem('mappingAttributes', JSON.stringify(mappingAttributes));\n    storedProfile['mappingAttributes'] = mappingAttributes;\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(storedProfile));\n    setProfileAttributes(storedProfile);\n  };\n\n  // Manage single Attributes check/uncheck event\n  const handleCheckboxMapping = event => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let competency_id = event.target.getAttribute('data-competency');\n    let attribute_id = event.target.getAttribute('id');\n\n    // let mappingAttributes = JSON.parse(localStorage.getItem('mappingAttributes'));\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = mappingAttributes;\n\n    if (mappingAttributes.find(attr => attr.attribute_id === attribute_id)) {\n      // Remove current attribute if deselected\n      var index = mappingAttributes.findIndex(\n        item => item.attribute_id === attribute_id\n      );\n      mappingAttributes.splice(index, 1);\n      // localStorage.setItem('mappingAttributes', JSON.stringify(mappingAttributes));\n      storedProfile['mappingAttributes'] = mappingAttributes;\n      localStorage.setItem(\n        'ProfileDownloadData',\n        JSON.stringify(storedProfile)\n      );\n    } else {\n      // Add attribute to LocalStorage\n      attributes.push({\n        attribute_id: attribute_id,\n        competency_id: competency_id\n      });\n      // localStorage.setItem('mappingAttributes', JSON.stringify(attributes));\n      storedProfile['mappingAttributes'] = attributes;\n      $('input:checkbox[id=' + attribute_id + ']').prop('checked', true);\n      localStorage.setItem(\n        'ProfileDownloadData',\n        JSON.stringify(storedProfile)\n      );\n    }\n    setProfileAttributes(storedProfile);\n  };\n\n  // Set Expertise Level.\n  // const expertiseLevelsSelect= [\n  //   {id: 1, title: 'Not applicable', data_expertise: '6816'},\n  //   {id: 2, title: 'Awareness', data_expertise: '6817'},\n  //   {id: 3, title: 'Working knowledge', data_expertise: '6818'},\n  //   {id: 4, title: 'Specialist knowledge', data_expertise: '6819'}\n  // ];\n\n  // Get Expertise Level from API.\n  if (frameworkInfo) {\n    frameworkInfo.map(info => {\n      if (info.title.toLowerCase() === frameworkName) {\n        frameworkFullName = info.title;\n        frameworkLogo = info.logo[0].url;\n        frameworkDesc = info.description;\n        info.expertise_levels.map(\n          level => (expertise_levels[level.rating_level] = level.title)\n        );\n      }\n    });\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        <li style={{ textAlign: 'center' }}>\n          <span className=\"badge secondary\"> {key} </span> <span> {level}</span>\n        </li>\n      );\n      index++;\n    });\n  }\n\n  const getExpertiseLevels = (frameworkInfo, fId) => {\n    let fw = frameworkInfo.filter(item => {\n      return item.nid === fId;\n    });\n\n    let levels = fw[0].expertise_levels;\n\n    // Set Expertise Level\n    setExpertiseLevels(levels);\n  };\n\n  const downloadProfileFromHtml = options => {\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    var specialElementHandlers = {\n      '#editor': function(element, renderer) {\n        return true;\n      }\n    };\n\n    let margins = {\n      top: startHeight,\n      bottom: 60,\n      left: marginleft,\n      right: marginright,\n      width: 490\n    };\n\n    var source = document.getElementById('profile');\n\n    // source = doc.splitTextToSize(\n    //   source,\n    //   profileBody\n    // );\n\n    let profileTitle = options.jobTitle.split(' ').join('_');\n    doc.fromHTML(\n      source,\n      marginleft,\n      currentYAxis,\n      {\n        // y coord\n        width: margins.width, // max width of content on PDF\n        elementHandlers: specialElementHandlers\n      },\n      function(dispose) {\n        // dispose: object with X, Y of the last line add to the PDF\n        //          this allow the insertion of new lines after html\n        doc.save(profileTitle.toLowerCase() + '.pdf');\n      }\n      // margins\n    );\n\n    // doc.output(\"/framework/bioexcel/2.0/profile/map/download/myprofile\");\n  };\n\n  // Set fielc HTML content + Heading if not empty\n  const setFieldContent = (heading, field) => {\n    let fieldContent = field ? '<h3>' + heading + '</h3>' + field : '';\n    return { __html: fieldContent };\n  };\n\n  const generateForm = () => {\n    // console.log('frameworkInfo')\n    // console.log(frameworkInfo)\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title == 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : ''\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (profile) {\n      mapping = profile.mapping;\n\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n      mappingAttributes = storedProfile['mappingAttributes'];\n    }\n\n    if (framework) {\n      competencyForm = framework.map((item, index) =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li key={index} className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h4 className=\"domain_title\"> {domain.title}</h4>\n                </div>\n                <div className=\"column medium-3\">\n                  <h4>Levels of expertise</h4>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li key={cid} className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <h5>\n                                <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                  <p className=\"show-for-sr\">show more</p>\n                                </span>\n                                {competency.title}\n                              </h5>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <h5>\n                                <span className=\"icon icon-common icon-angle-up icon-custom\">\n                                  <p className=\"show-for-sr\">show less</p>\n                                </span>\n                                {competency.title}\n                              </h5>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map((attribute_type, index) => {\n                              return (\n                                <li key={index} className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type == attribute_type\n                                      )\n                                      .map((attribute, jIndex) => (\n                                        <li\n                                          key={jIndex}\n                                          className=\"attribute_title\"\n                                        >\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                onChange={e =>\n                                                  handleCheckboxMapping(e)\n                                                }\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                data-competency={competency.id}\n                                                checked={\n                                                  mappingAttributes.find(\n                                                    attr =>\n                                                      attr.attribute_id ==\n                                                      attribute.id\n                                                  )\n                                                    ? true\n                                                    : false\n                                                }\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className={\n                                                  mappingAttributes.find(\n                                                    attr =>\n                                                      attr.attribute_id ==\n                                                      attribute.id\n                                                  )\n                                                    ? 'attribute_label checked'\n                                                    : 'attribute_label'\n                                                }\n                                                htmlFor={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleMapping(e)}\n                          defaultValue={\n                            mapping.find(o => o.competency_id == competency.id)\n                              ? mapping.find(\n                                  o => o.competency_id == competency.id\n                                ).expertise_id\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertiseLevels.map((level, key) => (\n                            <option\n                              key={key}\n                              value={level.id}\n                              data-expertise={level.id}\n                              data-competency={competency.id}\n                            >\n                              {level.title}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>Add competencies to your profile </h2>\n\n            <div id=\"profile\" className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <h3>\n                    {profile.title.charAt(0).toUpperCase() +\n                      profile.title.slice(1)}{' '}\n                    - {profile.jobTitle}\n                  </h3>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3 text-center\">\n                  {profile.selectedFileData[0] ? (\n                    <img\n                      src={\n                        profile.selectedFileData[0].src\n                          ? profile.selectedFileData[0].src\n                          : user_icon\n                      }\n                      width=\"250px\"\n                    />\n                  ) : (\n                    ''\n                  )}\n                  <div className=\"text-center\">\n                    <br />\n                    {profile.gender}, {profile.age} years\n                  </div>\n                </div>\n                <div className=\"column medium-9\">\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Qualifications and background',\n                      profile.qualification\n                    )}\n                  />\n                  {/* <div className=\"form_intro\"\n                    dangerouslySetInnerHTML={{ __html: profile.qualification }}\n                  /> */}\n\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Activities and current role',\n                      profile.currentRole\n                    )}\n                  />\n\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Additional information',\n                      profile.additionalInfo\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <br />\n                  <h3>Your competencies</h3>\n                  <p>\n                    The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                  <p>\n                    You may assign a level expertise against each competency.\n                    The levels of expertise are:\n                  </p>\n                  <div className=\"legend-inline-wrapper\">\n                    <strong>Rating levels </strong>{' '}\n                    <ul className=\"legend-inline\">{expertise_levels_legend}</ul>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <div className=\"competency_section\">\n                    {\n                      <form onSubmit={e => handleSubmit(e)}>\n                        {competencyForm}\n                        <div className=\"submit_fixed\">\n                          <button className=\"button\" type=\"submit\">\n                            Print <i className=\"icon icon-common icon-print\" />\n                          </button>\n                        </div>\n                      </form>\n                    }\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {/* <div>{profile.qualification}</div> */}\n\n                  {/* <div>{profile.currentRole}</div> */}\n                  {/* <h5>{profile.title}</h5> */}\n                  {/* <Link\n                    to={`/framework/bioexcel/2.0/profile/view/${profileId}/alias`}\n                  >\n                    {' '}\n                    <i className=\"icon icon-common icon-angle-left\" /> Profile\n                    overview{' '}\n                  </Link> */}\n                </div>\n                <div className=\"column medium-6 form_intro\" />\n                <div className=\"column medium-3\">\n                  {/* <img src={frameworkLogo} />\n                  <br /> */}\n                </div>\n              </div>\n\n              {/* <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Download{' '}\n                        <i className=\"icon icon-common icon-download\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div> */}\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const MapProfileDownload = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/download\"\n      component={ProfileMapDownload}\n    />\n  </Switch>\n);\n\nexport default MapProfileDownload;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Parser from 'html-react-parser';\n\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactTooltip from 'react-tooltip';\nimport user_icon from './user_icon.png';\nconst $ = window.$;\n\nexport const ProfileViewGuest = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  var competencyView = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  var mapping = [];\n\n  let profile2Expertise = '';\n  let width2 = '';\n  let floatRight = '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await setProfile(JSON.parse(localStorage.getItem('guestProfile')));\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n  }, []);\n\n  const getExpertise = competency => {\n    if (mapping) {\n      let obj = mapping.find(o => o.competency == competency);\n      if (obj) {\n        if (frameworkInfo) {\n          // let expertise = frameworkInfo[0].expertise_levels.find(\n          //   level => level.id == obj.expertise\n          // );\n          let expertise = frameworkInfo\n            .find(info => info.title.toLowerCase() === frameworkName)\n            .expertise_levels.find(level => level.id == obj.expertise);\n          return expertise;\n        }\n      } else {\n        return '';\n      }\n    }\n  };\n\n  const getAttributeStatus = aid => {\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a == aid)\n      );\n      return attribute_check_status;\n    }\n  };\n\n  const getBarWidth = data => {\n    let totalLevels = frameworkInfo.find(\n      info => info.title.toLowerCase() === frameworkName\n    ).expertise_levels.length;\n\n    width2 = data ? 100 / ((totalLevels - 1) / data.rating_level) : 0;\n    console.log(data);\n    return width2;\n  };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      console.log(frameworkInfo);\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            //level => (expertise_levels[level.rating_level] = level.title)\n            level =>\n              expertise_levels_legend.push(\n                <li style={{ textAlign: 'center' }}>\n                  <div\n                    data-tip={level.description ? level.description : 'NA'}\n                    data-html={true}\n                    data-type=\"info\"\n                    data-multiline={true}\n                  >\n                    <span className=\"badge secondary\">\n                      {' '}\n                      {level.rating_level}{' '}\n                    </span>{' '}\n                    <span> {level.title}</span>\n                  </div>\n                  <ReactTooltip class=\"tooltip-custom\" />\n                </li>\n              )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (profile) {\n      mapping = profile.profile_mapping;\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <div>\n            <div className=\"row callout\">\n              <div className=\"column medium-12 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n            </div>\n            {domain.competencies.map(competency => (\n              <div>\n                <div className=\"row\">\n                  <div className=\"column medium-8\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"column medium-4\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{\n                          width: getBarWidth(getExpertise(competency.id)) + '%',\n                          display: 'flow-root'\n                        }}\n                      >\n                        <span\n                          style={{\n                            float:\n                              getBarWidth(getExpertise(competency.id)) == 0\n                                ? 'none'\n                                : 'right'\n                          }}\n                          className=\"rating_level_number\"\n                        >\n                          {getExpertise(competency.id)\n                            ? getExpertise(competency.id).rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map(attribute_type => {\n                      return (\n                        <div\n                          className=\"accordion-item is-active\"\n                          data-accordion-item\n                        >\n                          <div className=\"row attribute_align_type\">\n                            <div className=\"column medium-8\">\n                              <strong> {attribute_type} </strong>\n                            </div>\n                            <div className=\"column medium-4\" />\n                          </div>\n                          {competency.attributes\n                            .filter(\n                              attribute => attribute.type == attribute_type\n                            )\n                            .map(attribute => {\n                              return (\n                                <div className=\"row attribute_align\">\n                                  <div className=\"column medium-8\">\n                                    {attribute.title}\n                                  </div>\n                                  <div className=\"column medium-4\">\n                                    {getAttributeStatus(\n                                      attribute.id,\n                                      'profile1'\n                                    ) ? (\n                                      <i className=\"icon icon-common icon-check\" />\n                                    ) : (\n                                      '-'\n                                    )}\n                                  </div>\n                                </div>\n                              );\n                            })}\n                        </div>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))\n      );\n    }\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateProfileView()}\n      <nav>\n        <Link to={'/'}>Home</Link> /{' '}\n        <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n          {' '}\n          {frameworkFullName} {frameworkVersion}{' '}\n        </Link>{' '}\n      </nav>\n      {profile ? (\n        <div id=\"profile\">\n          <h2 style={{ marginTop: '1em', marginBottom: '1em' }}>\n            {profile.title} - {profile.job_title}\n          </h2>\n\n          <div style={{ float: 'right' }}>\n            <ul>\n              <li className=\"profile_navigation\">\n                <Link\n                  to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/guest`}\n                >\n                  Edit overview\n                  <i className=\"icon icon-common icon-pencil-alt\" />\n                </Link>\n              </li>\n              <li className=\"profile_navigation\">\n                <Link\n                  to={`/framework/${frameworkName}/${frameworkVersion}/profile/map/guest`}\n                >\n                  Map competencies <i className=\"icon icon-common icon-cog\" />{' '}\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          <div className={profile.publishing_status + ' row'}>\n            <div className=\"column large-3\">\n              <center>\n                <img\n                  style={{ display: 'block', maxWidth: '150px' }}\n                  src={profile.image[0] ? profile.image[0].url : user_icon}\n                  //src='#'\n                />\n              </center>\n              <p />\n              <p style={{ textAlign: 'center' }}>\n                {profile.gender !== 'None' ? (\n                  <div>\n                    <p>\n                      {profile.gender && profile.gender === 'Prefernottosay' ? (\n                        <p> Gender: Prefer not to say </p>\n                      ) : (\n                        ''\n                      )}\n                    </p>\n                    <p>\n                      {profile.gender && profile.gender !== 'Prefernottosay' ? (\n                        <p> Gender: {profile.gender} </p>\n                      ) : (\n                        ''\n                      )}\n                    </p>\n                  </div>\n                ) : (\n                  ''\n                )}\n\n                {profile.age ? <p> Age: {profile.age + ' years'} </p> : ''}\n              </p>\n            </div>\n            <div className=\"column large-9\">\n              <h3>Qualification and background</h3>\n              <p>\n                {profile.qualification_background\n                  ? Parser(profile.qualification_background)\n                  : ''}\n              </p>\n\n              <h3>Activities of current role</h3>\n              <p>{profile.current_role ? Parser(profile.current_role) : ''}</p>\n\n              <p>\n                {profile.additional_information\n                  ? Parser(profile.additional_information)\n                  : ''}\n              </p>\n            </div>\n            <p />\n          </div>\n          <p>&nbsp;</p>\n\n          <div className=\"row\">\n            <div className=\"column medium-3\">\n              {' '}\n              <h5 style={{ marginTop: '25px' }}>\n                {frameworkFullName} {frameworkVersion} / Competencies\n              </h5>\n            </div>\n            <div className=\"column medium-9 \" />\n          </div>\n          <div className=\"row\">\n            <div className=\"column medium-12\">\n              <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                {expertise_levels_legend}\n              </ul>\n            </div>\n          </div>\n          <hr />\n          {competencyView}\n        </div>\n      ) : (\n        'Loading profile'\n      )}\n\n      <form onSubmit={e => handlePrint(e)}>\n        <div className=\"submit_fixed\">\n          <button className=\"button\" type=\"submit\">\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const ViewGuestProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/view/guest\"\n      component={ProfileViewGuest}\n    />\n  </Switch>\n);\n\nexport default ViewGuestProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\nimport Parser from 'html-react-parser';\nimport ReactTooltip from 'react-tooltip';\n\nconst $ = window.$;\n\nexport const ProfileMapGuest = props => {\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  const [ksa, setKsa] = useState();\n  const [mapping, setMapping] = useState();\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  //const profileId = props.location.pathname.split('/')[6];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  //var mapping = [];\n  var checkboxes = [];\n\n  var storedProfile = JSON.parse(localStorage.getItem('guestProfile'));\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await setProfile(storedProfile);\n\n      await setMapping(\n        storedProfile.profile_mapping ? storedProfile.profile_mapping : []\n      );\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n\n    if (mapping) {\n      let checkBoxes = $('input:checkbox');\n      checkBoxes.each(function(index, item, arr) {\n        console.log('test ' + item.dataset);\n      });\n    }\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    let response = await profileService.mapProfileGuest(mapping);\n    console.log(response);\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n    );\n  };\n\n  const handleSelect = event => {\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let tempMapping = mapping;\n\n    let attributesList = [];\n    let checkBoxes = $('input:checkbox[data-competency=' + competency_id + ']');\n\n    if (expertise_id == expertise_not_applicable) {\n      checkBoxes.each(function(index, item, arr) {\n        item.checked = false;\n        item.disabled = true;\n      });\n      //console.log(tempMapping.find(o => o.competency == competency_id))\n      // tempMapping.splice(\n      //   tempMapping.find(o => o.competency == competency_id),\n      //   1\n      // );\n      console.log(tempMapping);\n      // Remove the NA competency from the temp array\n      tempMapping = tempMapping.filter(o => o.competency != competency_id);\n      console.log(tempMapping);\n    } else if (tempMapping) {\n      if (tempMapping.find(o => o.competency === competency_id)) {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.expertise = expertise_id;\n\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        o.attributes = attributesList;\n      } else {\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        tempMapping.push({\n          competency: competency_id,\n          expertise: expertise_id,\n          attributes: attributesList\n        });\n      }\n    }\n    setMapping(tempMapping);\n  };\n\n  const handleCheckBox = e => {\n    let checkboxStatus = e.target.checked;\n    let competency_id = e.target.dataset.competency;\n    let tempMapping = mapping;\n    if (tempMapping) {\n      if (checkboxStatus == true) {\n        e.target.checked = true;\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.push(e.target.id);\n      } else {\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.splice(o.attributes.indexOf(e.target.id), 1);\n      }\n      setMapping(tempMapping);\n    }\n    console.log(mapping);\n  };\n\n  // if (profile) {\n  //   if (!mapping) {\n  //     setMapping(storedProfile.mapping);\n  //   }\n  //     console.log(mapping);\n  // }\n\n  const generateForm = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title == 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : '',\n              expertise_levels_legend.push(\n                <li style={{ textAlign: 'center' }}>\n                  <div\n                    data-tip={level.description ? level.description : 'NA'}\n                    data-html={true}\n                    data-type=\"info\"\n                    data-multiline={true}\n                  >\n                    <span className=\"badge secondary\">\n                      {' '}\n                      {level.rating_level}{' '}\n                    </span>{' '}\n                    <span> {level.title}</span>\n                  </div>\n                  <ReactTooltip class=\"tooltip-custom\" />\n                </li>\n              )\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    // let index = 0;\n    // expertise_levels.map((level, key) => {\n    //   expertise_levels_legend.push(\n    //     <li style={{ textAlign: 'center' }}>\n    //       <span className=\"badge secondary\"> {index} </span>{' '}\n    //       <span> {level}</span>\n    //     </li>\n    //   );\n    //   index++;\n    // });\n\n    if (framework) {\n      competencyForm = framework.map(item =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h5 className=\"domain_title\"> {domain.title}</h5>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-right icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <li className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type == attribute_type\n                                      )\n                                      .map(attribute => (\n                                        <li className=\"attribute_title\">\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                onChange={e =>\n                                                  handleCheckBox(e)\n                                                }\n                                                defaultChecked={\n                                                  mapping\n                                                    ? mapping.find(o =>\n                                                        o.attributes.find(\n                                                          a => a == attribute.id\n                                                        )\n                                                      )\n                                                      ? true\n                                                      : false\n                                                    : false\n                                                }\n                                                disabled={\n                                                  mapping\n                                                    ? mapping.find(\n                                                        o =>\n                                                          o.competency ==\n                                                          competency.id\n                                                      )\n                                                      ? false\n                                                      : true\n                                                    : true\n                                                }\n                                                data-competency={competency.id}\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className=\"attribute_label\"\n                                                for={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleSelect(e)}\n                          defaultValue={\n                            mapping\n                              ? mapping.find(o => o.competency == competency.id)\n                                ? mapping.find(\n                                    o => o.competency == competency.id\n                                  ).expertise\n                                : expertise_not_applicable\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertise_levels.map((key, value) => (\n                            <option\n                              value={value}\n                              data-expertise={value}\n                              data-competency={competency.id}\n                            >\n                              {key}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      <nav>\n        <Link to={'/'}>Home</Link> /{' '}\n        <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n          {' '}\n          {frameworkFullName} {frameworkVersion}{' '}\n        </Link>{' '}\n      </nav>\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>\n              Competency mapping: {frameworkFullName} {frameworkVersion} -{' '}\n              {profile.job_title}{' '}\n            </h2>\n\n            <div className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-10\" />\n                <div className=\"column medium-2\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`}\n                  >\n                    <i class=\"icon icon-common icon-angle-left\" /> Profile\n                    overview\n                  </Link>\n                  <p />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  <img\n                    src={profile.image[0] ? profile.image[0].url : user_icon}\n                    width=\"150px\"\n                  />\n                </div>\n                <div className=\"column medium-9 form_intro\">\n                  <h3 />\n                  <p>\n                    Hi Guest. The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {' '}\n                  <h5 style={{ marginTop: '25px' }}>\n                    {frameworkFullName} {frameworkVersion} / Competencies\n                  </h5>\n                </div>\n                <div className=\"column medium-9 \">\n                  <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                    {expertise_levels_legend}\n                  </ul>\n                </div>\n              </div>\n              <hr />\n\n              <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Save <i class=\"icon icon-common icon-save\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const path = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/guest\"\n      component={ProfileMapGuest}\n    />\n  </Switch>\n);\n\nexport default path;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\n\nexport const ProfileEdit = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  const [profile, setProfile] = useState();\n\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState();\n  const [age, setAge] = useState();\n  const [currentRole, setCurrentRole] = useState();\n  const [gender, setGender] = useState();\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState();\n  const [qualification, setQualification] = useState();\n  const [additionalInfo, setAdditionalInfo] = useState();\n  const [publishStatus, setPublishStatus] = useState();\n  const [userFrameworks, setUserFrameworks] = useState([]);\n  const [framework, setFramework] = useState();\n\n  var userName = localStorage.getItem('user')\n    ? localStorage.getItem('user')\n    : '';\n\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/node/${profileId}?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n          setTitle(findresponse.title[0].value);\n          setImgpreview(\n            findresponse.field_image[0] ? findresponse.field_image[0].url : ''\n          );\n          setFid(\n            findresponse.field_image[0]\n              ? findresponse.field_image[0].target_id\n              : ''\n          );\n          setJobTitle(\n            findresponse.field_job_title[0]\n              ? findresponse.field_job_title[0].value\n              : ''\n          );\n          setAge(\n            findresponse.field_age[0] ? findresponse.field_age[0].value : ''\n          );\n          setGender(\n            findresponse.field_gender[0]\n              ? findresponse.field_gender[0].value\n              : 'None'\n          );\n          setCurrentRole(\n            findresponse.field_current_role[0]\n              ? findresponse.field_current_role[0].value\n              : ''\n          );\n          setQualification(\n            findresponse.field_qualification_background[0]\n              ? findresponse.field_qualification_background[0].value\n              : ''\n          );\n          setAdditionalInfo(\n            findresponse.field_additional_information[0]\n              ? findresponse.field_additional_information[0].value\n              : ''\n          );\n          setPublishStatus(\n            findresponse.field_publishing_status[0]\n              ? findresponse.field_publishing_status[0].value\n              : ''\n          );\n        });\n\n      await fetch(`${apiUrl}/api/authorisation/${userName}?_format=json`, {\n        method: 'GET',\n        credentials: 'include'\n      })\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setUserFrameworks(findresponse);\n        });\n    };\n    fetchData();\n  }, [profileId]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n    } else {\n      let token = localStorage.getItem('csrf_token');\n      var fileid = fid;\n      if (selectedFile) {\n        await fetch(\n          apiUrl + '/file/upload/node/profile/field_image?_format=hal_json',\n          {\n            credentials: 'include',\n            method: 'POST',\n            cookies: 'x-access-token',\n            headers: {\n              accept: 'application/octet-stream',\n              'Content-Type': 'application/octet-stream',\n              'X-CSRF-Token': token,\n              'Content-Disposition': 'file; filename=\"persona_picture.png\"'\n            },\n            body: selectedFile\n          }\n        )\n          .then(resp => resp.json())\n          .then(function(data) {\n            fileid = data.fid[0].value;\n          });\n      }\n\n      let response = await profileService.editProfile(\n        profileId,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        publishStatus,\n        fileid\n      );\n\n      if (response.nid[0].value) {\n        props.history.push(\n          `/framework/${frameworkName}/${frameworkVersion}/profile/view/${\n            response.nid[0].value\n          }/alias`\n        );\n      }\n    }\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Download';\n    }\n\n    return <input type=\"submit\" className=\"button\" value={submitButtonLabel} />;\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  const setPreview = () => {\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/preview`,\n      {\n        title: title\n      }\n    );\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type != 'image/jpeg' &&\n        e.target.files[0].type != 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      console.log(e.target.files[0]);\n\n      setImgpreview(objectUrl);\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setImgpreview(undefined);\n    setFid(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  const checkFMAccess = () => {\n    var temp = [];\n    userFrameworks.map(item => {\n      temp.push(item.toLowerCase());\n    });\n    if (temp.includes(frameworkName)) {\n      return true;\n    }\n    return false;\n  };\n\n  return (\n    <div>\n      <nav>\n        <Link to={'/'}>Home</Link> /{' '}\n        <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n          {' '}\n          {frameworkName} {frameworkVersion}{' '}\n        </Link>{' '}\n      </nav>\n      {checkFMAccess() ? (\n        <div>\n          <Link\n            to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`}\n          >\n            {' '}\n            View{' '}\n          </Link>\n          <h2>Create {placeholder} profile</h2>\n\n          <form\n            className=\"form\"\n            id=\"profile_create_form\"\n            onSubmit={handleSubmit}\n          >\n            <div className=\"row\">\n              <div className=\"column large-4\">\n                <span>\n                  <strong>Name</strong>\n                  <input\n                    type=\"text\"\n                    id=\"title\"\n                    placeholder=\"Name\"\n                    value={title}\n                    onChange={e => setTitle(e.target.value)}\n                  />\n                  <div className={titleCalloutClass}>\n                    <i>{nameHelp}</i>\n                  </div>\n                </span>\n              </div>\n              <div className=\"column large-8\">\n                <span>\n                  <strong>Job title</strong>\n                  <input\n                    type=\"text\"\n                    id=\"jobTitle\"\n                    placeholder=\"Job title\"\n                    value={jobTitle}\n                    onChange={e => setJobTitle(e.target.value)}\n                  />\n                  <div className={jobTitleCalloutClass}>\n                    <i>{jobTitleHelp}</i>\n                  </div>\n                </span>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"column large-4\">&nbsp;</div>\n              <div className=\"column large-8\" />\n            </div>\n\n            <div className=\"row\">\n              <div className=\"column large-4\">\n                <span>\n                  <strong>Image</strong>\n                  <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n                </span>\n\n                <span>\n                  <img\n                    id=\"imgpreview_image\"\n                    width=\"100px\"\n                    src={imgpreview}\n                    height=\"100px\"\n                    style={{\n                      border: '1px solid #ccc',\n                      padding: '5px',\n                      width: '30%'\n                    }}\n                  />\n                  {imgpreview ? (\n                    <div>\n                      <a href=\"#\" onClick={e => clearimgpreview(e)}>\n                        Clear image x\n                      </a>\n                    </div>\n                  ) : (\n                    ''\n                  )}\n\n                  {fileSizeError ? (\n                    <div className=\"small callout alert\">\n                      <em> Image size should not be more than 2 MB </em>{' '}\n                    </div>\n                  ) : (\n                    ''\n                  )}\n\n                  {fileTypeError ? (\n                    <div className=\"small callout alert\">\n                      <em> Only JPG or PNG images are allowed </em>{' '}\n                    </div>\n                  ) : (\n                    ''\n                  )}\n                </span>\n\n                <br />\n                <br />\n                <span>\n                  <strong>Age (in years)</strong>\n                  <input\n                    type=\"number\"\n                    id=\"age\"\n                    placeholder=\"Age\"\n                    width={4}\n                    value={age}\n                    onChange={e => setAge(e.target.value)}\n                  />\n                </span>\n\n                <span>\n                  <strong>Gender</strong>\n                  <select\n                    value={gender}\n                    defaultValue=\"-None-\"\n                    onChange={e => setGender(e.target.value)}\n                  >\n                    <option value={'None'}>None</option>\n                    <option value={'Male'}>Male</option>\n                    <option value={'Female'}>Female</option>\n                    <option value={'Nonbinary'}>Nonbinary</option>\n                    <option value={'Prefernottosay'}>Prefer not to say</option>\n                  </select>\n                </span>\n              </div>\n              <div className=\"column large-8\">\n                <span>\n                  <strong>Qualification and background</strong>\n                  <CKEditor\n                    editor={ClassicEditor}\n                    data={qualification}\n                    onInit={editor => {}}\n                    onChange={(event, editor) => {\n                      const data = editor.getData();\n                      setQualification(data);\n                    }}\n                  />\n                </span>\n\n                <br />\n                <span>\n                  <strong>Activities of current role</strong>\n                  <CKEditor\n                    editor={ClassicEditor}\n                    data={currentRole}\n                    onInit={editor => {}}\n                    onChange={(event, editor) => {\n                      const data = editor.getData();\n                      setCurrentRole(data);\n                    }}\n                  />\n                </span>\n\n                <br />\n                <span>\n                  <strong>Additional information</strong>\n                  <CKEditor\n                    editor={ClassicEditor}\n                    data={additionalInfo}\n                    onInit={editor => {}}\n                    onChange={(event, editor) => {\n                      const data = editor.getData();\n                      setAdditionalInfo(data);\n                    }}\n                  />\n                </span>\n\n                <span>\n                  <strong>Publishing status</strong>\n                  <select\n                    value={publishStatus}\n                    defaultValue=\"-None-\"\n                    onChange={e => setPublishStatus(e.target.value)}\n                  >\n                    <option value={'Draft'}>Draft</option>\n                    <option value={'Live'}>Live</option>\n                  </select>\n                </span>\n              </div>\n            </div>\n\n            <p />\n            <div className=\"row\">\n              <div className=\"column medium-2\" />\n              <div className=\"column medium-3\">\n                <ButtonLabel />\n              </div>\n              <div className=\"column medium-7\" />\n            </div>\n          </form>\n        </div>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\nexport const EditProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/edit/:id\"\n      component={ProfileEdit}\n    />\n  </Switch>\n);\n\nexport default EditProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\nimport Parser from 'html-react-parser';\nimport ReactTooltip from 'react-tooltip';\n\nconst $ = window.$;\n\nexport const ProfileMap = props => {\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  const [ksa, setKsa] = useState();\n  const [mapping, setMapping] = useState();\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  //var mapping = [];\n  var checkboxes = [];\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&timestamp=${Date.now()}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n\n    if (mapping) {\n      let checkBoxes = $('input:checkbox');\n      checkBoxes.each(function(index, item, arr) {\n        console.log('test ' + item.dataset);\n      });\n    }\n  }, [profileId]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    let response = await profileService.mapProfile(profileId, mapping);\n    console.log(response);\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`\n    );\n  };\n\n  const handleSelect = event => {\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let tempMapping = mapping;\n\n    let attributesList = [];\n    let checkBoxes = $('input:checkbox[data-competency=' + competency_id + ']');\n\n    if (expertise_id == expertise_not_applicable) {\n      checkBoxes.each(function(index, item, arr) {\n        item.checked = false;\n        item.disabled = true;\n      });\n      //console.log(tempMapping.find(o => o.competency == competency_id))\n      // tempMapping.splice(\n      //   tempMapping.find(o => o.competency == competency_id),\n      //   1\n      // );\n      console.log(tempMapping);\n      // Remove the NA competency from the temp array\n      tempMapping = tempMapping.filter(o => o.competency != competency_id);\n      console.log(tempMapping);\n    } else if (tempMapping) {\n      if (tempMapping.find(o => o.competency === competency_id)) {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.expertise = expertise_id;\n\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        o.attributes = attributesList;\n      } else {\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        tempMapping.push({\n          competency: competency_id,\n          expertise: expertise_id,\n          attributes: attributesList\n        });\n      }\n    }\n    setMapping(tempMapping);\n  };\n\n  const handleCheckBox = e => {\n    let checkboxStatus = e.target.checked;\n    let competency_id = e.target.dataset.competency;\n    let tempMapping = mapping;\n    if (tempMapping) {\n      if (checkboxStatus == true) {\n        e.target.checked = true;\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.push(e.target.id);\n      } else {\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.splice(o.attributes.indexOf(e.target.id), 1);\n      }\n      setMapping(tempMapping);\n    }\n    console.log(mapping);\n  };\n\n  const generateForm = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title == 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : '',\n              expertise_levels_legend.push(\n                <li style={{ textAlign: 'center' }}>\n                  <div\n                    data-tip={level.description ? level.description : 'NA'}\n                    data-html={true}\n                    data-type=\"info\"\n                    data-multiline={true}\n                  >\n                    <span className=\"badge secondary\">\n                      {' '}\n                      {level.rating_level}{' '}\n                    </span>{' '}\n                    <span> {level.title}</span>\n                  </div>\n                  <ReactTooltip class=\"tooltip-custom\" />\n                </li>\n              )\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    // let index = 0;\n    // expertise_levels.map((level, key) => {\n    //   expertise_levels_legend.push(\n    //     <li style={{ textAlign: 'center' }}>\n    //       <span className=\"badge secondary\"> {index} </span>{' '}\n    //       <span> {level}</span>\n    //     </li>\n    //   );\n    //   index++;\n    // });\n\n    if (profile) {\n      if (!mapping) {\n        setMapping(profile.profile_mapping);\n      }\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyForm = framework.map(item =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h5 className=\"domain_title\"> {domain.title}</h5>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-right icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <li className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type == attribute_type\n                                      )\n                                      .map(attribute => (\n                                        <li className=\"attribute_title\">\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                onChange={e =>\n                                                  handleCheckBox(e)\n                                                }\n                                                defaultChecked={\n                                                  mapping.find(o =>\n                                                    o.attributes.find(\n                                                      a => a == attribute.id\n                                                    )\n                                                  )\n                                                    ? true\n                                                    : false\n                                                }\n                                                disabled={\n                                                  mapping.find(\n                                                    o =>\n                                                      o.competency ==\n                                                      competency.id\n                                                  )\n                                                    ? false\n                                                    : true\n                                                }\n                                                data-competency={competency.id}\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className=\"attribute_label\"\n                                                for={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleSelect(e)}\n                          defaultValue={\n                            mapping.find(o => o.competency == competency.id)\n                              ? mapping.find(o => o.competency == competency.id)\n                                  .expertise\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertise_levels.map((key, value) => (\n                            <option\n                              value={value}\n                              data-expertise={value}\n                              data-competency={competency.id}\n                            >\n                              {key}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      <nav>\n        <Link to={'/'}>Home</Link> /{' '}\n        <Link to={`/framework/${frameworkName}/${frameworkVersion}`}>\n          {' '}\n          {frameworkFullName} {frameworkVersion}{' '}\n        </Link>{' '}\n      </nav>\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>\n              Competency mapping: {frameworkFullName} {frameworkVersion} -{' '}\n              {profile.job_title}{' '}\n            </h2>\n\n            <div className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-10\" />\n                <div className=\"column medium-2\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`}\n                  >\n                    <i class=\"icon icon-common icon-angle-left\" /> Profile\n                    overview\n                  </Link>\n                  <p />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  <img\n                    src={profile.image[0] ? profile.image[0].url : user_icon}\n                    width=\"150px\"\n                  />\n                </div>\n                <div className=\"column medium-9 form_intro\">\n                  <h3 />\n                  <p>\n                    The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {' '}\n                  <h5 style={{ marginTop: '25px' }}>\n                    {frameworkFullName} {frameworkVersion} / Competencies\n                  </h5>\n                </div>\n                <div className=\"column medium-9 \">\n                  <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                    {expertise_levels_legend}\n                  </ul>\n                </div>\n              </div>\n              <hr />\n\n              <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Save <i class=\"icon icon-common icon-save\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const MapProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/:id\"\n      component={ProfileMap}\n    />\n  </Switch>\n);\n\nexport default MapProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\n//import summary from './bioexcel_2_profiles_compare_summary.json';\n\nexport const ProfilesCompareSummary = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const location = useLocation();\n  const [summary, setSummary] = useState();\n\n  let profileJobTitle = location.state.profileJobTitle;\n  let includeSummary = location.state.includeSummary;\n  var competencyView = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/profile_summary/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setSummary(findresponse);\n        });\n    };\n    fetchData();\n  }, [profileId]);\n\n  if (summary) {\n    console.log(summary);\n  }\n\n  const findResources = competency_id => {\n    if (summary) {\n      let test = summary.map(item => {\n        if (item.id == competency_id) {\n          return item.resources.map(resource => {\n            return (\n              <li>\n                <a href={resource.resourceLink} target=\"_blank\">\n                  {' '}\n                  {resource.resourceName}{' '}\n                </a>\n              </li>\n            );\n          });\n        }\n      });\n      return test;\n    }\n  };\n\n  const generateSummary = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (framework) {\n      {\n        console.log(includeSummary);\n      }\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <div>\n            <div className=\"row callout\">\n              <div className=\"column medium-8 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n              <div className=\"column medium-4 \">\n                <h5>Learning Resources</h5>\n              </div>\n            </div>\n            {domain.competencies.map(competency =>\n              includeSummary.indexOf(competency.id) != -1 ? (\n                <div>\n                  <div id={competency.id} className=\"row\">\n                    <div className=\"column medium-8\">\n                      <span className=\"competency_title\">\n                        <div>\n                          <Collapsible\n                            trigger={\n                              <div className=\"open-close-title\">\n                                <i className=\"icon icon-common icon-angle-right icon-custom\" />{' '}\n                                {competency.title}\n                              </div>\n                            }\n                            triggerWhenOpen={\n                              <div className=\"open-close-title\">\n                                <i className=\"icon icon-common icon-angle-down icon-custom\" />{' '}\n                                {competency.title}\n                              </div>\n                            }\n                          >\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <div\n                                  className=\"accordion-item is-active\"\n                                  data-accordion-item\n                                >\n                                  <div className=\"row attribute_align_type\">\n                                    <div className=\"column medium-8\">\n                                      <strong> {attribute_type} </strong>\n                                    </div>\n                                    <div className=\"column medium-4\" />\n                                  </div>\n                                  {competency.attributes\n                                    .filter(\n                                      attribute =>\n                                        attribute.type == attribute_type\n                                    )\n                                    .map(attribute => {\n                                      return (\n                                        <div className=\"row attribute_align\">\n                                          <div className=\"column medium-8\">\n                                            {attribute.title}\n                                          </div>\n                                        </div>\n                                      );\n                                    })}\n                                </div>\n                              );\n                            })}\n                          </Collapsible>\n                        </div>\n                      </span>\n                    </div>\n                    <div className=\"column medium-4\">\n                      <ul>{findResources(competency.id)}</ul>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                ''\n              )\n            )}\n          </div>\n        ))\n      );\n    }\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateSummary()}\n      <h2>Summary of learning resources</h2>\n      <p className=\"lead\">\n        Based on the comparison of your profile, the following are the suggested\n        learning resources to help develop your career, if you want to become{' '}\n        {profileJobTitle}\n      </p>\n      {competencyView}\n    </div>\n  );\n};\n\nexport const SummaryPath = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profiles/compare/guest/summary\"\n      component={ProfilesCompareSummary}\n    />\n  </Switch>\n);\n\nexport default SummaryPath;\n","import React from 'react';\nimport SwaggerUI from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\nimport data from './CompetencyHubAPIs.json';\n\nconst Documentation = () => {\n  return (\n    <>\n      <h1 style={{ color: '#000' }}>API Documentation</h1>\n      <SwaggerUI spec={data} />\n    </>\n  );\n};\n\nexport default Documentation;\n","import HttpService from '../http/http';\r\n\r\nconst http = new HttpService();\r\nconst loginUrl = '/user/login?_format=json';\r\nconst logoutUrl = '/user/logout';\r\n\r\nexport async function login(username, password) {\r\n  const credentials = { name: username, pass: password };\r\n  try {\r\n    const response = await http.post(loginUrl, credentials);\r\n    const { data } = response;\r\n    console.log(response);\r\n    localStorage.setItem('roles', data.current_user.roles);\r\n    localStorage.setItem('csrf_token', data.csrf_token);\r\n    localStorage.setItem('logout_token', data.logout_token);\r\n    localStorage.setItem('user', data.current_user.name);\r\n    localStorage.setItem('userid', data.current_user.uid);\r\n    console.log(localStorage.getItem('roles'));\r\n    return data;\r\n  } catch (error) {\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('roles');\r\n  localStorage.removeItem('csrf_token');\r\n  localStorage.removeItem('logout_token');\r\n  localStorage.removeItem('userid');\r\n  localStorage.removeItem('user');\r\n  return http.post(logoutUrl);\r\n}\r\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport LoginForm from './login-form/LoginForm';\nimport { login, logout } from '../services/auth/auth';\n\nclass Login extends Component {\n  static propTypes = {\n    user: PropTypes.string.isRequired,\n    roles: PropTypes.string.isRequired,\n    onLogin: PropTypes.func.isRequired,\n    onLogout: PropTypes.func.isRequired\n  };\n\n  onLogin = (username, password) => {\n    login(username, password);\n  };\n\n  onLogout = () => {\n    logout();\n  };\n\n  render() {\n    const { roles, user, isActive } = this.props;\n\n    return (\n      <div>\n        {user && roles ? (\n          <h2>You are logged in</h2>\n        ) : (\n          <LoginForm onSubmit={this.onLogin} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React, { useEffect, useState } from 'react';\nimport { Switch, Route, Link } from 'react-router-dom';\nimport { apiUrl } from '../../services/http/http';\n\nconst ManageFrameworks = props => {\n  const [frameworks, setFrameworks] = useState();\n  let user = localStorage.getItem('user');\n\n  useEffect(() => {\n    const fetchData = () => {\n      fetch(`${apiUrl}/api/authorisation/${user}?_format=json`, {\n        method: 'GET',\n        credentials: 'include'\n      })\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworks(findresponse);\n        });\n    };\n    fetchData();\n  }, [user]);\n\n  return (\n    <div className=\"vf-activity\">\n      <h2>Manage frameworks</h2>\n      <ul className=\"vf-activity__list | vf-list\">\n        {frameworks ? (\n          frameworks.map(framework => {\n            return (\n              <li className=\"vf-activity__item\" key={framework}>\n                <Link\n                  to={`/framework/${framework\n                    .toLowerCase()\n                    .replace(/\\s+/g, '')}/manage/data`}\n                >\n                  {framework}\n                </Link>\n              </li>\n            );\n          })\n        ) : (\n          <li style={{ color: '#000' }}>No Framework assigned to this user.</li>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nconst exportURL = () => (\n  <Switch>\n    <Route exact path=\"/manage-frameworks\" component={ManageFrameworks} />\n  </Switch>\n);\n\nexport default exportURL;\n","import React from 'react';\nimport EU from '../components/assets/european-union.png';\nimport PerMed from '../components/assets/PerMedCoE.jpg';\nimport BioExcel from '../components/assets/Bioexcel.png';\n\nconst Footer = () => {\n  return (\n    <footer className=\"vf-footer\">\n      <div className=\"vf-footer__inner\">\n      <div className=\"vf-grid\">\n        <p class=\"vf-footer__notice\">\n          The Competency Hub's web infrastructure is developed with support from\n          the{' '}\n          <a className=\"vf-footer__link\" href=\"https://bioexcel.eu/\">\n            BioExcel\n          </a>{' '}\n          and{' '}\n          <a href=\"https://permedcoe.eu/\" className=\"vf-footer__link\">\n            PerMedCoE Centres of Excellence\n          </a>\n          . BioExcel and PerMedCoE are funded by the <a className=\"vf-footer__link\" href=\"https://ec.europa.eu/programmes/horizon2020/en\"> European Union Horizon 2020\n          programme </a> under grant agreements 823830, 675728, 951773. Both projects\n          are part of <a className=\"vf-footer__link\" href=\"https://www.hpccoe.eu/\"> the EU HPC CoE Initiative</a>.\n        </p>\n       \n          <figure className=\"vf-figure\" style={{margin:'10px'}}>\n            <img\n              classNAME=\"vf-figure__image\"\n              src={EU}\n              alt=\"European union\"\n              loading=\"lazy\"\n              width=\"120px\"\n            />\n          </figure>\n          <figure className=\"vf-figure\" style={{margin:'10px'}}>\n            <img\n              classNAME=\"vf-figure__image\"\n              src={PerMed}\n              alt=\"European union\"\n              loading=\"lazy\"\n              width=\"170px\"\n            />\n          </figure>\n          <figure className=\"vf-figure\" style={{margin:'10px'}}>\n            <img\n              classNAME=\"vf-figure__image\"\n              src={BioExcel}\n              alt=\"Bioexcel\"\n              loading=\"lazy\"\n              width=\"180px\"\n              style={{backgroundColor:'#fff', padding:'7px'}}\n            />\n          </figure>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React, { Component } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Masthead from '../containers/masthead/Masthead';\r\nimport ManageAttributes from './ManageAttributes';\r\nimport ManageCompetencies from './ManageCompetencies';\r\nimport ManageData from './ManageData';\r\nimport CompetencyDetails from './CompetencyDetails';\r\nimport CompetencyList from './CompetencyList';\r\nimport ResourceEdit from './ResourceEdit';\r\nimport ResourceCreate from './ResourceCreate';\r\nimport ResourceDetails from './ResourceDetails';\r\nimport ResourcesList from './ResourcesList';\r\nimport ResourcesHome from './ResourcesHome';\r\nimport ChangePassword from './ChangePassword';\r\nimport UserView from './UserView';\r\nimport About from '../components/about/About';\r\nimport Frameworks from './Frameworks';\r\nimport ArticleCreate from './ArticleCreate';\r\nimport AttributeMap from './AttributeMap';\r\nimport CompetencySettings from './CompetencySettings';\r\nimport AttributeSettings from './AttributeSettings';\r\nimport AttributeDemap from './AttributeDemap';\r\nimport ProfileCreate from './ProfileCreate';\r\nimport ProfileCreateGuest from './ProfileCreateGuest';\r\nimport ProfileView from './ProfileView';\r\nimport ProfilesCompare from './ProfilesCompare';\r\nimport ProfileMapDownload from './ProfileMapDownload';\r\nimport ProfileViewGuest from './ProfileViewGuest';\r\nimport ProfileMapGuest from './ProfileMapGuest';\r\nimport ProfileEdit from './ProfileEdit';\r\nimport ProfileMap from './ProfileMap';\r\nimport ProfilesCompareSummary from './ProfilesCompareSummary';\r\nimport Documentation from './Documentation';\r\nimport Login from './Login';\r\nimport ManageFrameworks from '../containers/navigation/ManageFrameworks';\r\nimport Footer from '../components/Footer';\r\nimport Breadcrumb from '../containers/Breadcrumbs';\r\n\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { login, logout } from '../services/auth/auth';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nconst $ = window.$;\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    isActive: false,\r\n    roles: localStorage.getItem('roles') || '',\r\n    user: localStorage.getItem('user') || ''\r\n  };\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  componentDidMount() {\r\n    // $(document).foundation();\r\n    // $(document).foundationExtendEBI();\r\n\r\n    this.setState({ isActive: this.activeRequests.isActive });\r\n    this.subcription = this.activeRequests.addEventListener(\r\n      this.handleActiveRequests\r\n    );\r\n\r\n    window.addEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subcription) {\r\n      this.activeRequests.removeEventListener(this.subcription);\r\n    }\r\n    window.removeEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  handleActiveRequests = hasPendingRequests => {\r\n    this.setState({ isActive: hasPendingRequests });\r\n  };\r\n\r\n  detectUserChangesFromOtherTabs = ({ key, newValue }) => {\r\n    if (key === 'user') {\r\n      if (newValue) {\r\n        this.setState({\r\n          user: localStorage.getItem('user'),\r\n          roles: localStorage.getItem('roles')\r\n        });\r\n      } else {\r\n        this.setState({ user: '', roles: '' });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n      document.location.reload();\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({ user: '', roles: '' });\r\n    logout();\r\n  };\r\n\r\n  render() {\r\n    const { isActive, roles, user } = this.state;\r\n    return (\r\n      <>\r\n        <SnackbarProvider\r\n          maxSnack={1}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          preventDuplicate\r\n        >          \r\n          <Masthead\r\n            roles={roles}\r\n            user={user}\r\n            isActive={isActive}\r\n            onLogin={this.handleLogin}\r\n            onLogout={this.handleLogout}\r\n          />\r\n\r\n          <section id=\"main-content-area\" className=\"row\" role=\"main\">\r\n            <main className=\"column\">\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/edit/:nid\"\r\n                  component={ResourceEdit}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/create\"\r\n                  component={ResourceCreate}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\r\n                  component={AttributeSettings}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:cid/manage-attributes\"\r\n                  component={ManageAttributes}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:domainId?\"\r\n                  component={ManageCompetencies}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/data/:domainId?\"\r\n                  component={ManageData}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/competency/details/:cid\"\r\n                  component={CompetencyDetails}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:id/settings\"\r\n                  component={CompetencySettings}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/create/guest\"\r\n                  component={ProfileCreateGuest}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/create\"\r\n                  component={ProfileCreate}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/view/guest\"\r\n                  component={ProfileViewGuest}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/map/guest\"\r\n                  component={ProfileMapGuest}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/view/:id/:alias\"\r\n                  component={ProfileView}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profiles/compare/guest/summary\"\r\n                  component={ProfilesCompareSummary}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profiles/compare/:profile1/:profile2\"\r\n                  component={ProfilesCompare}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/map/download\"\r\n                  component={ProfileMapDownload}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/edit/:id\"\r\n                  component={ProfileEdit}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/map/:id\"\r\n                  component={ProfileMap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version\"\r\n                  component={CompetencyList}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:id/map/:framework\"\r\n                  component={AttributeMap}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:resource/demap/:attribute\"\r\n                  component={AttributeDemap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/training-resources/:id\"\r\n                  component={ResourceDetails}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/all-training-resources\"\r\n                  component={ResourcesList}\r\n                />\r\n                <Route\r\n                  path=\"/training-resources-home\"\r\n                  component={ResourcesHome}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user}\r\n                  path=\"/user/change/password\"\r\n                  component={ChangePassword}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user}\r\n                  path=\"/user/view\"\r\n                  component={UserView}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user}\r\n                  path=\"/manage-frameworks\"\r\n                  component={ManageFrameworks}\r\n                />  \r\n\r\n                <Route path=\"/documentation\" component={Documentation} />\r\n\r\n                <Route path=\"/about\" component={About} />\r\n                <Route path=\"/login\" component={Login} />\r\n                <Route path=\"/\" component={Frameworks} />\r\n              </Switch>\r\n            </main>\r\n          </section>\r\n          <Footer />\r\n        </SnackbarProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n\r\nclass ProtectedRoute extends Component {\r\n  render() {\r\n    const { component: Component, condition, ...props } = this.props;\r\n    return (\r\n      <Route\r\n        {...props}\r\n        render={props =>\r\n          condition ? <Component {...props} /> : <Redirect to=\"/\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport Root from './app/containers/Root';\r\nimport Modal from 'react-modal';\r\n\r\nconst root = document.getElementById('root');\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Root />\r\n  </BrowserRouter>,\r\n  root\r\n);\r\n\r\nModal.setAppElement(root);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meter\":\"progress-bar_meter__2axTP\",\"progress\":\"progress-bar_progress__3d3PT\"};","module.exports = __webpack_public_path__ + \"static/media/european-union.0ae78626.png\";","module.exports = __webpack_public_path__ + \"static/media/PerMedCoE.2b28bd09.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/Bioexcel.9e7ef4d7.png\";"],"sourceRoot":""}