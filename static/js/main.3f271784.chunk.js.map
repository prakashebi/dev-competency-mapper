{"version":3,"sources":["shared/components/progress-bar/progress-bar.module.css","app/containers/user_icon.png","shared/components/progress-bar/progress-bar.jsx","app/containers/navigation/Navigation.jsx","app/containers/login-form/LoginForm.jsx","app/containers/masthead/Masthead.jsx","shared/components/edit-inline/EditInline.tsx","app/containers/simple-form/SimpleForm.tsx","app/components/error-loading/ErrorLoading.tsx","app/containers/framework-versions/FrameworkVersions.tsx","app/services/http/headers.js","app/services/http/http.js","app/services/competency/body.js","app/services/competency/competency.js","app/services/active-requests/active-requests.js","app/services/util/util.js","app/containers/ManageAttributes.jsx","app/containers/version-controls/VersionControls.tsx","app/containers/ManageCompetencies.jsx","app/services/courses/courses.js","app/containers/CompetencyDetails.jsx","app/components/competency-list/CompetencyList.jsx","app/components/domain-list/DomainList.jsx","app/containers/courses/Courses.jsx","app/containers/ProfileList.jsx","app/containers/CompetencyList.jsx","app/containers/ResourceEdit.jsx","app/containers/FileUpload.jsx","app/containers/ResourceCreate.jsx","app/containers/AttributeMap.jsx","app/containers/framework-versions/VersionNotice.jsx","app/containers/ResourceDetails.jsx","app/containers/ResourcesList.jsx","app/containers/ResourcesHome.jsx","app/containers/ChangePassword.jsx","app/components/about/About.js","app/components/framework-button/FrameworkButton.jsx","app/components/framework-buttons/FrameworkButtons.jsx","app/containers/Frameworks.jsx","app/containers/ArticleCreate.jsx","app/containers/CompetencySettings.jsx","app/containers/AttributeSettings.jsx","app/containers/AttributeDemap.jsx","app/services/profile/body.js","app/services/profile/profile.js","app/containers/ProfileCreate.jsx","app/containers/ProfileCreateGuest.jsx","app/containers/ProfileView.jsx","app/containers/Stars.js","app/containers/ProfilesCompareButterfly.jsx","app/containers/ProfilesCompare.jsx","app/containers/ProfileMapDownload.jsx","app/containers/ProfileViewGuest.jsx","app/containers/ProfileMapGuest.jsx","app/containers/ProfileEdit.jsx","app/containers/ProfileMap.jsx","app/containers/ProfilesCompareSummary.jsx","app/services/auth/auth.js","app/containers/Root.jsx","index.jsx"],"names":["module","exports","meter","progress","ProgressBar","_ref","isActive","react_default","a","createElement","Fragment","className","concat","styles","role","defaultProps","$","window","Navigation","navRef","React","createRef","logout","onLogout","_this","props","this","current","foundation","_this$props","roles","user","frameworkResources","tabIndex","react_router_dom","to","trainingResources","userDropdown","onClick","ref","data-dropdown-menu","data-description","includes","Component","LoginForm","state","username","password","onChange","event","setState","Object","defineProperty","currentTarget","name","value","submit","onSubmit","_this$state","_this2","_this$state2","type","autoComplete","placeholder","aria-hidden","Masthead","onLogin","data-sticky-container","id","data-sticky","data-sticky-on","data-top-anchor","data-btm-anchor","navigation_Navigation","login_form_LoginForm","progress_bar","defaultState","oriValue","active","EditInline","selfRef","inputRef","toggleActive","contains","target","reset","change","render","style","staticElement","editable","aria-label","key","text","document","addEventListener","removeEventListener","prevProps","prevState","setTimeout","focus","newValue","description","uuid","mapping","SimpleForm","preventDefault","onCreate","trim","setDefaultOption","options","length","title","showMappingField","selectOptions","map","required","ErrorLoading","message","customStyles","content","top","left","right","bottom","marginRight","transform","FrameworkVersion","versions","framework","_useState","useState","_useState2","slicedToArray","showNotes","setShowNotes","_useState3","_useState4","notes","setNotes","versionItems","filter","version","number","release_notes","lib_default","isOpen","Parser","HeadersService","classCallCheck","instance","arguments","undefined","csfrToken","localStorage","getItem","Accept","Content-Type","X-CSRF-Token","Authorization","apiUrl","process","axios","defaults","baseURL","HttpService","headers","Headers","url","credentialType","get","withCredentials","body","option","post","patch","BodyService","_links","_embedded","domainId","domainUuid","_ref$mapping","draftId","draftUuid","href","target_id","field_map_other_competency","self","lang","_links2","_embedded2","_ref2","attributeTypeId","attributeTypeUuid","competencyId","competencyUuid","mutate","_ref3","releaseNotes","field_parent","field_release_notes","field_item","nodeId","vid","attribuiteId","_links4","_embedded4","resourceID","dates","dates2","location","target_audience","learning_outcomes","keywords","organisers","trainers","CompetencyService","http","response","data","Date","now","Body","createAttribute","createCompetency","mutateCompetency","mutateCompetencyPosition","toggleArchivingVersionedNode","attributeId","mutateAttribute","publishFramework","createDraftFramework","versionId","updateReleaseNotes","changeDomain","editResource","attribiuteId","changeAttributeSettings","resource","items","attributes","ActiveRequestsService","counter","callbacks","fn","push","index","forEach","safeFlat","array","Array","prototype","flat","reduce","acc","cur","toConsumableArray","tagsReg","RegExp","nbspReg","removeHtmlTags","htmlString","replaceBy","replace","ManageAttributes","activeRequests","competencyService","match","params","frameworkName","frameworkVersion","frameworStatus","attributeTypes","domainName","cid","competencyName","competencyData","path","pathname","split","loadingError","_callee","draftVersion","regenerator_default","wrap","_context","prev","next","startRequest","find","attribute","fetchFramework","t0","enqueueSnackbar","variant","finishRequest","finish","stop","scroll","loadData","fetchVersions","getAllVersionedFrameworks","allFrameworks","currentFramework","fw","toLowerCase","attribute_types","reverse","liveVersion","status","frameworkData","getVersionedDraftFramework","getVersionedFramework","competencyMatch","filterByCompetencyId","frameworkStatus","domainTitle","item","domains","domain","competencies","competency","nid","patchAttribute","position","patchAttributePosition","isArchived","attributeType","_this$state3","archived","EditInline_EditInline","editAttribute","field_number","editAttributePosition","toggleArchive","class","_this3","_this$state4","getAttributeRows","_this$state5","error_loading_ErrorLoading","SimpleForm_SimpleForm","getAttributeList","FrameworkVersions","withSnackbar","VersionControls","release","updateNotes","createDraft","curr","originalNotes","setVersion","_useState5","_useState6","pressedRelease","setPressedRelease","_useState7","_useState8","pressedNotes","setPressedNotes","react_ckeditor_component_lib_default","events","editor","getData","cleanNotes","ManageCompetencies","frameworkVersionId","competencyTypes","releaseNewVersion","_callee2","_context2","_callee3","_context3","_callee4","_context4","refs","scrollIntoView","patchCompetency","patchCompetencyPosition","getCompetencyRows","_this4","editCompetency","editCompetencyPosition","bind","_this$state6","version_controls_VersionControls","getCompetencyList","CoursesService","CompetencyDetails","coursesService","attributeDefs","resources","Promise","all","getFramework","getAttributes","getResources","getAllFrameworks","frameworkMatch","getCourses","allResources","competency_profile","profile","competency_id","console","log","objectSpread","competencyDetails","def","mapped_other_competency","resourceBlock","CompetencyList","disable","attributesGrouped","groupBy","keys","Collapsible_default","trigger","triggerWhenOpen","parentIndex","DomainList","childIndex","components_competency_list_CompetencyList","Courses","possibleConstructorReturn","getPrototypeOf","call","courses","filteredCourses","onFilter","term","e","course","test","allCourses","filterCourses","filteredProfiles","framework_label","modifiedCourse","findIndex","c","competency_label","ProfileList","history","useHistory","guestProfile","setGuestProfile","profiles","setProfiles","profilesToCompare","useEffect","asyncToGenerator","mark","JSON","parse","fetch","then","Response","json","findresponse","apply","fetchData","setProfilesToCompare","alert","checked","getAttribute","arr","redirectToCompare","float","data-profileid","src","selectedFileData","jobTitle","disabled","user_icon","publishing_status","image","job_title","url_alias","frameworkDescription","filteredDomains","profileCount","filteredCompetencies","findResponse","versionStatus","vr","domainList","domain_list_DomainList","esm","containers_ProfileList","courses_Courses","_props$match$params","ResourceEdit","csrf","updateFlag","redirectTo","assertThisInitialized","evt","newContent","csrfURL","findresponse2","fetchResource","checkUser","end_date","ResourceEdit_EditForm","EditForm","setRedirect","redirect","handleTitle","handleDates","handleDates2","handleType","handleDesc","handleLocation","handleURL","handleTargetAudience","handleLearningOutcomes","handleKeywords","handleOrganisers","handleTrainers","_this5","method","credentials","cookies","stringify","field_dates","field_end_date","field_type","field_description","format","field_location","field_url","field_target_audience","field_learning_outcomes","field_keywords","field_organisers","field_trainers","_this6","handleSubmit","activeClass","contextTypes","router","PropTypes","object","EditResources","react_router","exact","component","FileUpload","es","onDrop","acceptedFiles","reader","FileReader","onabort","onerror","onload","binaryStr","result","getElementById","append","file","readAsArrayBuffer","getRootProps","getInputProps","ResourceCreate","changeDescription","changeTargetAudience","changeLearningOutcomes","changeOrganisers","changeTrainers","token","containers_FileUpload","CreateResources","AttributeMap","frameworkdetails","frameworkUUID","selectedAttributes","resourceDetails","resourcePath","handleSelect","checkedAttributes","attributeIDs","i","attrmap","childItems","getElementsByName","splice","indexOf","is","lists","each","attr","fetchFrameworkDetails","findresponse1","latest_version","detail","fetchCompetencyList","nextProps","nextState","frameworkDetails","frameworkDefs","domainsOptions","attributeTypeOptions","resDetails","selectedAttributesArray","selectedCompetenciesArray","ikey","attribute_type","data-id","ListOfCompetencies","did","defaultChecked","data-test","handleAllCheck","marginLeft","marginBottom","data-uuid","handleAttributeClick","AttrMap","Modal","setAppElement","ItemVersions","modalIsOpen","openModal","closeModal","onAfterOpen","afterOpenModal","onRequestClose","contentLabel","ResourceDetails","frameworks","showModal","selectedFramework","handleOpenModal","handleCloseModal","temp","resourcesURL","findresponse3","display","margin","frameworkLiveVersion","check_array","isArray","Resource","date","VersionNotice","mappingBlock","overflow","overlayClassName","text-align","toUpperCase","data-close","containers_AttributeMap","selectedCompetencies","ResDetails","ResourcesList","filterType","filterMapping","userid","archiveHandle","author_id","rid","archivedStatus","field_archived","toLocaleLowerCase","some","attribute_archived","competency_archived","ListOfResources","checkAuthor","author","filterTypeHandle","filterMappingHandle","for","Resources","ResourcesHome","ResourcesHomepage","ChangePassword","handlePasswordChange","old","new1","uid","new","resp","reload","About","FrameworkButton","slice","prevVersion","newVersion","data-equalizer-watch","height","logo","alt","data-icon","FrameworkButtons","data-equalizer","framework_button_FrameworkButton","Frameworks","error","framework_buttons_FrameworkButtons","ArticleCreate","createArticle","fid","accept","Content-Disposition","field_image","stringImage","striped","toString","newfile","CreateArticles","CompetencySettings","competencyUUID","competencyTitle","frameworkList","domainID","editDomain","handleChange","onTextChange","competencyID","setMappingText","versoinManagerURL","selectedDomainID","selectedDomainUUID","field_domain","target_uuid","dataset","selectedIndex","competency_title","domain_id","domain_title","domainOptions","domainArray","d","colSpan","CompetencySettingsRoot","AttributeSettings","attributeID","attributeTypeID","attributeTypeUUID","changeSettings","handleCompetencyChange","handleTypeChange","selectedCompetencyID","field_competency","selectedCompetencyUUID","selectedAttributeTypeID","field_attribute_type","selectedAttributeTypeUUID","attribute_title","attribute_type_id","attribute_type_title","competencyOptions","competencyArray","attributeTypeArray","rowSpan","AttributeSettingsRoot","AttributeDemap","demap","AttributeDemapRoot","frameworkId","frameworkUuid","versionID","age","currentRole","gender","qualification","additionalInfo","fileid","field_versions","field_age","field_current_role","field_gender","field_job_title","field_qualification_background","field_additional_information","field_publishing_status","profileId","publishStatus","mappingBody","expertise","join","field_profile_mapping","ProfileService","createProfile","editProfile","mapProfile","versionNumber","existingGuestProfile","setItem","doc","jsPDF","setFont","qDim","currentDate","moment","currentTime","pdfWidth","internal","pageSize","getWidth","pdfHeight","getHeight","marginright","col","gutter","fifthCol","profileBody","pdfProfileImgHeight","selectedFile","width","currentYAxis","setFontType","setFontSize","frameworkLogoData","pdfLogoHeight","logoData","addImage","imgData","splitTextToSize","getTextDimensions","fromHTML","h","jobTitleUnderscored","save","ProfileCreate","profileService","setTitle","setAge","setCurrentRole","setGender","_useState9","_useState10","setSelectedFile","_useState11","_useState12","setSelectedFileData","_useState13","_useState14","_useState15","_useState16","imgpreview","setImgpreview","_useState17","_useState18","fileSizeError","setFileSizeError","_useState19","_useState20","fileTypeError","setFileTypeError","_useState21","_useState22","setJobTitle","_useState23","_useState24","setQualification","_useState25","_useState26","setAdditionalInfo","_useState27","_useState28","setFramework","_useState29","_useState30","_useState31","_useState32","setProfile","_useState33","_useState34","setErrorMsgTitle","_useState35","_useState36","setErrorMsgJobTitle","_useState37","_useState38","frameworkMoreData","setFrameworkMoreData","promise1","promise2","data1","data2","response1","response2","sent","storedProfile","bootstrap","_ref4","ver","mapDownloadProfile","mappingAttributes","alias","_x","getWhoCreateProfile","titleCalloutClass","jobTitleCalloutClass","nameHelp","jobTitleHelp","defaultValue","files","URL","createObjectURL","size","img","Image","readAsDataURL","border","padding","clearimgpreview","ckeditor_default","ClassicEditor","onInit","submitButtonLabel","CreateProfile","ProfileCreateGuest","parseInt","_ref5","abrupt","createGuestProfile","Path","ProfileView","frameworkInfo","setFrameworkInfo","competencyView","expertise_levels_legend","frameworkFullName","user_roles","getExpertise","obj","o","expertise_levels","level","getBarWidth","rating_level","info","textAlign","data-tip","data-html","data-type","data-multiline","index_es","profile_mapping","data-accordion-item","aid","getAttributeStatus","marginTop","search","maxWidth","qualification_background","current_role","additional_information","print","ViewProfile","origin","Stars","ProfilesCompareButterfly","isGuestProfile","profile1Id","profile2Id","profile1","profile2","mapping1","mapping2","expertise_array","chart_props","includeSummary","profileid","label","profile1Expertise","profile2Expertise","width1","margin1","width2","floatRight","generateProfileView","textAling","profileJobTitle","handleSummary","handlePrint","ProfilesCompare","setProfile1","setProfile2","setIsGuestProfile","containers_ProfilesCompareButterfly","sendRoute","ProfileMapDownload","expertiseLevels","setExpertiseLevels","setProfileAttributes","competencyForm","expertise_not_applicable","promiseFramework","promiseVersion","dataFramework","dataVersion","responseFramework","responseVersion","getExpertiseLevels","downloadProfileFromHtml","addCompetencyAttributes","attribute_id","removeCompetencyAttributes","fId","levels","margins","source","profileTitle","elementHandlers","#editor","element","renderer","dispose","setFieldContent","heading","field","__html","jIndex","prop","handleCheckboxMapping","data-competency","htmlFor","expertise_id","tempMap","handleMapping","data-expertise","generateForm","charAt","dangerouslySetInnerHTML","MapProfileDownload","ProfileViewGuest","ViewGuestProfile","ProfileMapGuest","setMapping","mapProfileGuest","checkboxStatus","tempMapping","handleCheckBox","attributesList","checkBoxes","ProfileEdit","setFid","setPublishStatus","objectUrl","EditProfile","ProfileMap","MapProfile","ProfilesCompareSummary","useLocation","summary","setSummary","resourceLink","resourceName","findResources","SummaryPath","loginUrl","logoutUrl","login","_x2","_login","pass","current_user","csrf_token","logout_token","removeItem","Root","handleActiveRequests","hasPendingRequests","detectUserChangesFromOtherTabs","handleLogin","t1","handleLogout","foundationExtendEBI","subcription","build","maxSnack","anchorOrigin","vertical","horizontal","preventDuplicate","masthead_Masthead","Root_ProtectedRoute","condition","ProtectedRoute","objectWithoutProperties","assign","root","ReactDOM","basename","containers_Root"],"mappings":"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","file":"static/js/main.3f271784.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"meter\":\"progress-bar_meter__2axTP\",\"progress\":\"progress-bar_progress__3d3PT\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX///8AAAClpaX8/Pz39/e3t7fZ2dm9vb3T09Pl5eXw8PBfX1/h4eFtbW1qamqbm5vMzMyCgoJ4eHgaGhqKioplZWWrq6sPDw/FxcUwMDDs7OySkpJ/f38UFBQhISFLS0s8PDxPT09XV1c2NjY4ODinp6dEREQpKSmYua94AAAGb0lEQVR4nO2d6XbiMAyFMUsIW8O+lhZoB97/DYc0MIQkkEiWkNzx97uL70kiy9pcq3k8Ho/H4/F4PB6Px+PxwOiug+Gy3V4uw063Ib0YaoL5+25r0qzeomFTellEBNHePGA1Wjr/MDvT7SN5F2ZD6TXaMPwskffD9o/0OrG0V1X0/bBx8ZMcnirri4mk1wul2wPpO/MRSq8ZxByqL2YsverqNMAPMGHSl155RfplG8RjWtJrr0QLrc+48aZGNgKNOUivv5SRnUBjdsr9uLGtwPO20ZUW8QwCgWeTqtjBsX5FEz7Uvqiofb6IT2klDxhSCdS6aazpBBqj8kD1QanQBNJy8hBZmStbaT05CD/ChHdpRVkW1AqNsvPihlyg+ZDWdEeHXqAxdWlVaWYcCo0i763PItBspHXdeONRaNT4p6TeTBo1ns2US6Eac8ol0BglOY0ln8KBtLaEAZ9CI60tgVGgjteU3OdOM5JWF8NmSWNUWNMdp0KjILTYZBVoltL6arWAV6EC39QqEVPOTFofy9k3zUpaH+9+HyN/vtgzK5Q3phNmhR1pgaw+W4x8yI1bofyGyK2wLS2QXaF8eYZXaMvvf0vlLQ19SuYe+d3ii1mh/I6PrNKrjLzXRlJC8wR5z7vOK/BLWh9rPDhGQUyYJTl6Q0P9N+92oSEkzGtM5Q0Ns6k5SquLYUpxJygIJtZ44xg6ir8YExdKar9CPoVTaW0XYB1OEOTd7oQ/XALV1Ao3uBTKn36vMNmak7SuG0w5RPkQzQ2WBJSCtFMKDoUanO4bDHnSnrSmDJW6tkHIB2juIa9PnEsrykHWEpSgsQ+R9iSsqAL6BqV7quPUlIXwU5RPOBVDVjykIcBWDFHsVF1DUIo2hUAFZVBPIJD4Jq2hBOt6Wp3to2kszY1eI3NjbbMvat0mMqCbhBauDDfB+qgKMmkZ+q1o8HncnVa52HvniBCYC1q0j6fv47E3nYcS+ZnMFLbcWQf8GN+zKoL0IK3Tiye7rTe51vRV1ldugGI3h+wX2MhX5g5eFtYID4WLzDV/NCsHGXu5o0Sx5zB5ybG4X6wv/v+54p5mVCUvNc5Z0ObDrtsF/3by9LmM899KWDKJYNbO/87TsNaRN5cRliXti+Lw4aPRkN/TZcFRfv3gp//B6fZUmAE1Kw4/dNqbt1Q47ms2agXFP1khaX5gM6vVyp+eW4Nm8+ny+pXK5CZMkcaqztgn/kupan0Xa0Jd/wC0jgxwGiFVHQxPEVahB9fYgA1625KHG8GD5g4gD6QDTkHuiAViju6TqOKDbLQwWQ/aYEAXsYKYY1R64uu2sGNDSN2bPXIRZyajom39QhBhjllXCA2qbbHFbjwPMsavcfYB9pZ/lq7oDfuOZjj1xqNNVN9MxwOi7miyowZ3sToeol2Ruc7ZBqLwOHdHhQ0kWTjmZm07SFLF3G0/dhA0Dal+hMbs7RXylVbSYP0lKjakCdbmdC+toBTLPZG5I4YCy8AU63gdGhZ2CnVvFQlWGwZjGT4dVqUb79Krr4SNQvw9Dq/E4jVlnpBEhUXfieVNDq/CoqafvvCXB3SQna1ThBp01E29T3oFXcThgENzAauQd14gJcgPkXleICXID9EJly0B6bgxz4OgZIdTyD1NjxJcZp971hwluGiN9KohoEyNI253Asr5Vh4ovQcV+2YeTEoMRqHenFoRmNKMb+lFg0BUiDtzdEpA9H0TpbZfBeJSGoe80hjEdkHSpPU6EJ3fDvndMYjKE3cO+D8grhjgnhZIDfx04daGj9ny3QnSJMBDNS6dDmPgJ0TpFUOBtwxJrxgKeOKSY24pwjF1KFiaAI5jsN0WxwX4FjoHykzuARed/H6FrDM7OQDPAfUK1QE+AnuF6vj9CsHf4e/fLRwLJmL6Z6RXDAU+zdWFytI08BPww9EJSoHHaRyLJk7AAv+DmLdj2wWmYj83gkY1mGIMN2q8ryAE8t7VTA2u7Et61RBwxewOFWMgR3875Jpiy6BLBiDpAd365EzcG3+HAvEEay5s2p330ouvhE2PpRPGxu6SCAeqamyvhFJfg2k/ElT5KYpirrJq/zQ3jhJFR2+fJdmAGqV9CSfCscNLjZE34nv11BXyDcin7jXrmp5jfqorCeG7jkKpWYtxanJQH4iOc9n2NkP+odCNTtie11/OvDXsa7shyePxeDwej8fj8Vz4C1b2gkr4izi5AAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './progress-bar.module.css';\r\n\r\nfunction ProgressBar({ isActive }) {\r\n  return (\r\n    <React.Fragment>\r\n      {isActive && (\r\n        <div\r\n          className={`warning progress ${styles.progress}`}\r\n          role=\"progressbar\"\r\n        >\r\n          <div className={`progress-meter ${styles.meter}`} />\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nProgressBar.defaultProps = {\r\n  isActive: false\r\n};\r\n\r\nProgressBar.propTypes = {\r\n  isActive: PropTypes.bool\r\n};\r\n\r\nexport default ProgressBar;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst $ = window.$;\r\n\r\nclass Navigation extends Component {\r\n  navRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    $(this.navRef.current).foundation();\r\n  }\r\n\r\n  logout = () => {\r\n    const { onLogout } = this.props;\r\n    onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user } = this.props;\r\n\r\n    const frameworkResources = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-dark-background\"\r\n        >\r\n          Manage Competencies\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to=\"/framework/bioexcel/manage/competencies\">BioExcel</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/corbel/manage/competencies\">CORBEL</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/iscb/manage/competencies\">ISCB</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/ritrain/manage/competencies\">RITrain</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/nhs/manage/competencies\">NHS</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/framework/cineca/manage/competencies\">CINECA</Link>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    const trainingResources = (\r\n      <li>\r\n        <Link to=\"/all-training-resources\">Manage Training Resources</Link>\r\n      </li>\r\n    );\r\n\r\n    const userDropdown = (\r\n      <li>\r\n        <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n          tabIndex=\"0\"\r\n          className=\"dropdown-on-light-background\"\r\n        >\r\n          <i className=\"fas fa-user\" /> Hi {user}\r\n        </a>\r\n        <ul className=\"menu vertical\">\r\n          <li>\r\n            <Link to={'/user/change/password'}>Change password</Link>\r\n          </li>\r\n          <li>\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.logout}\r\n            >\r\n              Logout\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    );\r\n\r\n    return (\r\n      <nav ref={this.navRef}>\r\n        <ul\r\n          className=\"dropdown menu float-left\"\r\n          data-dropdown-menu\r\n          data-description=\"navigational\"\r\n        >\r\n          {roles.includes('framework_manager') && frameworkResources}\r\n          {roles.includes('content_manager') && trainingResources}\r\n        </ul>\r\n        <ul\r\n          className=\"dropdown menu float-right\"\r\n          data-dropdown-menu\r\n          data-description=\"user tasks\"\r\n        >\r\n          {userDropdown}\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Navigation;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  onChange = event => {\r\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\r\n  };\r\n\r\n  submit = () => {\r\n    const { onSubmit } = this.props;\r\n    const { username, password } = this.state;\r\n    if (username && password) {\r\n      onSubmit(username, password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <nav>\r\n        {/* The wrapping in an `ul.menu.float-left > li` is necessary for the sticky header to work */}\r\n        <ul className=\"menu float-left small-12\">\r\n          <li className=\"small-12 margin-bottom-large\">\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={username}\r\n                name=\"username\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"text\"\r\n                autoComplete=\"username\"\r\n                placeholder=\"Username\"\r\n              />\r\n            </label>\r\n            <label className=\"columns small-4 medium-3 large-2 margin-top-large\">\r\n              <input\r\n                value={password}\r\n                name=\"password\"\r\n                onChange={event => this.onChange(event)}\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </label>\r\n            <div className=\"columns small-4 medium-6 large-8 margin-top-large\">\r\n              <button\r\n                className=\"button\"\r\n                type=\"button\"\r\n                onClick={() => this.submit()}\r\n              >\r\n                <i className=\"fa fa-key\" aria-hidden=\"true\" /> Login\r\n              </button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ProgressBar from '../../../shared/components/progress-bar/progress-bar';\r\nimport Navigation from '../navigation/Navigation';\r\nimport LoginForm from '../login-form/LoginForm';\r\n\r\nclass Masthead extends Component {\r\n  static propTypes = {\r\n    user: PropTypes.string.isRequired,\r\n    roles: PropTypes.string.isRequired,\r\n    onLogin: PropTypes.func.isRequired,\r\n    onLogout: PropTypes.func.isRequired\r\n  };\r\n\r\n  onLogin = (username, password) => {\r\n    this.props.onLogin(username, password);\r\n  };\r\n\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n  };\r\n\r\n  render() {\r\n    const { roles, user, isActive } = this.props;\r\n\r\n    return (\r\n      <div data-sticky-container>\r\n        <header\r\n          id=\"masthead\"\r\n          className=\"masthead\"\r\n          data-sticky\r\n          data-sticky-on=\"large\"\r\n          data-top-anchor=\"main-content-area:top\"\r\n          data-btm-anchor=\"main-content-area:bottom\"\r\n        >\r\n          <div className=\"masthead-inner row\">\r\n            <div className=\"columns medium-12\" id=\"local-title\">\r\n              <h1>\r\n                <Link to=\"/\">Competency Mapper</Link>\r\n              </h1>\r\n            </div>\r\n            {user && roles ? (\r\n              <Navigation roles={roles} user={user} onLogout={this.onLogout} />\r\n            ) : (\r\n              <LoginForm onSubmit={this.onLogin} />\r\n            )}\r\n          </div>\r\n          <ProgressBar isActive={isActive} />\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Masthead;\r\n","import React, { Component } from 'react';\r\n\r\nimport './EditInline.css';\r\n\r\nconst defaultProps = {\r\n  style: {} as Record<string, string | number>,\r\n  text: '',\r\n  change: (newValue: string) => {},\r\n  staticElement: 'div',\r\n  editable: true\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  oriValue: '',\r\n  value: '',\r\n  active: false\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class EditInline extends Component<Props, State> {\r\n  static defaultProps = defaultProps; // No idea why the props are marked as optional (see '!' in the code below)\r\n  readonly state: State = defaultState;\r\n  selfRef = React.createRef<HTMLDivElement>();\r\n  inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  componentDidMount() {\r\n    const { text } = this.props;\r\n    this.setState({ value: text!, oriValue: text! });\r\n    document.addEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.toggleActive);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    const { active } = this.state;\r\n    if (active && !prevState.active) {\r\n      // Unable to focus on the input element.\r\n      // this.inputRef.current && this.inputRef.current.focus();\r\n\r\n      // Dirty: The only way I was able to focus on the input element.\r\n      setTimeout(\r\n        () => this.inputRef.current && this.inputRef.current.focus(),\r\n        0\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleActive = (event: MouseEvent) => {\r\n    if (\r\n      this.selfRef.current &&\r\n      this.selfRef.current.contains(event.target as Node)\r\n    ) {\r\n      this.setState({ active: true });\r\n      return;\r\n    }\r\n    this.reset();\r\n  };\r\n\r\n  onChange(value: string) {\r\n    this.setState({ value });\r\n  }\r\n\r\n  reset = () => {\r\n    const { oriValue, active } = this.state;\r\n    if (active) {\r\n      this.setState({ active: false, value: oriValue });\r\n    }\r\n  };\r\n\r\n  submit = () => {\r\n    const { change } = this.props;\r\n    const { value } = this.state;\r\n    change!(value);\r\n    this.setState({ active: false, oriValue: value });\r\n  };\r\n\r\n  render = () => {\r\n    const { style, staticElement, editable } = this.props;\r\n    const { value, active } = this.state;\r\n\r\n    if (!editable) {\r\n      return React.createElement(staticElement!, { style }, value);\r\n    }\r\n\r\n    if (!active) {\r\n      return React.createElement(staticElement!, { style, ref: this.selfRef }, [\r\n        value,\r\n        <i\r\n          key=\"dummy\"\r\n          className=\"icon icon-common icon-edit icon-left-spacer\"\r\n          aria-label=\"edit\"\r\n        />\r\n      ]);\r\n    }\r\n\r\n    return (\r\n      <div className=\"edit-inline-container\" ref={this.selfRef}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"inner-input\"\r\n          value={value}\r\n          onChange={event => this.onChange(event.target.value)}\r\n          ref={this.inputRef}\r\n          // autoFocus={true} // It only works when it is rendered after mounting\r\n        />\r\n        <div className=\"edit-inline-controls\">\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.submit}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-check\"\r\n              aria-label=\"accept changes\"\r\n            />\r\n          </button>\r\n          <button\r\n            className=\"button margin-bottom-none\"\r\n            type=\"button\"\r\n            onClick={this.reset}\r\n          >\r\n            <i\r\n              className=\"icon icon-common icon-undo\"\r\n              aria-label=\"undo changes\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nconst defaultProps = {\r\n  showMappingField: false\r\n};\r\n\r\ntype Props = {\r\n  title: string;\r\n  placeholder: string;\r\n  options: Record<'description' | 'uuid', string>[];\r\n  onCreate(newValue: string, uuid: string, mapping: string): any;\r\n} & Partial<typeof defaultProps>;\r\n\r\nconst defaultState = {\r\n  description: '',\r\n  uuid: '',\r\n  mapping: ''\r\n};\r\n\r\ntype State = Readonly<typeof defaultState>;\r\n\r\nexport default class SimpleForm extends Component<Props, State> {\r\n  static defaultProps = defaultProps;\r\n  readonly state = defaultState;\r\n\r\n  componentDidMount() {\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  setDefaultOption() {\r\n    const { options } = this.props;\r\n    if (options.length) {\r\n      const { uuid } = options[0];\r\n      this.setState({ uuid });\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    this.setState(defaultState);\r\n    this.setDefaultOption();\r\n  }\r\n\r\n  onChange = (event: React.FormEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    event.preventDefault();\r\n    const { value } = event.currentTarget;\r\n    const name = event.currentTarget.name;\r\n    // https://github.com/Microsoft/TypeScript/issues/13948\r\n    if (name === 'uuid') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'description') {\r\n      this.setState({ [name]: value });\r\n    }\r\n    if (name === 'mapping') {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const { onCreate } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    if (description.trim() && uuid) {\r\n      onCreate(description, uuid, mapping);\r\n      this.reset();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, placeholder, options, showMappingField } = this.props;\r\n    const { description, uuid, mapping } = this.state;\r\n\r\n    const selectOptions = options.map(({ description, uuid }) => (\r\n      <option key={uuid} value={uuid}>\r\n        {description}\r\n      </option>\r\n    ));\r\n\r\n    return (\r\n      <form onSubmit={this.onSubmit} className=\"callout\">\r\n        <h4>{title}</h4>\r\n        <div className=\"row\">\r\n          <div className=\"column large-7\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={placeholder}\r\n              name=\"description\"\r\n              value={description}\r\n              required\r\n              onChange={this.onChange}\r\n            />\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <select name=\"uuid\" value={uuid} required onChange={this.onChange}>\r\n              {selectOptions}\r\n            </select>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <input type=\"submit\" className=\"button\" value=\"Create\" />\r\n          </div>\r\n          {showMappingField ? (\r\n            <div className=\"column\">\r\n              <label>\r\n                Maps to competency/attribute from other framework\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Framework (version), competency or attribute\"\r\n                  name=\"mapping\"\r\n                  value={mapping}\r\n                  onChange={this.onChange}\r\n                />\r\n              </label>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst defaultProps = {\r\n  message: 'Sorry, there was a problem when fetching the data!',\r\n  style: {} as Record<string, string | number>\r\n};\r\n\r\ntype Props = Partial<typeof defaultProps>;\r\n\r\nexport const ErrorLoading: React.FC<Props> = ({ message, style }) => {\r\n  return (\r\n    <div className=\"margin-top-large callout alert\" style={style}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nErrorLoading.defaultProps = defaultProps;\r\n\r\nexport default ErrorLoading;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\nimport Parser from 'html-react-parser';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  versions: Version[];\r\n  framework: string;\r\n  style: string;\r\n};\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    right: 'auto',\r\n    bottom: 'auto',\r\n    marginRight: '-50%',\r\n    transform: 'translate(-50%, -50%)'\r\n  }\r\n};\r\n\r\nexport const FrameworkVersion: React.FC<Props> = ({ versions, framework }) => {\r\n  const [showNotes, setShowNotes] = useState(false);\r\n  const [notes, setNotes] = useState('');\r\n\r\n  let versionNumber = '';\r\n\r\n  const versionItems = versions\r\n    .filter(version => version.number !== 'draft')\r\n    .map(version => (\r\n      <li key={version.id}>\r\n        <Link to={`/framework/${framework}/${version.number}`}>\r\n          {version.number}\r\n        </Link>{' '}\r\n        <button\r\n          className=\"anchor-like\"\r\n          onClick={() => {\r\n            setNotes('Version: ' + version.number + version.release_notes);\r\n            setShowNotes(true);\r\n          }}\r\n        >\r\n          (release notes)\r\n        </button>\r\n      </li>\r\n    ));\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={showNotes} style={customStyles}>\r\n        <h4>Release notes for {framework} </h4>\r\n        {Parser(notes)}\r\n        {versionItems}\r\n        <div className=\"padding-top-large\">\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setNotes('');\r\n              setShowNotes(false);\r\n            }}\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n      <div className=\"callout\">\r\n        <h5>Framework versions</h5>\r\n        {versions.length === 0 ? (\r\n          'No previous versions'\r\n        ) : (\r\n          <ul>{versionItems}</ul>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FrameworkVersion;\r\n","class HeadersService {\r\n  static instance;\r\n\r\n  constructor() {\r\n    if (HeadersService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    HeadersService.instance = this;\r\n  }\r\n\r\n  get(type = 'hal+json') {\r\n    const csfrToken = window.localStorage.getItem('csrf_token');\r\n    if (type === 'json') {\r\n      return {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': csfrToken,\r\n        Authorization: 'Basic'\r\n      };\r\n    }\r\n\r\n    return {\r\n      Accept: 'application/hal+json',\r\n      'Content-Type': 'application/hal+json',\r\n      'X-CSRF-Token': csfrToken,\r\n      Authorization: 'Basic'\r\n    };\r\n  }\r\n}\r\n\r\nexport default HeadersService;\r\n","import Headers from './headers';\r\nimport axios from 'axios';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\naxios.defaults.baseURL = apiUrl;\r\n\r\nclass HttpService {\r\n  static instance;\r\n  headers = new Headers();\r\n\r\n  constructor() {\r\n    if (HttpService.instance) {\r\n      return HttpService.instance;\r\n    }\r\n\r\n    HttpService.instance = this;\r\n  }\r\n\r\n  get(url, credentialType = '') {\r\n    if (credentialType) {\r\n      return axios.get(url, {\r\n        headers: this.headers.get(credentialType),\r\n        withCredentials: true\r\n      });\r\n    }\r\n    return axios.get(url);\r\n  }\r\n\r\n  post(url, body, option = 'hal+json') {\r\n    return axios.post(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  patch(url, body, option = 'hal+json') {\r\n    return axios.patch(url, body, {\r\n      headers: this.headers.get(option),\r\n      withCredentials: true\r\n    });\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","import { apiUrl } from '../http/http';\r\n\r\nclass BodyService {\r\n  static createCompetency({\r\n    description,\r\n    domainId,\r\n    domainUuid,\r\n    mapping = '',\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'competency'\r\n        }\r\n      ],\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static createAttribute({\r\n    description,\r\n    attributeTypeId,\r\n    attributeTypeUuid,\r\n    competencyId,\r\n    competencyUuid,\r\n    draftId,\r\n    draftUuid\r\n  }) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            href: `http://local.competency-mapper/taxonomy/term/${draftId}?_format=hal_json`\r\n          }\r\n        ]\r\n      },\r\n      title: [\r\n        {\r\n          value: description\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: 'attribute'\r\n        }\r\n      ],\r\n\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_versions`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/taxonomy/term/${draftId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/taxonomy_term/version`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: draftUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ],\r\n            lang: 'en'\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static mutateCompetency(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateCompetencyPosition(key, value) {\r\n    return BodyService.mutate(key, value, 'competency');\r\n  }\r\n\r\n  static mutateAttribute(key, value) {\r\n    return BodyService.mutate(key, value, 'attribute');\r\n  }\r\n\r\n  static mutate(key, value, target) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/${target}`\r\n        }\r\n      },\r\n      [key]: [\r\n        {\r\n          value: value\r\n        }\r\n      ],\r\n      type: [\r\n        {\r\n          target_id: target\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static publishFramework(framework, version, releaseNotes) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: releaseNotes\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: version\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static createDraftFramework(framework) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      title: [\r\n        {\r\n          value: 'draft'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static toggleArchivingVersionedNode(framework, nodeId) {\r\n    return {\r\n      type: [\r\n        {\r\n          target_id: 'article'\r\n        }\r\n      ],\r\n      field_parent: [\r\n        {\r\n          value: framework\r\n        }\r\n      ],\r\n      field_item: [\r\n        {\r\n          value: nodeId\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  static updateReleaseNotes(notes) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href:\r\n            //'https://dev-competency-mapper.pantheonsite.io/rest/type/taxonomy_term/version'\r\n            `${apiUrl}/rest/type/taxonomy_term/version`\r\n        }\r\n      },\r\n      vid: [\r\n        {\r\n          target_id: 'version'\r\n        }\r\n      ],\r\n      field_release_notes: [\r\n        {\r\n          value: notes\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  // Change domain service\r\n\r\n  static changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/competency`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: {\r\n          href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n        }\r\n      },\r\n      field_map_other_competency: [\r\n        {\r\n          value: mapping\r\n        }\r\n      ],\r\n      type: {\r\n        target_id: 'competency'\r\n      },\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/competency/field_domain`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${domainId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/domain`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: domainUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  // Change competency service\r\n\r\n  static changeAttributeSettings(\r\n    attribuiteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    return {\r\n      _links: {\r\n        self: {\r\n          href: `${apiUrl}/node/${attribuiteId}?_format=hal_json`\r\n        },\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/attribute`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: {\r\n          href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n        },\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: {\r\n          href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n        }\r\n      },\r\n      type: {\r\n        target_id: 'attribute'\r\n      },\r\n      _embedded: {\r\n        [`${apiUrl}/rest/relation/node/attribute/field_competency`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${competencyId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/competency`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: competencyUuid\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        [`${apiUrl}/rest/relation/node/attribute/field_attribute_type`]: [\r\n          {\r\n            _links: {\r\n              self: {\r\n                href: `${apiUrl}/node/${attributeTypeId}?_format=hal_json`\r\n              },\r\n              type: {\r\n                href: `${apiUrl}/rest/type/node/attribute_type`\r\n              }\r\n            },\r\n            uuid: [\r\n              {\r\n                value: attributeTypeUuid\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  static editResource(\r\n    resourceID,\r\n    title,\r\n    dates,\r\n    dates2,\r\n    type,\r\n    description,\r\n    location,\r\n    url,\r\n    target_audience,\r\n    learning_outcomes,\r\n    keywords,\r\n    organisers,\r\n    trainers\r\n  ) {\r\n    return {\r\n      _links: {\r\n        type: {\r\n          href: `${apiUrl}/rest/type/node/training_resource`\r\n        }\r\n      },\r\n      title: [\r\n        {\r\n          value: title\r\n        }\r\n      ],\r\n\r\n      type: [\r\n        {\r\n          target_id: 'training_resource'\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\nexport default BodyService;\r\n","import HttpService from '../http/http';\r\nimport Body from './body';\r\n\r\nclass CompetencyService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CompetencyService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CompetencyService.instance = this;\r\n  }\r\n\r\n  async getFramework(framework) {\r\n    const response = await this.http.get(\r\n      `/api/v1/framework/${framework}?_format=json`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedDraftFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/edit?_format=json&timestamp=${Date.now()}`,\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getVersionedFramework(framework, version) {\r\n    const response = await this.http.get(\r\n      `/api/${framework}/${version}?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async getAllFrameworks() {\r\n    const response = await this.http.get(`/api/v1/framework?_format=json`);\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async getAllVersionedFrameworks() {\r\n    const response = await this.http.get(\r\n      `/api/version_manager?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createAttribute(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createAttribute(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async createCompetency(options) {\r\n    const response = await this.http.post(\r\n      `/node?_format=hal_json`,\r\n      Body.createCompetency(options)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetency(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetency(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchCompetencyPosition(competencyId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.mutateCompetencyPosition(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // TODO: change name\r\n  async toggleArchivingVersionedNode(framework, nodeId) {\r\n    const response = await this.http.patch(\r\n      `/api/${framework}/edit?_format=json`,\r\n      Body.toggleArchivingVersionedNode(framework, nodeId),\r\n      'json'\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttribute(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async patchAttributePosition(attributeId, key, value) {\r\n    const response = await this.http.patch(\r\n      `/node/${attributeId}?_format=hal_json`,\r\n      Body.mutateAttribute(key, value)\r\n    );\r\n\r\n    return response.data;\r\n  }\r\n\r\n  async publishFramework(framework, version, releaseNotes) {\r\n    const response = await this.http.patch(\r\n      '/api/version_manager?_format=json',\r\n      Body.publishFramework(framework, version, releaseNotes),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async createDraftFramework(framework) {\r\n    const response = await this.http.post(\r\n      '/api/version_manager?_format=json',\r\n      Body.createDraftFramework(framework),\r\n      'json'\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async updateReleaseNotes(notes, versionId) {\r\n    const response = await this.http.patch(\r\n      `/taxonomy/term/${versionId}?_format=hal_json`,\r\n      Body.updateReleaseNotes(notes)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeDomain(competencyId, domainId, domainUuid, mapping) {\r\n    const response = await this.http.patch(\r\n      `/node/${competencyId}?_format=hal_json`,\r\n      Body.changeDomain(competencyId, domainId, domainUuid, mapping)\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async editResource(\r\n    resourceID,\r\n    title,\r\n    dates,\r\n    dates2,\r\n    type,\r\n    description,\r\n    location,\r\n    url,\r\n    target_audience,\r\n    learning_outcomes,\r\n    keywords,\r\n    organisers,\r\n    trainers\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${resourceID}?_format=hal_json`,\r\n      Body.editResource(\r\n        resourceID,\r\n        title,\r\n        dates,\r\n        dates2,\r\n        type,\r\n        description,\r\n        location,\r\n        url,\r\n        target_audience,\r\n        learning_outcomes,\r\n        keywords,\r\n        organisers,\r\n        trainers\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async changeAttributeSettings(\r\n    attribiuteId,\r\n    competencyId,\r\n    competencyUuid,\r\n    attributeTypeId,\r\n    attributeTypeUuid\r\n  ) {\r\n    const response = await this.http.patch(\r\n      `/node/${attribiuteId}?_format=hal_json`,\r\n      Body.changeAttributeSettings(\r\n        attribiuteId,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid\r\n      )\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async demap(resource, items) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&items=` +\r\n        items +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n\r\n  async attrmap(resource, attributes) {\r\n    const response = await this.http.get(\r\n      `/api/mapping?_format=hal_json&resource=` +\r\n        resource +\r\n        `&attributes=` +\r\n        attributes +\r\n        `&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CompetencyService;\r\n","class ActiveRequestsService {\r\n  static instance;\r\n  counter = 0;\r\n  callbacks = [];\r\n\r\n  get isActive() {\r\n    return !!this.counter;\r\n  }\r\n\r\n  constructor() {\r\n    if (ActiveRequestsService.instance) {\r\n      return ActiveRequestsService.instance;\r\n    }\r\n\r\n    ActiveRequestsService.instance = this;\r\n  }\r\n\r\n  addEventListener(fn) {\r\n    return this.callbacks.push(fn);\r\n  }\r\n\r\n  removeEventListener(index) {\r\n    return delete this.callbacks[index - 1];\r\n  }\r\n\r\n  startRequest() {\r\n    if (this.counter === 0) {\r\n      this.callbacks.forEach(fn => fn && fn(true));\r\n    }\r\n    ++this.counter;\r\n  }\r\n\r\n  finishRequest() {\r\n    if (this.counter === 1) {\r\n      this.callbacks.forEach(fn => fn && fn(false));\r\n    }\r\n\r\n    if (this.counter > 0) {\r\n      --this.counter;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActiveRequestsService;\r\n","// In modern browser (es2018), instead of `reduce` it is possible to call `flat`\r\nexport const safeFlat = array =>\r\n  Array.prototype.flat\r\n    ? array.flat()\r\n    : array.reduce((acc, cur) => [...acc, ...cur], []);\r\n\r\nconst tagsReg = new RegExp('</?.+?/?>', 'g');\r\nconst nbspReg = /&nbsp;/g;\r\n\r\nexport const removeHtmlTags = (htmlString, replaceBy = '') =>\r\n  htmlString.replace(tagsReg, replaceBy).replace(nbspReg, ' ');\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat } from '../services/util/util';\r\n\r\nclass ManageAttributes extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    // framework level\r\n    framework: this.props.match.params.framework,\r\n    frameworkName: '',\r\n    frameworkVersion: '',\r\n    frameworStatus: '',\r\n    attributeTypes: [], // defined at framework level\r\n    versions: [],\r\n\r\n    // domain level\r\n    domainId: '',\r\n    domainName: '',\r\n\r\n    // competency level\r\n    competencyId: this.props.match.params.cid,\r\n    competencyUuid: '',\r\n    competencyName: '',\r\n    competencyData: [],\r\n\r\n    path: this.props.location.pathname.split('/'),\r\n\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scroll(0, 0);\r\n    this.loadData();\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions() {\r\n    const { framework } = this.state;\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const attributeTypes = currentFramework[0].attribute_types.map(\r\n        attribute => ({ description: attribute.title, uuid: attribute.uuid })\r\n      );\r\n      this.setState({\r\n        versions: currentFramework[0].versions.reverse(),\r\n        attributeTypes\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchFramework() {\r\n    const { framework, versions, competencyId } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    const competencyMatch = this.filterByCompetencyId(\r\n      frameworkData,\r\n      competencyId\r\n    );\r\n\r\n    if (competencyMatch.length) {\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        domainName: competencyMatch[0].domainTitle,\r\n        domainId: competencyMatch[0].domainId,\r\n        competencyUuid: competencyMatch[0].uuid,\r\n        competencyName: competencyMatch[0].title,\r\n        competencyData: competencyMatch[0],\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  filterByCompetencyId(data, id) {\r\n    return safeFlat(\r\n      data.map(item =>\r\n        safeFlat(\r\n          item.domains.map(domain =>\r\n            domain.competencies\r\n              .filter(competency => competency.id === id)\r\n              .map(competency => {\r\n                competency.domainTitle = domain.title;\r\n                competency.domainId = domain.nid;\r\n                return competency;\r\n              })\r\n          )\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  createAttribute = async (description, attributeTypeUuid, mapping) => {\r\n    const {\r\n      competencyId,\r\n      competencyUuid,\r\n      attributeTypes,\r\n      versions\r\n    } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const attributeTypeId = attributeTypes.find(\r\n        attribute => attribute.uuid === attributeTypeUuid\r\n      ).id;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createAttribute({\r\n        description,\r\n        competencyId,\r\n        competencyUuid,\r\n        attributeTypeId,\r\n        attributeTypeUuid,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editAttribute(attributeId, title) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(attributeId, 'title', title);\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editAttributePosition(attributeId, position) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttributePosition(\r\n        attributeId,\r\n        'field_number',\r\n        position\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(attributeId, isArchived) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchAttribute(\r\n        attributeId,\r\n        'field_archived',\r\n        isArchived === '1' ? false : true\r\n      );\r\n      await this.fetchFramework();\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  getAttributeRows(attributeType) {\r\n    const { competencyData, editable } = this.state;\r\n\r\n    return competencyData.attributes\r\n      .filter(attribute => attribute.type === attributeType.description)\r\n      .map(attribute => {\r\n        if (editable) {\r\n          return (\r\n            <tr key={attribute.uuid}>\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.title}\r\n                  change={newValue =>\r\n                    this.editAttribute(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n                <InlineEdit\r\n                  text={attribute.field_number}\r\n                  change={newValue =>\r\n                    this.editAttributePosition(attribute.id, newValue)\r\n                  }\r\n                  editable={attribute.archived === '1' ? false : true}\r\n                />\r\n              </td>\r\n\r\n              <td>\r\n                <button\r\n                  className=\"cursor\"\r\n                  onClick={() =>\r\n                    this.toggleArchive(attribute.id, attribute.archived)\r\n                  }\r\n                >\r\n                  {attribute.archived === '1' ? (\r\n                    <span className=\"fas fa-toggle-on\">\r\n                      <span>Archived</span>\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"fas fa-toggle-off\" />\r\n                  )}\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <Link\r\n                  to={`/framework/${this.state.framework}/competency/${\r\n                    this.state.competencyId\r\n                  }/attribute/${attribute.id}/settings`}\r\n                >\r\n                  <i class=\"fas fa-cog\" />\r\n                </Link>\r\n              </td>\r\n            </tr>\r\n          );\r\n        }\r\n\r\n        if (attribute.archived === '1') {\r\n          return null;\r\n        }\r\n        return (\r\n          <tr key={attribute.uuid}>\r\n            <td className={attribute.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={attribute.title}\r\n                change={newValue => this.editAttribute(attribute.id, newValue)}\r\n                editable={editable}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributeList() {\r\n    const { attributeTypes, editable } = this.state;\r\n    return attributeTypes.map(attributeType => (\r\n      <React.Fragment key={attributeType.uuid}>\r\n        <tr className=\"secondary-background-important white-color\">\r\n          <td>\r\n            <strong>\r\n              <em>{attributeType.description}</em>\r\n            </strong>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getAttributeRows(attributeType)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      attributeTypes,\r\n      versions,\r\n      domainId,\r\n      domainName,\r\n      competencyName,\r\n      competencyData,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (competencyData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage attributes</h2>\r\n        <h4>\r\n          <Link to={`/framework/${framework}/manage/competencies`}>\r\n            {frameworkName}\r\n          </Link>\r\n          {' / '}\r\n          <Link to={`/framework/${framework}/manage/competencies/${domainId}`}>\r\n            {domainName}\r\n          </Link>\r\n          {' / '}\r\n          {competencyName}\r\n        </h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new attribute\"\r\n            placeholder=\"Attribute description\"\r\n            options={attributeTypes}\r\n            onCreate={this.createAttribute}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getAttributeList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageAttributes);\r\n","import React, { FC, useState } from 'react';\r\n\r\nimport Modal from 'react-modal';\r\nimport CKEditor from 'react-ckeditor-component';\r\n\r\nimport { Version } from '../../../models/version';\r\n\r\ntype Props = {\r\n  release(version: string, notes: string): void;\r\n  updateNotes(notes: string): void;\r\n  createDraft(): void;\r\n  versions: Version[];\r\n  editable: false;\r\n};\r\n\r\nexport const VersionControls: React.FC<Props> = ({\r\n  release,\r\n  updateNotes,\r\n  createDraft,\r\n  versions,\r\n  editable\r\n}) => {\r\n  const liveVersion = versions.reduce((prev, curr) => {\r\n    if (curr.status === 'live') {\r\n      return curr.number;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const originalNotes = versions.reduce((prev, curr) => {\r\n    if (curr.number === 'draft') {\r\n      return curr.release_notes;\r\n    }\r\n    return prev;\r\n  }, '');\r\n\r\n  const [version, setVersion] = useState('');\r\n  const [notes, setNotes] = useState(originalNotes);\r\n  const [pressedRelease, setPressedRelease] = useState(false);\r\n  const [pressedNotes, setPressedNotes] = useState(false);\r\n\r\n  const reset = () => {\r\n    setVersion('');\r\n    setPressedRelease(false);\r\n  };\r\n\r\n  const publish = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const cleanNotes = notes.trim();\r\n    if (pressedRelease && version && cleanNotes) {\r\n      release(version, cleanNotes);\r\n      reset();\r\n    }\r\n  };\r\n\r\n  if (editable) {\r\n    return (\r\n      <div>\r\n        <Modal isOpen={pressedNotes}>\r\n          <CKEditor\r\n            content={notes}\r\n            events={{\r\n              change: (event: any) => setNotes(event.editor.getData())\r\n            }}\r\n          />\r\n          <div className=\"padding-top-large\">\r\n            <span className=\"padding-right-small\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={() => {\r\n                  setNotes(originalNotes);\r\n                  setPressedNotes(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </span>\r\n            <button\r\n              className=\"button\"\r\n              onClick={() => {\r\n                updateNotes(notes);\r\n                setPressedNotes(false);\r\n              }}\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n        <Modal isOpen={pressedRelease}>\r\n          <form onSubmit={publish}>\r\n            <label>\r\n              Version{' '}\r\n              {liveVersion\r\n                ? `(live version ${liveVersion})`\r\n                : '(no live version)'}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"1.0.0\"\r\n                value={version}\r\n                required\r\n                onChange={event => setVersion(event.currentTarget.value.trim())}\r\n              />\r\n            </label>\r\n            <CKEditor\r\n              content={notes}\r\n              events={{\r\n                change: (event: any) => setNotes(event.editor.getData())\r\n              }}\r\n            />\r\n            <div className=\"padding-top-large\">\r\n              <span className=\"padding-right-small\">\r\n                <button className=\"button\" onClick={reset}>\r\n                  Cancel\r\n                </button>\r\n              </span>\r\n              <button className=\"button\" type=\"submit\">\r\n                Publish\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </Modal>\r\n        <span className=\"padding-right-small\">\r\n          <button className=\"button\" onClick={() => setPressedRelease(true)}>\r\n            Release new version\r\n          </button>\r\n        </span>\r\n        <button className=\"button\" onClick={() => setPressedNotes(true)}>\r\n          Update release notes\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"padding-right-small\">\r\n        <button className=\"button\" onClick={() => createDraft()}>\r\n          Create draft\r\n        </button>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControls;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport InlineEdit from '../../shared/components/edit-inline/EditInline';\r\nimport SimpleForm from '../containers/simple-form/SimpleForm';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\nimport VersionControls from '../containers/version-controls/VersionControls';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nclass ManageCompetencies extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkName: '',\r\n    frameworkData: [],\r\n    frameworkVersion: '',\r\n    frameworkVersionId: '',\r\n    frameworkStatus: '',\r\n    competencyTypes: [],\r\n    versions: [],\r\n    loadingError: false,\r\n    editable: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework } = props.match.params;\r\n    if (framework !== state.framework) {\r\n      return {\r\n        framework,\r\n        frameworkData: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, domainId } = this.props.match.params;\r\n    await this.loadData(framework);\r\n\r\n    if (domainId) {\r\n      setTimeout(() => {\r\n        const ref = this.refs[domainId];\r\n        if (ref) {\r\n          ref.scrollIntoView();\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkData, loadingError } = this.state;\r\n    if (framework !== prevState.framework) {\r\n      if (frameworkData.length === 0 && !loadingError) {\r\n        this.loadData(framework);\r\n      }\r\n    }\r\n  }\r\n\r\n  async loadData(framework) {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.fetchVersions(framework);\r\n      await this.fetchFramework(framework);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework) {\r\n    const { versions } = this.state;\r\n    const liveVersion = versions.filter(version => version.status === 'live');\r\n    const draftVersion = versions.filter(version => version.status === 'draft');\r\n    let frameworkData = [];\r\n    let editable = false;\r\n    if (draftVersion.length) {\r\n      frameworkData = await this.competencyService.getVersionedDraftFramework(\r\n        framework\r\n      );\r\n      this.setState({ frameworkVersionId: draftVersion[0].id });\r\n      editable = true;\r\n    } else {\r\n      if (liveVersion.length) {\r\n        frameworkData = await this.competencyService.getVersionedFramework(\r\n          framework,\r\n          liveVersion[0].number\r\n        );\r\n      }\r\n    }\r\n\r\n    if (frameworkData.length) {\r\n      const competencyTypes = frameworkData[0].domains.map(domain => ({\r\n        description: domain.title,\r\n        uuid: domain.uuid\r\n      }));\r\n      this.setState({\r\n        frameworkName: frameworkData[0].title,\r\n        frameworkData,\r\n        frameworkVersion: frameworkData[0].version,\r\n        frameworkStatus: frameworkData[0].status,\r\n        competencyTypes,\r\n        editable\r\n      });\r\n    }\r\n  }\r\n\r\n  createCompetency = async (description, domainUuid, mapping) => {\r\n    const { framework, frameworkData, versions } = this.state;\r\n    const draftVersion = versions.filter(version => version.number === 'draft');\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const domainId = frameworkData[0].domains.find(\r\n        domain => domain.uuid === domainUuid\r\n      ).nid;\r\n      const draftId = draftVersion[0].id;\r\n      const draftUuid = draftVersion[0].uuid;\r\n      await this.competencyService.createCompetency({\r\n        description,\r\n        domainId,\r\n        domainUuid,\r\n        mapping,\r\n        draftId,\r\n        draftUuid\r\n      });\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  async editCompetency(cid, title) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetency(cid, 'title', title);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async editCompetencyPosition(cid, position) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.patchCompetencyPosition(\r\n        cid,\r\n        'field_number',\r\n        position\r\n      );\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async toggleArchive(cid, isArchived) {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.toggleArchivingVersionedNode(framework, cid);\r\n      await this.fetchFramework(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  releaseNewVersion = async (version, notes) => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.publishFramework(framework, version, notes);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  updateNotes = async notes => {\r\n    const { framework, frameworkVersionId } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.updateReleaseNotes(\r\n        notes,\r\n        frameworkVersionId\r\n      );\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  createDraft = async () => {\r\n    const { framework } = this.state;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await this.competencyService.createDraftFramework(framework);\r\n      this.loadData(framework);\r\n    } catch (e) {\r\n      this.props.enqueueSnackbar('Unable to perform the request', {\r\n        variant: 'error'\r\n      });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  };\r\n\r\n  getCompetencyList() {\r\n    const { frameworkData, editable } = this.state;\r\n    return frameworkData[0].domains.map(domain => (\r\n      <React.Fragment key={domain.nid}>\r\n        <tr\r\n          className=\"secondary-background-important white-color\"\r\n          ref={domain.nid}\r\n        >\r\n          <td>\r\n            <h4>{domain.title}</h4>\r\n          </td>\r\n          {editable && <td className=\"small-1\">Position</td>}\r\n          {editable && <td className=\"small-1\">Archive</td>}\r\n          <td>Attributes</td>\r\n          {editable && <td className=\"small-1\">Settings</td>}\r\n        </tr>\r\n        {this.getCompetencyRows(domain.competencies)}\r\n      </React.Fragment>\r\n    ));\r\n  }\r\n\r\n  getCompetencyRows(competencies) {\r\n    const { framework, editable } = this.state;\r\n    return competencies.map(competency => {\r\n      if (editable) {\r\n        return (\r\n          <tr key={competency.id}>\r\n            <td className={competency.archived === '1' ? 'strikeout' : ''}>\r\n              <InlineEdit\r\n                text={competency.title}\r\n                change={newValue =>\r\n                  this.editCompetency(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n            <td>\r\n              <InlineEdit\r\n                text={competency.position}\r\n                change={newValue =>\r\n                  this.editCompetencyPosition(competency.id, newValue)\r\n                }\r\n                editable={competency.archived === '1' ? false : true}\r\n              />\r\n            </td>\r\n\r\n            <td>\r\n              <button\r\n                className=\"cursor\"\r\n                onClick={this.toggleArchive.bind(\r\n                  this,\r\n                  competency.id,\r\n                  competency.archived\r\n                )}\r\n              >\r\n                {competency.archived === '1' ? (\r\n                  <span className=\"fas fa-toggle-on\">\r\n                    <span>Archived</span>\r\n                  </span>\r\n                ) : (\r\n                  <span className=\"fas fa-toggle-off\" />\r\n                )}\r\n              </button>\r\n            </td>\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/manage/competencies/${\r\n                  competency.id\r\n                }/manage-attributes`}\r\n              >\r\n                <i className=\"fas fa-sitemap\" />\r\n              </Link>\r\n            </td>\r\n\r\n            <td>\r\n              <Link\r\n                to={`/framework/${framework}/competency/${\r\n                  competency.id\r\n                }/settings`}\r\n              >\r\n                <i class=\"fas fa-cog\" />\r\n              </Link>\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n\r\n      if (competency.archived === '1') {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <tr key={competency.id}>\r\n          <td>\r\n            <InlineEdit\r\n              text={competency.title}\r\n              change={newValue => this.editCompetency(competency.id, newValue)}\r\n              editable={editable}\r\n            />\r\n          </td>\r\n          <td>\r\n            <Link\r\n              to={`/framework/${framework}/manage/competencies/${\r\n                competency.id\r\n              }/manage-attributes`}\r\n            >\r\n              <i className=\"fas fa-sitemap\" />\r\n            </Link>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkName,\r\n      frameworkData,\r\n      frameworkVersion,\r\n      frameworkStatus,\r\n      competencyTypes,\r\n      versions,\r\n      loadingError,\r\n      editable\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    if (frameworkData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <h2>Manage framework</h2>\r\n        <h4>{frameworkName}</h4>\r\n\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\">\r\n            {frameworkStatus === '' ? 'draft' : frameworkStatus}\r\n          </span>\r\n        </p>\r\n\r\n        <VersionControls\r\n          editable={editable}\r\n          createDraft={this.createDraft}\r\n          versions={versions}\r\n          release={this.releaseNewVersion}\r\n          updateNotes={this.updateNotes}\r\n        />\r\n\r\n        {editable && (\r\n          <SimpleForm\r\n            title=\"Create new competency\"\r\n            placeholder=\"Competency description\"\r\n            options={competencyTypes}\r\n            onCreate={this.createCompetency}\r\n            showMappingField={true}\r\n          />\r\n        )}\r\n\r\n        <table>\r\n          <tbody>{this.getCompetencyList()}</tbody>\r\n        </table>\r\n\r\n        <FrameworkVersions framework={framework} versions={versions} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(ManageCompetencies);\r\n","import HttpService from '../http/http';\r\n\r\nexport const apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass CoursesService {\r\n  static instance;\r\n  http = new HttpService();\r\n\r\n  constructor() {\r\n    if (CoursesService.instance) {\r\n      return this.instance;\r\n    }\r\n\r\n    CoursesService.instance = this;\r\n  }\r\n\r\n  async getCourses() {\r\n    const response = await this.http.get(\r\n      /*`${apiUrl}/api/v1/training-resources/all?_format=json`*/\r\n      `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport default CoursesService;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\nimport CoursesService from '../services/courses/courses';\r\n\r\nclass CompetencyDetails extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  coursesService = new CoursesService();\r\n\r\n  state = {\r\n    framework: this.props.match.params.framework,\r\n    version: this.props.location.pathname.split('/'),\r\n    frameworkData: [],\r\n    competencyId: this.props.match.params.cid,\r\n    attributeDefs: [],\r\n    resources: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.getFramework(),\r\n        this.getAttributes(),\r\n        this.getResources()\r\n      ]);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async getFramework() {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      version[3]\r\n    );\r\n\r\n    this.setState({\r\n      frameworkData\r\n    });\r\n  }\r\n\r\n  async getAttributes() {\r\n    const allFrameworks = await this.competencyService.getAllFrameworks();\r\n    const { framework } = this.state;\r\n    const frameworkMatch = allFrameworks.filter(\r\n      item => item.name.toLowerCase() === framework\r\n    );\r\n    if (frameworkMatch.length) {\r\n      const attributeDefs = frameworkMatch[0].attribute_types.map(\r\n        attribute => attribute.title\r\n      );\r\n      this.setState({ attributeDefs });\r\n    }\r\n  }\r\n\r\n  async getResources() {\r\n    try {\r\n      const allResources = await this.coursesService.getCourses();\r\n      const resources = allResources.filter(\r\n        resource =>\r\n          !!resource.competency_profile.find(\r\n            profile =>\r\n              // !!profile.domains.find(\r\n              //   domain =>\r\n              //     !!domain.competencies.find(\r\n              //       competency => competency.id === this.state.competencyId\r\n              //     )\r\n              // )\r\n\r\n              profile.competency_id === this.state.competencyId\r\n          )\r\n      );\r\n\r\n      this.setState({ resources });\r\n      /*const resources = [{\"id\":1, \"title\":this.state.version[3]}];*/\r\n      this.setState({ resources });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to retrieve training resources', {\r\n        variant: 'error'\r\n      });\r\n    }\r\n  }\r\n\r\n  resourceBlock() {\r\n    const { resources } = this.state;\r\n    return resources.map(resource => (\r\n      <li key={resource.id}>\r\n        <Link to={`/training-resources/${resource.id}`}>{resource.title}</Link>\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      competencyId,\r\n      frameworkData,\r\n      attributeDefs,\r\n      resources\r\n    } = this.state;\r\n\r\n    const competencies = [];\r\n    console.log(this.state.competencyId);\r\n    frameworkData.forEach(item =>\r\n      item.domains.forEach(domain =>\r\n        domain.competencies.forEach(competency => {\r\n          if (competency.id === competencyId) {\r\n            competencies.push({\r\n              ...competency,\r\n              framework: item.title,\r\n              domain: domain.title\r\n            });\r\n          }\r\n        })\r\n      )\r\n    );\r\n\r\n    const competencyDetails = competencies.map(competency => (\r\n      <div key={competency.id}>\r\n        <div className=\"row\">\r\n          <div className=\"column large-12\">\r\n            <h4>\r\n              {' '}\r\n              {competency.framework} / {competency.domain}\r\n            </h4>\r\n            <h4>{competency.title}</h4>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"column large-8\">\r\n            <ul>\r\n              {attributeDefs.map(def => {\r\n                return (\r\n                  <div key={def}>\r\n                    <div className=\"margin-top-medium\">\r\n                      {' '}\r\n                      <strong>\r\n                        <em>{def}</em>\r\n                      </strong>\r\n                    </div>\r\n                    {competency.attributes.map(attribute => {\r\n                      if (attribute.type === def) {\r\n                        return <li key={attribute.id}>{attribute.title} </li>;\r\n                      }\r\n                      return null;\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n          <div className=\"column large-4\">\r\n            <div className=\"callout notice industry-background white-color\">\r\n              <p>Competency derived from:</p>\r\n              <p>\r\n                {' '}\r\n                {competency.mapped_other_competency\r\n                  ? competency.mapped_other_competency\r\n                  : 'No data available'}{' '}\r\n              </p>\r\n            </div>\r\n\r\n            {resources.length === 0 ? null : (\r\n              <div className=\"callout notice training-background white-color\">\r\n                <p>Training resources mapped to this competency</p>\r\n                <ul>{this.resourceBlock()}</ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"column large-12\">\r\n          <h3>Competency details</h3>\r\n          {competencyDetails}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(CompetencyDetails);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Collapsible from 'react-collapsible';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { groupBy } from 'lodash-es';\r\nimport './CompetencyList.css';\r\n\r\nfunction CompetencyList({ index, framework, competency, disable, version }) {\r\n  const attributesGrouped = groupBy(competency.attributes, 'type');\r\n  const attributesTypes = Object.keys(attributesGrouped);\r\n  const attributes = attributesTypes.map(type => {\r\n    const attributes = attributesGrouped[type].map(attribute => (\r\n      <li key={attribute.id}>{attribute.title}</li>\r\n    ));\r\n    return (\r\n      <div key={type}>\r\n        <em>{type}</em>\r\n        <ul>{attributes}</ul>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  if (competency.archived === '1') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        <Collapsible\r\n          trigger={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-plus float-right\">\r\n                <p className=\"show-for-sr\">show more</p>\r\n              </span>\r\n            </div>\r\n          }\r\n          triggerWhenOpen={\r\n            <div className=\"open-close-title\">\r\n              <span>{competency.title}</span>\r\n              <span className=\"icon icon-common icon-minus float-right\">\r\n                <p className=\"show-for-sr\">show less</p>\r\n              </span>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"padding-left-large padding-top-large\">\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.id\r\n              }`}\r\n            >\r\n              <span className=\"float-right\">\r\n                <i className=\"icon icon-spacer icon-common icon-info\" />\r\n                More details\r\n              </span>\r\n            </Link>\r\n            {attributes}\r\n          </div>\r\n        </Collapsible>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nCompetencyList.defaultProps = {\r\n  parentIndex: 0,\r\n  index: 0,\r\n  disable: true\r\n};\r\n\r\nCompetencyList.propTypes = {\r\n  parentIndex: PropTypes.number,\r\n  index: PropTypes.number,\r\n  framework: PropTypes.string,\r\n  competency: PropTypes.shape({\r\n    title: PropTypes.string\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport CompetencyList from '../competency-list/CompetencyList';\r\n\r\nfunction DomainList({ index, framework, domain, disable, version }) {\r\n  const competencies = domain.competencies.map((competency, childIndex) => (\r\n    <CompetencyList\r\n      key={competency.id}\r\n      index={childIndex}\r\n      framework={framework}\r\n      competency={competency}\r\n      disable={disable}\r\n      version={version}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <tbody>\r\n      <tr className=\"white-color secondary-background\">\r\n        <td>\r\n          <h4> {domain.title}</h4>\r\n        </td>\r\n      </tr>\r\n      {competencies}\r\n    </tbody>\r\n  );\r\n}\r\n\r\nDomainList.defaultProps = {\r\n  domain: { title: '', competencies: [] },\r\n  disable: true\r\n};\r\n\r\nDomainList.propTypes = {\r\n  framework: PropTypes.string,\r\n  domain: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    competencies: PropTypes.array\r\n  }),\r\n  disable: PropTypes.bool\r\n};\r\n\r\nexport default DomainList;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport ErrorLoading from '../../components/error-loading/ErrorLoading';\r\n\r\nimport ActiveRequestsService from '../../services/active-requests/active-requests';\r\nimport CoursesService from '../../services/courses/courses';\r\nimport { safeFlat } from '../../services/util/util';\r\n\r\nclass Courses extends Component {\r\n  static propTypes = {\r\n    framework: PropTypes.string,\r\n    version: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    courses: [],\r\n    filteredCourses: [],\r\n    filter: '',\r\n    loadingError: false\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.framework = props.framework;\r\n    this.state.version = props.version;\r\n  }\r\n\r\n  coursesService = new CoursesService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const allCourses = await this.coursesService.getCourses();\r\n      const courses = this.filterCourses(allCourses);\r\n      this.setState({ courses, filteredCourses: courses });\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  filterCourses(allCourses) {\r\n    const { framework } = this.state;\r\n    const { version } = this.state;\r\n    const filteredCourses = [];\r\n    allCourses.forEach(course => {\r\n      if (course.archived === '1') {\r\n        return;\r\n      }\r\n\r\n      const filteredProfiles = course.competency_profile.filter(\r\n        //profile => (profile.title || '').toLowerCase() === framework\r\n        profile => (profile.framework_label || '').toLowerCase() === framework\r\n      );\r\n\r\n      if (filteredProfiles.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const modifiedCourse = {\r\n        ...course,\r\n        competencies: safeFlat(\r\n          filteredProfiles.map(\r\n            profile =>\r\n              // safeFlat(\r\n              //   profile.domains.map(domain =>\r\n              //     domain.competencies.map(competency => ({\r\n              //       ...competency,\r\n              //       domain: domain.title\r\n              //     }))\r\n              //   )\r\n              // )\r\n              profile\r\n          )\r\n        )\r\n      };\r\n\r\n      filteredCourses.push(modifiedCourse);\r\n    });\r\n    //console.log(filteredCourses);\r\n    return filteredCourses;\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { courses } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredCourses = courses.filter(course => term.test(course.title));\r\n    this.setState({ filteredCourses, filter });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      filteredCourses,\r\n      framework,\r\n      filter,\r\n      loadingError,\r\n      version\r\n    } = this.state;\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    //let unique = [...new Set(course.competencies.map(item => item.id))];\r\n\r\n    let duplicates = [];\r\n\r\n    const competencyList = competencies =>\r\n      competencies\r\n        .filter(\r\n          (competency, index, all) =>\r\n            all.findIndex(c => c.competency_id === competency.competency_id) ===\r\n            index\r\n        )\r\n        .map(competency => (\r\n          <li key={competency.id}>\r\n            <Link\r\n              to={`/framework/${framework}/${version}/competency/details/${\r\n                competency.competency_id\r\n              }`}\r\n            >\r\n              {competency.competency_label}\r\n            </Link>\r\n          </li>\r\n        ));\r\n\r\n    const resources = filteredCourses.map(course => (\r\n      <tr key={course.id}>\r\n        <td>\r\n          <Link to={`/training-resources/${course.id}`}>{course.title}</Link>\r\n        </td>\r\n        <td>{course.type}</td>\r\n        <td>\r\n          <ul>{competencyList(course.competencies)} </ul>\r\n        </td>\r\n      </tr>\r\n    ));\r\n\r\n    return (\r\n      <>\r\n        <input\r\n          type=\"search\"\r\n          // className=\"clearable\" // It doesn't work correctly\r\n          value={filter}\r\n          onChange={event => this.onFilter(event.target.value)}\r\n          placeholder=\"Filter resources\"\r\n        />\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Training resource(s)</th>\r\n              <th>Type</th>\r\n              <th>Competencies</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{resources}</tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Courses;\r\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport Parser from 'html-react-parser';\nimport { Link, Redirect } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\nimport './Profile.css';\nimport user_icon from './user_icon.png';\n\nconst ProfileList = props => {\n  let history = useHistory();\n\n  const frameworkName = props.framework;\n  const frameworkVersion = props.version;\n  const [guestProfile, setGuestProfile] = useState();\n  const [profiles, setProfiles] = useState();\n  const [framework, setFramework] = useState();\n  const [userRole, setUserRole] = useState();\n\n  var profilesToCompare = [];\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await setGuestProfile(JSON.parse(localStorage.getItem('guestProfile')));\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles/?_format=json&timestamp=${Date.now()}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfiles(findresponse);\n        });\n    };\n    fetchData();\n  }, [framework, frameworkVersion]);\n\n  const checkUserAccess = () => {\n    if (localStorage.getItem('roles')) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const setProfilesToCompare = e => {\n    if (profilesToCompare.length > 2) {\n      alert('You have to select two profiles to compare.');\n      return;\n    }\n\n    if (e.target.checked) {\n      profilesToCompare.push(e.target.getAttribute('data-profileid'));\n    } else {\n      profilesToCompare = profilesToCompare.filter(function(value, index, arr) {\n        return value != e.target.getAttribute('data-profileid');\n      });\n    }\n  };\n\n  const redirectToCompare = e => {\n    e.preventDefault();\n    if (profilesToCompare.length != 2) {\n      alert('You have to select two profiles to compare.');\n      return;\n    } else {\n      history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${profilesToCompare[0]}/${\n          profilesToCompare[1]\n        }`\n      );\n    }\n  };\n\n  return (\n    <div>\n    {console.log(guestProfile)}\n      <div className=\"introduction\">\n        <div className=\"row\">\n          <div className=\"column medium-6 item\">\n            <h5>\n              <i class=\"icon icon-common icon-search-document\" /> Discover and\n              explore{' '}\n            </h5>\n            <p>\n              You can explore career profiles for professionals in Biomoecular\n              Modelling and Simulation\n            </p>\n          </div>\n          <div className=\"column medium-6 item\">\n            <h5>\n              <i class=\"icon icon-common icon-user-plus\" /> Create your own\n              profile\n            </h5>\n            <p>\n              You can create your personal profile and choose your competencies{' '}\n            </p>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"column medium-6 item\">\n            <h5>\n              <i class=\"icon icon-common icon-compare\" /> Compare profiles\n            </h5>\n            <p>\n              Compere your profile with other reference profiles to help you\n              make career choices based on your competency\n            </p>\n          </div>\n          <div className=\"column medium-6 item\">\n            <h5>\n              <i class=\"icon icon-common icon-tutorial\" /> Identify training\n              oportunities\n            </h5>\n            <p>\n              Training oportunities will help boost a career in Biomoecular\n              Modelling and Simulation\n            </p>\n          </div>\n        </div>\n      </div>\n      <div className=\"wrapper\">\n        <div className=\"row\">\n          <div className=\"column medium-6\">\n            <h5 className=\"warpperLabel\">Career profiles</h5>\n          </div>\n          <div className=\"column medium-6\">\n            <span style={{ float: 'right' }}>\n              {localStorage.getItem('roles') ? (\n                <span>\n                  <Link\n                    className=\"button secondary small action-buttons\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/`}\n                  >\n                    {' '}\n                    Create reference profile{' '}\n                    <i className=\"icon icon-common icon-user-plus\" />\n                  </Link>\n                  <Link\n                    onClick={e => redirectToCompare(e)}\n                    className=\"button secondary small action-buttons\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n                      profilesToCompare[0]\n                    }/${profilesToCompare[1]}`}\n                  >\n                    {' '}\n                    Compare selected profiles{' '}\n                    <i className=\"icon icon-common icon-compare\" />\n                  </Link>\n                </span>\n              ) : (\n                <span>\n                  <Link\n                    onClick={e => redirectToCompare(e)}\n                    className=\"button secondary small action-buttons\"\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profiles/compare/${\n                      profilesToCompare[0]\n                    }/${profilesToCompare[1]}`}\n                  >\n                    {' '}\n                    Compare selected profiles{' '}\n                    <i className=\"icon icon-common icon-compare\" />\n                  </Link>\n                </span>\n              )}\n            </span>\n          </div>\n          <hr />\n        </div>\n        <div className=\"row\">\n          <div className=\"column medium-4\">\n            {guestProfile?\n              <div class=\"profile_badge\">\n                  <span class=\"compare_checkbox\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        onClick={e => setProfilesToCompare(e)}\n                        data-profileid=\"guest\"\n                      />\n                      Click to compare\n                    </label>\n                  </span>\n                  <p>\n                    <div>\n                      <img src={guestProfile.data.selectedFileData.src} class=\"profile_img\" />\n                    </div>\n                  </p>\n                  <div class=\"row action-buttons-row secondary-background white-color\">\n                    <div class=\"column medium-12\">\n                      <h4>{guestProfile.data.jobTitle}</h4>\n                      <Link\n                        className=\"readmore\"\n                        to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`}\n                      >\n                        View your profile\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              :\n              <div class=\"profile_badge\">\n                  <span class=\"compare_checkbox\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        disabled=\"disabled\"\n                        onClick={e => setProfilesToCompare(e)}\n                        data-profileid=\"guest\"\n                      />\n                      Click to compare\n                    </label>\n                  </span>\n                  <p>\n                    <div>\n                      <img src={user_icon} class=\"profile_img\" />\n                    </div>\n                  </p>\n                  <div class=\"row action-buttons-row secondary-background white-color\">\n                    <div class=\"column medium-12\">\n                      <h4>Your profile</h4>\n                      <Link\n                        className=\"readmore\"\n                        to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/guest`}\n                      >\n                        <i class=\"icon icon-common icon-user-plus\" /> Create your\n                        profile\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              }\n          </div>\n          {profiles\n            ? profiles.map(profile => {\n                if (!checkUserAccess()) {\n                  if (profile.publishing_status == 'Live') {\n                    return (\n                      <div className=\"column medium-4\">\n                        <div className=\"profile_badge\">\n                          <span class=\"compare_checkbox\">\n                            <label>\n                              <input\n                                type=\"checkbox\"\n                                onClick={e => setProfilesToCompare(e)}\n                                data-profileid={profile.id}\n                              />\n                              Click to compare\n                            </label>\n                          </span>\n                          <p>\n                            {profile.image[0] ? (\n                              <div className={profile.publishing_status}>\n                                <img\n                                  src={profile.image[0].url}\n                                  className=\"profile_img\"\n                                />\n                              </div>\n                            ) : (\n                              <img src={user_icon} className=\"profile_img\" />\n                            )}\n                          </p>\n\n                          <div className=\"row action-buttons-row secondary-background white-color\">\n                            <div className=\"column medium-12\">\n                              <h4>\n                                {profile.job_title\n                                  ? profile.job_title\n                                  : 'Job title'}\n                              </h4>\n                              <Link\n                                className=\"readmore\"\n                                to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${\n                                  profile.id\n                                }${profile.url_alias}`}\n                              >\n                                View profile{' '}\n                              </Link>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  }\n                } else {\n                  return (\n                    <div className=\"column medium-4\">\n                      <div className=\"profile_badge\">\n                        <span class=\"compare_checkbox\">\n                          <label>\n                            <input\n                              type=\"checkbox\"\n                              onClick={e => setProfilesToCompare(e)}\n                              data-profileid={profile.id}\n                            />\n                            Click to compare\n                          </label>\n                        </span>\n                        <p className={profile.publishing_status}>\n                          {profile.image[0] ? (\n                            <img\n                              src={profile.image[0].url}\n                              className=\"profile_img\"\n                            />\n                          ) : (\n                            <img src={user_icon} className=\"profile_img\" />\n                          )}\n                        </p>\n\n                        <div className=\"row action-buttons-row secondary-background white-color\">\n                          <div className=\"column medium-12\">\n                            <h4>\n                              {profile.job_title\n                                ? profile.job_title\n                                : 'Job title'}\n                            </h4>\n                            <Link\n                              className=\"readmore\"\n                              to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${\n                                profile.id\n                              }${profile.url_alias}`}\n                            >\n                              View profile{' '}\n                            </Link>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              })\n            : ''}\n\n          <div className=\"column medium-4\">&nbsp;</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileList;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport ErrorLoading from '../components/error-loading/ErrorLoading';\r\n\r\nimport DomainList from '../components/domain-list/DomainList';\r\nimport Courses from './courses/Courses';\r\nimport ProfileList from './ProfileList';\r\nimport FrameworkVersions from '../containers/framework-versions/FrameworkVersions';\r\n\r\nimport CompetencyService from '../services/competency/competency';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport { safeFlat, removeHtmlTags } from '../services/util/util';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nclass CompetencyList extends Component {\r\n  static propTypes = {\r\n    match: PropTypes.shape({\r\n      match: PropTypes.shape({ framework: PropTypes.string })\r\n    })\r\n  };\r\n\r\n  competencyService = new CompetencyService();\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n\r\n  state = {\r\n    framework: '',\r\n    frameworkVersion: '',\r\n    frameworkName: '',\r\n    frameworkStatus: '',\r\n    frameworkDescription: '',\r\n    versions: [],\r\n    domains: [],\r\n    filter: '',\r\n    filteredDomains: [],\r\n    loadingError: false,\r\n    profileCount: 0,\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { framework, version: frameworkVersion } = props.match.params;\r\n    if (\r\n      framework !== state.framework ||\r\n      frameworkVersion !== state.frameworkVersion\r\n    ) {\r\n      return {\r\n        framework,\r\n        frameworkVersion,\r\n        domains: [],\r\n        loadingError: false\r\n      };\r\n    }\r\n\r\n    // No state update necessary\r\n    return null;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { framework, version: frameworkVersion } = this.props.match.params;\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.fetchFramework(framework, frameworkVersion),\r\n        this.fetchVersions(framework)\r\n      ]);\r\n\r\n    \r\n       fetch(`${apiUrl}/api/${framework}/${frameworkVersion}/profiles?_format=json&timestamp=${Date.now()}`)\r\n        .then(Response => Response.json())\r\n        .then(findResponse => \r\n          {\r\n            this.setState({profileCount: findResponse.filter(item => item.publishing_status == 'Live').length})  \r\n          }\r\n        )\r\n\r\n\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { framework, frameworkVersion, domains, loadingError } = this.state;\r\n    if (\r\n      framework !== prevState.framework ||\r\n      frameworkVersion !== prevState.frameworkVersion\r\n    ) {\r\n      if (domains.length === 0 && !loadingError) {\r\n        try {\r\n          this.activeRequests.startRequest();\r\n          await this.fetchFramework(framework, frameworkVersion);\r\n        } catch (error) {\r\n          this.setState({ loadingError: true });\r\n        } finally {\r\n          this.activeRequests.finishRequest();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async fetchFramework(framework, frameworkVersion) {\r\n    window.scroll(0, 0);\r\n    const frameworkData = await this.competencyService.getVersionedFramework(\r\n      framework,\r\n      frameworkVersion\r\n    );\r\n    const domains = safeFlat(frameworkData.map(item => item.domains));\r\n    const frameworkDescription = removeHtmlTags(frameworkData[0].description);\r\n\r\n    this.setState({\r\n      frameworkName: frameworkData[0].title,\r\n      //frameworkStatus: frameworkData[0].status,\r\n      frameworkDescription,\r\n      domains,\r\n      filteredDomains: domains\r\n    });\r\n\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      const versionStatus = currentFramework[0].versions.filter(\r\n        vr => vr.number == frameworkVersion\r\n      );\r\n      this.setState({ frameworkStatus: versionStatus[0].status });\r\n    }\r\n  }\r\n\r\n  async fetchVersions(framework) {\r\n    const allFrameworks = await this.competencyService.getAllVersionedFrameworks();\r\n    const currentFramework = allFrameworks.filter(\r\n      fw => fw.title.toLowerCase() === framework\r\n    );\r\n    if (currentFramework.length > 0) {\r\n      this.setState({ versions: currentFramework[0].versions.reverse() });\r\n    }\r\n  }\r\n\r\n  onFilter = filter => {\r\n    const { domains } = this.state;\r\n    let term;\r\n    try {\r\n      term = new RegExp(filter, 'i');\r\n    } catch (e) {\r\n      term = /./;\r\n    }\r\n    const filteredDomains = domains.map(domain => {\r\n      const filteredCompetencies = domain.competencies.filter(competency =>\r\n        term.test(competency.title)\r\n      );\r\n      if (filteredCompetencies.length === 0) {\r\n        return null;\r\n      }\r\n      return { ...domain, competencies: filteredCompetencies };\r\n    });\r\n    this.setState({ filter, filteredDomains });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      framework,\r\n      frameworkVersion,\r\n      frameworkName,\r\n      frameworkStatus,\r\n      frameworkDescription,\r\n      filteredDomains,\r\n      versions,\r\n      filter,\r\n      loadingError\r\n    } = this.state;\r\n\r\n    /*if(versions.length > 0){\r\n console.log(this.state.versions[0].status);  \r\n}*/\r\nconsole.log(this.state.profileCount)\r\n\r\n    if (loadingError) {\r\n      return <ErrorLoading />;\r\n    }\r\n\r\n    const domainList = filteredDomains.map(domain =>\r\n      domain === null ? null : (\r\n        <DomainList\r\n          key={domain.nid}\r\n          framework={framework}\r\n          domain={domain}\r\n          disable={true}\r\n          version={frameworkVersion}\r\n        />\r\n      )\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <h3>{frameworkName}</h3>\r\n        <p>\r\n          <span className=\"tag\">{frameworkVersion}</span>\r\n          <span className=\"tag secondary-background\"> {frameworkStatus}</span>\r\n        </p>\r\n        <p>{frameworkDescription}</p>\r\n\r\n        <Tabs>\r\n          <TabList>\r\n          {\r\n            localStorage.getItem('roles')?\r\n            <Tab>Career profiles</Tab>:\r\n            this.state.profileCount > 0?\r\n            <Tab>Career profiles</Tab>:''\r\n          }\r\n            \r\n\r\n            <Tab>Competencies</Tab>\r\n            <Tab>Training resources</Tab>\r\n          </TabList>\r\n\r\n          {\r\n            localStorage.getItem('roles')?\r\n            <TabPanel>\r\n              <ProfileList framework={framework} version={frameworkVersion} />\r\n              <FrameworkVersions framework={framework} versions={versions} />\r\n            </TabPanel>:\r\n            this.state.profileCount > 0?\r\n            <TabPanel>\r\n              <ProfileList framework={framework} version={frameworkVersion} />\r\n              <FrameworkVersions framework={framework} versions={versions} />\r\n            </TabPanel>:''\r\n          }\r\n          \r\n\r\n          <TabPanel>\r\n            <input\r\n              // className=\"clearable\" // It doesn't work correctly\r\n              type=\"search\"\r\n              value={filter}\r\n              onChange={event => this.onFilter(event.target.value)}\r\n              placeholder=\"Filter competencies\"\r\n            />\r\n            <table>{domainList}</table>\r\n            <FrameworkVersions framework={framework} versions={versions} />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Courses framework={framework} version={frameworkVersion} />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CompetencyList;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass ResourceEdit extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      path: this.props.location.pathname.split('/'),\r\n      nid: '',\r\n      title: '',\r\n      dates: '',\r\n      dates2: '',\r\n      type: '',\r\n      description: '',\r\n      location: '',\r\n      url: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      keywords: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n    this.redirectTo = this.redirectTo.bind(this);\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ nid: this.state.path[3] });\r\n\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let fetchResource = \"http://dev-competency-mapper.pantheonsite.io/api/v1/training-resources/\"+nid+\"?_format=json\";\r\n    //let fetchResource = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    let fetchResource = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(fetchResource)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n  }\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  redirectTo(event) {\r\n    this.props.history.push('/training-resources/' + this.state.nid);\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let nid = '';\r\n    let title = '';\r\n    let dates = '';\r\n    let dates2 = '';\r\n    let type = '';\r\n    let description = '';\r\n    let location = '';\r\n    let url = '';\r\n    let target_audience = '';\r\n    let learning_outcomes = '';\r\n    let keywords = '';\r\n    let organisers = '';\r\n    let trainers = '';\r\n\r\n    this.state.data.forEach(item => {\r\n      if (item.id === this.state.nid) {\r\n        nid = item.id;\r\n        title = item.title;\r\n        //temp_date = item.dates.split(\"-\");\r\n        dates = item.dates;\r\n        dates2 = item.end_date;\r\n        type = item.type;\r\n        description = item.description;\r\n        location = item.location;\r\n        url = item.url;\r\n        target_audience = item.target_audience;\r\n        learning_outcomes = item.learning_outcomes;\r\n        keywords = item.keywords;\r\n        organisers = item.organisers;\r\n        trainers = item.trainers;\r\n      }\r\n    });\r\n    if (this.state.data.length > 0) {\r\n      console.log(title);\r\n      return (\r\n        <EditForm\r\n          nid={nid}\r\n          title={title}\r\n          dates={dates}\r\n          dates2={dates2}\r\n          type={type}\r\n          description={description}\r\n          location={location}\r\n          url={url}\r\n          target_audience={target_audience}\r\n          learning_outcomes={learning_outcomes}\r\n          keywords={keywords}\r\n          organisers={organisers}\r\n          trainers={trainers}\r\n          redirectTo={this.redirectTo}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass EditForm extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nid: this.props.nid,\r\n      title: this.props.title,\r\n      dates: this.props.dates,\r\n      dates2: this.props.dates2,\r\n      type: this.props.type,\r\n      description: this.props.description,\r\n      location: this.props.location,\r\n      url: this.props.url,\r\n      target_audience: this.props.target_audience,\r\n      learning_outcomes: this.props.learning_outcomes,\r\n      keywords: this.props.keywords,\r\n      organisers: this.props.organisers,\r\n      trainers: this.props.trainers,\r\n      redirect: false,\r\n      updateFlag: false,\r\n      csrf: ''\r\n    };\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleDates = this.handleDates.bind(this);\r\n    this.handleDates2 = this.handleDates2.bind(this);\r\n    this.handleType = this.handleType.bind(this);\r\n    this.handleDesc = this.handleDesc.bind(this);\r\n    this.handleLocation = this.handleLocation.bind(this);\r\n    this.handleURL = this.handleURL.bind(this);\r\n    this.handleTargetAudience = this.handleTargetAudience.bind(this);\r\n    this.handleLearningOutcomes = this.handleLearningOutcomes.bind(this);\r\n    this.handleKeywords = this.handleKeywords.bind(this);\r\n    this.handleOrganisers = this.handleOrganisers.bind(this);\r\n    this.handleTrainers = this.handleTrainers.bind(this);\r\n    //this.redirectTo = this.redirectTo.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  static contextTypes = {\r\n    router: PropTypes.object\r\n  };\r\n\r\n  handleTitle(event) {\r\n    this.setState({ title: event.value });\r\n  }\r\n\r\n  handleDates(event) {\r\n    this.setState({ dates: event.value });\r\n  }\r\n\r\n  handleDates2(event) {\r\n    this.setState({ dates2: event.value });\r\n  }\r\n\r\n  handleType(event) {\r\n    this.setState({ type: event.value });\r\n  }\r\n\r\n  handleDesc(event) {\r\n    this.setState({ description: event.editor.getData() });\r\n    //this.setState({ description: \"test\" });\r\n    //console.log(this.setState({ description: event.editor.getData() }));\r\n  }\r\n  handleLocation(event) {\r\n    this.setState({ location: event.value });\r\n  }\r\n  handleURL(event) {\r\n    this.setState({ url: event.value });\r\n  }\r\n\r\n  handleTargetAudience(event) {\r\n    this.setState({ target_audience: event.editor.getData() });\r\n    //this.setState({ target_audience: \"test\" });\r\n  }\r\n\r\n  handleLearningOutcomes(event) {\r\n    this.setState({ learning_outcomes: event.editor.getData() });\r\n    //this.setState({ learning_outcomes: \"hi\" });\r\n  }\r\n\r\n  handleKeywords(event) {\r\n    this.setState({ keywords: event.value });\r\n  }\r\n\r\n  handleOrganisers(event) {\r\n    this.setState({ organisers: event.editor.getData() });\r\n    //this.setState({ organisers: \"test\" });\r\n  }\r\n\r\n  handleTrainers(event) {\r\n    this.setState({ trainers: event.editor.getData() });\r\n    //this.setState({ trainers: \"test\" });\r\n  }\r\n\r\n  setRedirect = () => {\r\n    this.props.history.push('all-training-resources');\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      // setTimeout(() => {\r\n      //  // this.props.redirectTo()\r\n      // }, 1000);\r\n      //await this.handleSubmit();\r\n      //this.props.redirectTo();\r\n    }\r\n  }\r\n\r\n  async handleSubmit(event) {\r\n    let resourceID = this.state.nid;\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = this.refs.type.value;\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n    let keywords = this.refs.keywords.value;\r\n    let csrf = localStorage.getItem('csrf_token');\r\n\r\n    fetch(`${apiUrl}/node/` + resourceID + '?_format=hal_json', {\r\n      method: 'PATCH',\r\n      credentials: 'include',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': csrf\r\n        //Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    //event.target.reset();\r\n    event.preventDefault();\r\n    setTimeout(() => {\r\n      this.props.redirectTo();\r\n    }, 1000);\r\n    //this.props.redirectTo();\r\n\r\n    //this.setState({ updateFlag: true });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Edit Training Resources</h2>\r\n        {console.log(localStorage.getItem('csrf_token'))}\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_edit_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"title\"\r\n                    id={'title'}\r\n                    value={this.state.title}\r\n                    onChange={this.handleTitle.bind(this)}\r\n                    required\r\n                    placeholder=\"Title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates\"\r\n                    value={this.state.dates}\r\n                    onChange={this.handleDates.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>Dates</strong>\r\n                  <input\r\n                    type=\"date\"\r\n                    ref=\"dates2\"\r\n                    value={this.state.dates2}\r\n                    onChange={this.handleDates2.bind(this)}\r\n                    placeholder=\"Date\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select\r\n                    ref={'type'}\r\n                    value={this.state.type}\r\n                    onChange={this.handleType.bind(this)}\r\n                  >\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.handleDesc\r\n                    }}\r\n                    onChange={this.handleDesc}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" value={this.state.description} onChange={this.handleDesc.bind(this)} required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"location\"\r\n                    value={this.state.location}\r\n                    onChange={this.handleLocation.bind(this)}\r\n                    placeholder=\"Location\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"url\"\r\n                    value={this.state.url}\r\n                    onChange={this.handleURL.bind(this)}\r\n                    required\r\n                    placeholder=\"URL\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.handleTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"target_audience\" value={this.state.target_audience} onChange={this.handleTargetAudience.bind(this)} required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.handleLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" value={this.state.learning_outcomes} onChange={this.handleLearningOutcomes.bind(this)} required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.handleOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" value={this.state.organisers} onChange={this.handleOrganisers.bind(this)} required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.handleTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" value={this.state.trainers} onChange={this.handleTrainers.bind(this)} required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref=\"keywords\"\r\n                    value={this.state.keywords}\r\n                    onChange={this.handleKeywords.bind(this)}\r\n                    placeholder=\"Keywords\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Update\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EditResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/edit/:nid\" component={ResourceEdit} />\r\n  </Switch>\r\n);\r\n\r\nexport default EditResources;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dropzone from 'react-dropzone';\n\nclass FileUpload extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Dropzone\n        onDrop={acceptedFiles => {\n          console.log(acceptedFiles);\n          const reader = new FileReader();\n\n          reader.onabort = () => console.log('file reading was aborted');\n          reader.onerror = () => console.log('file reading has failed');\n          reader.onload = () => {\n            // Do whatever you want with the file contents\n            const binaryStr = reader.result;\n            console.log(binaryStr);\n          };\n          document.getElementById('fileupload').append(acceptedFiles[0].name);\n          acceptedFiles.forEach(file => reader.readAsArrayBuffer(file));\n        }}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <section>\n            <div {...getRootProps()}>\n              <input {...getInputProps()} />\n              <a href=\"#\">Click to upload image</a>\n            </div>\n          </section>\n        )}\n      </Dropzone>\n    );\n  }\n}\n\nexport default FileUpload;\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport CKEditor from 'react-ckeditor-component';\r\nimport FileUpload from './FileUpload';\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourceCreate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //this.onChange = this.onChange.bind(this);\r\n    this.changeDescription = this.changeDescription.bind(this);\r\n    this.changeTargetAudience = this.changeTargetAudience.bind(this);\r\n    this.changeLearningOutcomes = this.changeLearningOutcomes.bind(this);\r\n    this.changeOrganisers = this.changeOrganisers.bind(this);\r\n    this.changeTrainers = this.changeTrainers.bind(this);\r\n\r\n    this.state = {\r\n      data: [],\r\n      csrf: '',\r\n      updateFlag: false,\r\n      content: 'content',\r\n      description: '',\r\n      target_audience: '',\r\n      learning_outcomes: '',\r\n      organisers: '',\r\n      trainers: ''\r\n    };\r\n  }\r\n\r\n  changeDescription(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ description: newContent });\r\n  }\r\n\r\n  changeTargetAudience(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ target_audience: newContent });\r\n  }\r\n\r\n  changeLearningOutcomes(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ learning_outcomes: newContent });\r\n  }\r\n\r\n  changeOrganisers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ organisers: newContent });\r\n  }\r\n\r\n  changeTrainers(evt) {\r\n    let newContent = evt.editor.getData();\r\n    this.setState({ trainers: newContent });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      setTimeout(() => {\r\n        this.props.history.push('/all-training-resources');\r\n        //this.setState({'updateFlag': false});\r\n      }, 1000);\r\n\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n  }\r\n\r\n  componentDidMount() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let title = this.refs.title.value;\r\n    let dates = this.refs.dates.value;\r\n    let dates2 = this.refs.dates2.value;\r\n    let type = 'Online';\r\n    if (this.refs.type.value) {\r\n      type = this.refs.type.value;\r\n    }\r\n\r\n    let description = this.state.description;\r\n    let location = this.refs.location.value;\r\n    let url = this.refs.url.value;\r\n    let target_audience = this.state.target_audience;\r\n    let learning_outcomes = this.state.learning_outcomes;\r\n    let keywords = this.refs.keywords.value;\r\n    let organisers = this.state.organisers;\r\n    let trainers = this.state.trainers;\r\n\r\n    let token = localStorage.getItem('csrf_token');\r\n\r\n    //alert(learning_outcomes);\r\n\r\n    fetch(`${apiUrl}/node?_format=hal_json`, {\r\n      credentials: 'include',\r\n      method: 'POST',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        title: [\r\n          {\r\n            value: title\r\n          }\r\n        ],\r\n        field_dates: [\r\n          {\r\n            value: dates\r\n          }\r\n        ],\r\n        field_end_date: [\r\n          {\r\n            value: dates2\r\n          }\r\n        ],\r\n        field_type: [\r\n          {\r\n            value: type\r\n          }\r\n        ],\r\n        field_description: [\r\n          {\r\n            value: description,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_location: [\r\n          {\r\n            value: location\r\n          }\r\n        ],\r\n        field_url: [\r\n          {\r\n            value: url\r\n          }\r\n        ],\r\n        field_target_audience: [\r\n          {\r\n            value: target_audience,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_learning_outcomes: [\r\n          {\r\n            value: learning_outcomes,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_keywords: [\r\n          {\r\n            value: keywords\r\n          }\r\n        ],\r\n        field_organisers: [\r\n          {\r\n            value: organisers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n        field_trainers: [\r\n          {\r\n            value: trainers,\r\n            format: 'basic_html'\r\n          }\r\n        ],\r\n\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    event.target.reset();\r\n    this.setState({ updateFlag: true });\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h2>Create Training Resources</h2>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"column large-12 callout\">\r\n            <h4>Create new competency</h4>\r\n            <form\r\n              className=\"form\"\r\n              id={'resource_create_form'}\r\n              onSubmit={this.handleSubmit.bind(this)}\r\n            >\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Title</strong>\r\n                  <input type=\"text\" ref=\"title\" required placeholder=\"Title\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-6\">\r\n                  <strong>Start Date</strong>\r\n                  <input type=\"date\" ref=\"dates\" placeholder=\"Date\" />\r\n                </div>\r\n                <div className=\"column large-6\">\r\n                  <strong>End Date</strong>\r\n                  <input type=\"date\" ref=\"dates2\" placeholder=\"Date\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Event type</strong>\r\n                  <select ref={'type'}>\r\n                    <option value={'Online'}>Online</option>\r\n                    <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                    <option value={'Webinar'}>Webinar</option>\r\n                    <option value={'Hackathon'}>Hackathon</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Description</strong>\r\n                  <CKEditor\r\n                    content={this.state.description}\r\n                    events={{\r\n                      change: this.changeDescription\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                    required\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"description\" required placeholder=\"Description\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Location</strong>\r\n                  <input type=\"text\" ref=\"location\" placeholder=\"Location\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>URL</strong>\r\n                  <input type=\"text\" ref=\"url\" required placeholder=\"URL\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Target audience</strong>\r\n                  <CKEditor\r\n                    content={this.state.target_audience}\r\n                    events={{\r\n                      change: this.changeTargetAudience\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<input type=\"text\" ref=\"target_audience\" required placeholder=\"Target audience\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Learning outcomes</strong>\r\n                  <CKEditor\r\n                    content={this.state.learning_outcomes}\r\n                    events={{\r\n                      change: this.changeLearningOutcomes\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"learning_outcomes\" required placeholder=\"Learning outcomes\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Organisers</strong>\r\n                  <CKEditor\r\n                    content={this.state.organisers}\r\n                    events={{\r\n                      change: this.changeOrganisers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n\r\n                  {/*<textarea rows={\"5\"} ref=\"organisers\" required placeholder=\"Organisers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Trainers</strong>\r\n                  <CKEditor\r\n                    content={this.state.trainers}\r\n                    events={{\r\n                      change: this.changeTrainers\r\n                    }}\r\n                    activeClass=\"p10\"\r\n                  />\r\n                  {/*<textarea rows={\"5\"} ref=\"trainers\" required placeholder=\"Trainers\"/>*/}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>Keywords</strong>\r\n                  <input type=\"text\" ref=\"keywords\" placeholder=\"Keywords\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div id=\"fileupload\" className=\"row\">\r\n                <div className=\"column large-12\">\r\n                  <strong>File upload</strong>\r\n                  <FileUpload />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"column large-2\">\r\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateResources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resource/create\" component={ResourceCreate} />\r\n  </Switch>\r\n);\r\n\r\nexport default CreateResources;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { apiUrl } from '../services/http/http';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nconst $ = window.$;\r\n\r\nclass AttributeMap extends React.Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      //framework: this.props.selectedFramework,\r\n      //resourceID: this.props.resourceID,\r\n      framework: this.props.location.pathname.split('/')[4],\r\n      resourceID: this.props.location.pathname.split('/')[2],\r\n      frameworkdetails: [],\r\n      csrf: '',\r\n      frameworkUUID: '',\r\n      competencies: [],\r\n      //attributes: this.props.selectedAttributes,\r\n      //selectedAttributes: this.props.selectedAttributes,\r\n      selectedAttributes: [],\r\n      //selectedCompetencies: this.props.selectedCompetencies,\r\n      resourceDetails: '',\r\n      resourcePath: this.props.location.pathname.split('/')\r\n    };\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    //this.loadSelectedAttributes = this.loadSelectedAttributes.bind(this);\r\n  }\r\n\r\n  async handleSelect() {\r\n    let checkedAttributes = this.state.selectedAttributes;\r\n    let attributeIDs = [];\r\n    let token = localStorage.getItem('csrf_token');\r\n    for (let i = 0; i < checkedAttributes.length; i++) {\r\n      attributeIDs.push(checkedAttributes[i].split('id', 2));\r\n    }\r\n\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      await Promise.all([\r\n        this.competencyService.attrmap(this.state.resourceID, attributeIDs)\r\n      ]);\r\n    } catch (error) {\r\n      this.setState({ loadingError: true });\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n      this.props.history.push('/training-resources/' + this.state.resourceID);\r\n    }\r\n  }\r\n\r\n  handleAllCheck(id, uuid, e) {\r\n    const selectedAttributes = this.state.selectedAttributes;\r\n    let childItems = document.getElementsByName(id);\r\n    if (e.target.checked) {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        childItems[i].checked = true;\r\n        selectedAttributes.push(\r\n          // childItems[i].getAttribute('data-uuid') +\r\n          //   'id' +\r\n          childItems[i].getAttribute('data-id')\r\n        );\r\n        this.setState({ selectedAttributes });\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < childItems.length; i++) {\r\n        if (childItems[i].checked === true) {\r\n          childItems[i].checked = false;\r\n          //selectedAttributes.pop(childItems[i].getAttribute('data-id'));\r\n          //let index = array.indexOf(element);\r\n          selectedAttributes.splice(\r\n            selectedAttributes.indexOf(childItems[i]),\r\n            1\r\n          );\r\n          this.setState({ selectedAttributes });\r\n          //console.log(this.state.selectedAttributes);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleAttributeClick(id, uuid, e) {\r\n    let selectedAttributes = this.state.selectedAttributes;\r\n    //let selectedAttributes =\r\n    let isChecked = e.target.checked;\r\n    if (isChecked) {\r\n      //selectedAttributes.push(uuid + 'id' + id);\r\n      selectedAttributes.push(id);\r\n      this.setState({ selectedAttributes });\r\n      document.getElementById(e.target.name).checked = true;\r\n      console.log(selectedAttributes);\r\n    } else {\r\n      //selectedAttributes.pop(id);\r\n      selectedAttributes.splice(selectedAttributes.indexOf(id), 1);\r\n      this.setState({ selectedAttributes });\r\n      if (!$(':checkbox[name=' + e.target.name + ']').is(':checked')) {\r\n        document.getElementById(e.target.name).checked = false;\r\n        //console.log(this.state.selectedAttributes);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleListAllChecked(e) {\r\n    let lists = [];\r\n    $(':checkbox').each(function() {\r\n      if ($(this).is(':checked')) {\r\n        lists.push($(this).attr('id'));\r\n      }\r\n    });\r\n    alert(lists);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await fetch(\r\n      `${apiUrl}` +\r\n        '/api/resources/?_format=hal_json&id=' +\r\n        this.state.resourceID +\r\n        '&timestamp=' +\r\n        Date.now()\r\n    )\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resourceDetails: findresponse\r\n        });\r\n      });\r\n\r\n    console.log(this.state.resourceDetails);\r\n\r\n    let selectedAttributes = [];\r\n    this.state.resourceDetails.competency_profile.map(profile => {\r\n      //if(profile.title.toLowerCase() == this.state.framewor  k){\r\n      profile.domains.map(domain => {\r\n        domain.competencies.map(competency => {\r\n          competency.attributes.map(attribute => {\r\n            selectedAttributes.push(attribute.id);\r\n          });\r\n        });\r\n      });\r\n      //}\r\n    });\r\n\r\n    this.setState({ selectedAttributes: selectedAttributes });\r\n\r\n    //console.log(this.state.framework);\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    let fetchFrameworkDetails = `${apiUrl}/api/version_manager?_format=json&timestamp=${Date.now()}`;\r\n    await fetch(fetchFrameworkDetails)\r\n      .then(Response => Response.json())\r\n      .then(findresponse1 => {\r\n        this.setState({\r\n          frameworkdetails: findresponse1\r\n        });\r\n      });\r\n\r\n    let latest_version = '';\r\n\r\n    this.state.frameworkdetails.map(detail => {\r\n      if (detail.title.toLowerCase() == this.state.framework) {\r\n        detail.versions.map(version => {\r\n          if (version.status == 'live') {\r\n            latest_version = version.number;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    let fetchCompetencyList =\r\n      `${apiUrl}` +\r\n      '/api/' +\r\n      this.state.framework +\r\n      '/' +\r\n      latest_version +\r\n      '?_format=json';\r\n    console.log(fetchCompetencyList);\r\n    await fetch(fetchCompetencyList)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          data: findresponse\r\n        });\r\n      });\r\n\r\n    //this.loadSelectedAttributes();\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.state.attributes === nextState.attributes;\r\n  }\r\n\r\n  render() {\r\n    //console.log(this.state.data);\r\n    let frameworkDetails = this.state.frameworkdetails;\r\n    let data = this.state.data;\r\n    let frameworkDefs = [];\r\n    let domainsOptions = [];\r\n    let attributeTypeOptions = [];\r\n    let resDetails = this.state.resourceDetails;\r\n    //let resDetails = this.state.resourceDetails;\r\n    let selectedAttributesArray = [];\r\n    let selectedCompetenciesArray = [];\r\n    if (resDetails) {\r\n      resDetails.competency_profile.map(profile => {\r\n        profile.domains.map(domain => {\r\n          domain.competencies.map(competency => {\r\n            selectedCompetenciesArray.push(competency.id);\r\n            competency.attributes.map(attribute => {\r\n              selectedAttributesArray.push(attribute.id);\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      //console.log(selectedAttributesArray);\r\n    }\r\n    //this.loadSelectedAttributes();\r\n\r\n    frameworkDetails.forEach((item, ikey) => {\r\n      if (item.title.toLowerCase() === this.state.framework) {\r\n        //this.state.frameworkUUID = item.uuid;\r\n        item.attribute_types.forEach(attribute_type => {\r\n          frameworkDefs.push(attribute_type.title);\r\n          attributeTypeOptions.push(\r\n            <option data-id={attribute_type.id} value={attribute_type.uuid}>\r\n              {attribute_type.title}\r\n            </option>\r\n          );\r\n        });\r\n        item.domains.forEach(domain => {\r\n          domainsOptions.push(\r\n            <option data-id={domain.id} value={domain.uuid}>\r\n              {domain.title}\r\n            </option>\r\n          );\r\n        });\r\n      }\r\n    });\r\n\r\n    // console.log(data);\r\n\r\n    const ListOfCompetencies = data.map(item =>\r\n      item.domains.map((domain, did) => (\r\n        <tbody>\r\n          <tr key={domain.nid}>\r\n            <td>{did + 1}</td>{' '}\r\n            <td>\r\n              <strong> {domain.title}</strong>{' '}\r\n            </td>{' '}\r\n          </tr>\r\n          {domain.competencies.map((competency, cid) => (\r\n            <tr key={competency.id}>\r\n              <td>\r\n                {did + 1}.{cid + 1}\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type={'checkbox'}\r\n                  defaultChecked={\r\n                    -1 !== selectedCompetenciesArray.indexOf(competency.id)\r\n                  }\r\n                  data-test={competency.uuid}\r\n                  id={competency.id}\r\n                  onChange={this.handleAllCheck.bind(\r\n                    this,\r\n                    competency.id,\r\n                    competency.uuid\r\n                  )}\r\n                />{' '}\r\n                {competency.title}\r\n                <ul style={{ marginLeft: 1 + 'em', marginBottom: 1 + 'em' }}>\r\n                  {frameworkDefs.map(def => {\r\n                    return (\r\n                      <div style={{ marginLeft: 1 + 'em' }}>\r\n                        <div>\r\n                          {' '}\r\n                          <strong>\r\n                            <em>{def}</em>\r\n                          </strong>\r\n                        </div>\r\n                        {competency.attributes\r\n                          .filter(attribute => attribute.type === def)\r\n                          .map(attribute => {\r\n                            return (\r\n                              <li\r\n                                key={attribute.id}\r\n                                style={{ marginLeft: 1 + 'em' }}\r\n                              >\r\n                                <input\r\n                                  type={'checkbox'}\r\n                                  defaultChecked={\r\n                                    -1 !==\r\n                                    selectedAttributesArray.indexOf(\r\n                                      //attribute.uuid + 'id' + attribute.id\r\n                                      attribute.id\r\n                                    )\r\n                                  }\r\n                                  name={competency.id}\r\n                                  data-id={attribute.id}\r\n                                  data-uuid={attribute.uuid}\r\n                                  id={attribute.id}\r\n                                  onChange={this.handleAttributeClick.bind(\r\n                                    this,\r\n                                    attribute.id,\r\n                                    attribute.uuid\r\n                                  )}\r\n                                />{' '}\r\n                                <span className={attribute.archived}>\r\n                                  {' '}\r\n                                  {attribute.title}\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          })}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          <tr>\r\n            <td>\r\n              <td />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      ))\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <h2>{resDetails.title}</h2>\r\n        <h4>Type: {resDetails.type}</h4>\r\n        <h4>URL: {resDetails.url}</h4>\r\n        <table className={'table'}>{ListOfCompetencies}</table>\r\n        <div id={'footer-button'}>\r\n          <button className={'button'} onClick={this.handleSelect.bind(this)}>\r\n            {' '}\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst AttrMap = () => (\r\n  <Switch>\r\n    <Route\r\n      exact\r\n      path=\"/training-resources/:id/map/:framework\"\r\n      component={AttributeMap}\r\n    />\r\n  </Switch>\r\n);\r\n\r\nexport default AttrMap;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport { Link } from 'react-router-dom';\n\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)'\n  }\n};\n\n// Make sure to bind modal to your appElement (http://reactcommunity.org/react-modal/accessibility/)\nModal.setAppElement('#root');\n\nclass ItemVersions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalIsOpen: false\n    };\n\n    this.openModal = this.openModal.bind(this);\n    // this.afterOpenModal = this.afterOpenModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  openModal() {\n    this.setState({ modalIsOpen: true });\n  }\n\n  // afterOpenModal() {\n  //   // references are now sync'd and can be accessed.\n  //   this.subtitle.style.color = '#f00';\n  // }\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  render() {\n    return (\n      <span>\n        <button onClick={this.openModal}>\n          {' '}\n          <i className={'fa fa-question-circle'} />{' '}\n        </button>\n        <Modal\n          isOpen={this.state.modalIsOpen}\n          onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n        >\n          <button className={'float-right'} onClick={this.closeModal}>\n            <i className={'fa fa-window-close'} />\n          </button>\n          <p />\n          <div className={'callout'}>\n            This item is deprecated in the latest version of this framework.\n            Please see the\n            <Link\n              to={`/framework/${this.props.framework.toLowerCase()}/${\n                this.props.version\n              }`}\n            >\n              {' '}\n              release notes\n            </Link>\n          </div>\n        </Modal>\n      </span>\n    );\n  }\n}\n\nexport default ItemVersions;\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport ReactModal from 'react-modal';\r\nimport AttributeMap from './AttributeMap';\r\nimport Parser from 'html-react-parser';\r\nimport ItemVersions from '../containers/framework-versions/VersionNotice';\r\nimport { apiUrl } from '../services/http/http';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ResourceDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resource: [],\r\n      frameworks: [],\r\n      resourcePath: this.props.location.pathname.split('/'),\r\n      showModal: false,\r\n      selectedFramework: '',\r\n      updateFlag: ''\r\n    };\r\n    this.handleOpenModal = this.handleOpenModal.bind(this);\r\n    this.handleCloseModal = this.handleCloseModal.bind(this);\r\n  }\r\n\r\n  handleOpenModal(event, temp) {\r\n    this.setState({ showModal: true });\r\n    this.setState({ selectedFramework: event });\r\n    temp.preventDefault();\r\n    //console.log(event);\r\n  }\r\n\r\n  handleCloseModal() {\r\n    this.setState({ showModal: false });\r\n    this.setState({ updateFlag: true });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //&timestamp=${Date.now()}\r\n\r\n    /*let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=hal_json`;*/\r\n    let resourcesURL = `${apiUrl}/api/resources/?_format=json&id=${\r\n      this.state.resourcePath[2]\r\n    }&timestamp=${Date.now()}`;\r\n    console.log(resourcesURL);\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse3 => {\r\n        this.setState({ resource: findresponse3 });\r\n      });\r\n\r\n    //fetch(`${apiUrl}/api/v1/framework?_format=json`)\r\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          frameworks: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  mappingBlock() {\r\n    if (localStorage.getItem('roles')) {\r\n      if (localStorage.getItem('roles').includes('content_manager')) {\r\n        return (\r\n          <div className={'callout white-color industry-background'}>\r\n            <strong> Manage competency profile </strong>\r\n            <ul>\r\n              {this.state.frameworks.map((item, id) => {\r\n                return (\r\n                  // <li style={{ display: 'inline', margin: '5px' }}>\r\n                  //   <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n                  //     onClick={this.handleOpenModal.bind(\r\n                  //       this,\r\n                  //       item.name.toLowerCase()\r\n                  //     )}\r\n                  //   >\r\n                  //     {' '}\r\n                  //     <i className=\"fas fa-tags\" /> {item.name}{' '}\r\n                  //   </a>\r\n                  // </li>\r\n\r\n                  <li style={{ display: 'inline', margin: '5px' }}>\r\n                    <a\r\n                      href={\r\n                        '/training-resources/' +\r\n                        this.state.resourcePath[2] +\r\n                        '/map/' +\r\n                        item.title.toLowerCase()\r\n                      }\r\n                    >\r\n                      {' '}\r\n                      <i className=\"fas fa-tags\" /> {item.title}{' '}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // console.log(this.state.resources);\r\n    let attributes = [];\r\n    let selectedCompetencies = [];\r\n    let attribute_types = [];\r\n    let framework_repeat = [];\r\n    //console.log(this.state.resource);\r\n    let item = this.state.resource;\r\n    let frameworkLiveVersion = '';\r\n\r\n    let link = '/bioexcel/1.1';\r\n    let check_array = Array.isArray(item.competency_profile);\r\n    const Resource = (\r\n      // this.state.resource.map((item, index) => {\r\n      //   if (item.id === this.state.resourcePath[2]) {\r\n      //     item.competency_profile.map(profile =>\r\n      //       profile.domains.map(domain =>\r\n      //         domain.competencies.map(competency =>\r\n      //           competency.attributes.map(\r\n      //             attribute =>\r\n      //               attributes.push(attribute.uuid + 'id' + attribute.id),\r\n      //             selectedCompetencies.push(competency.id)\r\n      //           )\r\n      //         )\r\n      //       )\r\n      //     );\r\n\r\n      //     item.competency_profile.map(profile =>\r\n      //         selectedCompetencies.push(profile.competency_id)\r\n      //       );\r\n\r\n      //return (\r\n      <div>\r\n        <div>\r\n          <div className={'row'}>\r\n            <h2>{item.title}</h2>\r\n            <span className=\"float-right\">\r\n              {' '}\r\n              <Link\r\n                to={'/training-resource/edit/' + this.state.resourcePath[2]}\r\n              >\r\n                {' '}\r\n                <i class=\"fas fa-edit\" /> Edit{' '}\r\n              </Link>\r\n            </span>\r\n          </div>\r\n\r\n          <div className={'row'}>\r\n            <div className={'column large-9'}>\r\n              <div className={'callout'}>\r\n                {item.date ? (\r\n                  <p>\r\n                    <strong>Date:</strong> {item.dates}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.keywords ? (\r\n                  <p>\r\n                    <strong>Keywords:</strong> {item.keywords}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.location ? (\r\n                  <p>\r\n                    <strong>Location:</strong> {item.location}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.type ? (\r\n                  <p>\r\n                    <strong>Type:</strong> {item.type}\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n                {item.url ? (\r\n                  <p>\r\n                    <strong> URL: </strong>{' '}\r\n                    <a href={item.url} target={'_blank'}>\r\n                      {item.url}\r\n                    </a>\r\n                  </p>\r\n                ) : (\r\n                  ''\r\n                )}\r\n              </div>\r\n              <h3>Overview</h3>\r\n              {item.description ? Parser(item.description) : ''}\r\n\r\n              {item.target_audience\r\n                ? Parser('<h3>Target Audience</h3>' + item.target_audience)\r\n                : ''}\r\n              {item.learning_outcomes\r\n                ? Parser('<h3>Learning Outcomes</h3>' + item.learning_outcomes)\r\n                : ''}\r\n              {item.organisers\r\n                ? Parser('<h3>Organizers</h3>' + item.organisers)\r\n                : ''}\r\n\r\n              {item.trainers ? Parser('<h3>Trainers</h3>' + item.trainers) : ''}\r\n              <h3>Competency Profile</h3>\r\n\r\n              <table className={'hover'}>\r\n                <tbody>\r\n                  {check_array\r\n                    ? item.competency_profile.map(profile => {\r\n                        return (\r\n                          <tr>\r\n                            {this.state.frameworks.map(framework => {\r\n                              if (framework.nid === profile.id) {\r\n                                framework.attribute_types.map(type =>\r\n                                  attribute_types.push(type.title)\r\n                                );\r\n                                frameworkLiveVersion = framework.versions.find(\r\n                                  version => version.status === 'live'\r\n                                );\r\n                              }\r\n\r\n                              return null;\r\n                            })}\r\n                            <td>\r\n                              <h4>{profile.title}</h4>\r\n                            </td>\r\n                            <td>\r\n                              {profile.domains.map(domain => (\r\n                                <div>\r\n                                  <h5>{domain.title}</h5>\r\n                                  <ul>\r\n                                    {domain.competencies.map(competency => (\r\n                                      <li>\r\n                                        <span\r\n                                          className={\r\n                                            competency.archived == 'archived'\r\n                                              ? 'archived'\r\n                                              : ''\r\n                                          }\r\n                                        >\r\n                                          {competency.title}\r\n                                          {competency.archived == 'archived' ? (\r\n                                            <ItemVersions\r\n                                              framework=\"bioexcel\"\r\n                                              versions={link}\r\n                                            />\r\n                                          ) : (\r\n                                            ''\r\n                                          )}\r\n                                        </span>\r\n                                        <ul>\r\n                                          {attribute_types.map(type => (\r\n                                            <span>\r\n                                              {competency.attributes.map(\r\n                                                attribute => {\r\n                                                  if (attribute.type === type) {\r\n                                                    return (\r\n                                                      <li>\r\n                                                        {' '}\r\n                                                        <em>{type}</em> -{' '}\r\n                                                        <span\r\n                                                          className={\r\n                                                            attribute.archived ==\r\n                                                            'archived'\r\n                                                              ? 'archived'\r\n                                                              : ''\r\n                                                          }\r\n                                                        >\r\n                                                          {attribute.title}\r\n                                                          {attribute.archived ==\r\n                                                          'archived' ? (\r\n                                                            <ItemVersions\r\n                                                              framework={\r\n                                                                profile.title\r\n                                                              }\r\n                                                              version={\r\n                                                                frameworkLiveVersion.number\r\n                                                              }\r\n                                                            />\r\n                                                          ) : (\r\n                                                            ''\r\n                                                          )}\r\n                                                          {attribute.archived ==\r\n                                                          'archived' ? (\r\n                                                            <a\r\n                                                              href={\r\n                                                                '/training-resources/' +\r\n                                                                item.id +\r\n                                                                '/demap/' +\r\n                                                                attribute.id\r\n                                                              }\r\n                                                            >\r\n                                                              <i class=\"fas fa-times-circle\" />\r\n                                                            </a>\r\n                                                          ) : (\r\n                                                            ''\r\n                                                          )}\r\n                                                        </span>\r\n                                                      </li>\r\n                                                    );\r\n                                                  }\r\n                                                  return null;\r\n                                                }\r\n                                              )}\r\n                                            </span>\r\n                                          ))}\r\n                                        </ul>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              ))}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    : ''}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div\r\n              className={\r\n                'column large-3 callout industry-background white-color'\r\n              }\r\n            >\r\n              <h3>More information</h3>\r\n              <p>No data available</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={'row'}>\r\n        <div className={'column large-12'}>\r\n          {Resource}\r\n          {this.mappingBlock()}\r\n        </div>\r\n\r\n        <div style={{ overflow: 'scroll' }}>\r\n          <ReactModal\r\n            isOpen={this.state.showModal}\r\n            className=\"Modal\"\r\n            overlayClassName=\"Overlay\"\r\n            contentLabel=\"Minimal Modal Example\"\r\n          >\r\n            <div>\r\n              <h2 style={{ 'text-align': 'center' }}>\r\n                Manage competency profile for{' '}\r\n                {this.state.selectedFramework.toUpperCase()}{' '}\r\n                <i\r\n                  className=\"fas fa-window-close float-right\"\r\n                  data-close\r\n                  onClick={this.handleCloseModal}\r\n                />{' '}\r\n              </h2>\r\n            </div>\r\n            <table>\r\n              <AttributeMap\r\n                selectedCompetencies={selectedCompetencies}\r\n                selectedAttributes={attributes}\r\n                selectedFramework={this.state.selectedFramework}\r\n                resourceID={this.state.resourcePath[2]}\r\n                handleCloseModal={this.handleCloseModal}\r\n              />\r\n            </table>\r\n          </ReactModal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ResDetails = () => (\r\n  <Switch>\r\n    <Route exact path=\"/training-resources/:id\" component={ResourceDetails} />\r\n  </Switch>\r\n);\r\n\r\nexport default ResDetails;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Parser from 'html-react-parser';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ResourcesList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resources: [],\r\n      filterType: '',\r\n      filterMapping: '',\r\n      userid: ''\r\n    };\r\n    this.archiveHandle = this.archiveHandle.bind(this);\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\r\n      alert(\r\n        'You are not authorised to access this page. Contact the administrator'\r\n      );\r\n      this.props.history.push('/');\r\n    }\r\n    console.log(localStorage.getItem('roles'));\r\n    //console.log(localStorage.getItem('userid'));\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.updateFlag) {\r\n      this.fetchData();\r\n      setTimeout(() => {\r\n        this.setState({ updateFlag: false });\r\n      }, 1000);\r\n      console.log('componentDidUpdate');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData() {\r\n    let csrfURL = `${apiUrl}/rest/session/token`;\r\n    fetch(csrfURL)\r\n      .then(Response => Response)\r\n      .then(findresponse2 => {\r\n        this.setState({ csrf: findresponse2 });\r\n      });\r\n\r\n    //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\r\n    let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\r\n    fetch(resourcesURL)\r\n      .then(Response => Response.json())\r\n      .then(findresponse => {\r\n        this.setState({\r\n          resources: findresponse\r\n        });\r\n      });\r\n  }\r\n\r\n  checkAuthor(author_id) {\r\n    let userid = localStorage.getItem('userid');\r\n    if (userid == author_id) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n    //console.log(localStorage.getItem('userid'));\r\n  }\r\n\r\n  filter(e) {\r\n    this.setState({ filter: e.target.value });\r\n  }\r\n\r\n  filterTypeHandle(e) {\r\n    this.setState({ filterType: e.target.value });\r\n  }\r\n\r\n  filterMappingHandle(e) {\r\n    if (this.state.filterMapping) {\r\n      this.setState({ filterMapping: 0 });\r\n    } else {\r\n      this.setState({ filterMapping: 1 });\r\n    }\r\n  }\r\n\r\n  archiveHandle(rid, status, event) {\r\n    //alert(\"competency \"+ cid+ \"is \"+ status);\r\n    let archivedStatus = '';\r\n    if (status === 1) {\r\n      archivedStatus = false;\r\n    } else {\r\n      archivedStatus = true;\r\n    }\r\n    let token = localStorage.getItem('csrf_token');\r\n    fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      cookies: 'x-access-token',\r\n      headers: {\r\n        Accept: 'application/hal+json',\r\n        'Content-Type': 'application/hal+json',\r\n        'X-CSRF-Token': token,\r\n        Authorization: 'Basic'\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/node/training_resource`\r\n          }\r\n        },\r\n        field_archived: [\r\n          {\r\n            value: archivedStatus\r\n          }\r\n        ],\r\n        type: [\r\n          {\r\n            target_id: 'training_resource'\r\n          }\r\n        ]\r\n      })\r\n    });\r\n\r\n    this.setState({ updateFlag: true });\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    let resources = this.state.resources;\r\n    if (this.state.filter) {\r\n      resources = resources.filter(\r\n        item =>\r\n          item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\r\n          item.description\r\n            .toLocaleLowerCase()\r\n            .includes(this.state.filter.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterType !== 'All') {\r\n      resources = resources.filter(item =>\r\n        item.type\r\n          .toLocaleLowerCase()\r\n          .includes(this.state.filterType.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (this.state.filterMapping) {\r\n      resources = resources.filter(item =>\r\n        item.competency_profile.some(\r\n          profile =>\r\n            profile.attribute_archived == 'archived' ||\r\n            profile.competency_archived == 'archived' ||\r\n            profile.domain == 'archived'\r\n        )\r\n      );\r\n      console.log('filter applied');\r\n    }\r\n\r\n    const ListOfResources = resources.map((item, index) => (\r\n      <tr key={index}>\r\n        <td>{index + 1} </td>\r\n        <td>\r\n          {' '}\r\n          <Link to={'/training-resources/' + item.id}>{item.title} </Link>\r\n        </td>\r\n        <td>{item.dates}</td>\r\n        <td>{item.type}</td>\r\n        <td>\r\n          <a href={item.url} target={'_blank'}>\r\n            {item.url}\r\n          </a>\r\n        </td>\r\n        <td>\r\n          {item.archived === '1' ? (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 1)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\r\n            </a>\r\n          ) : (\r\n            <a // eslint-disable-line jsx-a11y/anchor-is-valid\r\n              onClick={this.archiveHandle.bind(this, item.id, 0)}\r\n            >\r\n              {' '}\r\n              <i className=\"fas fa-toggle-off\" />\r\n            </a>\r\n          )}\r\n        </td>\r\n        <td>\r\n          {this.checkAuthor(item.author) ? (\r\n            <Link to={`/training-resource/edit/${item.id}`}>\r\n              <i className=\"fas fa-edit\" />{' '}\r\n            </Link>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </td>\r\n      </tr>\r\n    ));\r\n    return (\r\n      <div className={'row'}>\r\n        <h3>Training Resources</h3>\r\n        <div className=\"row\">\r\n          <div className=\"column large-6\">\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                onChange={this.filter.bind(this)}\r\n                placeholder=\"Type to search\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-2\">\r\n            <div>\r\n              <select ref={'type'} onChange={this.filterTypeHandle.bind(this)}>\r\n                <option value={'All'}>All</option>\r\n                <option value={'Online'}>Online</option>\r\n                <option value={'Face-to-Face'}>Face-to-Face</option>\r\n                <option value={'Webinar'}>Webinar</option>\r\n                <option value={'Hackathon'}>Hackathon</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"column large-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"checkboxMapping\"\r\n              checked={this.state.filterMapping}\r\n              onChange={this.filterMappingHandle.bind(this)}\r\n            />\r\n            <span id=\"checkboxMappingLabel\" for=\"checkboxMapping\">\r\n              Items with deprecated mapping\r\n            </span>\r\n          </div>\r\n          <div className={'column large-1'}>\r\n            <Link\r\n              className={'button float-right'}\r\n              to={'/training-resource/create'}\r\n            >\r\n              <i className=\"fas fa-plus-circle\"> </i> Add new{' '}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>S. No.</th>\r\n              <th>Title</th>\r\n              <th>Date(s)</th>\r\n              <th>Type</th>\r\n              <th>URL</th>\r\n              <th>Archive</th>\r\n              <th>Edit</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{ListOfResources}</tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Resources = () => (\r\n  <Switch>\r\n    <Route exact path=\"/all-training-resources\" component={ResourcesList} />\r\n  </Switch>\r\n);\r\n\r\nexport default Resources;\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Parser from 'html-react-parser';\nimport { Link } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\n\nclass ResourcesHome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resources: [],\n      filterType: ''\n    };\n    //this.archiveHandle = this.archiveHandle.bind(this);\n  }\n\n  checkUser() {\n    if (!localStorage.getItem('roles')) {\n      this.props.history.push('/');\n    } else if (!localStorage.getItem('roles').includes('content_manager')) {\n      alert(\n        'You are not authorised to access this page. Contact the administrator'\n      );\n      this.props.history.push('/');\n    }\n    console.log(localStorage.getItem('roles'));\n  }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (this.state.updateFlag) {\n  //     this.fetchData();\n  //     setTimeout(() => {\n  //       this.setState({ updateFlag: false });\n  //     }, 1000);\n  //     console.log('componentDidUpdate');\n  //   }\n  // }\n\n  // componentDidMount() {\n  //   this.fetchData();\n  // }\n\n  // fetchData() {\n  //   let csrfURL = `${apiUrl}/rest/session/token`;\n  //   fetch(csrfURL)\n  //     .then(Response => Response)\n  //     .then(findresponse2 => {\n  //       this.setState({ csrf: findresponse2 });\n  //     });\n\n  //   //let resourcesURL = `${apiUrl}/api/v1/training-resources/all?_format=json`;\n  //   let resourcesURL = `${apiUrl}/api/resources?_format=json&timestamp=${Date.now()}`;\n  //   fetch(resourcesURL)\n  //     .then(Response => Response.json())\n  //     .then(findresponse => {\n  //       this.setState({\n  //         resources: findresponse\n  //       });\n  //     });\n  // }\n\n  // filter(e) {\n  //   this.setState({ filter: e.target.value });\n  // }\n\n  // filterTypeHandle(e) {\n  //   this.setState({ filterType: e.target.value });\n  // }\n\n  // archiveHandle(rid, status, event) {\n  //   //alert(\"competency \"+ cid+ \"is \"+ status);\n  //   let archivedStatus = '';\n  //   if (status === 1) {\n  //     archivedStatus = false;\n  //   } else {\n  //     archivedStatus = true;\n  //   }\n  //   let token = localStorage.getItem('csrf_token');\n  //   fetch(`${apiUrl}/node/` + rid + '?_format=hal_json', {\n  //     credentials: 'include',\n  //     method: 'PATCH',\n  //     cookies: 'x-access-token',\n  //     headers: {\n  //       Accept: 'application/hal+json',\n  //       'Content-Type': 'application/hal+json',\n  //       'X-CSRF-Token': token,\n  //       Authorization: 'Basic'\n  //     },\n  //     body: JSON.stringify({\n  //       _links: {\n  //         type: {\n  //           href: `${apiUrl}/rest/type/node/training_resource`\n  //         }\n  //       },\n  //       field_archived: [\n  //         {\n  //           value: archivedStatus\n  //         }\n  //       ],\n  //       type: [\n  //         {\n  //           target_id: 'training_resource'\n  //         }\n  //       ]\n  //     })\n  //   });\n\n  //   this.setState({ updateFlag: true });\n\n  //   event.preventDefault();\n  // }\n\n  render() {\n    this.checkUser();\n    // let resources = this.state.resources;\n    // if (this.state.filter) {\n    //   resources = resources.filter(\n    //     item =>\n    //       item.title.toLowerCase().includes(this.state.filter.toLowerCase()) ||\n    //       item.description\n    //         .toLocaleLowerCase()\n    //         .includes(this.state.filter.toLowerCase())\n    //   );\n    // }\n\n    // if (this.state.filterType !== 'All') {\n    //   resources = resources.filter(item =>\n    //     item.type\n    //       .toLocaleLowerCase()\n    //       .includes(this.state.filterType.toLowerCase())\n    //   );\n    // }\n\n    // const ListOfResources = resources.map((item, index) => (\n    //   <tr key={index}>\n    //     <td>{index + 1} </td>\n    //     <td>\n    //       {' '}\n    //       <h4>\n    //         {' '}\n    //         <Link to={'/training-resources/' + item.id}>{item.title} </Link>\n    //       </h4>\n    //       <p>{item.dates} </p>\n    //       <strong>Learning resource type:</strong> {item.type} <br />\n    //       {Parser(item.description.substr(0, 240) + '...')} <br />\n    //       <br />\n    //       <strong> URL: </strong>{' '}\n    //       <a href={item.url} target={'_blank'}>\n    //         {item.url}\n    //       </a>\n    //     </td>\n    //     <td>\n    //       {item.archived === '1' ? (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 1)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-on\" /> <span>Archived</span>{' '}\n    //         </a>\n    //       ) : (\n    //         <a // eslint-disable-line jsx-a11y/anchor-is-valid\n    //           onClick={this.archiveHandle.bind(this, item.id, 0)}\n    //         >\n    //           {' '}\n    //           <i className=\"fas fa-toggle-off\" />\n    //         </a>\n    //       )}\n    //     </td>\n    //     <td>\n    //       <Link to={`/training-resource/edit/${item.id}`}>\n    //         <i className=\"fas fa-edit\" />{' '}\n    //       </Link>\n    //     </td>\n    //   </tr>\n    // ));\n    return (\n      <div className={'row'}>\n        <h3>Training Resources</h3>\n        <div className=\"row\">\n          <div className=\"column large-4 callout\">\n            <Link\n              className={'button float-right'}\n              to={'/all-training-resources'}\n            >\n              <i className=\"fas fa-list\"> </i> View published training resources{' '}\n            </Link>\n          </div>\n          <div className=\"column large-4 callout\">\n            <Link className={'button float-right'} to={'#'}>\n              <i className=\"fas fa-list\"> </i> View unpublished training\n              resources{' '}\n            </Link>\n          </div>\n          <div className={'column large-4 callout'}>\n            <Link className={'button float-right'} to={'#'}>\n              <i className=\"fas fa-tasks\"> </i> Manage training resources{' '}\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst ResourcesHomepage = () => (\n  <Switch>\n    <Route exact path=\"/training-resources-home\" component={ResourcesHome} />\n  </Switch>\n);\n\nexport default ResourcesHomepage;\n","import React from 'react';\r\n\r\nimport { apiUrl } from '../services/http/http';\r\n\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      roles: '',\r\n      user: ''\r\n    };\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    let old = this.refs.old.value;\r\n    let new1 = this.refs.new1.value;\r\n    let uid = localStorage.getItem('userid');\r\n    fetch(`${apiUrl}/user/` + uid + '/password?_format=json', {\r\n      credentials: 'include',\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': localStorage.getItem('csrf_token')\r\n      },\r\n      body: JSON.stringify({\r\n        _links: {\r\n          type: {\r\n            href: `${apiUrl}/rest/type/user/user`\r\n          }\r\n        },\r\n        old: [\r\n          {\r\n            value: old\r\n          }\r\n        ],\r\n        new: [\r\n          {\r\n            target_id: new1\r\n          }\r\n        ]\r\n      })\r\n    })\r\n      .then(resp => resp)\r\n      .then(data =>\r\n        setTimeout(() => {\r\n          alert('Password changed successfully');\r\n          window.location.reload();\r\n        }, 1000)\r\n      );\r\n    e.preventDefault();\r\n  }\r\n\r\n  checkUser() {\r\n    if (!localStorage.getItem('roles')) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.checkUser();\r\n    return (\r\n      <div>\r\n        <h3>Change password:</h3>\r\n        <form id={'passChange'}>\r\n          <input type={'password'} ref={'old'} placeholder={'Old password'} />\r\n          <input type={'password'} ref={'new1'} placeholder={'New password'} />\r\n          <input type={'password'} placeholder={'Confirm new password'} />\r\n          <input\r\n            type={'button'}\r\n            className={'button'}\r\n            onClick={this.handlePasswordChange.bind(this)}\r\n            value={'Submit'}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React from 'react';\r\n\r\nconst About = () => (\r\n  <React.Fragment>\r\n    <h2>About competency mapper</h2>\r\n    <p className=\"lead\">\r\n      Competency mapper is a web-based tool to support the creation and\r\n      management of competency frameworks for professionals working in the\r\n      biomolecular sciences.\r\n    </p>\r\n    <h3>Anyone can..</h3>\r\n    <p>\r\n      <ul>\r\n        <li>\r\n          Explore the five competency frameworks that we currently have in the\r\n          system\r\n        </li>\r\n        <li>\r\n          Click on any competency to find the knowledge, skills and attitudes\r\n          (KSAs) associated with it\r\n        </li>\r\n        <li>\r\n          See the relationships between different competency frameworks; for\r\n          example, if a competency in framework 2 is derived from one in\r\n          framework 1, this information is captured\r\n        </li>\r\n        <li>\r\n          Access a list of courses that have been mapped to a particular\r\n          competency\r\n        </li>\r\n        <li>\r\n          View summary information on each of these courses, including a link\r\n          through to the course website\r\n        </li>\r\n      </ul>\r\n    </p>\r\n    <h3>In addition to the above, content editors can...</h3>\r\n    <ul>\r\n      <li>Map courses to any competency in the mapper</li>\r\n      <li>Map courses to any combination of knowledge, skills and attitudes</li>\r\n    </ul>\r\n    <h3>In addition to the above, administrators can...</h3>\r\n    <ul>\r\n      <li>Build a completely new competency framework from a blank template</li>\r\n      <li>Make minor updates to an existing competency framework</li>\r\n      <li>\r\n        If a competency framework has undergone major updates such as merging,\r\n        splitting or deprecation of competencies, create and publish a new\r\n        version of the framework without overwriting the previous version, and\r\n        without losing links to pre-existing mappings\r\n      </li>\r\n      <li>\r\n        Create and edit multiple personas or roles associated with a competency\r\n        framework\r\n      </li>\r\n      <li>\r\n        For each competency in an associated framework, define the level of\r\n        competency required by any of the personas/roles associated with it,\r\n        using an administrator-defined list of variables.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is competency?</h3>\r\n    <p>\r\n      By definition, competency is an observable ability of any professional,\r\n      integrating multiple components such as knowledge, skills, values and\r\n      attitudes. It is observable, so its acquisition can be validated\r\n      objectively.\r\n    </p>\r\n    <h4>Why is it relevant?</h4>\r\n    <p>\r\n      Competency provides a shared currency applicable to learning of all\r\n      types and at all career stages.\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        Individual professionals can use competency as a career development\r\n        tool: by documenting the competencies that you have gained, and the\r\n        evidence that you have gained them, in a competency portfolio you can\r\n        seek further training to fill gaps in your portfolio, or map your\r\n        existing portfolio to roles that you might not previously have\r\n        considered.\r\n      </li>\r\n      <li>\r\n        Professional bodies and employers can use competency to define\r\n        competency frameworks for different roles or professions. These provide\r\n        useful guidance when hiring and promoting individuals, and can also\r\n        provide the basis for professional recognition in regulated professions.\r\n      </li>\r\n      <li>\r\n        Course providers can use competency to develop training (by asking what\r\n        competencies their trainees need to gain) and, where appropriate, to\r\n        assess whether training has been effective.\r\n      </li>\r\n    </ul>\r\n\r\n    <h3>What is a competency framework?</h3>\r\n    <p>\r\n      A competency framework defines the competencies required to fulfil a\r\n      particular role. competency frameworks are typically defined by\r\n      professional bodies or learned societies in collaboration with employers.\r\n      Several projects under the EUs Horizon 2020 framework have developed\r\n      competency frameworks to support emerging professions.\r\n    </p>\r\n\r\n    <h3>Who is developing the competency mapper?</h3>\r\n    <p>\r\n      The competency mapper is being developed by the{' '}\r\n      <a\r\n        href={'https://www.ebi.ac.uk/about/people/cath-brooksbank'}\r\n        target={'_blank'}\r\n      >\r\n        {' '}\r\n        EMBL-EBI training team{' '}\r\n      </a>{' '}\r\n      with the{' '}\r\n      <a href={'https://bioexcel.eu/'} target={'_blank'}>\r\n        {' '}\r\n        BioExcel{' '}\r\n      </a>{' '}\r\n      competency framework as its primary use case.{' '}\r\n    </p>\r\n    <p>\r\n      EMBL-EBIs Training programme uses a competency-based approach to\r\n      developing new courses: put simply, we ask ourselves What competency or\r\n      competencies does our audience for this course need to develop? before we\r\n      create the programme and content for a new course, and before we make a\r\n      significant update to an existing course.\r\n    </p>\r\n    <p>\r\n      The team has contributed to, and helped to steer, a number of initiatives\r\n      to develop new training programmes by defining competency requirements in\r\n      relation to a specific target audience and building a competency framework\r\n      for that audience. Competency-based projects that we have been involved in\r\n      include:\r\n    </p>\r\n    <ul>\r\n      <li>\r\n        The ISCB education committees{' '}\r\n        <a href={'https://europepmc.org/articles/PMC5794068'} target={'_blank'}>\r\n          {' '}\r\n          competency framework for bioinformatics professionals{' '}\r\n        </a>{' '}\r\n      </li>\r\n      <li>\r\n        A clinical bioinformatics competency framework to support Health\r\n        Education England to prepare clinical practitioners for the application\r\n        of genomics in the healthcare service\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={\r\n            'https://drive.google.com/file/d/0B3BA3KSKGOoQb0hvUkx3a3lMS00/view'\r\n          }\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          RItrain competency framework{' '}\r\n        </a>{' '}\r\n        for managers and leaders of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/154085#.WbUNUhNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          CORBEL competency framework{' '}\r\n        </a>{' '}\r\n        for technical operators of research infrastructure\r\n      </li>\r\n      <li>\r\n        The{' '}\r\n        <a\r\n          href={'https://zenodo.org/record/264231#.WbUNoRNSwUE'}\r\n          target={'_blank'}\r\n        >\r\n          {' '}\r\n          BioExcel competency framework{' '}\r\n        </a>\r\n        for scientists working on biomolecular modelling and simulation\r\n      </li>\r\n      <p />\r\n      <p>\r\n        These competency frameworks were designed to be used by the training\r\n        communities who developed them, and openly available to anyone who might\r\n        find them useful, yet all too often they end up buried in a PDF file as\r\n        part of a project deliverable. This made us long for a web-based tool\r\n        that would make these frameworks,and the training associated with them,\r\n        readily discoverable. We therefore decided to build that tool, and\r\n        although its still in the early stages of development weve decided to\r\n        make it openly available now so that we can seek broad input to improve\r\n        it and make it as useful as possible to the education and training\r\n        community at large. If you have comments or suggestions, please{' '}\r\n        <a href={'mailto:competency@ebi.ac.uk'}> contact us </a>.\r\n      </p>\r\n    </ul>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default About;\r\n","import React from 'react';\r\n\r\nimport { removeHtmlTags } from '../../services/util/util';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction FrameworkButton({ framework }) {\r\n  let description = removeHtmlTags(framework.description);\r\n  if (description.length > 120) {\r\n    description = `${description.slice(0, 120).trim()}...`;\r\n  }\r\n  const liveVersion = framework.versions.reduce((prevVersion, newVersion) => {\r\n    if (newVersion.status === 'live') {\r\n      return newVersion.number;\r\n    }\r\n    return prevVersion;\r\n  }, null);\r\n\r\n  if (liveVersion === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"column medium-4\">\r\n      <Link\r\n        className=\"column callout\"\r\n        data-equalizer-watch\r\n        to={`/framework/${framework.title.toLowerCase()}/${liveVersion}`}\r\n      >\r\n        <img\r\n          className=\"float-center margin-bottom-medium\"\r\n          style={{ height: '6rem' }}\r\n          src={framework.logo[0].url}\r\n          alt=\"competency logo\"\r\n        />\r\n        <h5>\r\n          {description}\r\n          <i className=\"icon icon-functional\" data-icon=\">\" />\r\n        </h5>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButton;\r\n","import React from 'react';\r\n\r\nimport FrameworkButton from '../framework-button/FrameworkButton';\r\n\r\nconst $ = window.$;\r\n\r\nfunction FrameworkButtons({ frameworks }) {\r\n  const selfRef = new React.createRef();\r\n\r\n  const invokeFoundation = () => {\r\n    window.setTimeout(() => $(selfRef.current).foundation());\r\n    return frameworks.map(framework => (\r\n      <FrameworkButton key={framework.nid} framework={framework} />\r\n    ));\r\n  };\r\n\r\n  return frameworks.length < 1 ? null : (\r\n    <div className=\"row\" data-equalizer ref={selfRef}>\r\n      {invokeFoundation()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FrameworkButtons;\r\n","import React, { Component } from 'react';\r\n\r\nimport FrameworkButtons from '../components/framework-buttons/FrameworkButtons';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { withSnackbar } from 'notistack';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\nimport CompetencyService from '../services/competency/competency';\r\n\r\nclass Frameworks extends Component {\r\n  activeRequests = new ActiveRequestsService();\r\n  competencyService = new CompetencyService();\r\n\r\n  state = {\r\n    frameworks: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.activeRequests.startRequest();\r\n      const frameworks = await this.competencyService.getAllVersionedFrameworks();\r\n      this.setState({ frameworks });\r\n    } catch (error) {\r\n      this.props.enqueueSnackbar('Unable to fetch framework data', {\r\n        variant: 'error'\r\n      });\r\n      console.error(error);\r\n    } finally {\r\n      this.activeRequests.finishRequest();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { frameworks } = this.state;\r\n\r\n    return (\r\n      <div className=\"column\">\r\n        <h3>Overview</h3>\r\n        <p className=\"lead\">\r\n          Competency mapper is a web-based tool to support the creation and\r\n          management of competency frameworks for professionals working in the\r\n          biomolecular sciences{' '}\r\n          <Link to=\"/about\" className=\"readmore\">\r\n            read more{' '}\r\n          </Link>\r\n        </p>\r\n\r\n        <FrameworkButtons frameworks={frameworks} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(Frameworks);\r\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from 'react-ckeditor-component';\nimport FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport Dropzone from 'react-dropzone';\n\nclass ArticleCreate extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.createArticle = this.createArticle.bind(this);\n\n    this.state = {\n      file: [],\n      fid: ''\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {}\n\n  componentDidMount() {\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    let title = this.refs.title.value;\n    let token = localStorage.getItem('csrf_token');\n    let fid = '';\n\n    console.log(this.state.file);\n\n    let response = await fetch(\n      apiUrl + '/file/upload/node/article/field_image?_format=hal_json',\n      {\n        credentials: 'include',\n        method: 'POST',\n        cookies: 'x-access-token',\n        headers: {\n          accept: 'application/octet-stream',\n          'Content-Type': 'application/octet-stream',\n          'X-CSRF-Token': token,\n          'Content-Disposition': 'file; filename=\"prakash_file.png\"'\n        },\n        body: this.state.file\n      }\n    )\n      .then(resp => resp.json())\n      .then(\n        function(data) {\n          this.setState({ fid: data.fid[0].value }, this.createArticle);\n        }.bind(this)\n      );\n  }\n\n  createArticle() {\n    let token = localStorage.getItem('csrf_token');\n    fetch(`${apiUrl}/node/6771?_format=hal_json`, {\n      credentials: 'include',\n      method: 'PATCH',\n      cookies: 'x-access-token',\n      headers: {\n        Accept: 'application/hal+json',\n        'Content-Type': 'application/hal+json',\n        'X-CSRF-Token': token,\n        Authorization: 'Basic'\n      },\n      body: JSON.stringify({\n        _links: {\n          type: {\n            href: `${apiUrl}/rest/type/node/article`\n          }\n        },\n        field_image: [\n          {\n            target_id: this.state.fid,\n            description: 'The most fascinating image ever!'\n          }\n        ]\n      })\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>File upload</h2>\n\n        <div className=\"row\">\n          <div className=\"column large-12 callout\">\n            <h4>Bulk upload training resources</h4>\n            <form\n              className=\"form\"\n              id={'resource_create_form'}\n              onSubmit={this.handleSubmit.bind(this)}\n            >\n              <div id=\"fileupload\" className=\"row\">\n                <div className=\"column large-12\">\n                  <strong>File upload</strong>\n                  <Dropzone\n                    ref=\"fileref\"\n                    onDrop={acceptedFiles => {\n                      //console.log(acceptedFiles)\n                      const reader = new FileReader();\n\n                      reader.onabort = () =>\n                        console.log('file reading was aborted');\n                      reader.onerror = () =>\n                        console.log('file reading has failed');\n                      reader.onload = () => {\n                        // Do whatever you want with the file contents\n                        //const binaryStr = reader.result;\n                        var stringImage = reader.result;\n                        if (stringImage) {\n                          console.log(' image content =' + stringImage);\n                          var striped = stringImage.toString().split('base64');\n                          if (striped[1]) {\n                            //this.uploadDrupalImage(striped[1]);\n                            this.setState({ newfile: striped[1] });\n                          }\n                        }\n                        this.setState({ file: reader.result });\n                        //console.log(binaryStr)\n                      };\n                      document\n                        .getElementById('fileupload')\n                        .append(acceptedFiles[0].name);\n                      acceptedFiles.forEach(file =>\n                        reader.readAsArrayBuffer(file)\n                      );\n                    }}\n                  >\n                    {({ getRootProps, getInputProps }) => (\n                      <section>\n                        <div {...getRootProps()}>\n                          <input {...getInputProps()} />\n                          <a href=\"#\">Click to select files</a>\n                        </div>\n                      </section>\n                    )}\n                  </Dropzone>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column large-12\">\n                  <strong>Remarks</strong>\n                  <input\n                    type=\"text\"\n                    ref=\"title\"\n                    required\n                    placeholder=\"Remarks\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column large-2\">\n                  <input type=\"submit\" className=\"button\" value=\"Submit\" />\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst CreateArticles = () => (\n  <Switch>\n    <Route exact path=\"/article/create\" component={ArticleCreate} />\n  </Switch>\n);\n\nexport default CreateArticles;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactModal from 'react-modal';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass CompetencySettings extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      competency: '',\n      competencyUUID: '',\n      competencyTitle: '',\n      frameworkList: [],\n      domainID: '',\n      domainUuid: '',\n      csrf: '',\n      mapping: ''\n    };\n\n    this.editDomain = this.editDomain.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.onTextChange = this.onTextChange.bind(this);\n  }\n\n  async fetchData() {\n    let competencyID = this.state.path[4];\n    let url = `${apiUrl}/node/` + competencyID + `/?_format=json`;\n    fetch(url)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ competency: findresponse }, this.setMappingText);\n      });\n\n    // Load all domains of all frameworks from version_manager API\n\n    let versoinManagerURL = `${apiUrl}/api/version_manager/?_format=json&timestamp=${Date.now()}`;\n    fetch(versoinManagerURL)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    //console.log(apiUrl);\n  }\n\n  async setMappingText() {\n    let competency = this.state.competency;\n    if (competency.field_map_other_competency.length > 0) {\n      this.setState({\n        mapping: competency.field_map_other_competency[0].value\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.fetchData();\n    //await this.setMappingText();\n  }\n\n  editDomain(e) {\n    let competencyID = this.state.path[4];\n    let selectedDomainID = this.state.domainID;\n    let selectedDomainUUID = this.state.domainUuid;\n    let mapping = this.state.mapping;\n    if (!selectedDomainID) {\n      selectedDomainID = this.state.competency.field_domain[0].target_id;\n      selectedDomainUUID = this.state.competency.field_domain[0].target_uuid;\n    }\n    this.competencyService.changeDomain(\n      competencyID,\n      selectedDomainID,\n      selectedDomainUUID,\n      mapping\n    );\n    //console.log(\"editDomain() called\");\n    this.props.history.push(\n      '/framework/' + this.state.path[2] + '/manage/competencies'\n    );\n    e.preventDefault();\n  }\n\n  onTextChange(event) {\n    this.setState({ mapping: event.target.value });\n    //console.log(this.state.mapping);\n  }\n\n  handleChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({ domainID: dataset.id, domainUuid: dataset.uuid });\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let competency_title = '';\n    let domain_id = '';\n    let domain_uuid = '';\n    let domain_title = '';\n    let competency = this.state.competency;\n    let frameworkList = this.state.frameworkList;\n    let domainOptions = [];\n    let domainArray = [];\n    //let mapped_other_competency = \"\";\n\n    if (frameworkList.length > 0) {\n      console.log(this.state.frameworkList);\n      frameworkList.map(framework => {\n        if (framework.title.toLowerCase() === this.state.path[2]) {\n          framework.domains.map(domain => {\n            domainOptions.push(\n              <option\n                key={domain.id}\n                data-id={domain.id}\n                data-uuid={domain.uuid}\n                value={domain.id}\n              >\n                {domain.title}\n              </option>\n            );\n            domainArray.push({ key: domain.id, value: domain.title });\n            console.log(frameworkList);\n          });\n        }\n      });\n    }\n\n    if (competency) {\n      competency_title = competency.title[0].value;\n      domain_id = competency.field_domain[0].target_id;\n      domain_uuid = competency.field_domain[0].target_uuid;\n      if (domainArray.length > 0) {\n        let obj = domainArray.find(d => d.key == domain_id);\n        domain_title = obj.value;\n      }\n    }\n\n    return (\n      <div>\n        <h2>Change domain</h2>\n        <table className=\"table hover stack\">\n          <tbody>\n            <tr>\n              <td>\n                <h4>Domain:</h4>\n              </td>\n              <td>\n                <h4>{domain_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <h4>Competency:</h4>\n              </td>\n              <td>\n                <h4>{competency_title}</h4>\n              </td>\n            </tr>\n            <tr>\n              <td colSpan={2}>\n                <p className=\"lead\">\n                  Select the domain from the following list to change:\n                </p>\n                <form\n                  id={'changeDomainForm'}\n                  onSubmit={this.editDomain.bind(this)}\n                >\n                  <div className=\"row\">\n                    <div className=\"column large-11\">\n                      <select\n                        value={\n                          this.state.domainID ? this.state.domainID : domain_id\n                        }\n                        onChange={this.handleChange}\n                      >\n                        {domainOptions}\n                      </select>\n                      <label>\n                        Maps to competency/attribute from other framework\n                        <input\n                          type=\"text\"\n                          placeholder=\"Framework (version), competency or attribute\"\n                          name=\"mapping\"\n                          value={this.state.mapping}\n                          onChange={this.onTextChange.bind(this)}\n                        />\n                      </label>\n                      <input type=\"submit\" className=\"button\" value=\"Save\" />\n                    </div>\n                    <div className=\"column large-1\" />\n                  </div>\n                </form>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst CompetencySettingsRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/competency/:id/settings\"\n      component={CompetencySettings}\n    />\n  </Switch>\n);\n\nexport default CompetencySettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactModal from 'react-modal';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport CompetencyList from './CompetencyList';\nimport { apiUrl } from '../services/http/http';\nimport CompetencyService from '../services/competency/competency';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\n\nclass AttributeSettings extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      path: this.props.location.pathname.split('/'),\n      attributeID: this.props.location.pathname.split('/')[6],\n      frameworkName: this.props.location.pathname.split('/')[2],\n      frameworkList: [],\n      attributeType: '',\n      attribute: '',\n      competencyID: this.props.location.pathname.split('/')[4],\n      competencyUUID: '',\n      competencyTitle: '',\n      attributeTypeID: '',\n      attributeTypeUUID: '',\n      frameworkData: []\n    };\n\n    this.changeSettings = this.changeSettings.bind(this);\n    this.handleCompetencyChange = this.handleCompetencyChange.bind(this);\n    this.handleTypeChange = this.handleTypeChange.bind(this);\n  }\n\n  async fetchData() {\n    // Load the attribute\n\n    let attributeID = this.state.attributeID;\n    let url =\n      `${apiUrl}/node/` +\n      attributeID +\n      `/?_format=json&timestamp=${Date.now()}`;\n    fetch(url)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ attribute: findresponse });\n      });\n\n    // Load all domains of all frameworks from version_manager API\n    fetch(`${apiUrl}/api/version_manager?_format=json`)\n      .then(result => result.json())\n      .then(findresponse => {\n        this.setState({ frameworkList: findresponse });\n      });\n\n    let result = await this.competencyService.getVersionedDraftFramework(\n      this.state.frameworkName\n    );\n    this.setState({ frameworkData: result });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  changeSettings(e) {\n    let attributeID = this.state.attributeID;\n    let selectedCompetencyID = this.state.competencyID\n      ? this.state.competencyID\n      : this.state.attribute.field_competency[0].target_id;\n    let selectedCompetencyUUID = this.state.competencyUUID\n      ? this.state.competencyUUID\n      : this.state.attribute.field_competency[0].target_uuid;\n    let selectedAttributeTypeID = this.state.attributeTypeID\n      ? this.state.attributeTypeID\n      : this.state.attribute.field_attribute_type[0].target_id;\n    let selectedAttributeTypeUUID = this.state.attributeTypeUUID\n      ? this.state.attributeTypeUUID\n      : this.state.attribute.field_attribute_type[0].target_uuid;\n\n    // console.log(\"competencyID: \"+selectedCompetencyID + \" attributeTypeID: \"+ selectedAttributeTypeID);\n    // if(!selectedCompetencyID){\n    //   selectedCompetencyID = this.state.attribute.field_competency[0].target_id;\n    //   selectedCompetencyUUID = this.state.competency.field_competency[0].target_uuid;\n    // }\n\n    // if(!selectedAttributeTypeID){\n    //   selectedAttributeTypeID = this.state.attribute.field_attribute_type[0].target_id;\n    //   selectedAttributeTypeUUID = this.state.competency.field_attribute_type[0].target_uuid;\n    // }\n\n    this.competencyService.changeAttributeSettings(\n      attributeID,\n      selectedCompetencyID,\n      selectedCompetencyUUID,\n      selectedAttributeTypeID,\n      selectedAttributeTypeUUID\n    );\n\n    this.props.history.push(\n      '/framework/' +\n        this.state.path[2] +\n        '/manage/competencies/' +\n        this.props.location.pathname.split('/')[4] +\n        '/manage-attributes'\n    );\n    e.preventDefault();\n  }\n\n  handleCompetencyChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({ competencyID: dataset.id, competencyUUID: dataset.uuid });\n    //console.log(dataset.uuid);\n  }\n\n  handleTypeChange(event) {\n    let dataset = event.target.options[event.target.selectedIndex].dataset;\n    this.setState({\n      attributeTypeID: dataset.id,\n      attributeTypeUUID: dataset.uuid\n    });\n    //console.log(dataset.uuid);\n  }\n\n  render() {\n    let attribute_title = '';\n    let competency_id = '';\n    let competency_uuid = '';\n    let competency_title = '';\n    let attribute_type_id = '';\n    let attribute_type_uuid = '';\n    let attribute_type_title = '';\n    let attribute = this.state.attribute;\n    let frameworkData = this.state.frameworkData;\n    let frameworkList = this.state.frameworkList;\n    let competencyOptions = [];\n    let competencyArray = [];\n    let attributeTypeOptions = [];\n    let attributeTypeArray = [];\n\n    //console.log(frameworkList);\n\n    if (frameworkList) {\n      frameworkList.map(framework => {\n        if (framework.title.toLowerCase() == this.state.frameworkName) {\n          framework.attribute_types.map(attribute_type => {\n            attributeTypeOptions.push(\n              <option\n                key={attribute_type.id}\n                data-id={attribute_type.id}\n                data-uuid={attribute_type.uuid}\n                value={attribute_type.id}\n              >\n                {attribute_type.title}\n              </option>\n            );\n            attributeTypeArray.push({\n              key: attribute_type.id,\n              value: attribute_type.title\n            });\n          });\n        }\n      });\n      //console.log(attributeTypeArray);\n    }\n\n    if (frameworkData) {\n      frameworkData.map(framework => {\n        framework.domains.map(domain => {\n          domain.competencies.map(competency => {\n            if (competency.archived == 0) {\n              competencyOptions.push(\n                <option\n                  key={competency.id}\n                  data-id={competency.id}\n                  data-uuid={competency.uuid}\n                  value={competency.id}\n                >\n                  {competency.title}\n                </option>\n              );\n              competencyArray.push({\n                key: competency.id,\n                value: competency.title\n              });\n            }\n          });\n        });\n      });\n    }\n\n    if (attribute) {\n      attribute_title = attribute.title[0].value;\n      competency_id = attribute.field_competency[0].target_id;\n      competency_uuid = attribute.field_competency[0].target_uuid;\n      attribute_type_id = attribute.field_attribute_type[0].target_id;\n      if (competencyArray.length > 0) {\n        let obj = competencyArray.find(d => d.key == competency_id);\n        competency_title = obj.value;\n        //console.log(attribute_type_id);\n      }\n\n      if (attributeTypeArray.length > 0) {\n        let obj = attributeTypeArray.find(d => d.key == attribute_type_id);\n        attribute_type_title = obj.value;\n      }\n\n      //console.log(attribute_title);\n    }\n\n    return (\n      <div>\n        <h2>Change attribute settings</h2>\n        <h3>Attribute: {attribute_title}</h3>\n        <table className=\"table hover stack\">\n          <tbody>\n            <tr>\n              <td>Competency:</td>\n              <td>{competency_title}</td>\n              <td rowSpan={2}>\n                <form\n                  id={'changeDomainForm'}\n                  onSubmit={this.changeSettings.bind(this)}\n                >\n                  <label>Change competency:</label>\n                  <select\n                    value={\n                      this.state.competencyID\n                        ? this.state.competencyID\n                        : competency_id\n                    }\n                    onChange={this.handleCompetencyChange}\n                  >\n                    {competencyOptions}\n                  </select>\n                  <label>Change attribute type:</label>\n                  <select\n                    value={\n                      this.state.attributeTypeID\n                        ? this.state.attributeTypeID\n                        : attribute_type_id\n                    }\n                    onChange={this.handleTypeChange}\n                  >\n                    {attributeTypeOptions}\n                  </select>\n                  <input type=\"submit\" className=\"button\" value=\"Save\" />\n                </form>\n              </td>\n            </tr>\n\n            <tr>\n              <td>Attribute type:</td>\n              <td>{attribute_type_title}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst AttributeSettingsRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\n      component={AttributeSettings}\n    />\n  </Switch>\n);\n\nexport default AttributeSettingsRoot;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport CompetencyService from '../services/competency/competency';\n\nconst $ = window.$;\n\nclass AttributeDemap extends React.Component {\n  activeRequests = new ActiveRequestsService();\n  competencyService = new CompetencyService();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      resourceID: this.props.location.pathname.split('/')[2],\n      attributeID: this.props.location.pathname.split('/')[4],\n      resourceDetails: [],\n      csrf: ''\n    };\n    this.demap = this.demap.bind(this);\n  }\n\n  async demap(e) {\n    //alert(\"mapping removed\");\n    let resource = 1034;\n    let items = [20, 21];\n    //this.activeRequests.startRequest();\n    let result = await this.competencyService.demap(resource, items);\n    console.log(result);\n    //this.activeRequests.finishRequest();\n    //console.log(this.state.resourceDetails);\n    //this.props.history.push(\"/training-resources/\"+this.props.location.pathname.split('/')[2]);\n    //e.preventDefault();\n  }\n\n  componentDidMount() {\n    //fetch(`${apiUrl}`+'/api/resources/?_format=hal_json&id='+ this.state.resourceID)\n    fetch(`${apiUrl}` + '/node/' + this.state.resourceID + '?_format=hal_json')\n      .then(Response => Response.json())\n      .then(findresponse => {\n        this.setState({\n          resourceDetails: findresponse\n        });\n      });\n\n    let csrfURL = `${apiUrl}/rest/session/token`;\n    fetch(csrfURL)\n      .then(Response => Response)\n      .then(findresponse2 => {\n        this.setState({ csrf: findresponse2 });\n      });\n  }\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return this.state.attributes === nextState.attributes;\n  // }\n\n  render() {\n    return (\n      <div>\n        <h3>\n          Are you sure you want to remove this mapping? This action cannot be\n          undone!\n        </h3>\n        <button className=\"button\" onClick={this.demap.bind(this)}>\n          Yes\n        </button>\n      </div>\n    );\n  }\n}\n\nconst AttributeDemapRoot = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/training-resources/:resource/demap/:attribute\"\n      component={AttributeDemap}\n    />\n  </Switch>\n);\n\nexport default AttributeDemapRoot;\n","import { apiUrl } from '../http/http';\n\nclass BodyService {\n  static createProfile({\n    title,\n    frameworkId,\n    frameworkUuid,\n    versionID,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    fileid\n  }) {\n    return {\n      _links: {\n        type: {\n          href: `${apiUrl}/rest/type/node/profile`\n        },\n        [`${apiUrl}/rest/relation/node/profile/field_competency_framework`]: {\n          href: `${apiUrl}/node/${frameworkId}?_format=hal_json`\n        }\n      },\n      title: [\n        {\n          value: title\n        }\n      ],\n      field_versions: [\n        {\n          target_id: versionID\n        }\n      ],\n      field_age: [\n        {\n          value: age\n        }\n      ],\n      field_current_role: [\n        {\n          value: currentRole,\n          format: 'basic_html'\n        }\n      ],\n      field_gender: [\n        {\n          value: gender\n        }\n      ],\n      field_job_title: [\n        {\n          value: jobTitle\n        }\n      ],\n      field_qualification_background: [\n        {\n          value: qualification\n        }\n      ],\n      field_additional_information: [\n        {\n          value: additionalInfo\n        }\n      ],\n      field_image: [\n        {\n          target_id: fileid,\n          description: 'persona picture'\n        }\n      ],\n      field_publishing_status: [\n        {\n          value: 'Draft'\n        }\n      ],\n      type: [\n        {\n          target_id: 'profile'\n        }\n      ],\n      _embedded: {\n        [`${apiUrl}/rest/relation/node/profile/field_competency_framework`]: [\n          {\n            _links: {\n              self: {\n                href: `${apiUrl}/node/${frameworkId}?_format=hal_json`\n              },\n              type: {\n                href: `${apiUrl}/rest/type/node/competency_framework`\n              }\n            },\n            uuid: [\n              {\n                value: frameworkUuid\n              }\n            ],\n            lang: 'en'\n          }\n        ]\n      }\n    };\n  }\n\n  static editProfile(\n    profileId,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    publishStatus,\n    fileid\n  ) {\n    return {\n      _links: {\n        self: {\n          href: `${apiUrl}/node/${profileId}?_format=hal_json`\n        },\n        type: {\n          href: `${apiUrl}/rest/type/node/profile`\n        }\n      },\n      title: [\n        {\n          value: title\n        }\n      ],\n      field_age: [\n        {\n          value: age\n        }\n      ],\n      field_current_role: [\n        {\n          value: currentRole,\n          format: 'basic_html'\n        }\n      ],\n      field_gender: [\n        {\n          value: gender\n        }\n      ],\n      field_job_title: [\n        {\n          value: jobTitle\n        }\n      ],\n      field_qualification_background: [\n        {\n          value: qualification,\n          format: 'basic_html'\n        }\n      ],\n      field_additional_information: [\n        {\n          value: additionalInfo,\n          format: 'basic_html'\n        }\n      ],\n      field_image: [\n        {\n          target_id: fileid ? fileid : null\n          //description: 'persona picture'\n        }\n      ],\n      field_publishing_status: [\n        {\n          value: publishStatus\n        }\n      ],\n      type: [\n        {\n          target_id: 'profile'\n        }\n      ]\n    };\n  }\n\n  static mapProfile(profileId, mapping) {\n    let mappingBody = [];\n    mapping.forEach(function(item) {\n      mappingBody.push({\n        competency: item.competency,\n        expertise: item.expertise,\n        attributes: item.attributes.join()\n      });\n    });\n\n    //  console.log(mappingBody)\n\n    return {\n      type: [\n        {\n          target_id: 'article'\n        }\n      ],\n      field_item: [\n        {\n          value: profileId\n        }\n      ],\n      field_profile_mapping: mappingBody\n    };\n  }\n}\n\nexport default BodyService;\n","import HttpService from '../http/http';\nimport Body from './body';\nimport Download from './download';\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nclass ProfileService {\n  static instance;\n  http = new HttpService();\n\n  constructor() {\n    if (ProfileService.instance) {\n      return this.instance;\n    }\n    ProfileService.instance = this;\n  }\n\n  async createProfile(options) {\n    const response = await this.http.post(\n      `/node?_format=hal_json`,\n      Body.createProfile(options)\n    );\n    return response.data;\n  }\n\n  async editProfile(\n    profileId,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    publishStatus,\n    fileid\n  ) {\n    const response = await this.http.patch(\n      `/node/${profileId}?_format=hal_json`,\n      Body.editProfile(\n        profileId,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        publishStatus,\n        fileid\n      )\n    );\n\n    return response.data;\n  }\n\n  async mapProfile(profileId, mapping) {\n    const response = await this.http.patch(\n      `/api/bioexcel/2.0/profiles?_format=json`,\n      Body.mapProfile(profileId, mapping),\n      'json'\n    );\n    return response.data;\n  }\n\n\n\n  async createGuestProfile(\n    data,\n    frameworkName,\n    frameworkId,\n    versionNumber,\n    title,\n    age,\n    currentRole,\n    gender,\n    jobTitle,\n    qualification,\n    additionalInfo,\n    selectedFileData,\n\n  ){\n    \n    let mapping = [];\n\n    let existingGuestProfile = JSON.parse(localStorage.getItem('guestProfile'));\n    if(existingGuestProfile){\n      if(existingGuestProfile.data.mapping){\n        mapping = existingGuestProfile.data.mapping;\n      }\n    }\n\n    \n    let guestProfile = {\n        'data': data,\n        'frameworkName': frameworkName,\n        'frameworkId': frameworkId,\n        'versionNumber': versionNumber,\n        'title': title,\n        'age': age,\n        'currentRole': currentRole,\n        'gender': gender,\n        'jobTitle': jobTitle,\n        'qualification': qualification,\n        'additionalInfo': additionalInfo,\n        'selectedFileData': selectedFileData,\n    };\n\n    guestProfile['data']['mapping'] = mapping;\n\n\n    localStorage.setItem('guestProfile', JSON.stringify(guestProfile));\n    console.log('Profile service called for Guest user')\n\n  }\n\n  async mapProfileGuest(mapping) {\n\n    let guestProfile = JSON.parse(localStorage.getItem('guestProfile'));\n    guestProfile['data']['mapping'] = mapping;\n    localStorage.setItem('guestProfile', JSON.stringify(guestProfile)); \n\n  }\n\n  mapDownloadProfile(options) {\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(options));\n  }\n\n  downloadProfile(options) {\n    // Download.getProfile(options);\n    // console.log(options)\n\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    // PROFILE Header\n    doc.setFontType('normal');\n    doc.setFontSize(22);\n    doc.text(marginleft, startHeight, 'EMBL-EBI Competency Profile');\n\n    // Framework Logo\n    if (options.frameworkLogoData) {\n      let frameworkLogoWidth = options.frameworkLogoData[0]\n        ? options.frameworkLogoData[0].width\n        : 100;\n      let frameworkLogoHeight = options.frameworkLogoData[0]\n        ? options.frameworkLogoData[0].height\n        : 30;\n      let logoRatio = frameworkLogoWidth / frameworkLogoHeight;\n      let pdfLogoHeight = pageLogoWidth / logoRatio;\n\n      let logoData = options.frameworkLogoData[0].src;\n      let logoType = 'PNG';\n      doc.addImage(\n        logoData,\n        logoType,\n        marginright - 100,\n        5,\n        pageLogoWidth,\n        pdfLogoHeight,\n        '',\n        'SLOW'\n      );\n    }\n\n    currentYAxis = currentYAxis + 50;\n\n    // PROFILE Title\n    doc.setFontSize(18);\n    doc.text(\n      marginleft,\n      currentYAxis,\n      options.title + ' - ' + options.jobTitle\n    );\n\n    // PROFILE Image\n    if (options.selectedFile) {\n      let type = options.selectedFile.type === 'image/jpeg' ? 'JPEG' : 'PNG'; // maybe you should add some controls to prevent loading of other file types\n      let imgData = options.selectedFileData[0].src;\n      doc.addImage(\n        imgData,\n        type,\n        marginleft,\n        currentYAxis + 30,\n        pdfProfileImgWidth,\n        pdfProfileImgHeight,\n        '',\n        'SLOW'\n      ); // Compression options are NONE, FAST, MEDIUM and SLOW\n    }\n\n    // doc.setFontType('normal');\n    // PROFILE Demographics\n    if (options.gender || options.age) {\n      let gender = options.gender\n        ? options.age\n          ? options.gender + ', '\n          : options.gender\n        : '';\n      let age = options.age ? options.age + ' years' : '';\n\n      doc.setFontSize(12);\n      doc.text(\n        marginleft,\n        pdfProfileImgHeight + currentYAxis + 60,\n        gender + age\n      );\n    }\n\n    currentYAxis = currentYAxis + 40;\n\n    // PROFILE Qualifications\n    let qDim;\n    if (options.qualification) {\n      doc.setFontSize(16);\n      doc.text(fifthCol, currentYAxis, 'Qualifications & background');\n      currentYAxis = currentYAxis + 20;\n\n      doc.setFontSize(12);\n      let qualification = doc.splitTextToSize(\n        options.qualification,\n        profileBody\n      );\n      // Adjust yAxis based on text height\n      qDim = doc.getTextDimensions(qualification);\n      let margins = {\n        top: 70,\n        bottom: 40,\n        left: 30,\n        width: 550\n      };\n\n      doc.fromHTML(options.qualification, fifthCol, currentYAxis, {\n        // y coord\n        width: profileBody // max width of content on PDF\n      });\n\n      // doc.text(fifthCol, currentYAxis, qualification)\n      currentYAxis = currentYAxis + 30;\n    }\n\n    // PROFILE Activities\n    if (options.currentRole) {\n      doc.setFontSize(16);\n      doc.text(fifthCol, qDim.h + currentYAxis, 'Activities and current role');\n      currentYAxis = currentYAxis + 20;\n\n      doc.setFontSize(12);\n      let currentRole = doc.splitTextToSize(options.currentRole, profileBody);\n      // Adjust yAxis based on text height\n      let cDim = doc.getTextDimensions(currentRole);\n      currentYAxis = qDim.h + currentYAxis;\n\n      doc.text(fifthCol, currentYAxis, currentRole);\n    }\n\n    doc.setFontSize(9);\n    doc.text(\n      marginleft,\n      pdfHeight - 20,\n      'Profile created on ' + currentDate + ' at ' + currentTime\n    );\n\n    // Save the Data\n    let jobTitleUnderscored = options.jobTitle.split(' ').join('_');\n    doc.save(jobTitleUnderscored.toLowerCase() + '.pdf');\n  }\n}\n\nexport default ProfileService;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\n\nexport const ProfileCreate = props => {\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState('');\n  const [age, setAge] = useState('');\n  const [currentRole, setCurrentRole] = useState('');\n  const [gender, setGender] = useState('');\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [selectedFileData, setSelectedFileData] = useState([]);\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [additionalInfo, setAdditionalInfo] = useState('');\n\n  const [framework, setFramework] = useState();\n  const [frameworkLogoData, setFrameworkLogoData] = useState([]);\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n\n  const [errorMsgTitle, setErrorMsgTitle] = useState();\n  const [errorMsgJobTitle, setErrorMsgJobTitle] = useState();\n\n  const [frameworkMoreData, setFrameworkMoreData] = useState();\n\n  let errors = [];\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    // Set variables from Local Storage to populate form fields onload\n    const bootstrap = () => {\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n      setProfile(storedProfile);\n\n      if (storedProfile) {\n        setTitle(storedProfile.title);\n        setJobTitle(storedProfile.jobTitle);\n        setAge(storedProfile.age);\n        setGender(storedProfile.gender);\n        setQualification(storedProfile.qualification);\n        setCurrentRole(storedProfile.currentRole);\n        setAdditionalInfo(storedProfile.additionalInfo);\n        if (storedProfile.selectedFileData[0]) {\n          setSelectedFileData(storedProfile.selectedFileData);\n          setImgpreview(storedProfile.selectedFileData[0].src);\n        }\n      }\n    };\n\n    // Calling multiple APIs, since data Framework are in two different endpoints\n    const fetchData = async () => {\n      try {\n        const promise1 = http\n          .get(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n          )\n          .then(response1 => response1.data);\n\n        const promise2 = http\n          .get(`${apiUrl}/api/version_manager?_format=json`)\n          .then(response2 => response2.data);\n\n        const [data1, data2] = await Promise.all([promise1, promise2]);\n        // Get current Framework only\n\n        // if (frameworkMoreData[0].logo[0].url) {\n\n        //   toDataURL(frameworkMoreData[0].logo[0].url, function(myBase64) {\n        //     let img = new Image();\n        //     img.src = myBase64;\n        //     img.addEventListener('load', function() {\n        //       img.width = this.width;\n        //       img.height = this.height;\n        //       setFrameworkLogoData([\n        //         {\n        //           url: frameworkMoreData[0].logo[0].url,\n        //           src: img.src,\n        //           width: this.width,\n        //           height: this.height\n        //         }\n        //       ]);\n        //     });\n        //   });\n        // }\n        setFramework(data1);\n        setFrameworkMoreData(\n          data2.filter(item => {\n            return item.title.toLowerCase() === frameworkName;\n          })\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    bootstrap();\n    fetchData();\n  }, [selectedFile]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    let frameworkId = framework[0].nid;\n    let frameworkName = framework[0].title;\n    let frameworkUuid = framework[0].uuid;\n    console.log(frameworkMoreData);\n    let liveVersion = frameworkMoreData[0].versions.find(\n      ver => ver.status == 'live'\n    );\n\n    let versionID = liveVersion.id;\n    var arrayBuffer = '';\n    var fileid = null;\n\n    // Do nothing if Form doesn't pass validation criteris above\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n    }\n    // Check if is Anonymous/Authenticated\n    else if (!localStorage.getItem('roles')) {\n      setErrorMsgTitle('');\n      setErrorMsgJobTitle('');\n\n      // Retrieve values from Local Storage if exist\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n\n      profileService.mapDownloadProfile({\n        title,\n        frameworkId,\n        frameworkLogoData,\n        frameworkName,\n        frameworkUuid,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        selectedFile,\n        // selectedFileData: storedProfile ? selectedFileData ? selectedFileData : '' : '',\n        selectedFileData,\n        mapping: storedProfile ? storedProfile.mapping : [],\n        mappingAttributes: storedProfile ? storedProfile.mappingAttributes : []\n      });\n      //props.history.push('/framework/bioexcel/2.0/profile/map/download/');\n    } else if (localStorage.getItem('roles').includes('framework_manager')) {\n      if (selectedFile) {\n        let token = localStorage.getItem('csrf_token');\n        await fetch(\n          apiUrl + '/file/upload/node/profile/field_image?_format=hal_json',\n          {\n            credentials: 'include',\n            method: 'POST',\n            cookies: 'x-access-token',\n            headers: {\n              accept: 'application/octet-stream',\n              'Content-Type': 'application/octet-stream',\n              'X-CSRF-Token': token,\n              'Content-Disposition': 'file; filename=\"persona_picture.png\"'\n            },\n            body: selectedFile\n          }\n        )\n          .then(resp => resp.json())\n          .then(function(data) {\n            fileid = data.fid[0].value;\n          });\n      }\n\n      let response = await profileService.createProfile({\n        title,\n        frameworkId,\n        frameworkUuid,\n        versionID,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        fileid\n      });\n\n      props.history.push(\n        `/framework/${frameworkName}/${frameworkVersion}/profile/view/${response.nid[0].value}/${\n          response.path[0].alias\n        }`\n      );\n    }\n  };\n\n  const setPreview = () => {\n    props.history.push(`/framework/${frameworkName}/${frameworkVersion}/profile/preview`, {\n      title: title\n    });\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type != 'image/jpeg' &&\n        e.target.files[0].type != 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      // convert image file to base64 string. From https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      const reader = new FileReader();\n      reader.addEventListener(\n        'load',\n        function() {\n          // Set Image Preview\n          setImgpreview(reader.result);\n\n          // Set selected image src\n          let img = new Image();\n          img.src = reader.result;\n          img.addEventListener('load', function() {\n            img.width = this.width;\n            img.height = this.height;\n\n            setSelectedFileData([\n              {\n                src: this.src,\n                width: this.width,\n                height: this.height\n              }\n            ]);\n          });\n        },\n        false\n      );\n      if (e.target.files) {\n        reader.readAsDataURL(e.target.files[0]);\n      }\n\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setSelectedFile(undefined);\n    setImgpreview(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Add Competencies';\n    }\n\n    return <input type=\"submit\" className=\"button\" value={submitButtonLabel} />;\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  // From https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript\n  const getImageData = (url, callback) => {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n        return callback(reader.result);\n      };\n      reader.readAsDataURL(xhr.response);\n    };\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.send();\n  };\n\n  const toDataURL = (src, callback, outputFormat) => {\n    var img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = function() {\n      var canvas = document.createElement('CANVAS');\n      var ctx = canvas.getContext('2d');\n      var dataURL;\n      canvas.height = this.naturalHeight;\n      canvas.width = this.naturalWidth;\n      ctx.drawImage(this, 0, 0);\n      dataURL = canvas.toDataURL(outputFormat);\n      callback(dataURL);\n    };\n    img.src = src;\n    if (img.complete || img.complete === undefined) {\n      img.src =\n        'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n      img.src = src;\n    }\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  return (\n    <div>\n      <h2>Create {placeholder} profile</h2>\n      <form className=\"form\" id=\"profile_create_form\" onSubmit={handleSubmit}>\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Name</strong>\n              <input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Name\"\n                onChange={e => setTitle(e.target.value)}\n                defaultValue={profile ? profile.title : title}\n              />\n              <div className={titleCalloutClass}>\n                <i>{nameHelp}</i>\n              </div>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Job title</strong>\n              <input\n                type=\"text\"\n                id=\"jobTitle\"\n                placeholder=\"Job title\"\n                onChange={e => setJobTitle(e.target.value)}\n                defaultValue={profile ? profile.jobTitle : jobTitle}\n              />\n              <div className={jobTitleCalloutClass}>\n                <i>{jobTitleHelp}</i>\n              </div>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">&nbsp;</div>\n          <div className=\"column large-8\" />\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Image</strong>\n              <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n            </span>\n\n            <span>\n              <img\n                id=\"imgpreview_image\"\n                width=\"100px\"\n                src={imgpreview}\n                height=\"100px\"\n                style={{\n                  border: '1px solid #ccc',\n                  padding: '5px',\n                  width: '30%'\n                }}\n              />\n              {imgpreview ? (\n                <div>\n                  <a href=\"#\" onClick={e => clearimgpreview(e)}>\n                    Clear image x\n                  </a>\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileSizeError ? (\n                <div className=\"small callout alert\">\n                  <em> Image size should not be more than 2 MB </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileTypeError ? (\n                <div className=\"small callout alert\">\n                  <em> Only JPG or PNG images are allowed </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n            </span>\n\n            <br />\n            <br />\n            <span>\n              <strong>Age (in years)</strong>\n              <input\n                type=\"number\"\n                id=\"age\"\n                placeholder=\"Age\"\n                width={4}\n                onChange={e => setAge(e.target.value)}\n                defaultValue={profile ? profile.age : age}\n              />\n            </span>\n\n            <span>\n              <strong>Gender</strong>\n              <select\n                onChange={e => setGender(e.target.value)}\n                defaultValue={profile ? profile.gender : gender}\n              >\n                <option value={'-None-'}>None</option>\n                <option value={'Male'}>Male</option>\n                <option value={'Female'}>Female</option>\n              </select>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Qualification and background</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={qualification}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setQualification(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Acitivities of current role</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={currentRole}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setCurrentRole(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Additional information</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={additionalInfo}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setAdditionalInfo(data);\n                }}\n              />\n            </span>\n            <br />\n          </div>\n        </div>\n\n        <p />\n        <div className=\"row\">\n          <div className=\"column medium-2\" />\n          <div className=\"column medium-3\">\n            <ButtonLabel />\n          </div>\n          <div className=\"column medium-7\" />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const CreateProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/create\"\n      component={ProfileCreate}\n    />\n  </Switch>\n);\n\nexport default CreateProfile;\n","import React, { useState, useEffect} from 'react';\nimport { Switch, Route, useHistory  } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport HttpService from '../services/http/http';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\n\nexport const ProfileCreateGuest = props => {\n  const history = useHistory();\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState('');\n  const [age, setAge] = useState('');\n  const [currentRole, setCurrentRole] = useState('');\n  const [gender, setGender] = useState('');\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [selectedFileData, setSelectedFileData] = useState([]);\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [additionalInfo, setAdditionalInfo] = useState('');\n\n  const [framework, setFramework] = useState();\n  const [frameworkLogoData, setFrameworkLogoData] = useState([]);\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  const [profile, setProfile] = useState();\n\n  const [errorMsgTitle, setErrorMsgTitle] = useState();\n  const [errorMsgJobTitle, setErrorMsgJobTitle] = useState();\n\n  const [frameworkMoreData, setFrameworkMoreData] = useState();\n\n  let errors = [];\n\n  var storedProfile =  JSON.parse(\n        localStorage.getItem('guestProfile')\n      );\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    // Set variables from Local Storage to populate form fields onload\n    let bootstrap = async () => {\n    \n      await setProfile(storedProfile);\n\n      if (storedProfile) {\n        setTitle(storedProfile.data.title);\n        setJobTitle(storedProfile.data.jobTitle);\n        setAge(parseInt(storedProfile.data.age));\n        setGender(storedProfile.data.gender);\n        setQualification(storedProfile.data.qualification);\n        setCurrentRole(storedProfile.data.currentRole);\n        setAdditionalInfo(storedProfile.data.additionalInfo);\n        if (storedProfile.data.selectedFileData) {\n          setSelectedFileData(storedProfile.data.selectedFileData);\n          setImgpreview(storedProfile.data.selectedFileData.src);\n        }\n      }\n    };\n\n    // Calling multiple APIs, since data Framework are in two different endpoints\n    const fetchData = async () => {\n      try {\n        const promise1 = http\n          .get(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n          )\n          .then(response1 => response1.data);\n\n        const promise2 = http\n          .get(`${apiUrl}/api/version_manager?_format=json`)\n          .then(response2 => response2.data);\n\n        const [data1, data2] = await Promise.all([promise1, promise2]);\n        setFramework(data1);\n        setFrameworkMoreData(\n          data2.filter(item => {\n            return item.title.toLowerCase() === frameworkName;\n          })\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    bootstrap();\n    fetchData();\n  }, [selectedFile]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    let frameworkId = framework[0].nid;\n    //let frameworkName = framework[0].title;\n    let frameworkUuid = framework[0].uuid;\n    //console.log(frameworkMoreData);\n    let liveVersion = frameworkMoreData[0].versions.find(\n      ver => ver.status == 'live'\n    );\n\n    let versionID = liveVersion.id;\n    let versionNumber = liveVersion.number;\n    var arrayBuffer = '';\n    var fileid = null;\n\n    // Do nothing if Form doesn't pass validation criteris above\n    if (!title || !jobTitle || title.length < 2 || jobTitle.length < 3 || fileTypeError || fileSizeError) {\n      return 0;\n    }\n    // Check if is Anonymous/Authenticated\n    else if (!localStorage.getItem('roles')) {\n      setErrorMsgTitle('');\n      setErrorMsgJobTitle('');\n\n      // Retrieve values from Local Storage if exist\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n\n      profileService.createGuestProfile({\n        data: 'guest',\n        frameworkName,\n        frameworkId,\n        versionNumber,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        selectedFileData,\n        // selectedFileData: storedProfile ? selectedFileData ? selectedFileData : '' : '',\n        //selectedFileData,\n        //mapping: storedProfile ? storedProfile.mapping : [],\n        //mappingAttributes: storedProfile ? storedProfile.mappingAttributes : []\n      });\n      history.push(`/framework/${frameworkName}/${frameworkVersion}/profile/view/guest/`);\n      }\n    }\n\n  const setPreview = () => {\n    props.history.push(`/framework/${frameworkName}/${frameworkVersion}/profile/preview`, {\n      title: title\n    });\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type != 'image/jpeg' &&\n        e.target.files[0].type != 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      // convert image file to base64 string. From https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      const reader = new FileReader();\n      reader.addEventListener(\n        'load',\n        function() {\n          // Set Image Preview\n          setImgpreview(reader.result);\n\n          // Set selected image src\n          let img = new Image();\n          img.src = reader.result;\n          img.addEventListener('load', function() {\n            img.width = this.width;\n            img.height = this.height;\n\n            setSelectedFileData(\n              {\n                src: this.src,\n                width: this.width,\n                height: this.height\n              }\n            );\n          });\n        },\n        false\n      );\n      if (e.target.files) {\n        reader.readAsDataURL(e.target.files[0]);\n      }\n\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setSelectedFile(undefined);\n    setImgpreview(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    setSelectedFileData(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Save and Map Competencies';\n    }\n\n    return <input type=\"submit\" className=\"button\" value={submitButtonLabel} />;\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  // From https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript\n  const getImageData = (url, callback) => {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n        return callback(reader.result);\n      };\n      reader.readAsDataURL(xhr.response);\n    };\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.send();\n  };\n\n  const toDataURL = (src, callback, outputFormat) => {\n    var img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = function() {\n      var canvas = document.createElement('CANVAS');\n      var ctx = canvas.getContext('2d');\n      var dataURL;\n      canvas.height = this.naturalHeight;\n      canvas.width = this.naturalWidth;\n      ctx.drawImage(this, 0, 0);\n      dataURL = canvas.toDataURL(outputFormat);\n      callback(dataURL);\n    };\n    img.src = src;\n    if (img.complete || img.complete === undefined) {\n      img.src =\n        'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n      img.src = src;\n    }\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  return (\n    <div>\n      <h2>Create {placeholder} profile</h2>\n      <form className=\"form\" id=\"profile_create_form\" onSubmit={handleSubmit}>\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Name</strong>\n              <input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Name\"\n                onChange={e => setTitle(e.target.value)}\n                defaultValue={profile ? profile.data.title : ''}\n              />\n              <div className={titleCalloutClass}>\n                <i>{nameHelp}</i>\n              </div>\n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Job title</strong>\n              <input\n                type=\"text\"\n                id=\"jobTitle\"\n                placeholder=\"Job title\"\n                onChange={e => setJobTitle(e.target.value)}\n                defaultValue={profile ? profile.data.jobTitle : ''}\n              />\n              <div className={jobTitleCalloutClass}>\n                <i>{jobTitleHelp}</i>\n              </div>\n            </span>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">&nbsp;</div>\n          <div className=\"column large-8\" />\n        </div>\n\n        <div className=\"row\">\n          <div className=\"column large-4\">\n            <span>\n              <strong>Image</strong>\n              <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n            </span>\n\n            <span>\n              <img\n                id=\"imgpreview_image\"\n                width=\"100px\"\n                src={imgpreview}\n                height=\"100px\"\n                style={{\n                  border: '1px solid #ccc',\n                  padding: '5px',\n                  width: '30%'\n                }}\n              />\n              {imgpreview ? (\n                <div>\n                  <a href=\"#\" onClick={e => clearimgpreview(e)}>\n                    Clear image x\n                  </a>\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileSizeError ? (\n                <div className=\"small callout alert\">\n                  <em> Image size should not be more than 2 MB </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n\n              {fileTypeError ? (\n                <div className=\"small callout alert\">\n                  <em> Only JPG or PNG images are allowed </em>{' '}\n                </div>\n              ) : (\n                ''\n              )}\n            </span>\n\n            <br />\n            <br />\n            <span>\n              <strong>Age (in years)</strong>\n              <input\n                type=\"number\"\n                id=\"age\"\n                placeholder=\"Age\"\n                width={4}\n                onChange={e => setAge(e.target.value)}\n                defaultValue={profile ? profile.data.age : ''}\n              />\n            </span>\n\n            <span>\n              <strong>Gender</strong>\n              <select\n                onChange={e => setGender(e.target.value)}\n                //defaultValue={gender?gender:'-None-'}\n                value={gender ? gender : '-None-'}\n              >\n                <option value={'-None-'}>None</option>\n                <option value={'Male'}>Male</option>\n                <option value={'Female'}>Female</option>\n              </select>\n              \n            </span>\n          </div>\n          <div className=\"column large-8\">\n            <span>\n              <strong>Qualification and background</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile?storedProfile.data.qualification:''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setQualification(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Acitivities of current role</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile?storedProfile.data.currentRole:''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setCurrentRole(data);\n                }}\n              />\n            </span>\n\n            <br />\n            <span>\n              <strong>Additional information</strong>\n              <CKEditor\n                editor={ClassicEditor}\n                data={storedProfile?storedProfile.data.additionalInfo:''}\n                onInit={editor => {}}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setAdditionalInfo(data);\n                }}\n              />\n            </span>\n            <br />\n          </div>\n        </div>\n\n        <p />\n        <div className=\"row\">\n          <div className=\"column medium-2\" />\n          <div className=\"column medium-3\">\n            <ButtonLabel />\n          </div>\n          <div className=\"column medium-7\" />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const Path = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/create/guest\"\n      component={ProfileCreateGuest}\n    />\n  </Switch>\n);\n\nexport default Path;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n//import CKEditor from 'react-ckeditor-component';\nimport Parser from 'html-react-parser';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactTooltip from 'react-tooltip';\n\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nconst $ = window.$;\n\nexport const ProfileView = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n  const alias = props.location.pathname.split('/')[7];\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  var competencyView = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  var mapping = [];\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n\n  let profile2Expertise = '';\n  let width2 = '';\n  let floatRight = '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&timestamp=${Date.now()}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n  }, [profileId]);\n\n  const checkAlias = () => {\n    if (profile) {\n      let url_alias = profile.url_alias;\n\n      if (profile.url_alias != alias) {\n        props.history.push(\n          `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}${url_alias}`\n        );\n      }\n    }\n  };\n\n  const getExpertise = competency => {\n    if (mapping) {\n      let obj = mapping.find(o => o.competency == competency);\n      if (obj) {\n        if (frameworkInfo) {\n          let expertise = frameworkInfo[0].expertise_levels.find(\n            level => level.id == obj.expertise\n          );\n          return expertise;\n        }\n      } else {\n        return '';\n      }\n    }\n  };\n\n  const getAttributeStatus = aid => {\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a == aid)\n      );\n      return attribute_check_status;\n    }\n  };\n\n  const getBarWidth = data => {\n    width2 = data ? 100 / (3 / data.rating_level) : 0;\n    return width2;\n  };\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      console.log(frameworkInfo);\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            //level => (expertise_levels[level.rating_level] = level.title)\n            level => expertise_levels_legend.push(\n                <li style={{ textAlign: 'center' }}>\n                 <div data-tip={level.description?level.description:'NA'} data-html={true} data-type='info' data-multiline={true}> \n                    <span className=\"badge secondary\"> {level.rating_level} </span> <span> {level.title}</span> \n                  </div>\n                 <ReactTooltip class='tooltip-custom' />\n                </li>\n\n              )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    // let index = 0;\n    // expertise_levels.map((level, key) => {\n    //   expertise_levels_legend.push(\n    //     <li style={{ textAlign: 'center' }}>\n    //       <span className=\"badge secondary\"> {key} </span> <span> {level}</span>\n    //     </li>\n    //   );\n    //   index++;\n    // });\n\n    if (profile) {\n      mapping = profile.profile_mapping;\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <div>\n            <div className=\"row callout\">\n              <div className=\"column medium-12 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n            </div>\n            {domain.competencies.map(competency => (\n              <div>\n                <div className=\"row\">\n                  <div className=\"column medium-8\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"column medium-4\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{\n                          width: getBarWidth(getExpertise(competency.id)) + '%',\n                          display: 'flow-root'\n                        }}\n                      >\n                        <span\n                          style={{\n                            float:\n                              getBarWidth(getExpertise(competency.id)) == 0\n                                ? 'none'\n                                : 'right'\n                          }}\n                          className=\"rating_level_number\"\n                        >\n                          {getExpertise(competency.id)\n                            ? getExpertise(competency.id).rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map(attribute_type => {\n                      return (\n                        <div\n                          className=\"accordion-item is-active\"\n                          data-accordion-item\n                        >\n                          <div className=\"row attribute_align_type\">\n                            <div className=\"column medium-8\">\n                              <strong> {attribute_type} </strong>\n                            </div>\n                            <div className=\"column medium-4\" />\n                          </div>\n                          {competency.attributes\n                            .filter(\n                              attribute => attribute.type == attribute_type\n                            )\n                            .map(attribute => {\n                              return (\n                                <div className=\"row attribute_align\">\n                                  <div className=\"column medium-8\">\n                                    {attribute.title}\n                                  </div>\n                                  <div className=\"column medium-4\">\n                                    {getAttributeStatus(\n                                      attribute.id,\n                                      'profile1'\n                                    ) ? (\n                                      <i className=\"icon icon-common icon-check\" />\n                                    ) : (\n                                      '-'\n                                    )}\n                                  </div>\n                                </div>\n                              );\n                            })}\n                        </div>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))\n      );\n    }\n  };\n\n  const handleDownload = e => {\n    e.preventDefault();\n\n    // Download Profile\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    downloadProfileFromHtml(storedProfile);\n  };\n  const downloadProfileFromHtml = options => {\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    var specialElementHandlers = {\n      '#editor': function(element, renderer) {\n        return true;\n      }\n    };\n\n    let margins = {\n      top: startHeight,\n      bottom: 60,\n      left: marginleft,\n      right: marginright,\n      width: 490\n    };\n    var sourceFull = document.getElementById('profile');\n    var source = sourceFull;\n\n    //console.log(source[0].attributes)\n    // source = doc.splitTextToSize(\n    //   source,\n    //   profileBody\n    // );\n\n    let profileTitle = options.jobTitle.split(' ').join('_');\n    doc.fromHTML(\n      source,\n      marginleft,\n      currentYAxis,\n      {\n        // y coord\n        width: margins.width, // max width of content on PDF\n        elementHandlers: specialElementHandlers\n      },\n      function(dispose) {\n        // dispose: object with X, Y of the last line add to the PDF\n        //          this allow the insertion of new lines after html\n        doc.save(profileTitle.toLowerCase() + '.pdf');\n      }\n      // margins\n    );\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateProfileView()}\n\n      {profile ? (\n        <div id=\"profile\">\n          <h2 style={{ marginTop: '1em', marginBottom: '1em' }}>\n            {profile.title} - {profile.job_title}\n          </h2>\n\n          <div style={{ float: 'right' }}>\n            {user_roles.search('framework_manager') != -1 ? (\n              <ul>\n                <li className=\"profile_navigation\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/edit/${profileId}`}\n                  >\n                    Edit overview\n                    <i className=\"icon icon-common icon-pencil-alt\" />\n                  </Link>\n                </li>\n                <li className=\"profile_navigation\">\n                  <Link to={`/framework/${frameworkName}/${frameworkVersion}/profile/map/${profileId}`}>\n                    Map competencies <i className=\"icon icon-common icon-cog\" />{' '}\n                    {console.log(localStorage.getItem('roles'))}\n                  </Link>\n                </li>\n              </ul>\n            ) : (\n              <Link to={`/framework/${frameworkName}/${frameworkVersion}/profile/create`}>\n                Create your profile <i className=\"icon icon-common icon-plus\" />\n              </Link>\n            )}\n          </div>\n\n          <div className={profile.publishing_status + ' row'}>\n            <div className=\"column large-3\">\n              <center>\n                <img\n                  style={{ display: 'block', maxWidth: '200px' }}\n                  src={profile.image[0] ? profile.image[0].url : ''}\n                />\n              </center>\n              <p />\n              <p style={{ textAlign: 'center' }}>\n                {profile.gender ? profile.gender : ''}{' '}\n                {profile.age ? '| ' + profile.age + ' years' : ''}\n              </p>\n            </div>\n            <div className=\"column large-9\">\n              <h3>Qualification and background</h3>\n              <p>\n                {profile.qualification_background\n                  ? Parser(profile.qualification_background)\n                  : ''}\n              </p>\n\n              <h3>Acitivities of current role</h3>\n              <p>{profile.current_role ? Parser(profile.current_role) : ''}</p>\n\n              <p>\n                {profile.additional_information\n                  ? Parser(profile.additional_information)\n                  : ''}\n              </p>\n            </div>\n            <p />\n          </div>\n          <p>&nbsp;</p>\n\n          <div className=\"row\">\n            <div className=\"column medium-3\">\n              {' '}\n              <h5 style={{ marginTop: '25px' }}>\n                {frameworkFullName} {frameworkVersion} / Competencies\n              </h5>\n            </div>\n            <div className=\"column medium-9 \">\n\n              <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                {expertise_levels_legend}\n\n              </ul>\n            </div>\n          </div>\n          <hr />\n          {competencyView}\n        </div>\n      ) : (\n        'Loaing profile'\n      )}\n\n      <form onSubmit={e => handlePrint(e)}>\n        <div className=\"submit_fixed\">\n          <button className=\"button\" type=\"submit\">\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const ViewProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/view/:id/:alias\"\n      component={ProfileView}\n    />\n  </Switch>\n);\n\nexport default ViewProfile;\n","// stars.js\nconst Stars = [\n  { id: 0, src: process.env.PUBLIC_URL + '/rating_stars/0.png' },\n  { id: 1, src: process.env.PUBLIC_URL + '/rating_stars/1.png' },\n  { id: 2, src: process.env.PUBLIC_URL + '/rating_stars/2.png' },\n  { id: 3, src: process.env.PUBLIC_URL + '/rating_stars/3.png' }\n];\n\nconsole.log('windows url ' + window.location.origin);\nconsole.log('process url ' + process.env.PUBLIC_URL);\n\nexport default Stars;\n","import React, { usecompetency_title, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport RadarChart from 'react-svg-radar-chart';\nimport 'react-svg-radar-chart/build/css/index.css';\nimport user_icon from './user_icon.png';\nimport Collapsible from 'react-collapsible';\n\nexport const ProfilesCompareButterfly = props => {\n  let history = useHistory();\n  const frameworkName = props.frameworkName;\n  const frameworkVersion = props.frameworkVersion;\n  const profile1Id = props.profile1Id;\n  const profile2Id = props.profile2Id;\n  const isGuestProfile = props.isGuestProfile;\n\n  const profile1 = props.profile1;\n  const profile2 = props.profile2;\n  const framework = props.framework;\n  const frameworkInfo = props.frameworkInfo;\n\n  var competencyView = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  var mapping1 = [];\n  var mapping2 = [];\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n  var competencies_array = [];\n  var expertise_array = [];\n  var profile1_expertise_obj = new Object();\n  var profile2_expertise_obj = new Object();\n  var chart_props = [];\n  var leftData = [];\n  var rightData = [];\n\n  var includeSummary = [];\n\n  const getExpertise = (competency, profileid) => {\n    let mapping = '';\n    if (profileid == 'profile1') {\n      mapping = mapping1;\n    } else {\n      mapping = mapping2;\n    }\n\n    let obj = mapping.find(o => o.competency == competency);\n    if (obj) {\n      if (frameworkInfo) {\n        let expertise = frameworkInfo[0].expertise_levels.find(\n          level => level.id == obj.expertise\n        );\n        return expertise;\n      }\n    } else {\n      return null;\n    }\n  };\n\n  const getAttributeStatus = (attribute, profile) => {\n    let mapping = '';\n    if (profile == 'profile1') {\n      mapping = profile1.profile_mapping;\n    } else {\n      mapping = profile2.profile_mapping;\n    }\n    //console.log(mapping)\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a == attribute)\n      );\n      //console.log(attribute_check_status)\n      return attribute_check_status ? true : false;\n    }\n  };\n\n  const getAttributeRows = competency => {\n    console.log('hi ' + competency);\n  };\n\n\n  const generateProfileView = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            (level, key) => (expertise_array[key] = level.id) //(expertise_levels[level.id] = level.title)\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        \"<li class='legend'>  <div class='legend_number'> \" +\n          index +\n          '</div>' +\n          level +\n          '</li>'\n      );\n      index++;\n    });\n\n    if (profile1) {\n      mapping1 = profile1.profile_mapping;\n    }\n\n    if (profile2) {\n      mapping2 = profile2.profile_mapping;\n    }\n\n    if (frameworkInfo) {\n      frameworkInfo.map(framework => {\n        if (framework.title == frameworkName) {\n          framework.expertise_levels.map((level, key) => {\n            expertise_array[key] = level.id;\n          });\n        }\n      });\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain =>\n          domain.competencies.map(competency => {\n            let profile1Expertise = getExpertise(competency.id, 'profile1');\n            let profile2Expertise = getExpertise(competency.id, 'profile2');\n\n            if(profile1Expertise && profile2Expertise){\n              includeSummary.push(profile1Expertise.rating_level < profile2Expertise.rating_level ? competency.id : null)\n            }else if(!profile1Expertise && !profile2Expertise){\n              includeSummary.push(null)\n            }else if(!profile1Expertise  && profile2Expertise){\n              includeSummary.push(competency.id)\n            }\n                \n\n            let width1 = profile1Expertise\n              ? 100 / (3 / profile1Expertise.rating_level)\n              : 0;\n            let margin1 = 100 - width1;\n            margin1 = margin1 == 100 ? 88 : margin1;\n\n            let width2 = profile2Expertise\n              ? 100 / (3 / profile2Expertise.rating_level)\n              : 0;\n            let floatRight = width2 == 0 ? 'none' : 'right';\n\n            return (\n              <div>\n                <div className=\"row\">\n                  <div className=\"column medium-6\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"column medium-3\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerLeft\"\n                        style={{\n                          width: width1 + '%',\n                          marginLeft: margin1 + '%'\n                        }}\n                      >\n                        <span\n                          style={{ position: 'relative' }}\n                          className=\"rating_level_number\"\n                        >\n                          {profile1Expertise\n                            ? profile1Expertise.rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"column medium-3\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{ width: width2 + '%', display: 'flow-root' }}\n                      >\n                        <span\n                          style={{ float: floatRight }}\n                          className=\"rating_level_number\"\n                        >\n                          {profile2Expertise\n                            ? profile2Expertise.rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <span className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <span className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map(attribute_type => {\n                      return (\n                        <div\n                          className=\"accordion-item is-active\"\n                          data-accordion-item\n                        >\n                          <div className=\"row attribute_align_type\">\n                            <div className=\"column medium-6\">\n                              <strong> {attribute_type} </strong>\n                            </div>\n                            <div className=\"column medium-3\" />\n                            <div className=\"column medium-3\" />\n                          </div>\n                          {competency.attributes\n                            .filter(\n                              attribute => attribute.type == attribute_type\n                            )\n                            .map(attribute => {\n                              return (\n                                <div className=\"row attribute_align\">\n                                  <div className=\"column medium-6\">\n                                    {attribute.title}\n                                  </div>\n                                  <div className=\"column medium-3\">\n                                    {getAttributeStatus(\n                                      attribute.id,\n                                      'profile1'\n                                    ) ? (\n                                      <i className=\"icon icon-common icon-check\" />\n                                    ) : (\n                                      '-'\n                                    )}\n                                  </div>\n                                  <div className=\"column medium-3\">\n                                    {getAttributeStatus(\n                                      attribute.id,\n                                      'profile2'\n                                    ) ? (\n                                      <i className=\"icon icon-common icon-check\" />\n                                    ) : (\n                                      '-'\n                                    )}\n                                  </div>\n                                </div>\n                              );\n                            })}\n                        </div>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            );\n          })\n        )\n      );\n    }\n  };\n  if (profile1) {\n    chart_props[0] = {\n      key: profile1.id,\n      label: profile1.title\n    };\n  }\n\n  if (profile2) {\n    chart_props[1] = {\n      key: profile2.id,\n      label: profile2.title\n    };\n  }\n\n  const handlePrint = e => {\n    e.preventDefault();\n    window.print();\n  };\n\n  const handleSummary = e => {\n    e.preventDefault();\n    history.push({pathname:`/framework/${frameworkName}/${frameworkVersion}/profiles/compare/guest/summary`,\n        state: {profileJobTitle: profile1.job_title, includeSummary: includeSummary}\n      })\n  }\n\n  return (\n    <div id=\"\">\n      {generateProfileView()}\n      \n      <p>&nbsp; </p>\n      <div className=\"row\">\n        <div className=\"column medium-6\">\n          <h5>\n            {frameworkFullName} {frameworkVersion} / Competencies\n          </h5>\n        </div>\n        <div className=\"column medium-3\">\n          <h5>{profile1.job_title}</h5>\n        </div>\n        <div className=\"column medium-3\">\n          <h5>{profile2.job_title}</h5>\n        </div>\n      </div>\n\n      <hr />\n      <div className=\"row\">\n        <div className=\"column medium-6\">&nbsp;</div>\n        <div className=\"column medium-3\">\n          <span>High</span> <span style={{ float: 'right' }}> Low</span>\n        </div>\n        <div className=\"column medium-3\">\n          <span>Low</span> <span style={{ float: 'right' }}> High</span>\n        </div>\n      </div>\n\n      <div>{competencyView}</div>\n      <div className=\"row\">\n\n        <div className=\"column medium-2\">&nbsp;</div>\n        <div className=\"column medium-4\" style={{ textAling: 'center' }}>\n        {isGuestProfile?  \n          <a to={\"#\"} className=\"button\" onClick={e => handleSummary(e)}>\n            Summary <i className=\"icon-common icon-list\" />\n          </a>\n          :\n          ''\n        }\n        </div>\n        <div className=\"column medium-4\" style={{ textAling: 'center' }}>\n          <a href=\"#\" className=\"button\" onClick={e => handlePrint(e)}>\n            Print <i className=\"icon icon-common icon-print\" />\n          </a>\n        </div>\n        <div className=\"column medium-2\" />\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilesCompareButterfly;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport { apiUrl } from '../services/http/http';\n\nimport { Link, Redirect } from 'react-router-dom';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\nimport ProfilesCompareTable from './ProfilesCompareTable';\nimport ProfilesCompareGraph from './ProfilesCompareGraph';\nimport ProfilesCompareButterfly from './ProfilesCompareButterfly';\nimport user_icon from './user_icon.png';\nimport Stars from './Stars';\nimport ReactTooltip from 'react-tooltip';\n\nconst $ = window.$;\n\nexport const ProfilesCompare = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profile1Id = props.location.pathname.split('/')[6];\n  const profile2Id = props.location.pathname.split('/')[7];\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n\n\n  const [profile1, setProfile1] = useState();\n  const [profile2, setProfile2] = useState();\n  const [framework, setFramework] = useState();\n  const [isGuestProfile, setIsGuestProfile] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        if(profile1Id == 'guest'){\n          await setProfile1(JSON.parse(localStorage.getItem('guestProfile')));\n          setIsGuestProfile(1);\n        }else{\n          await fetch(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profile1Id}&timestamp=${Date.now()}`\n          )\n            .then(Response => Response.json())\n            .then(findresponse => {\n              setProfile1(findresponse);\n            });\n        }\n          \n        if(profile2Id == 'guest'){\n          await setProfile2(JSON.parse(localStorage.getItem('guestProfile')));\n          setIsGuestProfile(1);\n        }else{\n          await fetch(\n            `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profile2Id}&timestamp=${Date.now()}`\n          )\n            .then(Response => Response.json())\n            .then(findresponse => {\n              setProfile2(findresponse);\n            });\n        }\n\n        await fetch(`${apiUrl}/api/version_manager?_format=json`)\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setFrameworkInfo(findresponse);\n          });\n\n        await fetch(\n          `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n        )\n          .then(Response => Response.json())\n          .then(findresponse => {\n            setFramework(findresponse);\n          });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, []);\n\n  if (frameworkInfo) {\n    frameworkInfo.map(info => {\n      if (info.title.toLowerCase() === frameworkName) {\n        info.expertise_levels.map(\n            level => expertise_levels_legend.push(\n                <li style={{ textAlign: 'center' }}>\n                 <div data-tip={level.description?level.description:'NA'} data-html={true} data-type='info' data-multiline={true}> \n                    <span className=\"badge secondary\"> {level.rating_level} </span> <span> {level.title}</span> \n                  </div>\n                 <ReactTooltip class='tooltip-custom' />\n                </li>\n\n              )\n          );\n      }\n    });\n  }\n\n\n  return (\n    <div>\n      <h3>Compare career profiles</h3>\n      <span className=\"lead\">\n        Compere profile with other reference profiles to help you make career\n        choices based on your competency\n        {console.log(isGuestProfile)}\n      </span>\n\n      <div className=\"row\">\n        <div className=\"column medium-3\">&nbsp;</div>\n        <div className=\"column medium-3\">\n          {profile1 ? (\n            <div className=\"profile_badge_page\">\n              <img\n                src={profile1.image[0] ? profile1.image[0].url : user_icon}\n                width=\"120px\"\n              />\n              <Link\n                to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profile1.id}/alias`}\n              >\n                <h5>{profile1.job_title}</h5>\n              </Link>\n            </div>\n          ) : (\n            'loading profiles'\n          )}\n        </div>\n\n        <div className=\"column medium-3\">\n          {profile2 ? (\n            <div className=\"profile_badge_page\">\n              <img\n                src={profile2.image[0] ? profile2.image[0].url : user_icon}\n                width=\"120px\"\n              />\n              <Link\n                to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profile2.id}/alias`}\n              >\n                <h5>{profile2.job_title}</h5>\n              </Link>\n            </div>\n          ) : (\n            'loading profiles'\n          )}\n        </div>\n        <div className=\"column medium-3\" />\n      </div>\n\n      <div className=\"row\">\n        <div className=\"column medium-12\">\n          <div className=\"legend-inline-wrapper\">\n            <strong>Rating levels </strong>{' '}\n            <ul className=\"legend-inline\">{expertise_levels_legend}</ul>\n          </div>\n        </div>\n      </div>\n      <p />\n\n      {profile1 && profile2 ? (\n\n\n        <ProfilesCompareButterfly\n          frameworkName={frameworkName}\n          frameworkVersion={frameworkVersion}\n          profile1Id={profile1Id}\n          profile2Id={profile2Id}\n          profile1={profile1}\n          profile2={profile2}\n          framework={framework}\n          frameworkInfo={frameworkInfo}\n          isGuestProfile={isGuestProfile}\n        />\n      ) : (\n        ''\n      )}\n    </div>\n  );\n};\n\nexport const sendRoute = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profiles/compare/:profile1/:profile2\"\n      component={ProfilesCompare}\n    />\n  </Switch>\n);\n\nexport default sendRoute;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport HttpService from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\nimport Parser from 'html-react-parser';\n\nimport jsPDF from 'jspdf';\nimport moment from 'moment';\n\nconst $ = window.$;\n\nexport const ProfileMapDownload = props => {\n  // const activeRequests = new ActiveRequestsService();\n  // const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [expertiseLevels, setExpertiseLevels] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  // const [ksa, setKsa] = useState();\n  const [profileAttributes, setProfileAttributes] = useState([]);\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkDesc = '';\n  var frameworkLogo = '';\n\n  var mapping = [];\n  let mappingAttributes = [];\n  var expertise_levels_legend = [];\n\n  const http = new HttpService();\n\n  useEffect(() => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n\n    if (storedProfile) {\n      // Get Profile from Session\n      setProfile(storedProfile);\n\n      const fetchData = async () => {\n        try {\n          // Get Framework\n          const promiseFramework = http\n            .get(`${apiUrl}/api/version_manager?_format=json`)\n            .then(responseFramework => responseFramework.data);\n\n          // Get Framework version\n          const promiseVersion = http\n            .get(\n              `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n            )\n            .then(responseVersion => responseVersion.data);\n\n          const [dataFramework, dataVersion] = await Promise.all([\n            promiseFramework,\n            promiseVersion\n          ]);\n\n          getExpertiseLevels(dataFramework, dataVersion[0].nid);\n          setFrameworkInfo(dataFramework);\n          setFramework(dataVersion);\n          // return false;\n        } catch (err) {\n          console.log(err);\n        }\n      };\n\n      fetchData();\n    }\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Download Profile\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    downloadProfileFromHtml(storedProfile);\n  };\n\n  const handleMapping = event => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let expertise = event.target[event.target.selectedIndex].text;\n\n    if (expertise_id == expertise_not_applicable) {\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'checked',\n        false\n      );\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'disabled',\n        true\n      );\n\n      removeCompetencyAttributes(competency_id);\n    } else {\n      // Create temp mapping\n      let tempMap = storedProfile['mapping'];\n\n      if (tempMap.find(o => o.competency_id === competency_id)) {\n        // Update stored Competencies only if existing levels of expertise is updated\n        if (tempMap.expertise_id != expertise_id) {\n          var index = tempMap.findIndex(\n            item => item.competency_id === competency_id\n          );\n          // replace current stored values with incoming ones\n          tempMap.splice(index, 1, {\n            competency_id: competency_id,\n            expertise_id: expertise_id,\n            expertise: expertise\n          });\n        }\n        // Update local Storage mapping\n        storedProfile['mapping'] = tempMap;\n        localStorage.setItem(\n          'ProfileDownloadData',\n          JSON.stringify(storedProfile)\n        );\n      } else {\n        // Add competency that has been selected\n        let tempMap = storedProfile['mapping'];\n        tempMap.push({\n          competency_id: competency_id,\n          expertise_id: expertise_id,\n          expertise: expertise\n        });\n        storedProfile['mapping'] = tempMap;\n        localStorage.setItem(\n          'ProfileDownloadData',\n          JSON.stringify(storedProfile)\n        );\n      }\n\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'checked',\n        true\n      );\n      $('input:checkbox[data-competency=' + competency_id + ']').prop(\n        'disabled',\n        false\n      );\n\n      // Add Competency's selected attributes to LocalStorage\n      addCompetencyAttributes(competency_id);\n    }\n  };\n\n  // Add all attributes to LocalStorage if Competency is selected\n  const addCompetencyAttributes = competency => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    // let selectedAttributes = new Array();\n\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = $(\n      'input:checkbox[data-competency=' + competency + ']'\n    ).each(function() {\n      if (\n        mappingAttributes.find(attr => attr.attribute_id === $(this).attr('id'))\n      ) {\n        // Do nothing if attributes are in LocalStorage already\n      } else {\n        mappingAttributes.push({\n          attribute_id: $(this).attr('id'),\n          competency_id: competency\n        });\n      }\n    }, mappingAttributes);\n\n    storedProfile['mappingAttributes'] = mappingAttributes;\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(storedProfile));\n    setProfileAttributes(storedProfile);\n  };\n\n  // Remove current attributes if Competency is deselected\n  const removeCompetencyAttributes = competency => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = $(\n      'input:checkbox[data-competency=' + competency + ']'\n    ).each(function() {\n      let index = mappingAttributes.findIndex(\n        item => item.attribute_id === $(this).attr('id')\n      );\n      // Remove current attributes if Competency is deselected\n      mappingAttributes.splice(index, 1);\n    }, mappingAttributes);\n\n    // localStorage.setItem('mappingAttributes', JSON.stringify(mappingAttributes));\n    storedProfile['mappingAttributes'] = mappingAttributes;\n    localStorage.setItem('ProfileDownloadData', JSON.stringify(storedProfile));\n    setProfileAttributes(storedProfile);\n  };\n\n  // Manage single Attributes check/uncheck event\n  const handleCheckboxMapping = event => {\n    let storedProfile = JSON.parse(localStorage.getItem('ProfileDownloadData'));\n    let competency_id = event.target.getAttribute('data-competency');\n    let attribute_id = event.target.getAttribute('id');\n\n    // let mappingAttributes = JSON.parse(localStorage.getItem('mappingAttributes'));\n    let mappingAttributes = storedProfile['mappingAttributes'];\n    let attributes = mappingAttributes;\n\n    if (mappingAttributes.find(attr => attr.attribute_id === attribute_id)) {\n      // Remove current attribute if deselected\n      var index = mappingAttributes.findIndex(\n        item => item.attribute_id === attribute_id\n      );\n      mappingAttributes.splice(index, 1);\n      // localStorage.setItem('mappingAttributes', JSON.stringify(mappingAttributes));\n      storedProfile['mappingAttributes'] = mappingAttributes;\n      localStorage.setItem(\n        'ProfileDownloadData',\n        JSON.stringify(storedProfile)\n      );\n    } else {\n      // Add attribute to LocalStorage\n      attributes.push({\n        attribute_id: attribute_id,\n        competency_id: competency_id\n      });\n      // localStorage.setItem('mappingAttributes', JSON.stringify(attributes));\n      storedProfile['mappingAttributes'] = attributes;\n      $('input:checkbox[id=' + attribute_id + ']').prop('checked', true);\n      localStorage.setItem(\n        'ProfileDownloadData',\n        JSON.stringify(storedProfile)\n      );\n    }\n    setProfileAttributes(storedProfile);\n  };\n\n  // Set Expertise Level.\n  // const expertiseLevelsSelect= [\n  //   {id: 1, title: 'Not applicable', data_expertise: '6816'},\n  //   {id: 2, title: 'Awareness', data_expertise: '6817'},\n  //   {id: 3, title: 'Working knowledge', data_expertise: '6818'},\n  //   {id: 4, title: 'Specialist knowledge', data_expertise: '6819'}\n  // ];\n\n  // Get Expertise Level from API.\n  if (frameworkInfo) {\n    frameworkInfo.map(info => {\n      if (info.title.toLowerCase() === frameworkName) {\n        frameworkFullName = info.title;\n        frameworkLogo = info.logo[0].url;\n        frameworkDesc = info.description;\n        info.expertise_levels.map(\n          level => (expertise_levels[level.rating_level] = level.title)\n        );\n      }\n    });\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        <li style={{ textAlign: 'center' }}>\n          <span className=\"badge secondary\"> {key} </span> <span> {level}</span>\n        </li>\n      );\n      index++;\n    });\n  }\n\n  const getExpertiseLevels = (frameworkInfo, fId) => {\n    let fw = frameworkInfo.filter(item => {\n      return item.nid === fId;\n    });\n\n    let levels = fw[0].expertise_levels;\n\n    // Set Expertise Level\n    setExpertiseLevels(levels);\n  };\n\n  const downloadProfileFromHtml = options => {\n    let doc = new jsPDF('p', 'pt', 'a4');\n    doc.setFont('helvetica');\n    const margin = 0.5;\n\n    let currentDate = moment().format('MMMM D, Y');\n    let currentTime = moment().format('hh:mm:ss');\n\n    let pdfWidth = doc.internal.pageSize.getWidth();\n    let pdfHeight = doc.internal.pageSize.getHeight();\n\n    const startHeight = 30;\n    const marginleft = 20;\n    const pdfProfileImgWidth = 180;\n    const pageLogoWidth = 100;\n\n    let marginright = doc.internal.pageSize.getWidth() - 20;\n    let col = pdfWidth * 0.07383;\n    let gutter = pdfWidth * 0.01036727272;\n    let fourthCol = col * 4 + gutter * 3;\n    let fifthCol = col * 5 + gutter * 4;\n\n    const profileBody = pdfWidth - fifthCol - 20;\n\n    let selectedFileWidth = options.selectedFile\n      ? options.selectedFileData[0].width\n      : 180;\n    let selectedFileHeight = options.selectedFile\n      ? options.selectedFileData[0].height\n      : 150;\n    let ratio = selectedFileWidth / selectedFileHeight;\n    let pdfProfileImgHeight = pdfProfileImgWidth / ratio;\n\n    let currentYAxis = startHeight;\n\n    var specialElementHandlers = {\n      '#editor': function(element, renderer) {\n        return true;\n      }\n    };\n\n    let margins = {\n      top: startHeight,\n      bottom: 60,\n      left: marginleft,\n      right: marginright,\n      width: 490\n    };\n\n    var source = document.getElementById('profile');\n\n    // source = doc.splitTextToSize(\n    //   source,\n    //   profileBody\n    // );\n\n    let profileTitle = options.jobTitle.split(' ').join('_');\n    doc.fromHTML(\n      source,\n      marginleft,\n      currentYAxis,\n      {\n        // y coord\n        width: margins.width, // max width of content on PDF\n        elementHandlers: specialElementHandlers\n      },\n      function(dispose) {\n        // dispose: object with X, Y of the last line add to the PDF\n        //          this allow the insertion of new lines after html\n        doc.save(profileTitle.toLowerCase() + '.pdf');\n      }\n      // margins\n    );\n\n    // doc.output(\"/framework/bioexcel/2.0/profile/map/download/myprofile\");\n  };\n\n  // Set fielc HTML content + Heading if not empty\n  const setFieldContent = (heading, field) => {\n    let fieldContent = field ? '<h3>' + heading + '</h3>' + field : '';\n    return { __html: fieldContent };\n  };\n\n  const generateForm = () => {\n    // console.log('frameworkInfo')\n    // console.log(frameworkInfo)\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title == 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : ''\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (profile) {\n      mapping = profile.mapping;\n\n      let storedProfile = JSON.parse(\n        localStorage.getItem('ProfileDownloadData')\n      );\n      mappingAttributes = storedProfile['mappingAttributes'];\n    }\n\n    if (framework) {\n      competencyForm = framework.map((item, index) =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li key={index} className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h4 className=\"domain_title\"> {domain.title}</h4>\n                </div>\n                <div className=\"column medium-3\">\n                  <h4>Levels of expertise</h4>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li key={cid} className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <h5>\n                                <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                  <p className=\"show-for-sr\">show more</p>\n                                </span>\n                                {competency.title}\n                              </h5>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <h5>\n                                <span className=\"icon icon-common icon-angle-up icon-custom\">\n                                  <p className=\"show-for-sr\">show less</p>\n                                </span>\n                                {competency.title}\n                              </h5>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map((attribute_type, index) => {\n                              return (\n                                <li key={index} className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type == attribute_type\n                                      )\n                                      .map((attribute, jIndex) => (\n                                        <li\n                                          key={jIndex}\n                                          className=\"attribute_title\"\n                                        >\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                onChange={e =>\n                                                  handleCheckboxMapping(e)\n                                                }\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                data-competency={competency.id}\n                                                checked={\n                                                  mappingAttributes.find(\n                                                    attr =>\n                                                      attr.attribute_id ==\n                                                      attribute.id\n                                                  )\n                                                    ? true\n                                                    : false\n                                                }\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className={\n                                                  mappingAttributes.find(\n                                                    attr =>\n                                                      attr.attribute_id ==\n                                                      attribute.id\n                                                  )\n                                                    ? 'attribute_label checked'\n                                                    : 'attribute_label'\n                                                }\n                                                htmlFor={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleMapping(e)}\n                          defaultValue={\n                            mapping.find(o => o.competency_id == competency.id)\n                              ? mapping.find(\n                                  o => o.competency_id == competency.id\n                                ).expertise_id\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertiseLevels.map((level, key) => (\n                            <option\n                              key={key}\n                              value={level.id}\n                              data-expertise={level.id}\n                              data-competency={competency.id}\n                            >\n                              {level.title}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>Add competencies to your profile </h2>\n\n            <div id=\"profile\" className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <h3>\n                    {profile.title.charAt(0).toUpperCase() +\n                      profile.title.slice(1)}{' '}\n                    - {profile.jobTitle}\n                  </h3>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3 text-center\">\n                  {profile.selectedFileData[0] ? (\n                    <img\n                      src={\n                        profile.selectedFileData[0].src\n                          ? profile.selectedFileData[0].src\n                          : user_icon\n                      }\n                      width=\"250px\"\n                    />\n                  ) : (\n                    ''\n                  )}\n                  <div className=\"text-center\">\n                    <br />\n                    {profile.gender}, {profile.age} years\n                  </div>\n                </div>\n                <div className=\"column medium-9\">\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Qualifications and background',\n                      profile.qualification\n                    )}\n                  />\n                  {/* <div className=\"form_intro\"\n                    dangerouslySetInnerHTML={{ __html: profile.qualification }}\n                  /> */}\n\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Activities and current role',\n                      profile.currentRole\n                    )}\n                  />\n\n                  <div\n                    className=\"form_intro\"\n                    dangerouslySetInnerHTML={setFieldContent(\n                      'Additional information',\n                      profile.additionalInfo\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <br />\n                  <h3>Your competencies</h3>\n                  <p>\n                    The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                  <p>\n                    You may assign a level expertise against each competency.\n                    The levels of expertise are:\n                  </p>\n                  <div className=\"legend-inline-wrapper\">\n                    <strong>Rating levels </strong>{' '}\n                    <ul className=\"legend-inline\">{expertise_levels_legend}</ul>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-12\">\n                  <div className=\"competency_section\">\n                    {\n                      <form onSubmit={e => handleSubmit(e)}>\n                        {competencyForm}\n                        <div className=\"submit_fixed\">\n                          <button className=\"button\" type=\"submit\">\n                            Print <i className=\"icon icon-common icon-print\" />\n                          </button>\n                        </div>\n                      </form>\n                    }\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {/* <div>{profile.qualification}</div> */}\n\n                  {/* <div>{profile.currentRole}</div> */}\n                  {/* <h5>{profile.title}</h5> */}\n                  {/* <Link\n                    to={`/framework/bioexcel/2.0/profile/view/${profileId}/alias`}\n                  >\n                    {' '}\n                    <i className=\"icon icon-common icon-angle-left\" /> Profile\n                    overview{' '}\n                  </Link> */}\n                </div>\n                <div className=\"column medium-6 form_intro\" />\n                <div className=\"column medium-3\">\n                  {/* <img src={frameworkLogo} />\n                  <br /> */}\n                </div>\n              </div>\n\n              {/* <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Download{' '}\n                        <i className=\"icon icon-common icon-download\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div> */}\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const MapProfileDownload = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/download\"\n      component={ProfileMapDownload}\n    />\n  </Switch>\n);\n\nexport default MapProfileDownload;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Parser from 'html-react-parser';\n\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport ReactTooltip from 'react-tooltip';\nimport user_icon from './user_icon.png';\nconst $ = window.$;\n\nexport const ProfileViewGuest = props => {\n\n\t\n\tconst frameworkName = props.location.pathname.split('/')[2];\n  \tconst frameworkVersion = props.location.pathname.split('/')[3];\n\t const profileId = props.location.pathname.split('/')[6];\n\t  const alias = props.location.pathname.split('/')[7];\n\n\t  const [profile, setProfile] = useState();\n\t  const [framework, setFramework] = useState();\n\t  const [frameworkInfo, setFrameworkInfo] = useState();\n\n\t  var competencyView = '';\n\t  var expertise_levels = [];\n\t  var expertise_levels_legend = [];\n\t  var attribute_types = [];\n\t  var frameworkFullName = '';\n\t  var frameworkLogo = '';\n\t  var frameworkDesc = '';\n\t  var mapping = [];\n\t  // var user_roles = localStorage.getItem('roles')\n\t  //   ? localStorage.getItem('roles')\n\t  //   : '';\n\n\t  let profile2Expertise = '';\n\t  let width2 = '';\n\t  let floatRight = '';\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\n\t\t\tawait setProfile(JSON.parse(localStorage.getItem('guestProfile')));\n\n\t\t\tawait fetch(`${apiUrl}/api/version_manager?_format=json`)\n\t\t        .then(Response => Response.json())\n\t\t        .then(findresponse => {\n\t\t          setFrameworkInfo(findresponse);\n\t\t        });\n\n\t\t      await fetch(\n\t\t        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n\t\t      )\n\t\t        .then(Response => Response.json())\n\t\t        .then(findresponse => {\n\t\t          setFramework(findresponse);\n\t\t        });\n\t\t    }\n\t\t    fetchData();\n\n\t},[])\n\nconst getExpertise = competency => {\n    if (mapping) {\n      let obj = mapping.find(o => o.competency == competency);\n      if (obj) {\n        if (frameworkInfo) {\n          let expertise = frameworkInfo[0].expertise_levels.find(\n            level => level.id == obj.expertise\n          );\n          return expertise;\n        }\n      } else {\n        return '';\n      }\n    }\n  };\n\n const getAttributeStatus = aid => {\n    if (mapping) {\n      let attribute_check_status = mapping.find(o =>\n        o.attributes.find(a => a == aid)\n      );\n      return attribute_check_status;\n    }\n  };\n\n const getBarWidth = data => {\n    width2 = data ? 100 / (3 / data.rating_level) : 0;\n    return width2;\n  };\n\n\n    const generateProfileView = () => {\n    if (frameworkInfo) {\n      console.log(frameworkInfo);\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            //level => (expertise_levels[level.rating_level] = level.title)\n            level => expertise_levels_legend.push(\n                <li style={{ textAlign: 'center' }}>\n                 <div data-tip={level.description?level.description:'NA'} data-html={true} data-type='info' data-multiline={true}> \n                    <span className=\"badge secondary\"> {level.rating_level} </span> <span> {level.title}</span> \n                  </div>\n                 <ReactTooltip class='tooltip-custom' />\n                </li>\n\n              )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (profile) {\n      mapping = profile.data.mapping;\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <div>\n            <div className=\"row callout\">\n              <div className=\"column medium-12 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n            </div>\n            {domain.competencies.map(competency => (\n              <div>\n                <div className=\"row\">\n                  <div className=\"column medium-8\">\n                    <span className=\"competency_title\">\n                      {' '}\n                      {competency.title.length > 150\n                        ? competency.title\n                            .split(' ')\n                            .splice(0, 18)\n                            .join(' ') + ' ..'\n                        : competency.title}\n                    </span>\n                  </div>\n                  <div className=\"column medium-4\">\n                    <div className=\"fillerbg\">\n                      <div\n                        className=\"fillerRight\"\n                        style={{\n                          width: getBarWidth(getExpertise(competency.id)) + '%',\n                          display: 'flow-root'\n                        }}\n                      >\n                        <span\n                          style={{\n                            float:\n                              getBarWidth(getExpertise(competency.id)) == 0\n                                ? 'none'\n                                : 'right'\n                          }}\n                          className=\"rating_level_number\"\n                        >\n                          {getExpertise(competency.id)\n                            ? getExpertise(competency.id).rating_level\n                            : 0}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"profile_collapsible\">\n                  <Collapsible\n                    trigger={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                      </div>\n                    }\n                    triggerWhenOpen={\n                      <div className=\"open-close-title\">\n                        <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                      </div>\n                    }\n                  >\n                    {attribute_types.map(attribute_type => {\n                      return (\n                        <div\n                          className=\"accordion-item is-active\"\n                          data-accordion-item\n                        >\n                          <div className=\"row attribute_align_type\">\n                            <div className=\"column medium-8\">\n                              <strong> {attribute_type} </strong>\n                            </div>\n                            <div className=\"column medium-4\" />\n                          </div>\n                          {competency.attributes\n                            .filter(\n                              attribute => attribute.type == attribute_type\n                            )\n                            .map(attribute => {\n                              return (\n                                <div className=\"row attribute_align\">\n                                  <div className=\"column medium-8\">\n                                    {attribute.title}\n                                  </div>\n                                  <div className=\"column medium-4\">\n                                    {getAttributeStatus(\n                                      attribute.id,\n                                      'profile1'\n                                    ) ? (\n                                      <i className=\"icon icon-common icon-check\" />\n                                    ) : (\n                                      '-'\n                                    )}\n                                  </div>\n                                </div>\n                              );\n                            })}\n                        </div>\n                      );\n                    })}\n                  </Collapsible>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))\n      );\n    }\n  };\n\n    const handlePrint = () => {\n    window.print();\n  };\n\n    return (\n    <div>\n      {generateProfileView()}\n\n      {profile ? (\n        <div id=\"profile\">\n          <h2 style={{ marginTop: '1em', marginBottom: '1em' }}>\n            {profile.data.title} - {profile.data.jobTitle}\n          </h2>\n\n          <div style={{ float: 'right' }}>\n              <ul>\n                <li className=\"profile_navigation\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/create/guest`}\n                  >\n                    Edit overview\n                    <i className=\"icon icon-common icon-pencil-alt\" />\n                  </Link>\n                </li>\n                <li className=\"profile_navigation\">\n                  <Link to={`/framework/${frameworkName}/${frameworkVersion}/profile/map/${profileId}`}>\n                    Map competencies <i className=\"icon icon-common icon-cog\" />{' '}\n                  </Link>\n                </li>\n              </ul>\n        \n          </div>\n\n          <div className={profile.publishing_status + ' row'}>\n            <div className=\"column large-3\">\n              <center>\n                <img\n                  style={{ display: 'block', maxWidth: '150px' }}\n                  src={profile.data.selectedFileData ? profile.data.selectedFileData.src : user_icon}\n                  //src='#'\n                />\n              </center>\n              <p />\n              <p style={{ textAlign: 'center' }}>\n                {profile.data.gender ? profile.data.gender : ''}{' '}\n                {profile.data.age ? '| ' + profile.data.age + ' years' : ''}\n              </p>\n            </div>\n            <div className=\"column large-9\">\n              <h3>Qualification and background</h3>\n              <p>\n                {profile.data.qualification\n                  ? Parser(profile.data.qualification)\n                  : ''}\n              </p>\n\n              <h3>Acitivities of current role</h3>\n              <p>{profile.data.currentRole ? Parser(profile.data.currentRole) : ''}</p>\n\n              <p>\n                {profile.data.additionalInfo\n                  ? Parser(profile.data.additionalInfo)\n                  : ''}\n              </p>\n            </div>\n            <p />\n          </div>\n          <p>&nbsp;</p>\n\n          <div className=\"row\">\n            <div className=\"column medium-3\">\n              {' '}\n              <h5 style={{ marginTop: '25px' }}>\n                {frameworkFullName} {frameworkVersion} / Competencies\n              </h5>\n            </div>\n            <div className=\"column medium-9 \">\n\n              <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                {expertise_levels_legend}\n\n              </ul>\n            </div>\n          </div>\n          <hr />\n          {competencyView}\n        </div>\n      ) : (\n        'Loading profile'\n      )}\n\n      <form onSubmit={e => handlePrint(e)}>\n        <div className=\"submit_fixed\">\n          <button className=\"button\" type=\"submit\">\n            Print <i className=\"icon icon-common icon-print\" />\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport const ViewGuestProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/view/guest\"\n      component={ProfileViewGuest}\n    />\n  </Switch>\n);\n\nexport default ViewGuestProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\nimport Parser from 'html-react-parser';\nimport ReactTooltip from 'react-tooltip';\n\nconst $ = window.$;\n\nexport const ProfileMapGuest = props => {\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  const [ksa, setKsa] = useState();\n  const [mapping, setMapping] = useState();\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  //const profileId = props.location.pathname.split('/')[6];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  //var mapping = [];\n  var checkboxes = [];\n\n  var storedProfile =  JSON.parse(\n        localStorage.getItem('guestProfile')\n      );\n\n  useEffect(() => {\n    const fetchData = async () => {\n      // await fetch(\n      //   `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&timestamp=${Date.now()}`\n      // )\n      //   .then(Response => Response.json())\n      //   .then(findresponse => {\n      //     setProfile(findresponse);\n      //   });\n\n      await setProfile(storedProfile);\n\n      await setMapping(storedProfile.data.mapping ? storedProfile.data.mapping : []);\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n\n    if (mapping) {\n      let checkBoxes = $('input:checkbox');\n      checkBoxes.each(function(index, item, arr) {\n        console.log('test ' + item.dataset);\n      });\n    }\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    let response = await profileService.mapProfileGuest(mapping);\n    console.log(response);\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`\n    );\n  };\n\n  const handleSelect = event => {\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let tempMapping = mapping;\n\n    let attributesList = [];\n    let checkBoxes = $('input:checkbox[data-competency=' + competency_id + ']');\n\n    if (expertise_id == expertise_not_applicable) {\n      checkBoxes.each(function(index, item, arr) {\n        item.checked = false;\n        item.disabled = true;\n      });\n      //console.log(tempMapping.find(o => o.competency == competency_id))\n      // tempMapping.splice(\n      //   tempMapping.find(o => o.competency == competency_id),\n      //   1\n      // );\n      console.log(tempMapping);\n      // Remove the NA competency from the temp array\n      tempMapping = tempMapping.filter(o => o.competency != competency_id);\n      console.log(tempMapping);\n    } else if (tempMapping) {\n      if (tempMapping.find(o => o.competency === competency_id)) {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.expertise = expertise_id;\n\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        o.attributes = attributesList;\n      } else {\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        tempMapping.push({\n          competency: competency_id,\n          expertise: expertise_id,\n          attributes: attributesList\n        });\n      }\n    }\n    setMapping(tempMapping);\n  };\n\n  const handleCheckBox = e => {\n    let checkboxStatus = e.target.checked;\n    let competency_id = e.target.dataset.competency;\n    let tempMapping = mapping;\n    if (tempMapping) {\n      if (checkboxStatus == true) {\n        e.target.checked = true;\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.push(e.target.id);\n      } else {\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.splice(o.attributes.indexOf(e.target.id), 1);\n      }\n      setMapping(tempMapping);\n    }\n    console.log(mapping);\n  };\n\n  // if (profile) {\n  //   if (!mapping) {\n  //     setMapping(storedProfile.mapping);\n  //   }\n  //     console.log(mapping);\n  // }\n\n  const generateForm = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title == 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : ''\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        <li style={{ textAlign: 'center' }}>\n          <span className=\"badge secondary\"> {index} </span>{' '}\n          <span> {level}</span>\n        </li>\n      );\n      index++;\n    });\n\n    if (framework) {\n      competencyForm = framework.map(item =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h5 className=\"domain_title\"> {domain.title}</h5>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-right icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <li className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type == attribute_type\n                                      )\n                                      .map(attribute => (\n                                        <li className=\"attribute_title\">\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                onChange={e =>\n                                                  handleCheckBox(e)\n                                                }\n                                                defaultChecked={\n                                                  mapping?\n                                                  mapping.find(o =>\n                                                    o.attributes.find(\n                                                      a => a == attribute.id\n                                                    )\n                                                  )\n                                                    ? true\n                                                    : false\n\n                                                    :false\n                                                }\n                                                disabled={\n                                                  mapping?\n                                                  mapping.find(\n                                                    o =>\n                                                      o.competency ==\n                                                      competency.id\n                                                  )\n                                                    ? false\n                                                    : true\n                                                  :true\n                                                }\n                                                data-competency={competency.id}\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className=\"attribute_label\"\n                                                for={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleSelect(e)}\n                          defaultValue={\n                            mapping?\n                            mapping.find(o => o.competency == competency.id)\n                              ? mapping.find(o => o.competency == competency.id)\n                                  .expertise\n                              : expertise_not_applicable\n                            :expertise_not_applicable\n                          }\n                        >\n                          {expertise_levels.map((key, value) => (\n                            <option\n                              value={value}\n                              data-expertise={value}\n                              data-competency={competency.id}\n                            >\n                              {key}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>\n              Competency mapping: {frameworkFullName} {frameworkVersion} -{' '}\n              {profile.data.jobTitle}{' '}\n            </h2>\n\n            <div className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-10\" />\n                <div className=\"column medium-2\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/guest`}\n                  >\n                    <i class=\"icon icon-common icon-angle-left\" /> Profile\n                    overview\n                  </Link>\n                  <p />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  <img\n                    src={profile.data.selectedFileData ? profile.data.selectedFileData.src : user_icon}\n                    width=\"150px\"\n                  />\n                </div>\n                <div className=\"column medium-9 form_intro\">\n                  <h3 />\n                  <p>\n                    Hi Guest. The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {' '}\n                  <h5 style={{ marginTop: '25px' }}>\n                    {frameworkFullName} {frameworkVersion} / Competencies\n                  </h5>\n                </div>\n                <div className=\"column medium-9 \">\n                  <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                    {expertise_levels_legend}\n                  </ul>\n                </div>\n              </div>\n              <hr />\n\n              <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Save <i class=\"icon icon-common icon-save\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const path = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/guest\"\n      component={ProfileMapGuest}\n    />\n  </Switch>\n);\n\nexport default path;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport FileUpload from './FileUpload';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\n\nexport const ProfileEdit = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  const [profile, setProfile] = useState();\n\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n  const [title, setTitle] = useState();\n  const [age, setAge] = useState();\n  const [currentRole, setCurrentRole] = useState();\n  const [gender, setGender] = useState();\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [fid, setFid] = useState();\n  const [imgpreview, setImgpreview] = useState();\n  const [fileSizeError, setFileSizeError] = useState();\n  const [fileTypeError, setFileTypeError] = useState();\n\n  const [jobTitle, setJobTitle] = useState();\n  const [qualification, setQualification] = useState();\n  const [additionalInfo, setAdditionalInfo] = useState();\n  const [publishStatus, setPublishStatus] = useState();\n\n  const [framework, setFramework] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/node/${profileId}?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n          setTitle(findresponse.title[0].value);\n          setImgpreview(\n            findresponse.field_image[0] ? findresponse.field_image[0].url : ''\n          );\n          setFid(\n            findresponse.field_image[0]\n              ? findresponse.field_image[0].target_id\n              : ''\n          );\n          setJobTitle(\n            findresponse.field_job_title[0]\n              ? findresponse.field_job_title[0].value\n              : ''\n          );\n          setAge(\n            findresponse.field_age[0] ? findresponse.field_age[0].value : ''\n          );\n          setGender(\n            findresponse.field_gender[0]\n              ? findresponse.field_gender[0].value\n              : 'None'\n          );\n          setCurrentRole(\n            findresponse.field_current_role[0]\n              ? findresponse.field_current_role[0].value\n              : ''\n          );\n          setQualification(\n            findresponse.field_qualification_background[0]\n              ? findresponse.field_qualification_background[0].value\n              : ''\n          );\n          setAdditionalInfo(\n            findresponse.field_additional_information[0]\n              ? findresponse.field_additional_information[0].value\n              : ''\n          );\n          setPublishStatus(\n            findresponse.field_publishing_status[0]\n              ? findresponse.field_publishing_status[0].value\n              : ''\n          );\n        });\n    };\n    fetchData();\n  }, [profileId]);\n\n  const handleSubmit = async evt => {\n    evt.preventDefault();\n    if (\n      !title ||\n      !jobTitle ||\n      title.length < 2 ||\n      jobTitle.length < 3 ||\n      fileTypeError ||\n      fileSizeError\n    ) {\n    } else {\n      let token = localStorage.getItem('csrf_token');\n      var fileid = fid;\n      if (selectedFile) {\n        await fetch(\n          apiUrl + '/file/upload/node/profile/field_image?_format=hal_json',\n          {\n            credentials: 'include',\n            method: 'POST',\n            cookies: 'x-access-token',\n            headers: {\n              accept: 'application/octet-stream',\n              'Content-Type': 'application/octet-stream',\n              'X-CSRF-Token': token,\n              'Content-Disposition': 'file; filename=\"persona_picture.png\"'\n            },\n            body: selectedFile\n          }\n        )\n          .then(resp => resp.json())\n          .then(function(data) {\n            fileid = data.fid[0].value;\n          });\n      }\n\n      let response = await profileService.editProfile(\n        profileId,\n        title,\n        age,\n        currentRole,\n        gender,\n        jobTitle,\n        qualification,\n        additionalInfo,\n        publishStatus,\n        fileid\n      );\n\n      if (response.nid[0].value) {\n        props.history.push(\n          `/framework/${frameworkName}/${frameworkVersion}/profile/view/${response.nid[0].value}/alias`\n        );\n      }\n    }\n  };\n\n  function ButtonLabel() {\n    let submitButtonLabel = 'Save and continue';\n    if (!localStorage.getItem('roles')) {\n      submitButtonLabel = 'Download';\n    }\n\n    return <input type=\"submit\" className=\"button\" value={submitButtonLabel} />;\n  }\n\n  const getWhoCreateProfile = () => {\n    let placeholder = 'a reference';\n    if (!localStorage.getItem('roles')) {\n      placeholder = 'your';\n    }\n    return placeholder;\n  };\n\n  const placeholder = getWhoCreateProfile();\n\n  // Check if Fields are not empty hide Help Text\n  let titleCalloutClass = 'small callout alert';\n  let jobTitleCalloutClass = 'small callout alert';\n  let nameHelp = 'Name is required and must be at least 2 characters long';\n  let jobTitleHelp =\n    'Job Title is required and must be at least 3 characters long';\n  if (title) {\n    if (title.length > 1) {\n      nameHelp = '';\n      titleCalloutClass = '';\n    }\n  }\n\n  if (jobTitle) {\n    if (jobTitle.length > 2) {\n      jobTitleHelp = '';\n      jobTitleCalloutClass = '';\n    }\n  }\n\n  const setPreview = () => {\n    props.history.push(`/framework/${frameworkName}/${frameworkVersion}/profile/preview`, {\n      title: title\n    });\n  };\n\n  const onSelectFile = e => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setSelectedFile(undefined);\n      return;\n    } else {\n      const objectUrl = URL.createObjectURL(e.target.files[0]);\n\n      if (e.target.files[0].size > 2097152) {\n        setFileSizeError(1);\n      } else {\n        setFileSizeError(undefined);\n      }\n\n      if (\n        e.target.files[0].type != 'image/jpeg' &&\n        e.target.files[0].type != 'image/png'\n      ) {\n        setFileTypeError(1);\n      } else {\n        setFileTypeError(undefined);\n      }\n\n      console.log(e.target.files[0]);\n\n      setImgpreview(objectUrl);\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const clearimgpreview = e => {\n    e.preventDefault();\n    setImgpreview(undefined);\n    setFid(undefined);\n    setFileTypeError(undefined);\n    setFileSizeError(undefined);\n    document.getElementById('fileupload').value = '';\n  };\n\n  return (\n    <div>\n      <div>\n        <Link to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`}>\n          {' '}\n          View{' '}\n        </Link>\n        <h2>Create {placeholder} profile</h2>\n\n        <form className=\"form\" id=\"profile_create_form\" onSubmit={handleSubmit}>\n          <div className=\"row\">\n            <div className=\"column large-4\">\n              <span>\n                <strong>Name</strong>\n                <input\n                  type=\"text\"\n                  id=\"title\"\n                  placeholder=\"Name\"\n                  value={title}\n                  onChange={e => setTitle(e.target.value)}\n                />\n                <div className={titleCalloutClass}>\n                  <i>{nameHelp}</i>\n                </div>\n              </span>\n            </div>\n            <div className=\"column large-8\">\n              <span>\n                <strong>Job title</strong>\n                <input\n                  type=\"text\"\n                  id=\"jobTitle\"\n                  placeholder=\"Job title\"\n                  value={jobTitle}\n                  onChange={e => setJobTitle(e.target.value)}\n                />\n                <div className={jobTitleCalloutClass}>\n                  <i>{jobTitleHelp}</i>\n                </div>\n              </span>\n            </div>\n          </div>\n\n          <div className=\"row\">\n            <div className=\"column large-4\">&nbsp;</div>\n            <div className=\"column large-8\" />\n          </div>\n\n          <div className=\"row\">\n            <div className=\"column large-4\">\n              <span>\n                <strong>Image</strong>\n                <input type=\"file\" id=\"fileupload\" onChange={onSelectFile} />\n              </span>\n\n              <span>\n                <img\n                  id=\"imgpreview_image\"\n                  width=\"100px\"\n                  src={imgpreview}\n                  height=\"100px\"\n                  style={{\n                    border: '1px solid #ccc',\n                    padding: '5px',\n                    width: '30%'\n                  }}\n                />\n                {imgpreview ? (\n                  <div>\n                    <a href=\"#\" onClick={e => clearimgpreview(e)}>\n                      Clear image x\n                    </a>\n                  </div>\n                ) : (\n                  ''\n                )}\n\n                {fileSizeError ? (\n                  <div className=\"small callout alert\">\n                    <em> Image size should not be more than 2 MB </em>{' '}\n                  </div>\n                ) : (\n                  ''\n                )}\n\n                {fileTypeError ? (\n                  <div className=\"small callout alert\">\n                    <em> Only JPG or PNG images are allowed </em>{' '}\n                  </div>\n                ) : (\n                  ''\n                )}\n              </span>\n\n              <br />\n              <br />\n              <span>\n                <strong>Age (in years)</strong>\n                <input\n                  type=\"number\"\n                  id=\"age\"\n                  placeholder=\"Age\"\n                  width={4}\n                  value={age}\n                  onChange={e => setAge(e.target.value)}\n                />\n              </span>\n\n              <span>\n                <strong>Gender</strong>\n                <select\n                  value={gender}\n                  defaultValue=\"-None-\"\n                  onChange={e => setGender(e.target.value)}\n                >\n                  <option value={'-None-'}>None</option>\n                  <option value={'Male'}>Male</option>\n                  <option value={'Female'}>Female</option>\n                </select>\n              </span>\n            </div>\n            <div className=\"column large-8\">\n              <span>\n                <strong>Qualification and background</strong>\n                <CKEditor\n                  editor={ClassicEditor}\n                  data={qualification}\n                  onInit={editor => {}}\n                  onChange={(event, editor) => {\n                    const data = editor.getData();\n                    setQualification(data);\n                  }}\n                />\n              </span>\n\n              <br />\n              <span>\n                <strong>Acitivities of current role</strong>\n                <CKEditor\n                  editor={ClassicEditor}\n                  data={currentRole}\n                  onInit={editor => {}}\n                  onChange={(event, editor) => {\n                    const data = editor.getData();\n                    setCurrentRole(data);\n                  }}\n                />\n              </span>\n\n              <br />\n              <span>\n                <strong>Additional information</strong>\n                <CKEditor\n                  editor={ClassicEditor}\n                  data={additionalInfo}\n                  onInit={editor => {}}\n                  onChange={(event, editor) => {\n                    const data = editor.getData();\n                    setAdditionalInfo(data);\n                  }}\n                />\n              </span>\n\n              <span>\n                <strong>Publishing status</strong>\n                <select\n                  value={publishStatus}\n                  defaultValue=\"-None-\"\n                  onChange={e => setPublishStatus(e.target.value)}\n                >\n                  <option value={'Draft'}>Draft</option>\n                  <option value={'Live'}>Live</option>\n                </select>\n              </span>\n            </div>\n          </div>\n\n          <p />\n          <div className=\"row\">\n            <div className=\"column medium-2\" />\n            <div className=\"column medium-3\">\n              <ButtonLabel />\n            </div>\n            <div className=\"column medium-7\" />\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport const EditProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/edit/:id\"\n      component={ProfileEdit}\n    />\n  </Switch>\n);\n\nexport default EditProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport ProfileService from '../services/profile/profile';\nimport ActiveRequestsService from '../services/active-requests/active-requests';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\nimport user_icon from './user_icon.png';\nimport Parser from 'html-react-parser';\nimport ReactTooltip from 'react-tooltip';\n\nconst $ = window.$;\n\nexport const ProfileMap = props => {\n  const activeRequests = new ActiveRequestsService();\n  const profileService = new ProfileService();\n\n  const [profile, setProfile] = useState();\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n\n  const [ksa, setKsa] = useState();\n  const [mapping, setMapping] = useState();\n\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  var competencyForm = '';\n  var expertise_levels = [];\n  var expertise_levels_legend = [];\n  var expertise_not_applicable = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  //var mapping = [];\n  var checkboxes = [];\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}/profiles?_format=json&id=${profileId}&timestamp=${Date.now()}`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setProfile(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n    };\n    fetchData();\n\n    if (mapping) {\n      let checkBoxes = $('input:checkbox');\n      checkBoxes.each(function(index, item, arr) {\n        console.log('test ' + item.dataset);\n      });\n    }\n  }, [profileId]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    let response = await profileService.mapProfile(profileId, mapping);\n    console.log(response);\n    props.history.push(\n      `/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`\n    );\n  };\n\n  const handleSelect = event => {\n    let competency_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-competency'\n    );\n    let expertise_id = event.target[event.target.selectedIndex].getAttribute(\n      'data-expertise'\n    );\n    let tempMapping = mapping;\n\n    let attributesList = [];\n    let checkBoxes = $('input:checkbox[data-competency=' + competency_id + ']');\n\n    if (expertise_id == expertise_not_applicable) {\n      checkBoxes.each(function(index, item, arr) {\n        item.checked = false;\n        item.disabled = true;\n      });\n      //console.log(tempMapping.find(o => o.competency == competency_id))\n      // tempMapping.splice(\n      //   tempMapping.find(o => o.competency == competency_id),\n      //   1\n      // );\n      console.log(tempMapping);\n      // Remove the NA competency from the temp array\n      tempMapping = tempMapping.filter(o => o.competency != competency_id);\n      console.log(tempMapping);\n    } else if (tempMapping) {\n      if (tempMapping.find(o => o.competency === competency_id)) {\n        let o = tempMapping.find(o => o.competency === competency_id);\n        o.expertise = expertise_id;\n\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        o.attributes = attributesList;\n      } else {\n        checkBoxes.each(function(index, item, arr) {\n          attributesList.push(item.id);\n          item.checked = true;\n          item.disabled = false;\n        });\n        tempMapping.push({\n          competency: competency_id,\n          expertise: expertise_id,\n          attributes: attributesList\n        });\n      }\n    }\n    setMapping(tempMapping);\n  };\n\n  const handleCheckBox = e => {\n    let checkboxStatus = e.target.checked;\n    let competency_id = e.target.dataset.competency;\n    let tempMapping = mapping;\n    if (tempMapping) {\n      if (checkboxStatus == true) {\n        e.target.checked = true;\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.push(e.target.id);\n      } else {\n        let o = tempMapping.find(o => o.competency == competency_id);\n        o.attributes.splice(o.attributes.indexOf(e.target.id), 1);\n      }\n      setMapping(tempMapping);\n    }\n    console.log(mapping);\n  };\n\n  const generateForm = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.expertise_levels.map(\n            level => (\n              (expertise_levels[level.id] = level.title),\n              level.title == 'Not applicable'\n                ? (expertise_not_applicable = level.id)\n                : ''\n            )\n          );\n        }\n      });\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    let index = 0;\n    expertise_levels.map((level, key) => {\n      expertise_levels_legend.push(\n        <li style={{ textAlign: 'center' }}>\n          <span className=\"badge secondary\"> {index} </span>{' '}\n          <span> {level}</span>\n        </li>\n      );\n      index++;\n    });\n\n    if (profile) {\n      if (!mapping) {\n        setMapping(profile.profile_mapping);\n      }\n      console.log(mapping);\n    }\n\n    if (framework) {\n      competencyForm = framework.map(item =>\n        item.domains.map((domain, did) => (\n          <ul>\n            <li className=\"domain_list\">\n              <div className=\"row callout\">\n                <div className=\"column medium-9\">\n                  <h5 className=\"domain_title\"> {domain.title}</h5>\n                </div>\n              </div>\n              <ul>\n                {domain.competencies.map((competency, cid) => (\n                  <li className=\"competency_list\">\n                    <div className=\"row\">\n                      <div className=\"column medium-9\">\n                        <Collapsible\n                          trigger={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-right icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                          triggerWhenOpen={\n                            <div className=\"open-close-title\">\n                              <span className=\"icon icon-common icon-angle-down icon-custom\">\n                                {' '}\n                              </span>\n                              <span>{competency.title}</span>\n                            </div>\n                          }\n                        >\n                          <ul>\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <li className=\"attribute_type\">\n                                  {attribute_type}\n                                  <ul>\n                                    {competency.attributes\n                                      .filter(\n                                        attribute =>\n                                          attribute.type == attribute_type\n                                      )\n                                      .map(attribute => (\n                                        <li className=\"attribute_title\">\n                                          <div className=\"row\">\n                                            <div className=\"column medium-1\">\n                                              <input\n                                                type=\"checkbox\"\n                                                id={attribute.id}\n                                                onChange={e =>\n                                                  handleCheckBox(e)\n                                                }\n                                                defaultChecked={\n                                                  mapping.find(o =>\n                                                    o.attributes.find(\n                                                      a => a == attribute.id\n                                                    )\n                                                  )\n                                                    ? true\n                                                    : false\n                                                }\n                                                disabled={\n                                                  mapping.find(\n                                                    o =>\n                                                      o.competency ==\n                                                      competency.id\n                                                  )\n                                                    ? false\n                                                    : true\n                                                }\n                                                data-competency={competency.id}\n                                              />\n                                            </div>\n                                            <div className=\"column medium-11\">\n                                              <label\n                                                className=\"attribute_label\"\n                                                for={attribute.id}\n                                              >\n                                                {' '}\n                                                {attribute.title}\n                                              </label>\n                                            </div>\n                                          </div>\n                                        </li>\n                                      ))}\n                                  </ul>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </Collapsible>\n                      </div>\n                      <div className=\"column medium-3\">\n                        <select\n                          onChange={e => handleSelect(e)}\n                          defaultValue={\n                            mapping.find(o => o.competency == competency.id)\n                              ? mapping.find(o => o.competency == competency.id)\n                                  .expertise\n                              : expertise_not_applicable\n                          }\n                        >\n                          {expertise_levels.map((key, value) => (\n                            <option\n                              value={value}\n                              data-expertise={value}\n                              data-competency={competency.id}\n                            >\n                              {key}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            </li>\n          </ul>\n        ))\n      );\n    }\n  };\n\n  return (\n    <div>\n      {generateForm()}\n      {profile ? (\n        <div>\n          <div className=\"row\">\n            <h2>\n              Competency mapping: {frameworkFullName} {frameworkVersion} -{' '}\n              {profile.job_title}{' '}\n            </h2>\n\n            <div className=\"column medium-12\">\n              <div className=\"row\">\n                <div className=\"column medium-10\" />\n                <div className=\"column medium-2\">\n                  <Link\n                    to={`/framework/${frameworkName}/${frameworkVersion}/profile/view/${profileId}/alias`}\n                  >\n                    <i class=\"icon icon-common icon-angle-left\" /> Profile\n                    overview\n                  </Link>\n                  <p />\n                </div>\n              </div>\n\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  <img\n                    src={profile.image[0] ? profile.image[0].url : user_icon}\n                    width=\"150px\"\n                  />\n                </div>\n                <div className=\"column medium-9 form_intro\">\n                  <h3 />\n                  <p>\n                    The form below is listing competencies from{' '}\n                    {frameworkFullName} competency framework. A competency is an\n                    observable ability of any professional, integrating multiple\n                    components such as knowledge, skills and behaviours. A\n                    competency profile lists and defines all the competencies\n                    that an individual might need to fulfil a particular role,\n                    or that define specific user groups.\n                  </p>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"column medium-3\">\n                  {' '}\n                  <h5 style={{ marginTop: '25px' }}>\n                    {frameworkFullName} {frameworkVersion} / Competencies\n                  </h5>\n                </div>\n                <div className=\"column medium-9 \">\n                  <ul className=\"legend-inline\" style={{ float: 'right' }}>\n                    {expertise_levels_legend}\n                  </ul>\n                </div>\n              </div>\n              <hr />\n\n              <div className=\"competency_section\">\n                {\n                  <form onSubmit={e => handleSubmit(e)}>\n                    {competencyForm}\n                    <div className=\"submit_fixed\">\n                      <button className=\"button\" type=\"submit\">\n                        Save <i class=\"icon icon-common icon-save\" />\n                      </button>\n                    </div>\n                  </form>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        'Loading'\n      )}\n    </div>\n  );\n};\n\nexport const MapProfile = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profile/map/:id\"\n      component={ProfileMap}\n    />\n  </Switch>\n);\n\nexport default MapProfile;\n","import React, { useState, useEffect } from 'react';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { apiUrl } from '../services/http/http';\nimport { Link, Redirect } from 'react-router-dom';\nimport Collapsible from 'react-collapsible';\n//import summary from './bioexcel_2_profiles_compare_summary.json';\n\n\nexport const ProfilesCompareSummary = props => {\n  const frameworkName = props.location.pathname.split('/')[2];\n  const frameworkVersion = props.location.pathname.split('/')[3];\n  const profileId = props.location.pathname.split('/')[6];\n\n  const [framework, setFramework] = useState();\n  const [frameworkInfo, setFrameworkInfo] = useState();\n  const location = useLocation();\n  const [summary, setSummary] = useState();\n\n  let profileJobTitle = location.state.profileJobTitle;\n  let includeSummary = location.state.includeSummary;\n  var competencyView = '';\n  var attribute_types = [];\n  var frameworkFullName = '';\n  var frameworkLogo = '';\n  var frameworkDesc = '';\n  var user_roles = localStorage.getItem('roles')\n    ? localStorage.getItem('roles')\n    : '';\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetch(`${apiUrl}/api/version_manager?_format=json`)\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFrameworkInfo(findresponse);\n        });\n\n      await fetch(\n        `${apiUrl}/api/${frameworkName}/${frameworkVersion}?_format=json`\n      )\n        .then(Response => Response.json())\n        .then(findresponse => {\n          setFramework(findresponse);\n        });\n\n      await fetch(`${apiUrl}/api/profile_summary/${frameworkName}/${frameworkVersion}?_format=json`)\n      .then(Response => Response.json())\n      .then(findresponse => {\n        setSummary(findresponse);\n      })\n\n    };\n    fetchData();\n  }, [profileId]);\n\n  if(summary){\n    console.log(summary);\n  }\n  \n  const findResources = (competency_id) => {\n    if(summary){\n            let test = summary.map((item) => {\n           if(item.id == competency_id){\n            return  item.resources.map(resource => {\n                  return <li><a href={resource.resourceLink} target=\"_blank\"> {resource.resourceName} </a></li>\n              })\n           }\n      }\n      \n      \n    )\n    return test;\n\n    }\n\n\n  }\n\n\n  const generateSummary = () => {\n    if (frameworkInfo) {\n      frameworkInfo.map(info => {\n        if (info.title.toLowerCase() === frameworkName) {\n          frameworkFullName = info.title;\n          frameworkLogo = info.logo[0].url;\n          frameworkDesc = info.description;\n          info.attribute_types.map(\n            attribute => (attribute_types[attribute.id] = attribute.title)\n          );\n        }\n      });\n    }\n\n    if (framework) {\n      {console.log(includeSummary)}\n      competencyView = framework.map(item =>\n        item.domains.map(domain => (\n          <div>\n            <div className=\"row callout\">\n              <div className=\"column medium-8 \">\n                <h5>{domain.title}</h5>{' '}\n              </div>\n              <div className=\"column medium-4 \">\n                <h5>Learning Resources</h5>\n              </div>\n            </div>\n            {domain.competencies.map(competency => (\n              includeSummary.indexOf(competency.id) != -1 ?\n                  <div>\n       \n                    <div id={competency.id} className=\"row\">\n                      <div className=\"column medium-8\">\n                        <span  className=\"competency_title\">\n                          \n                          <div>\n                            <Collapsible\n                              trigger={\n                                <div className=\"open-close-title\">\n                                  <i className=\"icon icon-common icon-angle-right icon-custom\" />\n                                  {' '}\n                                  {competency.title}\n                                </div>\n                              }\n                              triggerWhenOpen={\n                                <div className=\"open-close-title\">\n                                  <i className=\"icon icon-common icon-angle-down icon-custom\" />\n                                  {' '}\n                                  {competency.title}\n                                </div>\n                              }\n                            >\n                            {attribute_types.map(attribute_type => {\n                              return (\n                                <div\n                                  className=\"accordion-item is-active\"\n                                  data-accordion-item\n                                >\n                                  <div className=\"row attribute_align_type\">\n                                    <div className=\"column medium-8\">\n                                      <strong> {attribute_type} </strong>\n                                    </div>\n                                    <div className=\"column medium-4\" />\n                                  </div>\n                                  {competency.attributes\n                                    .filter(\n                                      attribute => attribute.type == attribute_type\n                                    )\n                                    .map(attribute => {\n                                      return (\n                                        <div className=\"row attribute_align\">\n                                          <div className=\"column medium-8\">\n                                            {attribute.title}\n                                          </div>\n                                        </div>\n                                      );\n                                    })}\n                                </div>\n                              );\n                            })}\n                          </Collapsible>\n                        </div>\n                      </span>\n                      </div>\n                      <div className=\"column medium-4\">\n                        <ul>\n                          {findResources(competency.id)}\n                        </ul>\n                      </div>\n                    </div>\n                    \n                  </div>\n                :\n                ''\n            \n            )\n          \n          )}\n          </div>\n        ))\n      );\n    }\n  };\n\n\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <div>\n      {generateSummary()}\n      <h2>Summary of learning resources</h2>\n      <p className='lead'>\n        Based on the comparison of your profile, the following are the suggested learning resources to help develop your career,\n        if you want to become {profileJobTitle}\n      </p>\n          {competencyView}\n    </div>\n\n  );\n};\n\nexport const SummaryPath = () => (\n  <Switch>\n    <Route\n      exact\n      path=\"/framework/:framework/:version/profiles/compare/guest/summary\"\n      component={ProfilesCompareSummary}\n    />\n  </Switch>\n);\n\nexport default SummaryPath;\n","import HttpService from '../http/http';\r\n\r\nconst http = new HttpService();\r\nconst loginUrl = '/user/login?_format=json';\r\nconst logoutUrl = '/user/logout';\r\n\r\nexport async function login(username, password) {\r\n  const credentials = { name: username, pass: password };\r\n  try {\r\n    const response = await http.post(loginUrl, credentials);\r\n    const { data } = response;\r\n    localStorage.setItem('roles', data.current_user.roles);\r\n    localStorage.setItem('csrf_token', data.csrf_token);\r\n    localStorage.setItem('logout_token', data.logout_token);\r\n    localStorage.setItem('user', data.current_user.name);\r\n    localStorage.setItem('userid', data.current_user.uid);\r\n    console.log(localStorage.getItem('roles'));\r\n    return data;\r\n  } catch (error) {\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('roles');\r\n  localStorage.removeItem('csrf_token');\r\n  localStorage.removeItem('logout_token');\r\n  localStorage.removeItem('userid');\r\n  localStorage.removeItem('user');\r\n  return http.post(logoutUrl);\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Masthead from '../containers/masthead/Masthead';\r\nimport ManageAttributes from './ManageAttributes';\r\nimport ManageCompetencies from './ManageCompetencies';\r\nimport CompetencyDetails from './CompetencyDetails';\r\nimport CompetencyList from './CompetencyList';\r\nimport ResourceEdit from './ResourceEdit';\r\nimport ResourceCreate from './ResourceCreate';\r\nimport ResourceDetails from './ResourceDetails';\r\nimport ResourcesList from './ResourcesList';\r\nimport ResourcesHome from './ResourcesHome';\r\nimport ChangePassword from './ChangePassword';\r\nimport About from '../components/about/About';\r\nimport Frameworks from './Frameworks';\r\nimport ArticleCreate from './ArticleCreate';\r\nimport AttributeMap from './AttributeMap';\r\nimport CompetencySettings from './CompetencySettings';\r\nimport AttributeSettings from './AttributeSettings';\r\nimport AttributeDemap from './AttributeDemap';\r\nimport ProfileCreate from './ProfileCreate';\r\nimport ProfileCreateGuest from './ProfileCreateGuest';\r\nimport ProfileView from './ProfileView';\r\nimport ProfilesCompare from './ProfilesCompare';\r\nimport ProfileMapDownload from './ProfileMapDownload';\r\nimport ProfileViewGuest from './ProfileViewGuest';\r\nimport ProfileMapGuest from './ProfileMapGuest';\r\nimport ProfileEdit from './ProfileEdit';\r\nimport ProfileMap from './ProfileMap';\r\nimport ProfilesCompareSummary from './ProfilesCompareSummary';\r\n\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { login, logout } from '../services/auth/auth';\r\nimport ActiveRequestsService from '../services/active-requests/active-requests';\r\n\r\nconst $ = window.$;\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    isActive: false,\r\n    roles: localStorage.getItem('roles') || '',\r\n    user: localStorage.getItem('user') || ''\r\n  };\r\n  activeRequests = new ActiveRequestsService();\r\n\r\n  componentDidMount() {\r\n    $(document).foundation();\r\n    $(document).foundationExtendEBI();\r\n\r\n    this.setState({ isActive: this.activeRequests.isActive });\r\n    this.subcription = this.activeRequests.addEventListener(\r\n      this.handleActiveRequests\r\n    );\r\n\r\n    window.addEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.subcription) {\r\n      this.activeRequests.removeEventListener(this.subcription);\r\n    }\r\n    window.removeEventListener('storage', this.detectUserChangesFromOtherTabs);\r\n  }\r\n\r\n  handleActiveRequests = hasPendingRequests => {\r\n    this.setState({ isActive: hasPendingRequests });\r\n  };\r\n\r\n  detectUserChangesFromOtherTabs = ({ key, newValue }) => {\r\n    if (key === 'user') {\r\n      if (newValue) {\r\n        this.setState({\r\n          user: localStorage.getItem('user'),\r\n          roles: localStorage.getItem('roles')\r\n        });\r\n      } else {\r\n        this.setState({ user: '', roles: '' });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogin = async (username, password) => {\r\n    try {\r\n      await login(username, password);\r\n      this.setState({\r\n        user: localStorage.getItem('user'),\r\n        roles: localStorage.getItem('roles')\r\n      });\r\n    } catch (error) {\r\n      window.console.error(error);\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            window.alert(error.response.data.message);\r\n            return;\r\n          default:\r\n            window.alert(\r\n              'Sorry, there was an unknown login problem, please try again.'\r\n            );\r\n        }\r\n        window.alert(\r\n          'Sorry, there was an unknown login problem, please try again.'\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.setState({ user: '', roles: '' });\r\n    logout();\r\n  };\r\n\r\n  render() {\r\n    const { isActive, roles, user } = this.state;\r\n    return (\r\n      <>\r\n        <SnackbarProvider\r\n          maxSnack={1}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          preventDuplicate\r\n        >\r\n          <Masthead\r\n            roles={roles}\r\n            user={user}\r\n            isActive={isActive}\r\n            onLogin={this.handleLogin}\r\n            onLogout={this.handleLogout}\r\n          />\r\n\r\n          <section id=\"main-content-area\" className=\"row\" role=\"main\">\r\n            <main className=\"column\">\r\n              <Switch>\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/edit/:nid\"\r\n                  component={ResourceEdit}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resource/create\"\r\n                  component={ResourceCreate}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:cid/attribute/:aid/settings\"\r\n                  component={AttributeSettings}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:cid/manage-attributes\"\r\n                  component={ManageAttributes}\r\n                />\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/manage/competencies/:domainId?\"\r\n                  component={ManageCompetencies}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/competency/details/:cid\"\r\n                  component={CompetencyDetails}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/competency/:id/settings\"\r\n                  component={CompetencySettings}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/create/guest\"\r\n                  component={ProfileCreateGuest}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/create\"\r\n                  component={ProfileCreate}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/view/guest\"\r\n                  component={ProfileViewGuest}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/map/guest\"\r\n                  component={ProfileMapGuest}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/view/:id/:alias\"\r\n                  component={ProfileView}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profiles/compare/guest/summary\"\r\n                  component={ProfilesCompareSummary}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profiles/compare/:profile1/:profile2\"\r\n                  component={ProfilesCompare}\r\n                />\r\n\r\n\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version/profile/map/download\"\r\n                  component={ProfileMapDownload}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/edit/:id\"\r\n                  component={ProfileEdit}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('framework_manager')}\r\n                  path=\"/framework/:framework/:version/profile/map/:id\"\r\n                  component={ProfileMap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/framework/:framework/:version\"\r\n                  component={CompetencyList}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:id/map/:framework\"\r\n                  component={AttributeMap}\r\n                />\r\n\r\n                <ProtectedRoute\r\n                  condition={!!user && roles.includes('content_manager')}\r\n                  path=\"/training-resources/:resource/demap/:attribute\"\r\n                  component={AttributeDemap}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/training-resources/:id\"\r\n                  component={ResourceDetails}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/all-training-resources\"\r\n                  component={ResourcesList}\r\n                />\r\n                <Route\r\n                  path=\"/training-resources-home\"\r\n                  component={ResourcesHome}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/user/change/password\"\r\n                  component={ChangePassword}\r\n                />\r\n\r\n                <Route path=\"/article/create\" component={ArticleCreate} />\r\n\r\n                <Route path=\"/about\" component={About} />\r\n                <Route path=\"/\" component={Frameworks} />\r\n              </Switch>\r\n            </main>\r\n          </section>\r\n        </SnackbarProvider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n\r\nclass ProtectedRoute extends Component {\r\n  render() {\r\n    const { component: Component, condition, ...props } = this.props;\r\n    return (\r\n      <Route\r\n        {...props}\r\n        render={props =>\r\n          condition ? <Component {...props} /> : <Redirect to=\"/\" />\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport Root from './app/containers/Root';\r\nimport Modal from 'react-modal';\r\n\r\nconst root = document.getElementById('root');\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <Root />\r\n  </BrowserRouter>,\r\n  root\r\n);\r\n\r\nModal.setAppElement(root);\r\n"],"sourceRoot":""}